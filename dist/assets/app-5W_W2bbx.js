var Ju=Object.defineProperty;var Yu=(e,t,i)=>t in e?Ju(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var qr=(e,t,i)=>Yu(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=i(s);fetch(s.href,n)}})();const Qn=globalThis||void 0||self;/**
* @vue/shared v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function gn(e,t){const i=new Set(e.split(","));return r=>i.has(r)}const Pe={},ni=[],ft=()=>{},Qu=()=>!1,Mi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),mn=e=>e.startsWith("onUpdate:"),ze=Object.assign,bn=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Zu=Object.prototype.hasOwnProperty,Ie=(e,t)=>Zu.call(e,t),ve=Array.isArray,oi=e=>ji(e)==="[object Map]",Er=e=>ji(e)==="[object Set]",Zn=e=>ji(e)==="[object Date]",Se=e=>typeof e=="function",$e=e=>typeof e=="string",St=e=>typeof e=="symbol",Ue=e=>e!==null&&typeof e=="object",Wa=e=>(Ue(e)||Se(e))&&Se(e.then)&&Se(e.catch),Ka=Object.prototype.toString,ji=e=>Ka.call(e),ef=e=>ji(e).slice(8,-1),Ja=e=>ji(e)==="[object Object]",yn=e=>$e(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ai=gn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Tr=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},tf=/-(\w)/g,pt=Tr(e=>e.replace(tf,(t,i)=>i?i.toUpperCase():"")),rf=/\B([A-Z])/g,Ht=Tr(e=>e.replace(rf,"-$1").toLowerCase()),Sr=Tr(e=>e.charAt(0).toUpperCase()+e.slice(1)),$r=Tr(e=>e?`on${Sr(e)}`:""),tt=(e,t)=>!Object.is(e,t),nr=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},Ya=(e,t,i,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:i})},Ks=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let eo;const Qa=()=>eo||(eo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof Qn<"u"?Qn:{});function _n(e){if(ve(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],s=$e(r)?af(r):_n(r);if(s)for(const n in s)t[n]=s[n]}return t}else if($e(e)||Ue(e))return e}const sf=/;(?![^(]*\))/g,nf=/:([^]+)/,of=/\/\*[^]*?\*\//g;function af(e){const t={};return e.replace(of,"").split(sf).forEach(i=>{if(i){const r=i.split(nf);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function qi(e){let t="";if($e(e))t=e;else if(ve(e))for(let i=0;i<e.length;i++){const r=qi(e[i]);r&&(t+=r+" ")}else if(Ue(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const lf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",uf=gn(lf);function Za(e){return!!e||e===""}function ff(e,t){if(e.length!==t.length)return!1;let i=!0;for(let r=0;i&&r<e.length;r++)i=Ar(e[r],t[r]);return i}function Ar(e,t){if(e===t)return!0;let i=Zn(e),r=Zn(t);if(i||r)return i&&r?e.getTime()===t.getTime():!1;if(i=St(e),r=St(t),i||r)return e===t;if(i=ve(e),r=ve(t),i||r)return i&&r?ff(e,t):!1;if(i=Ue(e),r=Ue(t),i||r){if(!i||!r)return!1;const s=Object.keys(e).length,n=Object.keys(t).length;if(s!==n)return!1;for(const o in e){const a=e.hasOwnProperty(o),u=t.hasOwnProperty(o);if(a&&!u||!a&&u||!Ar(e[o],t[o]))return!1}}return String(e)===String(t)}function el(e,t){return e.findIndex(i=>Ar(i,t))}const tl=e=>!!(e&&e.__v_isRef===!0),De=e=>$e(e)?e:e==null?"":ve(e)||Ue(e)&&(e.toString===Ka||!Se(e.toString))?tl(e)?De(e.value):JSON.stringify(e,il,2):String(e),il=(e,t)=>tl(t)?il(e,t.value):oi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,s],n)=>(i[Gr(r,n)+" =>"]=s,i),{})}:Er(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>Gr(i))}:St(t)?Gr(t):Ue(t)&&!ve(t)&&!Ja(t)?String(t):t,Gr=(e,t="")=>{var i;return St(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ht;class cf{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ht,!t&&ht&&(this.index=(ht.scopes||(ht.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=ht;try{return ht=this,t()}finally{ht=i}}}on(){ht=this}off(){ht=this.parent}stop(t){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function pf(e,t=ht){t&&t.active&&t.effects.push(e)}function hf(){return ht}let Qt;class vn{constructor(t,i,r,s){this.fn=t,this.trigger=i,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,pf(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,zt();for(let t=0;t<this._depsLength;t++){const i=this.deps[t];if(i.computed&&(df(i.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Xt()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=jt,i=Qt;try{return jt=!0,Qt=this,this._runnings++,to(this),this.fn()}finally{io(this),this._runnings--,Qt=i,jt=t}}stop(){this.active&&(to(this),io(this),this.onStop&&this.onStop(),this.active=!1)}}function df(e){return e.value}function to(e){e._trackId++,e._depsLength=0}function io(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)rl(e.deps[t],e);e.deps.length=e._depsLength}}function rl(e,t){const i=e.get(t);i!==void 0&&t._trackId!==i&&(e.delete(t),e.size===0&&e.cleanup())}let jt=!0,Js=0;const sl=[];function zt(){sl.push(jt),jt=!1}function Xt(){const e=sl.pop();jt=e===void 0?!0:e}function xn(){Js++}function En(){for(Js--;!Js&&Ys.length;)Ys.shift()()}function nl(e,t,i){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const r=e.deps[e._depsLength];r!==t?(r&&rl(r,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Ys=[];function ol(e,t,i){xn();for(const r of e.keys()){let s;r._dirtyLevel<t&&(s??(s=e.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=t),r._shouldSchedule&&(s??(s=e.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&Ys.push(r.scheduler)))}En()}const al=(e,t)=>{const i=new Map;return i.cleanup=e,i.computed=t,i},Qs=new WeakMap,Zt=Symbol(""),Zs=Symbol("");function rt(e,t,i){if(jt&&Qt){let r=Qs.get(e);r||Qs.set(e,r=new Map);let s=r.get(i);s||r.set(i,s=al(()=>r.delete(i))),nl(Qt,s)}}function It(e,t,i,r,s,n){const o=Qs.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(i==="length"&&ve(e)){const u=Number(r);o.forEach((f,c)=>{(c==="length"||!St(c)&&c>=u)&&a.push(f)})}else switch(i!==void 0&&a.push(o.get(i)),t){case"add":ve(e)?yn(i)&&a.push(o.get("length")):(a.push(o.get(Zt)),oi(e)&&a.push(o.get(Zs)));break;case"delete":ve(e)||(a.push(o.get(Zt)),oi(e)&&a.push(o.get(Zs)));break;case"set":oi(e)&&a.push(o.get(Zt));break}xn();for(const u of a)u&&ol(u,4);En()}const gf=gn("__proto__,__v_isRef,__isVue"),ll=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(St)),ro=mf();function mf(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...i){const r=Ce(this);for(let n=0,o=this.length;n<o;n++)rt(r,"get",n+"");const s=r[t](...i);return s===-1||s===!1?r[t](...i.map(Ce)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...i){zt(),xn();const r=Ce(this)[t].apply(this,i);return En(),Xt(),r}}),e}function bf(e){St(e)||(e=String(e));const t=Ce(this);return rt(t,"has",e),t.hasOwnProperty(e)}class ul{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,r){const s=this._isReadonly,n=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return n;if(i==="__v_raw")return r===(s?n?Rf:hl:n?pl:cl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=ve(t);if(!s){if(o&&Ie(ro,i))return Reflect.get(ro,i,r);if(i==="hasOwnProperty")return bf}const a=Reflect.get(t,i,r);return(St(i)?ll.has(i):gf(i))||(s||rt(t,"get",i),n)?a:qe(a)?o&&yn(i)?a:a.value:Ue(a)?s?dl(a):_i(a):a}}class fl extends ul{constructor(t=!1){super(!1,t)}set(t,i,r,s){let n=t[i];if(!this._isShallow){const u=ti(n);if(!mi(r)&&!ti(r)&&(n=Ce(n),r=Ce(r)),!ve(t)&&qe(n)&&!qe(r))return u?!1:(n.value=r,!0)}const o=ve(t)&&yn(i)?Number(i)<t.length:Ie(t,i),a=Reflect.set(t,i,r,s);return t===Ce(s)&&(o?tt(r,n)&&It(t,"set",i,r):It(t,"add",i,r)),a}deleteProperty(t,i){const r=Ie(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&r&&It(t,"delete",i,void 0),s}has(t,i){const r=Reflect.has(t,i);return(!St(i)||!ll.has(i))&&rt(t,"has",i),r}ownKeys(t){return rt(t,"iterate",ve(t)?"length":Zt),Reflect.ownKeys(t)}}class yf extends ul{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const _f=new fl,vf=new yf,xf=new fl(!0);const Tn=e=>e,wr=e=>Reflect.getPrototypeOf(e);function Xi(e,t,i=!1,r=!1){e=e.__v_raw;const s=Ce(e),n=Ce(t);i||(tt(t,n)&&rt(s,"get",t),rt(s,"get",n));const{has:o}=wr(s),a=r?Tn:i?wn:Pi;if(o.call(s,t))return a(e.get(t));if(o.call(s,n))return a(e.get(n));e!==s&&e.get(t)}function Wi(e,t=!1){const i=this.__v_raw,r=Ce(i),s=Ce(e);return t||(tt(e,s)&&rt(r,"has",e),rt(r,"has",s)),e===s?i.has(e):i.has(e)||i.has(s)}function Ki(e,t=!1){return e=e.__v_raw,!t&&rt(Ce(e),"iterate",Zt),Reflect.get(e,"size",e)}function so(e,t=!1){!t&&!mi(e)&&!ti(e)&&(e=Ce(e));const i=Ce(this);return wr(i).has.call(i,e)||(i.add(e),It(i,"add",e,e)),this}function no(e,t,i=!1){!i&&!mi(t)&&!ti(t)&&(t=Ce(t));const r=Ce(this),{has:s,get:n}=wr(r);let o=s.call(r,e);o||(e=Ce(e),o=s.call(r,e));const a=n.call(r,e);return r.set(e,t),o?tt(t,a)&&It(r,"set",e,t):It(r,"add",e,t),this}function oo(e){const t=Ce(this),{has:i,get:r}=wr(t);let s=i.call(t,e);s||(e=Ce(e),s=i.call(t,e)),r&&r.call(t,e);const n=t.delete(e);return s&&It(t,"delete",e,void 0),n}function ao(){const e=Ce(this),t=e.size!==0,i=e.clear();return t&&It(e,"clear",void 0,void 0),i}function Ji(e,t){return function(r,s){const n=this,o=n.__v_raw,a=Ce(o),u=t?Tn:e?wn:Pi;return!e&&rt(a,"iterate",Zt),o.forEach((f,c)=>r.call(s,u(f),u(c),n))}}function Yi(e,t,i){return function(...r){const s=this.__v_raw,n=Ce(s),o=oi(n),a=e==="entries"||e===Symbol.iterator&&o,u=e==="keys"&&o,f=s[e](...r),c=i?Tn:t?wn:Pi;return!t&&rt(n,"iterate",u?Zs:Zt),{next(){const{value:h,done:p}=f.next();return p?{value:h,done:p}:{value:a?[c(h[0]),c(h[1])]:c(h),done:p}},[Symbol.iterator](){return this}}}}function Dt(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ef(){const e={get(n){return Xi(this,n)},get size(){return Ki(this)},has:Wi,add:so,set:no,delete:oo,clear:ao,forEach:Ji(!1,!1)},t={get(n){return Xi(this,n,!1,!0)},get size(){return Ki(this)},has:Wi,add(n){return so.call(this,n,!0)},set(n,o){return no.call(this,n,o,!0)},delete:oo,clear:ao,forEach:Ji(!1,!0)},i={get(n){return Xi(this,n,!0)},get size(){return Ki(this,!0)},has(n){return Wi.call(this,n,!0)},add:Dt("add"),set:Dt("set"),delete:Dt("delete"),clear:Dt("clear"),forEach:Ji(!0,!1)},r={get(n){return Xi(this,n,!0,!0)},get size(){return Ki(this,!0)},has(n){return Wi.call(this,n,!0)},add:Dt("add"),set:Dt("set"),delete:Dt("delete"),clear:Dt("clear"),forEach:Ji(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=Yi(n,!1,!1),i[n]=Yi(n,!0,!1),t[n]=Yi(n,!1,!0),r[n]=Yi(n,!0,!0)}),[e,i,t,r]}const[Tf,Sf,Af,wf]=Ef();function Sn(e,t){const i=t?e?wf:Af:e?Sf:Tf;return(r,s,n)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(Ie(i,s)&&s in r?i:r,s,n)}const Of={get:Sn(!1,!1)},Nf={get:Sn(!1,!0)},If={get:Sn(!0,!1)};const cl=new WeakMap,pl=new WeakMap,hl=new WeakMap,Rf=new WeakMap;function Cf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function kf(e){return e.__v_skip||!Object.isExtensible(e)?0:Cf(ef(e))}function _i(e){return ti(e)?e:An(e,!1,_f,Of,cl)}function Df(e){return An(e,!1,xf,Nf,pl)}function dl(e){return An(e,!0,vf,If,hl)}function An(e,t,i,r,s){if(!Ue(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=s.get(e);if(n)return n;const o=kf(e);if(o===0)return e;const a=new Proxy(e,o===2?r:i);return s.set(e,a),a}function li(e){return ti(e)?li(e.__v_raw):!!(e&&e.__v_isReactive)}function ti(e){return!!(e&&e.__v_isReadonly)}function mi(e){return!!(e&&e.__v_isShallow)}function gl(e){return e?!!e.__v_raw:!1}function Ce(e){const t=e&&e.__v_raw;return t?Ce(t):e}function Pf(e){return Object.isExtensible(e)&&Ya(e,"__v_skip",!0),e}const Pi=e=>Ue(e)?_i(e):e,wn=e=>Ue(e)?dl(e):e;class ml{constructor(t,i,r,s){this.getter=t,this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new vn(()=>t(this._value),()=>wi(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const t=Ce(this);return(!t._cacheable||t.effect.dirty)&&tt(t._value,t._value=t.effect.run())&&wi(t,4),On(t),t.effect._dirtyLevel>=2&&wi(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Lf(e,t,i=!1){let r,s;const n=Se(e);return n?(r=e,s=ft):(r=e.get,s=e.set),new ml(r,s,n||!s,i)}function On(e){var t;jt&&Qt&&(e=Ce(e),nl(Qt,(t=e.dep)!=null?t:e.dep=al(()=>e.dep=void 0,e instanceof ml?e:void 0)))}function wi(e,t=4,i,r){e=Ce(e);const s=e.dep;s&&ol(s,t)}function qe(e){return!!(e&&e.__v_isRef===!0)}function qt(e){return Bf(e,!1)}function Bf(e,t){return qe(e)?e:new Ff(e,t)}class Ff{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:Ce(t),this._value=i?t:Pi(t)}get value(){return On(this),this._value}set value(t){const i=this.__v_isShallow||mi(t)||ti(t);t=i?t:Ce(t),tt(t,this._rawValue)&&(this._rawValue,this._rawValue=t,this._value=i?t:Pi(t),wi(this,4))}}function Ae(e){return qe(e)?e.value:e}const Uf={get:(e,t,i)=>Ae(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const s=e[t];return qe(s)&&!qe(i)?(s.value=i,!0):Reflect.set(e,t,i,r)}};function bl(e){return li(e)?e:new Proxy(e,Uf)}class Mf{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:r}=t(()=>On(this),()=>wi(this));this._get=i,this._set=r}get value(){return this._get()}set value(t){this._set(t)}}function jf(e){return new Mf(e)}/**
* @vue/runtime-core v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $t(e,t,i,r){try{return r?e(...r):e()}catch(s){Or(s,t,i)}}function dt(e,t,i,r){if(Se(e)){const s=$t(e,t,i,r);return s&&Wa(s)&&s.catch(n=>{Or(n,t,i)}),s}if(ve(e)){const s=[];for(let n=0;n<e.length;n++)s.push(dt(e[n],t,i,r));return s}}function Or(e,t,i,r=!0){const s=t?t.vnode:null;if(t){let n=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${i}`;for(;n;){const f=n.ec;if(f){for(let c=0;c<f.length;c++)if(f[c](e,o,a)===!1)return}n=n.parent}const u=t.appContext.config.errorHandler;if(u){zt(),$t(u,null,10,[e,o,a]),Xt();return}}qf(e,i,s,r)}function qf(e,t,i,r=!0){console.error(e)}let Li=!1,en=!1;const Ke=[];let vt=0;const ui=[];let Bt=null,Kt=0;const yl=Promise.resolve();let Nn=null;function _l(e){const t=Nn||yl;return e?t.then(this?e.bind(this):e):t}function $f(e){let t=vt+1,i=Ke.length;for(;t<i;){const r=t+i>>>1,s=Ke[r],n=Bi(s);n<e||n===e&&s.pre?t=r+1:i=r}return t}function In(e){(!Ke.length||!Ke.includes(e,Li&&e.allowRecurse?vt+1:vt))&&(e.id==null?Ke.push(e):Ke.splice($f(e.id),0,e),vl())}function vl(){!Li&&!en&&(en=!0,Nn=yl.then(xl))}function Gf(e){const t=Ke.indexOf(e);t>vt&&Ke.splice(t,1)}function Vf(e){ve(e)?ui.push(...e):(!Bt||!Bt.includes(e,e.allowRecurse?Kt+1:Kt))&&ui.push(e),vl()}function lo(e,t,i=Li?vt+1:0){for(;i<Ke.length;i++){const r=Ke[i];if(r&&r.pre){if(e&&r.id!==e.uid)continue;Ke.splice(i,1),i--,r()}}}function hr(e){if(ui.length){const t=[...new Set(ui)].sort((i,r)=>Bi(i)-Bi(r));if(ui.length=0,Bt){Bt.push(...t);return}for(Bt=t,Kt=0;Kt<Bt.length;Kt++){const i=Bt[Kt];i.active!==!1&&i()}Bt=null,Kt=0}}const Bi=e=>e.id==null?1/0:e.id,Hf=(e,t)=>{const i=Bi(e)-Bi(t);if(i===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function xl(e){en=!1,Li=!0,Ke.sort(Hf);try{for(vt=0;vt<Ke.length;vt++){const t=Ke[vt];t&&t.active!==!1&&$t(t,t.i,t.i?15:14)}}finally{vt=0,Ke.length=0,hr(),Li=!1,Nn=null,(Ke.length||ui.length)&&xl()}}let it=null,El=null;function dr(e){const t=it;return it=e,El=e&&e.type.__scopeId||null,t}function zf(e,t=it,i){if(!t||e._n)return e;const r=(...s)=>{r._d&&_o(-1);const n=dr(t);let o;try{o=e(...s)}finally{dr(n),r._d&&_o(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Et(e,t){if(it===null)return e;const i=kr(it),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[n,o,a,u=Pe]=t[s];n&&(Se(n)&&(n={mounted:n,updated:n}),n.deep&&Ut(o),r.push({dir:n,instance:i,value:o,oldValue:void 0,arg:a,modifiers:u}))}return e}function mt(e,t,i,r){const s=e.dirs,n=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];n&&(a.oldValue=n[o].value);let u=a.dir[r];u&&(zt(),dt(u,i,8,[e.el,a,e,t]),Xt())}}function Tl(e,t){e.shapeFlag&6&&e.component?Tl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Xf(e,t){return Se(e)?ze({name:e.name},t,{setup:e}):e}const Oi=e=>!!e.type.__asyncLoader,Sl=e=>e.type.__isKeepAlive;function Wf(e,t){Al(e,"a",t)}function Kf(e,t){Al(e,"da",t)}function Al(e,t,i=He){const r=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Nr(t,r,i),i){let s=i.parent;for(;s&&s.parent;)Sl(s.parent.vnode)&&Jf(r,t,i,s),s=s.parent}}function Jf(e,t,i,r){const s=Nr(t,e,r,!0);wl(()=>{bn(r[t],s)},i)}function Nr(e,t,i=He,r=!1){if(i){const s=i[e]||(i[e]=[]),n=t.__weh||(t.__weh=(...o)=>{zt();const a=$i(i),u=dt(t,i,e,o);return a(),Xt(),u});return r?s.unshift(n):s.push(n),n}}const Rt=e=>(t,i=He)=>{(!Cr||e==="sp")&&Nr(e,(...r)=>t(...r),i)},Yf=Rt("bm"),Ir=Rt("m"),Qf=Rt("bu"),Zf=Rt("u"),ec=Rt("bum"),wl=Rt("um"),tc=Rt("sp"),ic=Rt("rtg"),rc=Rt("rtc");function sc(e,t=He){Nr("ec",e,t)}const nc="components";function oc(e,t){return lc(nc,e,!0,t)||e}const ac=Symbol.for("v-ndc");function lc(e,t,i=!0,r=!1){const s=it||He;if(s){const n=s.type;{const a=rp(n,!1);if(a&&(a===t||a===pt(t)||a===Sr(pt(t))))return n}const o=uo(s[e]||n[e],t)||uo(s.appContext[e],t);return!o&&r?n:o}}function uo(e,t){return e&&(e[t]||e[pt(t)]||e[Sr(pt(t))])}function fo(e,t,i,r){let s;const n=i;if(ve(e)||$e(e)){s=new Array(e.length);for(let o=0,a=e.length;o<a;o++)s[o]=t(e[o],o,void 0,n)}else if(typeof e=="number"){s=new Array(e);for(let o=0;o<e;o++)s[o]=t(o+1,o,void 0,n)}else if(Ue(e))if(e[Symbol.iterator])s=Array.from(e,(o,a)=>t(o,a,void 0,n));else{const o=Object.keys(e);s=new Array(o.length);for(let a=0,u=o.length;a<u;a++){const f=o[a];s[a]=t(e[f],f,a,n)}}else s=[];return s}const tn=e=>e?Kl(e)?kr(e):tn(e.parent):null,Ni=ze(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>tn(e.parent),$root:e=>tn(e.root),$emit:e=>e.emit,$options:e=>Rn(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,In(e.update)}),$nextTick:e=>e.n||(e.n=_l.bind(e.proxy)),$watch:e=>Bc.bind(e)}),Vr=(e,t)=>e!==Pe&&!e.__isScriptSetup&&Ie(e,t),uc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:r,data:s,props:n,accessCache:o,type:a,appContext:u}=e;let f;if(t[0]!=="$"){const T=o[t];if(T!==void 0)switch(T){case 1:return r[t];case 2:return s[t];case 4:return i[t];case 3:return n[t]}else{if(Vr(r,t))return o[t]=1,r[t];if(s!==Pe&&Ie(s,t))return o[t]=2,s[t];if((f=e.propsOptions[0])&&Ie(f,t))return o[t]=3,n[t];if(i!==Pe&&Ie(i,t))return o[t]=4,i[t];rn&&(o[t]=0)}}const c=Ni[t];let h,p;if(c)return t==="$attrs"&&rt(e.attrs,"get",""),c(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(i!==Pe&&Ie(i,t))return o[t]=4,i[t];if(p=u.config.globalProperties,Ie(p,t))return p[t]},set({_:e},t,i){const{data:r,setupState:s,ctx:n}=e;return Vr(s,t)?(s[t]=i,!0):r!==Pe&&Ie(r,t)?(r[t]=i,!0):Ie(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:s,propsOptions:n}},o){let a;return!!i[o]||e!==Pe&&Ie(e,o)||Vr(t,o)||(a=n[0])&&Ie(a,o)||Ie(r,o)||Ie(Ni,o)||Ie(s.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:Ie(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function gr(e){return ve(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}function fc(e,t){return!e||!t?e||t:ve(e)&&ve(t)?e.concat(t):ze({},gr(e),gr(t))}let rn=!0;function cc(e){const t=Rn(e),i=e.proxy,r=e.ctx;rn=!1,t.beforeCreate&&co(t.beforeCreate,e,"bc");const{data:s,computed:n,methods:o,watch:a,provide:u,inject:f,created:c,beforeMount:h,mounted:p,beforeUpdate:T,updated:w,activated:m,deactivated:O,beforeDestroy:d,beforeUnmount:S,destroyed:g,unmounted:b,render:I,renderTracked:N,renderTriggered:q,errorCaptured:A,serverPrefetch:_,expose:B,inheritAttrs:$,components:X,directives:J,filters:Y}=t;if(f&&pc(f,r,null),o)for(const ee in o){const K=o[ee];Se(K)&&(r[ee]=K.bind(i))}if(s){const ee=s.call(i,i);Ue(ee)&&(e.data=_i(ee))}if(rn=!0,n)for(const ee in n){const K=n[ee],pe=Se(K)?K.bind(i,i):Se(K.get)?K.get.bind(i,i):ft,ue=!Se(K)&&Se(K.set)?K.set.bind(i):ft,z=_r({get:pe,set:ue});Object.defineProperty(r,ee,{enumerable:!0,configurable:!0,get:()=>z.value,set:te=>z.value=te})}if(a)for(const ee in a)Ol(a[ee],r,i,ee);if(u){const ee=Se(u)?u.call(i):u;Reflect.ownKeys(ee).forEach(K=>{yc(K,ee[K])})}c&&co(c,e,"c");function re(ee,K){ve(K)?K.forEach(pe=>ee(pe.bind(i))):K&&ee(K.bind(i))}if(re(Yf,h),re(Ir,p),re(Qf,T),re(Zf,w),re(Wf,m),re(Kf,O),re(sc,A),re(rc,N),re(ic,q),re(ec,S),re(wl,b),re(tc,_),ve(B))if(B.length){const ee=e.exposed||(e.exposed={});B.forEach(K=>{Object.defineProperty(ee,K,{get:()=>i[K],set:pe=>i[K]=pe})})}else e.exposed||(e.exposed={});I&&e.render===ft&&(e.render=I),$!=null&&(e.inheritAttrs=$),X&&(e.components=X),J&&(e.directives=J)}function pc(e,t,i=ft){ve(e)&&(e=sn(e));for(const r in e){const s=e[r];let n;Ue(s)?"default"in s?n=or(s.from||r,s.default,!0):n=or(s.from||r):n=or(s),qe(n)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):t[r]=n}}function co(e,t,i){dt(ve(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function Ol(e,t,i,r){const s=r.includes(".")?$l(i,r):()=>i[r];if($e(e)){const n=t[e];Se(n)&&ci(s,n)}else if(Se(e))ci(s,e.bind(i));else if(Ue(e))if(ve(e))e.forEach(n=>Ol(n,t,i,r));else{const n=Se(e.handler)?e.handler.bind(i):t[e.handler];Se(n)&&ci(s,n,e)}}function Rn(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:s,optionsCache:n,config:{optionMergeStrategies:o}}=e.appContext,a=n.get(t);let u;return a?u=a:!s.length&&!i&&!r?u=t:(u={},s.length&&s.forEach(f=>mr(u,f,o,!0)),mr(u,t,o)),Ue(t)&&n.set(t,u),u}function mr(e,t,i,r=!1){const{mixins:s,extends:n}=t;n&&mr(e,n,i,!0),s&&s.forEach(o=>mr(e,o,i,!0));for(const o in t)if(!(r&&o==="expose")){const a=hc[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const hc={data:po,props:ho,emits:ho,methods:Ai,computed:Ai,beforeCreate:Qe,created:Qe,beforeMount:Qe,mounted:Qe,beforeUpdate:Qe,updated:Qe,beforeDestroy:Qe,beforeUnmount:Qe,destroyed:Qe,unmounted:Qe,activated:Qe,deactivated:Qe,errorCaptured:Qe,serverPrefetch:Qe,components:Ai,directives:Ai,watch:gc,provide:po,inject:dc};function po(e,t){return t?e?function(){return ze(Se(e)?e.call(this,this):e,Se(t)?t.call(this,this):t)}:t:e}function dc(e,t){return Ai(sn(e),sn(t))}function sn(e){if(ve(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Qe(e,t){return e?[...new Set([].concat(e,t))]:t}function Ai(e,t){return e?ze(Object.create(null),e,t):t}function ho(e,t){return e?ve(e)&&ve(t)?[...new Set([...e,...t])]:ze(Object.create(null),gr(e),gr(t??{})):t}function gc(e,t){if(!e)return t;if(!t)return e;const i=ze(Object.create(null),e);for(const r in t)i[r]=Qe(e[r],t[r]);return i}function Nl(){return{app:null,config:{isNativeTag:Qu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mc=0;function bc(e,t){return function(r,s=null){Se(r)||(r=ze({},r)),s!=null&&!Ue(s)&&(s=null);const n=Nl(),o=new WeakSet;let a=!1;const u=n.app={_uid:mc++,_component:r,_props:s,_container:null,_context:n,_instance:null,version:Yl,get config(){return n.config},set config(f){},use(f,...c){return o.has(f)||(f&&Se(f.install)?(o.add(f),f.install(u,...c)):Se(f)&&(o.add(f),f(u,...c))),u},mixin(f){return n.mixins.includes(f)||n.mixins.push(f),u},component(f,c){return c?(n.components[f]=c,u):n.components[f]},directive(f,c){return c?(n.directives[f]=c,u):n.directives[f]},mount(f,c,h){if(!a){const p=Me(r,s);return p.appContext=n,h===!0?h="svg":h===!1&&(h=void 0),c&&t?t(p,f):e(p,f,h),a=!0,u._container=f,f.__vue_app__=u,kr(p.component)}},unmount(){a&&(e(null,u._container),delete u._container.__vue_app__)},provide(f,c){return n.provides[f]=c,u},runWithContext(f){const c=fi;fi=u;try{return f()}finally{fi=c}}};return u}}let fi=null;function yc(e,t){if(He){let i=He.provides;const r=He.parent&&He.parent.provides;r===i&&(i=He.provides=Object.create(r)),i[e]=t}}function or(e,t,i=!1){const r=He||it;if(r||fi){const s=fi?fi._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&Se(t)?t.call(r&&r.proxy):t}}const Il={},Rl=()=>Object.create(Il),Cl=e=>Object.getPrototypeOf(e)===Il;function _c(e,t,i,r=!1){const s={},n=Rl();e.propsDefaults=Object.create(null),kl(e,t,s,n);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);i?e.props=r?s:Df(s):e.type.props?e.props=s:e.props=n,e.attrs=n}function vc(e,t,i,r){const{props:s,attrs:n,vnode:{patchFlag:o}}=e,a=Ce(s),[u]=e.propsOptions;let f=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let h=0;h<c.length;h++){let p=c[h];if(Rr(e.emitsOptions,p))continue;const T=t[p];if(u)if(Ie(n,p))T!==n[p]&&(n[p]=T,f=!0);else{const w=pt(p);s[w]=nn(u,a,w,T,e,!1)}else T!==n[p]&&(n[p]=T,f=!0)}}}else{kl(e,t,s,n)&&(f=!0);let c;for(const h in a)(!t||!Ie(t,h)&&((c=Ht(h))===h||!Ie(t,c)))&&(u?i&&(i[h]!==void 0||i[c]!==void 0)&&(s[h]=nn(u,a,h,void 0,e,!0)):delete s[h]);if(n!==a)for(const h in n)(!t||!Ie(t,h))&&(delete n[h],f=!0)}f&&It(e.attrs,"set","")}function kl(e,t,i,r){const[s,n]=e.propsOptions;let o=!1,a;if(t)for(let u in t){if(ai(u))continue;const f=t[u];let c;s&&Ie(s,c=pt(u))?!n||!n.includes(c)?i[c]=f:(a||(a={}))[c]=f:Rr(e.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,o=!0)}if(n){const u=Ce(i),f=a||Pe;for(let c=0;c<n.length;c++){const h=n[c];i[h]=nn(s,u,h,f[h],e,!Ie(f,h))}}return o}function nn(e,t,i,r,s,n){const o=e[i];if(o!=null){const a=Ie(o,"default");if(a&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&Se(u)){const{propsDefaults:f}=s;if(i in f)r=f[i];else{const c=$i(s);r=f[i]=u.call(null,t),c()}}else r=u}o[0]&&(n&&!a?r=!1:o[1]&&(r===""||r===Ht(i))&&(r=!0))}return r}const xc=new WeakMap;function Dl(e,t,i=!1){const r=i?xc:t.propsCache,s=r.get(e);if(s)return s;const n=e.props,o={},a=[];let u=!1;if(!Se(e)){const c=h=>{u=!0;const[p,T]=Dl(h,t,!0);ze(o,p),T&&a.push(...T)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!n&&!u)return Ue(e)&&r.set(e,ni),ni;if(ve(n))for(let c=0;c<n.length;c++){const h=pt(n[c]);go(h)&&(o[h]=Pe)}else if(n)for(const c in n){const h=pt(c);if(go(h)){const p=n[c],T=o[h]=ve(p)||Se(p)?{type:p}:ze({},p),w=T.type;let m=!1,O=!0;if(ve(w))for(let d=0;d<w.length;++d){const S=w[d],g=Se(S)&&S.name;if(g==="Boolean"){m=!0;break}else g==="String"&&(O=!1)}else m=Se(w)&&w.name==="Boolean";T[0]=m,T[1]=O,(m||Ie(T,"default"))&&a.push(h)}}const f=[o,a];return Ue(e)&&r.set(e,f),f}function go(e){return e[0]!=="$"&&!ai(e)}const Pl=e=>e[0]==="_"||e==="$stable",Cn=e=>ve(e)?e.map(ut):[ut(e)],Ec=(e,t,i)=>{if(t._n)return t;const r=zf((...s)=>Cn(t(...s)),i);return r._c=!1,r},Ll=(e,t,i)=>{const r=e._ctx;for(const s in e){if(Pl(s))continue;const n=e[s];if(Se(n))t[s]=Ec(s,n,r);else if(n!=null){const o=Cn(n);t[s]=()=>o}}},Bl=(e,t)=>{const i=Cn(t);e.slots.default=()=>i},Fl=(e,t,i)=>{for(const r in t)(i||r!=="_")&&(e[r]=t[r])},Tc=(e,t,i)=>{const r=e.slots=Rl();if(e.vnode.shapeFlag&32){const s=t._;s?(Fl(r,t,i),i&&Ya(r,"_",s,!0)):Ll(t,r)}else t&&Bl(e,t)},Sc=(e,t,i)=>{const{vnode:r,slots:s}=e;let n=!0,o=Pe;if(r.shapeFlag&32){const a=t._;a?i&&a===1?n=!1:Fl(s,t,i):(n=!t.$stable,Ll(t,s)),o=t}else t&&(Bl(e,t),o={default:1});if(n)for(const a in s)!Pl(a)&&o[a]==null&&delete s[a]};function br(e,t,i,r,s=!1){if(ve(e)){e.forEach((p,T)=>br(p,t&&(ve(t)?t[T]:t),i,r,s));return}if(Oi(r)&&!s)return;const n=r.shapeFlag&4?kr(r.component):r.el,o=s?null:n,{i:a,r:u}=e,f=t&&t.r,c=a.refs===Pe?a.refs={}:a.refs,h=a.setupState;if(f!=null&&f!==u&&($e(f)?(c[f]=null,Ie(h,f)&&(h[f]=null)):qe(f)&&(f.value=null)),Se(u))$t(u,a,12,[o,c]);else{const p=$e(u),T=qe(u);if(p||T){const w=()=>{if(e.f){const m=p?Ie(h,u)?h[u]:c[u]:u.value;s?ve(m)&&bn(m,n):ve(m)?m.includes(n)||m.push(n):p?(c[u]=[n],Ie(h,u)&&(h[u]=c[u])):(u.value=[n],e.k&&(c[e.k]=u.value))}else p?(c[u]=o,Ie(h,u)&&(h[u]=o)):T&&(u.value=o,e.k&&(c[e.k]=o))};o?(w.id=-1,et(w,i)):w()}}}const Ac=Symbol("_vte"),wc=e=>e.__isTeleport;let mo=!1;const ri=()=>{mo||(console.error("Hydration completed but contains mismatches."),mo=!0)},Oc=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",Nc=e=>e.namespaceURI.includes("MathML"),Qi=e=>{if(Oc(e))return"svg";if(Nc(e))return"mathml"},Zi=e=>e.nodeType===8;function Ic(e){const{mt:t,p:i,o:{patchProp:r,createText:s,nextSibling:n,parentNode:o,remove:a,insert:u,createComment:f}}=e,c=(g,b)=>{if(!b.hasChildNodes()){i(null,g,b),hr(),b._vnode=g;return}h(b.firstChild,g,null,null,null),hr(),b._vnode=g},h=(g,b,I,N,q,A=!1)=>{A=A||!!b.dynamicChildren;const _=Zi(g)&&g.data==="[",B=()=>m(g,b,I,N,q,_),{type:$,ref:X,shapeFlag:J,patchFlag:Y}=b;let ne=g.nodeType;b.el=g,Y===-2&&(A=!1,b.dynamicChildren=null);let re=null;switch($){case ei:ne!==3?b.children===""?(u(b.el=s(""),o(g),g),re=g):re=B():(g.data!==b.children&&(ri(),g.data=b.children),re=n(g));break;case Gt:S(g)?(re=n(g),d(b.el=g.content.firstChild,g,I)):ne!==8||_?re=B():re=n(g);break;case ar:if(_&&(g=n(g),ne=g.nodeType),ne===1||ne===3){re=g;const ee=!b.children.length;for(let K=0;K<b.staticCount;K++)ee&&(b.children+=re.nodeType===1?re.outerHTML:re.data),K===b.staticCount-1&&(b.anchor=re),re=n(re);return _?n(re):re}else B();break;case We:_?re=w(g,b,I,N,q,A):re=B();break;default:if(J&1)(ne!==1||b.type.toLowerCase()!==g.tagName.toLowerCase())&&!S(g)?re=B():re=p(g,b,I,N,q,A);else if(J&6){b.slotScopeIds=q;const ee=o(g);if(_?re=O(g):Zi(g)&&g.data==="teleport start"?re=O(g,g.data,"teleport end"):re=n(g),t(b,ee,null,I,N,Qi(ee),A),Oi(b)){let K;_?(K=Me(We),K.anchor=re?re.previousSibling:ee.lastChild):K=g.nodeType===3?Wl(""):Me("div"),K.el=g,b.component.subTree=K}}else J&64?ne!==8?re=B():re=b.type.hydrate(g,b,I,N,q,A,e,T):J&128&&(re=b.type.hydrate(g,b,I,N,Qi(o(g)),q,A,e,h))}return X!=null&&br(X,null,N,b),re},p=(g,b,I,N,q,A)=>{A=A||!!b.dynamicChildren;const{type:_,props:B,patchFlag:$,shapeFlag:X,dirs:J,transition:Y}=b,ne=_==="input"||_==="option";if(ne||$!==-1){J&&mt(b,null,I,"created");let re=!1;if(S(g)){re=Ml(N,Y)&&I&&I.vnode.props&&I.vnode.props.appear;const K=g.content.firstChild;re&&Y.beforeEnter(K),d(K,g,I),b.el=g=K}if(X&16&&!(B&&(B.innerHTML||B.textContent))){let K=T(g.firstChild,b,g,I,N,q,A);for(;K;){ri();const pe=K;K=K.nextSibling,a(pe)}}else X&8&&g.textContent!==b.children&&(ri(),g.textContent=b.children);if(B){if(ne||!A||$&48){const K=g.tagName.includes("-");for(const pe in B)(ne&&(pe.endsWith("value")||pe==="indeterminate")||Mi(pe)&&!ai(pe)||pe[0]==="."||K)&&r(g,pe,null,B[pe],void 0,I)}else if(B.onClick)r(g,"onClick",null,B.onClick,void 0,I);else if($&4&&li(B.style))for(const K in B.style)B.style[K]}let ee;(ee=B&&B.onVnodeBeforeMount)&&at(ee,I,b),J&&mt(b,null,I,"beforeMount"),((ee=B&&B.onVnodeMounted)||J||re)&&Hl(()=>{ee&&at(ee,I,b),re&&Y.enter(g),J&&mt(b,null,I,"mounted")},N)}return g.nextSibling},T=(g,b,I,N,q,A,_)=>{_=_||!!b.dynamicChildren;const B=b.children,$=B.length;for(let X=0;X<$;X++){const J=_?B[X]:B[X]=ut(B[X]),Y=J.type===ei;if(g){if(Y&&!_){let ne=B[X+1];ne&&(ne=ut(ne)).type===ei&&(u(s(g.data.slice(J.children.length)),I,n(g)),g.data=J.children)}g=h(g,J,N,q,A,_)}else Y&&!J.children?u(J.el=s(""),I):(ri(),i(null,J,I,null,N,q,Qi(I),A))}return g},w=(g,b,I,N,q,A)=>{const{slotScopeIds:_}=b;_&&(q=q?q.concat(_):_);const B=o(g),$=T(n(g),b,B,I,N,q,A);return $&&Zi($)&&$.data==="]"?n(b.anchor=$):(ri(),u(b.anchor=f("]"),B,$),$)},m=(g,b,I,N,q,A)=>{if(ri(),b.el=null,A){const $=O(g);for(;;){const X=n(g);if(X&&X!==$)a(X);else break}}const _=n(g),B=o(g);return a(g),i(null,b,B,_,I,N,Qi(B),q),_},O=(g,b="[",I="]")=>{let N=0;for(;g;)if(g=n(g),g&&Zi(g)&&(g.data===b&&N++,g.data===I)){if(N===0)return n(g);N--}return g},d=(g,b,I)=>{const N=b.parentNode;N&&N.replaceChild(g,b);let q=I;for(;q;)q.vnode.el===b&&(q.vnode.el=q.subTree.el=g),q=q.parent},S=g=>g.nodeType===1&&g.tagName.toLowerCase()==="template";return[c,h]}const et=Hl;function Rc(e){return Ul(e)}function Cc(e){return Ul(e,Ic)}function Ul(e,t){const i=Qa();i.__VUE__=!0;const{insert:r,remove:s,patchProp:n,createElement:o,createText:a,createComment:u,setText:f,setElementText:c,parentNode:h,nextSibling:p,setScopeId:T=ft,insertStaticContent:w}=e,m=(k,P,G,Q=null,ie=null,le=null,H=void 0,he=null,ce=!!P.dynamicChildren)=>{if(k===P)return;k&&!Si(k,P)&&(Q=x(k),te(k,ie,le,!0),k=null),P.patchFlag===-2&&(ce=!1,P.dynamicChildren=null);const{type:fe,ref:de,shapeFlag:be}=P;switch(fe){case ei:O(k,P,G,Q);break;case Gt:d(k,P,G,Q);break;case ar:k==null&&S(P,G,Q,H);break;case We:X(k,P,G,Q,ie,le,H,he,ce);break;default:be&1?I(k,P,G,Q,ie,le,H,he,ce):be&6?J(k,P,G,Q,ie,le,H,he,ce):(be&64||be&128)&&fe.process(k,P,G,Q,ie,le,H,he,ce,L)}de!=null&&ie&&br(de,k&&k.ref,le,P||k,!P)},O=(k,P,G,Q)=>{if(k==null)r(P.el=a(P.children),G,Q);else{const ie=P.el=k.el;P.children!==k.children&&f(ie,P.children)}},d=(k,P,G,Q)=>{k==null?r(P.el=u(P.children||""),G,Q):P.el=k.el},S=(k,P,G,Q)=>{[k.el,k.anchor]=w(k.children,P,G,Q,k.el,k.anchor)},g=({el:k,anchor:P},G,Q)=>{let ie;for(;k&&k!==P;)ie=p(k),r(k,G,Q),k=ie;r(P,G,Q)},b=({el:k,anchor:P})=>{let G;for(;k&&k!==P;)G=p(k),s(k),k=G;s(P)},I=(k,P,G,Q,ie,le,H,he,ce)=>{P.type==="svg"?H="svg":P.type==="math"&&(H="mathml"),k==null?N(P,G,Q,ie,le,H,he,ce):_(k,P,ie,le,H,he,ce)},N=(k,P,G,Q,ie,le,H,he)=>{let ce,fe;const{props:de,shapeFlag:be,transition:ge,dirs:ye}=k;if(ce=k.el=o(k.type,le,de&&de.is,de),be&8?c(ce,k.children):be&16&&A(k.children,ce,null,Q,ie,Hr(k,le),H,he),ye&&mt(k,null,Q,"created"),q(ce,k,k.scopeId,H,Q),de){for(const Te in de)Te!=="value"&&!ai(Te)&&n(ce,Te,null,de[Te],le,Q);"value"in de&&n(ce,"value",null,de.value,le),(fe=de.onVnodeBeforeMount)&&at(fe,Q,k)}ye&&mt(k,null,Q,"beforeMount");const xe=Ml(ie,ge);xe&&ge.beforeEnter(ce),r(ce,P,G),((fe=de&&de.onVnodeMounted)||xe||ye)&&et(()=>{fe&&at(fe,Q,k),xe&&ge.enter(ce),ye&&mt(k,null,Q,"mounted")},ie)},q=(k,P,G,Q,ie)=>{if(G&&T(k,G),Q)for(let le=0;le<Q.length;le++)T(k,Q[le]);if(ie){let le=ie.subTree;if(P===le){const H=ie.vnode;q(k,H,H.scopeId,H.slotScopeIds,ie.parent)}}},A=(k,P,G,Q,ie,le,H,he,ce=0)=>{for(let fe=ce;fe<k.length;fe++){const de=k[fe]=he?Ft(k[fe]):ut(k[fe]);m(null,de,P,G,Q,ie,le,H,he)}},_=(k,P,G,Q,ie,le,H)=>{const he=P.el=k.el;let{patchFlag:ce,dynamicChildren:fe,dirs:de}=P;ce|=k.patchFlag&16;const be=k.props||Pe,ge=P.props||Pe;let ye;if(G&&Wt(G,!1),(ye=ge.onVnodeBeforeUpdate)&&at(ye,G,P,k),de&&mt(P,k,G,"beforeUpdate"),G&&Wt(G,!0),(be.innerHTML&&ge.innerHTML==null||be.textContent&&ge.textContent==null)&&c(he,""),fe?B(k.dynamicChildren,fe,he,G,Q,Hr(P,ie),le):H||K(k,P,he,null,G,Q,Hr(P,ie),le,!1),ce>0){if(ce&16)$(he,be,ge,G,ie);else if(ce&2&&be.class!==ge.class&&n(he,"class",null,ge.class,ie),ce&4&&n(he,"style",be.style,ge.style,ie),ce&8){const xe=P.dynamicProps;for(let Te=0;Te<xe.length;Te++){const Oe=xe[Te],C=be[Oe],y=ge[Oe];(y!==C||Oe==="value")&&n(he,Oe,C,y,ie,G)}}ce&1&&k.children!==P.children&&c(he,P.children)}else!H&&fe==null&&$(he,be,ge,G,ie);((ye=ge.onVnodeUpdated)||de)&&et(()=>{ye&&at(ye,G,P,k),de&&mt(P,k,G,"updated")},Q)},B=(k,P,G,Q,ie,le,H)=>{for(let he=0;he<P.length;he++){const ce=k[he],fe=P[he],de=ce.el&&(ce.type===We||!Si(ce,fe)||ce.shapeFlag&70)?h(ce.el):G;m(ce,fe,de,null,Q,ie,le,H,!0)}},$=(k,P,G,Q,ie)=>{if(P!==G){if(P!==Pe)for(const le in P)!ai(le)&&!(le in G)&&n(k,le,P[le],null,ie,Q);for(const le in G){if(ai(le))continue;const H=G[le],he=P[le];H!==he&&le!=="value"&&n(k,le,he,H,ie,Q)}"value"in G&&n(k,"value",P.value,G.value,ie)}},X=(k,P,G,Q,ie,le,H,he,ce)=>{const fe=P.el=k?k.el:a(""),de=P.anchor=k?k.anchor:a("");let{patchFlag:be,dynamicChildren:ge,slotScopeIds:ye}=P;ye&&(he=he?he.concat(ye):ye),k==null?(r(fe,G,Q),r(de,G,Q),A(P.children||[],G,de,ie,le,H,he,ce)):be>0&&be&64&&ge&&k.dynamicChildren?(B(k.dynamicChildren,ge,G,ie,le,H,he),(P.key!=null||ie&&P===ie.subTree)&&jl(k,P,!0)):K(k,P,G,de,ie,le,H,he,ce)},J=(k,P,G,Q,ie,le,H,he,ce)=>{P.slotScopeIds=he,k==null?P.shapeFlag&512?ie.ctx.activate(P,G,Q,H,ce):Y(P,G,Q,ie,le,H,ce):ne(k,P,ce)},Y=(k,P,G,Q,ie,le,H)=>{const he=k.component=Yc(k,Q,ie);if(Sl(k)&&(he.ctx.renderer=L),Zc(he,!1,H),he.asyncDep){if(ie&&ie.registerDep(he,re,H),!k.el){const ce=he.subTree=Me(Gt);d(null,ce,P,G)}}else re(he,k,P,G,ie,le,H)},ne=(k,P,G)=>{const Q=P.component=k.component;if(jc(k,P,G))if(Q.asyncDep&&!Q.asyncResolved){ee(Q,P,G);return}else Q.next=P,Gf(Q.update),Q.effect.dirty=!0,Q.update();else P.el=k.el,Q.vnode=P},re=(k,P,G,Q,ie,le,H)=>{const he=()=>{if(k.isMounted){let{next:de,bu:be,u:ge,parent:ye,vnode:xe}=k;{const E=ql(k);if(E){de&&(de.el=xe.el,ee(k,de,H)),E.asyncDep.then(()=>{k.isUnmounted||he()});return}}let Te=de,Oe;Wt(k,!1),de?(de.el=xe.el,ee(k,de,H)):de=xe,be&&nr(be),(Oe=de.props&&de.props.onVnodeBeforeUpdate)&&at(Oe,ye,de,xe),Wt(k,!0);const C=zr(k),y=k.subTree;k.subTree=C,m(y,C,h(y.el),x(y),k,ie,le),de.el=C.el,Te===null&&qc(k,C.el),ge&&et(ge,ie),(Oe=de.props&&de.props.onVnodeUpdated)&&et(()=>at(Oe,ye,de,xe),ie)}else{let de;const{el:be,props:ge}=P,{bm:ye,m:xe,parent:Te}=k,Oe=Oi(P);if(Wt(k,!1),ye&&nr(ye),!Oe&&(de=ge&&ge.onVnodeBeforeMount)&&at(de,Te,P),Wt(k,!0),be&&D){const C=()=>{k.subTree=zr(k),D(be,k.subTree,k,ie,null)};Oe?P.type.__asyncLoader().then(()=>!k.isUnmounted&&C()):C()}else{const C=k.subTree=zr(k);m(null,C,G,Q,k,ie,le),P.el=C.el}if(xe&&et(xe,ie),!Oe&&(de=ge&&ge.onVnodeMounted)){const C=P;et(()=>at(de,Te,C),ie)}(P.shapeFlag&256||Te&&Oi(Te.vnode)&&Te.vnode.shapeFlag&256)&&k.a&&et(k.a,ie),k.isMounted=!0,P=G=Q=null}},ce=k.effect=new vn(he,ft,()=>In(fe),k.scope),fe=k.update=()=>{ce.dirty&&ce.run()};fe.i=k,fe.id=k.uid,Wt(k,!0),fe()},ee=(k,P,G)=>{P.component=k;const Q=k.vnode.props;k.vnode=P,k.next=null,vc(k,P.props,Q,G),Sc(k,P.children,G),zt(),lo(k),Xt()},K=(k,P,G,Q,ie,le,H,he,ce=!1)=>{const fe=k&&k.children,de=k?k.shapeFlag:0,be=P.children,{patchFlag:ge,shapeFlag:ye}=P;if(ge>0){if(ge&128){ue(fe,be,G,Q,ie,le,H,he,ce);return}else if(ge&256){pe(fe,be,G,Q,ie,le,H,he,ce);return}}ye&8?(de&16&&M(fe,ie,le),be!==fe&&c(G,be)):de&16?ye&16?ue(fe,be,G,Q,ie,le,H,he,ce):M(fe,ie,le,!0):(de&8&&c(G,""),ye&16&&A(be,G,Q,ie,le,H,he,ce))},pe=(k,P,G,Q,ie,le,H,he,ce)=>{k=k||ni,P=P||ni;const fe=k.length,de=P.length,be=Math.min(fe,de);let ge;for(ge=0;ge<be;ge++){const ye=P[ge]=ce?Ft(P[ge]):ut(P[ge]);m(k[ge],ye,G,null,ie,le,H,he,ce)}fe>de?M(k,ie,le,!0,!1,be):A(P,G,Q,ie,le,H,he,ce,be)},ue=(k,P,G,Q,ie,le,H,he,ce)=>{let fe=0;const de=P.length;let be=k.length-1,ge=de-1;for(;fe<=be&&fe<=ge;){const ye=k[fe],xe=P[fe]=ce?Ft(P[fe]):ut(P[fe]);if(Si(ye,xe))m(ye,xe,G,null,ie,le,H,he,ce);else break;fe++}for(;fe<=be&&fe<=ge;){const ye=k[be],xe=P[ge]=ce?Ft(P[ge]):ut(P[ge]);if(Si(ye,xe))m(ye,xe,G,null,ie,le,H,he,ce);else break;be--,ge--}if(fe>be){if(fe<=ge){const ye=ge+1,xe=ye<de?P[ye].el:Q;for(;fe<=ge;)m(null,P[fe]=ce?Ft(P[fe]):ut(P[fe]),G,xe,ie,le,H,he,ce),fe++}}else if(fe>ge)for(;fe<=be;)te(k[fe],ie,le,!0),fe++;else{const ye=fe,xe=fe,Te=new Map;for(fe=xe;fe<=ge;fe++){const ae=P[fe]=ce?Ft(P[fe]):ut(P[fe]);ae.key!=null&&Te.set(ae.key,fe)}let Oe,C=0;const y=ge-xe+1;let E=!1,U=0;const W=new Array(y);for(fe=0;fe<y;fe++)W[fe]=0;for(fe=ye;fe<=be;fe++){const ae=k[fe];if(C>=y){te(ae,ie,le,!0);continue}let _e;if(ae.key!=null)_e=Te.get(ae.key);else for(Oe=xe;Oe<=ge;Oe++)if(W[Oe-xe]===0&&Si(ae,P[Oe])){_e=Oe;break}_e===void 0?te(ae,ie,le,!0):(W[_e-xe]=fe+1,_e>=U?U=_e:E=!0,m(ae,P[_e],G,null,ie,le,H,he,ce),C++)}const se=E?kc(W):ni;for(Oe=se.length-1,fe=y-1;fe>=0;fe--){const ae=xe+fe,_e=P[ae],Le=ae+1<de?P[ae+1].el:Q;W[fe]===0?m(null,_e,G,Le,ie,le,H,he,ce):E&&(Oe<0||fe!==se[Oe]?z(_e,G,Le,2):Oe--)}}},z=(k,P,G,Q,ie=null)=>{const{el:le,type:H,transition:he,children:ce,shapeFlag:fe}=k;if(fe&6){z(k.component.subTree,P,G,Q);return}if(fe&128){k.suspense.move(P,G,Q);return}if(fe&64){H.move(k,P,G,L);return}if(H===We){r(le,P,G);for(let be=0;be<ce.length;be++)z(ce[be],P,G,Q);r(k.anchor,P,G);return}if(H===ar){g(k,P,G);return}if(Q!==2&&fe&1&&he)if(Q===0)he.beforeEnter(le),r(le,P,G),et(()=>he.enter(le),ie);else{const{leave:be,delayLeave:ge,afterLeave:ye}=he,xe=()=>r(le,P,G),Te=()=>{be(le,()=>{xe(),ye&&ye()})};ge?ge(le,xe,Te):Te()}else r(le,P,G)},te=(k,P,G,Q=!1,ie=!1)=>{const{type:le,props:H,ref:he,children:ce,dynamicChildren:fe,shapeFlag:de,patchFlag:be,dirs:ge,cacheIndex:ye}=k;if(be===-2&&(ie=!1),he!=null&&br(he,null,G,k,!0),ye!=null&&(P.renderCache[ye]=void 0),de&256){P.ctx.deactivate(k);return}const xe=de&1&&ge,Te=!Oi(k);let Oe;if(Te&&(Oe=H&&H.onVnodeBeforeUnmount)&&at(Oe,P,k),de&6)Z(k.component,G,Q);else{if(de&128){k.suspense.unmount(G,Q);return}xe&&mt(k,null,P,"beforeUnmount"),de&64?k.type.remove(k,P,G,L,Q):fe&&!fe.hasOnce&&(le!==We||be>0&&be&64)?M(fe,P,G,!1,!0):(le===We&&be&384||!ie&&de&16)&&M(ce,P,G),Q&&F(k)}(Te&&(Oe=H&&H.onVnodeUnmounted)||xe)&&et(()=>{Oe&&at(Oe,P,k),xe&&mt(k,null,P,"unmounted")},G)},F=k=>{const{type:P,el:G,anchor:Q,transition:ie}=k;if(P===We){V(G,Q);return}if(P===ar){b(k);return}const le=()=>{s(G),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(k.shapeFlag&1&&ie&&!ie.persisted){const{leave:H,delayLeave:he}=ie,ce=()=>H(G,le);he?he(k.el,le,ce):ce()}else le()},V=(k,P)=>{let G;for(;k!==P;)G=p(k),s(k),k=G;s(P)},Z=(k,P,G)=>{const{bum:Q,scope:ie,update:le,subTree:H,um:he,m:ce,a:fe}=k;bo(ce),bo(fe),Q&&nr(Q),ie.stop(),le&&(le.active=!1,te(H,k,P,G)),he&&et(he,P),et(()=>{k.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&k.asyncDep&&!k.asyncResolved&&k.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},M=(k,P,G,Q=!1,ie=!1,le=0)=>{for(let H=le;H<k.length;H++)te(k[H],P,G,Q,ie)},x=k=>{if(k.shapeFlag&6)return x(k.component.subTree);if(k.shapeFlag&128)return k.suspense.next();const P=p(k.anchor||k.el),G=P&&P[Ac];return G?p(G):P};let v=!1;const j=(k,P,G)=>{k==null?P._vnode&&te(P._vnode,null,null,!0):m(P._vnode||null,k,P,null,null,null,G),P._vnode=k,v||(v=!0,lo(),hr(),v=!1)},L={p:m,um:te,m:z,r:F,mt:Y,mc:A,pc:K,pbc:B,n:x,o:e};let R,D;return t&&([R,D]=t(L)),{render:j,hydrate:R,createApp:bc(j,R)}}function Hr({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function Wt({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function Ml(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function jl(e,t,i=!1){const r=e.children,s=t.children;if(ve(r)&&ve(s))for(let n=0;n<r.length;n++){const o=r[n];let a=s[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[n]=Ft(s[n]),a.el=o.el),!i&&a.patchFlag!==-2&&jl(o,a)),a.type===ei&&(a.el=o.el)}}function kc(e){const t=e.slice(),i=[0];let r,s,n,o,a;const u=e.length;for(r=0;r<u;r++){const f=e[r];if(f!==0){if(s=i[i.length-1],e[s]<f){t[r]=s,i.push(r);continue}for(n=0,o=i.length-1;n<o;)a=n+o>>1,e[i[a]]<f?n=a+1:o=a;f<e[i[n]]&&(n>0&&(t[r]=i[n-1]),i[n]=r)}}for(n=i.length,o=i[n-1];n-- >0;)i[n]=o,o=t[o];return i}function ql(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ql(t)}function bo(e){if(e)for(let t=0;t<e.length;t++)e[t].active=!1}const Dc=Symbol.for("v-scx"),Pc=()=>or(Dc);function Lc(e,t){return kn(e,null,{flush:"sync"})}const er={};function ci(e,t,i){return kn(e,t,i)}function kn(e,t,{immediate:i,deep:r,flush:s,once:n,onTrack:o,onTrigger:a}=Pe){if(t&&n){const N=t;t=(...q)=>{N(...q),I()}}const u=He,f=N=>r===!0?N:Ut(N,r===!1?1:void 0);let c,h=!1,p=!1;if(qe(e)?(c=()=>e.value,h=mi(e)):li(e)?(c=()=>f(e),h=!0):ve(e)?(p=!0,h=e.some(N=>li(N)||mi(N)),c=()=>e.map(N=>{if(qe(N))return N.value;if(li(N))return f(N);if(Se(N))return $t(N,u,2)})):Se(e)?t?c=()=>$t(e,u,2):c=()=>(T&&T(),dt(e,u,3,[w])):c=ft,t&&r){const N=c;c=()=>Ut(N())}let T,w=N=>{T=g.onStop=()=>{$t(N,u,4),T=g.onStop=void 0}},m;if(Cr)if(w=ft,t?i&&dt(t,u,3,[c(),p?[]:void 0,w]):c(),s==="sync"){const N=Pc();m=N.__watcherHandles||(N.__watcherHandles=[])}else return ft;let O=p?new Array(e.length).fill(er):er;const d=()=>{if(!(!g.active||!g.dirty))if(t){const N=g.run();(r||h||(p?N.some((q,A)=>tt(q,O[A])):tt(N,O)))&&(T&&T(),dt(t,u,3,[N,O===er?void 0:p&&O[0]===er?[]:O,w]),O=N)}else g.run()};d.allowRecurse=!!t;let S;s==="sync"?S=d:s==="post"?S=()=>et(d,u&&u.suspense):(d.pre=!0,u&&(d.id=u.uid),S=()=>In(d));const g=new vn(c,ft,S),b=hf(),I=()=>{g.stop(),b&&bn(b.effects,g)};return t?i?d():O=g.run():s==="post"?et(g.run.bind(g),u&&u.suspense):g.run(),m&&m.push(I),I}function Bc(e,t,i){const r=this.proxy,s=$e(e)?e.includes(".")?$l(r,e):()=>r[e]:e.bind(r,r);let n;Se(t)?n=t:(n=t.handler,i=t);const o=$i(this),a=kn(s,n.bind(r),i);return o(),a}function $l(e,t){const i=t.split(".");return()=>{let r=e;for(let s=0;s<i.length&&r;s++)r=r[i[s]];return r}}function Ut(e,t=1/0,i){if(t<=0||!Ue(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,qe(e))Ut(e.value,t,i);else if(ve(e))for(let r=0;r<e.length;r++)Ut(e[r],t,i);else if(Er(e)||oi(e))e.forEach(r=>{Ut(r,t,i)});else if(Ja(e)){for(const r in e)Ut(e[r],t,i);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Ut(e[r],t,i)}return e}function Dn(e,t,i=Pe){const r=Qc(),s=pt(t),n=Ht(t),o=Gl(e,t),a=jf((u,f)=>{let c,h=Pe,p;return Lc(()=>{const T=e[t];tt(c,T)&&(c=T,f())}),{get(){return u(),i.get?i.get(c):c},set(T){const w=i.set?i.set(T):T;if(!tt(w,c)&&!(h!==Pe&&tt(T,h)))return;const m=r.vnode.props;m&&(t in m||s in m||n in m)&&(`onUpdate:${t}`in m||`onUpdate:${s}`in m||`onUpdate:${n}`in m)||(c=T,f()),r.emit(`update:${t}`,w),tt(T,w)&&tt(T,h)&&!tt(w,p)&&f(),h=T,p=w}}});return a[Symbol.iterator]=()=>{let u=0;return{next(){return u<2?{value:u++?o||Pe:a,done:!1}:{done:!0}}}},a}const Gl=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${pt(t)}Modifiers`]||e[`${Ht(t)}Modifiers`];function Fc(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||Pe;let s=i;const n=t.startsWith("update:"),o=n&&Gl(r,t.slice(7));o&&(o.trim&&(s=i.map(c=>$e(c)?c.trim():c)),o.number&&(s=i.map(Ks)));let a,u=r[a=$r(t)]||r[a=$r(pt(t))];!u&&n&&(u=r[a=$r(Ht(t))]),u&&dt(u,e,6,s);const f=r[a+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,dt(f,e,6,s)}}function Vl(e,t,i=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const n=e.emits;let o={},a=!1;if(!Se(e)){const u=f=>{const c=Vl(f,t,!0);c&&(a=!0,ze(o,c))};!i&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!n&&!a?(Ue(e)&&r.set(e,null),null):(ve(n)?n.forEach(u=>o[u]=null):ze(o,n),Ue(e)&&r.set(e,o),o)}function Rr(e,t){return!e||!Mi(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ie(e,t[0].toLowerCase()+t.slice(1))||Ie(e,Ht(t))||Ie(e,t))}function zr(e){const{type:t,vnode:i,proxy:r,withProxy:s,propsOptions:[n],slots:o,attrs:a,emit:u,render:f,renderCache:c,props:h,data:p,setupState:T,ctx:w,inheritAttrs:m}=e,O=dr(e);let d,S;try{if(i.shapeFlag&4){const b=s||r,I=b;d=ut(f.call(I,b,c,h,T,p,w)),S=a}else{const b=t;d=ut(b.length>1?b(h,{attrs:a,slots:o,emit:u}):b(h,null)),S=t.props?a:Uc(a)}}catch(b){Ii.length=0,Or(b,e,1),d=Me(Gt)}let g=d;if(S&&m!==!1){const b=Object.keys(S),{shapeFlag:I}=g;b.length&&I&7&&(n&&b.some(mn)&&(S=Mc(S,n)),g=bi(g,S,!1,!0))}return i.dirs&&(g=bi(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(i.dirs):i.dirs),i.transition&&(g.transition=i.transition),d=g,dr(O),d}const Uc=e=>{let t;for(const i in e)(i==="class"||i==="style"||Mi(i))&&((t||(t={}))[i]=e[i]);return t},Mc=(e,t)=>{const i={};for(const r in e)(!mn(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function jc(e,t,i){const{props:r,children:s,component:n}=e,{props:o,children:a,patchFlag:u}=t,f=n.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&u>=0){if(u&1024)return!0;if(u&16)return r?yo(r,o,f):!!o;if(u&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const p=c[h];if(o[p]!==r[p]&&!Rr(f,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?yo(r,o,f):!0:!!o;return!1}function yo(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const n=r[s];if(t[n]!==e[n]&&!Rr(i,n))return!0}return!1}function qc({vnode:e,parent:t},i){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=i,t=t.parent;else break}}const $c=e=>e.__isSuspense;function Hl(e,t){t&&t.pendingBranch?ve(e)?t.effects.push(...e):t.effects.push(e):Vf(e)}const We=Symbol.for("v-fgt"),ei=Symbol.for("v-txt"),Gt=Symbol.for("v-cmt"),ar=Symbol.for("v-stc"),Ii=[];let nt=null;function Xe(e=!1){Ii.push(nt=e?null:[])}function Gc(){Ii.pop(),nt=Ii[Ii.length-1]||null}let Fi=1;function _o(e){Fi+=e,e<0&&nt&&(nt.hasOnce=!0)}function zl(e){return e.dynamicChildren=Fi>0?nt||ni:null,Gc(),Fi>0&&nt&&nt.push(e),e}function Ze(e,t,i,r,s,n){return zl(me(e,t,i,r,s,n,!0))}function Vc(e,t,i,r,s){return zl(Me(e,t,i,r,s,!0))}function Hc(e){return e?e.__v_isVNode===!0:!1}function Si(e,t){return e.type===t.type&&e.key===t.key}const Xl=({key:e})=>e??null,lr=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?$e(e)||qe(e)||Se(e)?{i:it,r:e,k:t,f:!!i}:e:null);function me(e,t=null,i=null,r=0,s=null,n=e===We?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Xl(t),ref:t&&lr(t),scopeId:El,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:it};return a?(Pn(u,i),n&128&&e.normalize(u)):i&&(u.shapeFlag|=$e(i)?8:16),Fi>0&&!o&&nt&&(u.patchFlag>0||n&6)&&u.patchFlag!==32&&nt.push(u),u}const Me=zc;function zc(e,t=null,i=null,r=0,s=null,n=!1){if((!e||e===ac)&&(e=Gt),Hc(e)){const a=bi(e,t,!0);return i&&Pn(a,i),Fi>0&&!n&&nt&&(a.shapeFlag&6?nt[nt.indexOf(e)]=a:nt.push(a)),a.patchFlag=-2,a}if(sp(e)&&(e=e.__vccOpts),t){t=Xc(t);let{class:a,style:u}=t;a&&!$e(a)&&(t.class=qi(a)),Ue(u)&&(gl(u)&&!ve(u)&&(u=ze({},u)),t.style=_n(u))}const o=$e(e)?1:$c(e)?128:wc(e)?64:Ue(e)?4:Se(e)?2:0;return me(e,t,i,r,s,o,n,!0)}function Xc(e){return e?gl(e)||Cl(e)?ze({},e):e:null}function bi(e,t,i=!1,r=!1){const{props:s,ref:n,patchFlag:o,children:a,transition:u}=e,f=t?Ln(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Xl(f),ref:t&&t.ref?i&&n?ve(n)?n.concat(lr(t)):[n,lr(t)]:lr(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==We?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&bi(e.ssContent),ssFallback:e.ssFallback&&bi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&Tl(c,u.clone(c)),c}function Wl(e=" ",t=0){return Me(ei,null,e,t)}function Wc(e="",t=!1){return t?(Xe(),Vc(Gt,null,e)):Me(Gt,null,e)}function ut(e){return e==null||typeof e=="boolean"?Me(Gt):ve(e)?Me(We,null,e.slice()):typeof e=="object"?Ft(e):Me(ei,null,String(e))}function Ft(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:bi(e)}function Pn(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ve(t))i=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Pn(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!Cl(t)?t._ctx=it:s===3&&it&&(it.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Se(t)?(t={default:t,_ctx:it},i=32):(t=String(t),r&64?(i=16,t=[Wl(t)]):i=8);e.children=t,e.shapeFlag|=i}function Ln(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=qi([t.class,r.class]));else if(s==="style")t.style=_n([t.style,r.style]);else if(Mi(s)){const n=t[s],o=r[s];o&&n!==o&&!(ve(n)&&n.includes(o))&&(t[s]=n?[].concat(n,o):o)}else s!==""&&(t[s]=r[s])}return t}function at(e,t,i,r=null){dt(e,t,7,[i,r])}const Kc=Nl();let Jc=0;function Yc(e,t,i){const r=e.type,s=(t?t.appContext:e.appContext)||Kc,n={uid:Jc++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new cf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dl(r,s),emitsOptions:Vl(r,s),emit:null,emitted:null,propsDefaults:Pe,inheritAttrs:r.inheritAttrs,ctx:Pe,data:Pe,props:Pe,attrs:Pe,slots:Pe,refs:Pe,setupState:Pe,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=Fc.bind(null,n),e.ce&&e.ce(n),n}let He=null;const Qc=()=>He||it;let yr,on;{const e=Qa(),t=(i,r)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(r),n=>{s.length>1?s.forEach(o=>o(n)):s[0](n)}};yr=t("__VUE_INSTANCE_SETTERS__",i=>He=i),on=t("__VUE_SSR_SETTERS__",i=>Cr=i)}const $i=e=>{const t=He;return yr(e),e.scope.on(),()=>{e.scope.off(),yr(t)}},vo=()=>{He&&He.scope.off(),yr(null)};function Kl(e){return e.vnode.shapeFlag&4}let Cr=!1;function Zc(e,t=!1,i=!1){t&&on(t);const{props:r,children:s}=e.vnode,n=Kl(e);_c(e,r,n,t),Tc(e,s,i);const o=n?ep(e,t):void 0;return t&&on(!1),o}function ep(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,uc);const{setup:r}=i;if(r){const s=e.setupContext=r.length>1?ip(e):null,n=$i(e);zt();const o=$t(r,e,0,[e.props,s]);if(Xt(),n(),Wa(o)){if(o.then(vo,vo),t)return o.then(a=>{xo(e,a,t)}).catch(a=>{Or(a,e,0)});e.asyncDep=o}else xo(e,o,t)}else Jl(e,t)}function xo(e,t,i){Se(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ue(t)&&(e.setupState=bl(t)),Jl(e,i)}let Eo;function Jl(e,t,i){const r=e.type;if(!e.render){if(!t&&Eo&&!r.render){const s=r.template||Rn(e).template;if(s){const{isCustomElement:n,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:u}=r,f=ze(ze({isCustomElement:n,delimiters:a},o),u);r.render=Eo(s,f)}}e.render=r.render||ft}{const s=$i(e);zt();try{cc(e)}finally{Xt(),s()}}}const tp={get(e,t){return rt(e,"get",""),e[t]}};function ip(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,tp),slots:e.slots,emit:e.emit,expose:t}}function kr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(bl(Pf(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Ni)return Ni[i](e)},has(t,i){return i in t||i in Ni}})):e.proxy}function rp(e,t=!0){return Se(e)?e.displayName||e.name:e.name||t&&e.__name}function sp(e){return Se(e)&&"__vccOpts"in e}const _r=(e,t)=>Lf(e,t,Cr),Yl="3.4.37";/**
* @vue/runtime-dom v3.4.37
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const np="http://www.w3.org/2000/svg",op="http://www.w3.org/1998/Math/MathML",At=typeof document<"u"?document:null,To=At&&At.createElement("template"),ap={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const s=t==="svg"?At.createElementNS(np,e):t==="mathml"?At.createElementNS(op,e):i?At.createElement(e,{is:i}):At.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>At.createTextNode(e),createComment:e=>At.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>At.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,s,n){const o=i?i.previousSibling:t.lastChild;if(s&&(s===n||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===n||!(s=s.nextSibling)););else{To.innerHTML=r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e;const a=To.content;if(r==="svg"||r==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},lp=Symbol("_vtc");function up(e,t,i){const r=e[lp];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const So=Symbol("_vod"),fp=Symbol("_vsh"),cp=Symbol(""),pp=/(^|;)\s*display\s*:/;function hp(e,t,i){const r=e.style,s=$e(i);let n=!1;if(i&&!s){if(t)if($e(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&ur(r,a,"")}else for(const o in t)i[o]==null&&ur(r,o,"");for(const o in i)o==="display"&&(n=!0),ur(r,o,i[o])}else if(s){if(t!==i){const o=r[cp];o&&(i+=";"+o),r.cssText=i,n=pp.test(i)}}else t&&e.removeAttribute("style");So in e&&(e[So]=n?r.display:"",e[fp]&&(r.display="none"))}const Ao=/\s*!important$/;function ur(e,t,i){if(ve(i))i.forEach(r=>ur(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=dp(e,t);Ao.test(i)?e.setProperty(Ht(r),i.replace(Ao,""),"important"):e[r]=i}}const wo=["Webkit","Moz","ms"],Xr={};function dp(e,t){const i=Xr[t];if(i)return i;let r=pt(t);if(r!=="filter"&&r in e)return Xr[t]=r;r=Sr(r);for(let s=0;s<wo.length;s++){const n=wo[s]+r;if(n in e)return Xr[t]=n}return t}const Oo="http://www.w3.org/1999/xlink";function No(e,t,i,r,s,n=uf(t)){r&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(Oo,t.slice(6,t.length)):e.setAttributeNS(Oo,t,i):i==null||n&&!Za(i)?e.removeAttribute(t):e.setAttribute(t,n?"":St(i)?String(i):i)}function gp(e,t,i,r){if(t==="innerHTML"||t==="textContent"){if(i==null)return;e[t]=i;return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?e.getAttribute("value")||"":e.value,a=i==null?"":String(i);(o!==a||!("_value"in e))&&(e.value=a),i==null&&e.removeAttribute(t),e._value=i;return}let n=!1;if(i===""||i==null){const o=typeof e[t];o==="boolean"?i=Za(i):i==null&&o==="string"?(i="",n=!0):o==="number"&&(i=0,n=!0)}try{e[t]=i}catch{}n&&e.removeAttribute(t)}function Jt(e,t,i,r){e.addEventListener(t,i,r)}function mp(e,t,i,r){e.removeEventListener(t,i,r)}const Io=Symbol("_vei");function bp(e,t,i,r,s=null){const n=e[Io]||(e[Io]={}),o=n[t];if(r&&o)o.value=r;else{const[a,u]=yp(t);if(r){const f=n[t]=xp(r,s);Jt(e,a,f,u)}else o&&(mp(e,a,o,u),n[t]=void 0)}}const Ro=/(?:Once|Passive|Capture)$/;function yp(e){let t;if(Ro.test(e)){t={};let r;for(;r=e.match(Ro);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ht(e.slice(2)),t]}let Wr=0;const _p=Promise.resolve(),vp=()=>Wr||(_p.then(()=>Wr=0),Wr=Date.now());function xp(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;dt(Ep(r,i.value),t,5,[r])};return i.value=e,i.attached=vp(),i}function Ep(e,t){if(ve(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Co=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Tp=(e,t,i,r,s,n)=>{const o=s==="svg";t==="class"?up(e,r,o):t==="style"?hp(e,i,r):Mi(t)?mn(t)||bp(e,t,i,r,n):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Sp(e,t,r,o))?(gp(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&No(e,t,r,o,n,t!=="value")):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),No(e,t,r,o))};function Sp(e,t,i,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Co(t)&&Se(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Co(t)&&$e(i)?!1:t in e}const vr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ve(t)?i=>nr(t,i):t};function Ap(e){e.target.composing=!0}function ko(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const pi=Symbol("_assign"),Mt={created(e,{modifiers:{lazy:t,trim:i,number:r}},s){e[pi]=vr(s);const n=r||s.props&&s.props.type==="number";Jt(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;i&&(a=a.trim()),n&&(a=Ks(a)),e[pi](a)}),i&&Jt(e,"change",()=>{e.value=e.value.trim()}),t||(Jt(e,"compositionstart",Ap),Jt(e,"compositionend",ko),Jt(e,"change",ko))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:r,trim:s,number:n}},o){if(e[pi]=vr(o),e.composing)return;const a=(n||e.type==="number")&&!/^0\d/.test(e.value)?Ks(e.value):e.value,u=t??"";a!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===i||s&&e.value.trim()===u)||(e.value=u))}},Ql={deep:!0,created(e,t,i){e[pi]=vr(i),Jt(e,"change",()=>{const r=e._modelValue,s=wp(e),n=e.checked,o=e[pi];if(ve(r)){const a=el(r,s),u=a!==-1;if(n&&!u)o(r.concat(s));else if(!n&&u){const f=[...r];f.splice(a,1),o(f)}}else if(Er(r)){const a=new Set(r);n?a.add(s):a.delete(s),o(a)}else o(Zl(e,n))})},mounted:Do,beforeUpdate(e,t,i){e[pi]=vr(i),Do(e,t,i)}};function Do(e,{value:t,oldValue:i},r){e._modelValue=t,ve(t)?e.checked=el(t,r.props.value)>-1:Er(t)?e.checked=t.has(r.props.value):t!==i&&(e.checked=Ar(t,Zl(e,!0)))}function wp(e){return"_value"in e?e._value:e.value}function Zl(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const eu=ze({patchProp:Tp},ap);let Ri,Po=!1;function Op(){return Ri||(Ri=Rc(eu))}function Np(){return Ri=Po?Ri:Cc(eu),Po=!0,Ri}const Ip=(...e)=>{const t=Op().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=iu(r);if(!s)return;const n=t._component;!Se(n)&&!n.render&&!n.template&&(n.template=s.innerHTML),s.innerHTML="";const o=i(s,!1,tu(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t},Rp=(...e)=>{const t=Np().createApp(...e),{mount:i}=t;return t.mount=r=>{const s=iu(r);if(s)return i(s,!0,tu(s))},t};function tu(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function iu(e){return $e(e)?document.querySelector(e):e}function an(e,t={},i){for(const r in e){const s=e[r],n=i?`${i}:${r}`:r;typeof s=="object"&&s!==null?an(s,t,n):typeof s=="function"&&(t[n]=s)}return t}const Cp={run:e=>e()},kp=()=>Cp,ru=typeof console.createTask<"u"?console.createTask:kp;function Dp(e,t){const i=t.shift(),r=ru(i);return e.reduce((s,n)=>s.then(()=>r.run(()=>n(...t))),Promise.resolve())}function Pp(e,t){const i=t.shift(),r=ru(i);return Promise.all(e.map(s=>r.run(()=>s(...t))))}function Kr(e,t){for(const i of[...e])i(t)}class Lp{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(t,i,r={}){if(!t||typeof i!="function")return()=>{};const s=t;let n;for(;this._deprecatedHooks[t];)n=this._deprecatedHooks[t],t=n.to;if(n&&!r.allowDeprecated){let o=n.message;o||(o=`${s} hook has been deprecated`+(n.to?`, please use ${n.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(o)||(console.warn(o),this._deprecatedMessages.add(o))}if(!i.name)try{Object.defineProperty(i,"name",{get:()=>"_"+t.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[t]=this._hooks[t]||[],this._hooks[t].push(i),()=>{i&&(this.removeHook(t,i),i=void 0)}}hookOnce(t,i){let r,s=(...n)=>(typeof r=="function"&&r(),r=void 0,s=void 0,i(...n));return r=this.hook(t,s),r}removeHook(t,i){if(this._hooks[t]){const r=this._hooks[t].indexOf(i);r!==-1&&this._hooks[t].splice(r,1),this._hooks[t].length===0&&delete this._hooks[t]}}deprecateHook(t,i){this._deprecatedHooks[t]=typeof i=="string"?{to:i}:i;const r=this._hooks[t]||[];delete this._hooks[t];for(const s of r)this.hook(t,s)}deprecateHooks(t){Object.assign(this._deprecatedHooks,t);for(const i in t)this.deprecateHook(i,t[i])}addHooks(t){const i=an(t),r=Object.keys(i).map(s=>this.hook(s,i[s]));return()=>{for(const s of r.splice(0,r.length))s()}}removeHooks(t){const i=an(t);for(const r in i)this.removeHook(r,i[r])}removeAllHooks(){for(const t in this._hooks)delete this._hooks[t]}callHook(t,...i){return i.unshift(t),this.callHookWith(Dp,t,...i)}callHookParallel(t,...i){return i.unshift(t),this.callHookWith(Pp,t,...i)}callHookWith(t,i,...r){const s=this._before||this._after?{name:i,args:r,context:{}}:void 0;this._before&&Kr(this._before,s);const n=t(i in this._hooks?[...this._hooks[i]]:[],r);return n instanceof Promise?n.finally(()=>{this._after&&s&&Kr(this._after,s)}):(this._after&&s&&Kr(this._after,s),n)}beforeEach(t){return this._before=this._before||[],this._before.push(t),()=>{if(this._before!==void 0){const i=this._before.indexOf(t);i!==-1&&this._before.splice(i,1)}}}afterEach(t){return this._after=this._after||[],this._after.push(t),()=>{if(this._after!==void 0){const i=this._after.indexOf(t);i!==-1&&this._after.splice(i,1)}}}}function Bp(){return new Lp}function Fp(e){return Array.isArray(e)?e:[e]}const Up=["title","titleTemplate","script","style","noscript"],fr=["base","meta","link","style","script","noscript"],Mp=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],jp=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],su=["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"],qp=typeof window<"u";function Bn(e){let t=9;for(let i=0;i<e.length;)t=Math.imul(t^e.charCodeAt(i++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function Lo(e){return e._h||Bn(e._d?e._d:`${e.tag}:${e.textContent||e.innerHTML||""}:${Object.entries(e.props).map(([t,i])=>`${t}:${String(i)}`).join(",")}`)}function nu(e,t){const{props:i,tag:r}=e;if(jp.includes(r))return r;if(r==="link"&&i.rel==="canonical")return"canonical";if(i.charset)return"charset";const s=["id"];r==="meta"&&s.push("name","property","http-equiv");for(const n of s)if(typeof i[n]<"u"){const o=String(i[n]);return`${r}:${n}:${o}`}return!1}function Bo(e,t){return e==null?t||null:typeof e=="function"?e(t):e}async function $p(e,t,i){const r={tag:e,props:await ou(typeof t=="object"&&typeof t!="function"&&!(t instanceof Promise)?{...t}:{[["script","noscript","style"].includes(e)?"innerHTML":"textContent"]:t},["templateParams","titleTemplate"].includes(e))};return su.forEach(s=>{const n=typeof r.props[s]<"u"?r.props[s]:i[s];typeof n<"u"&&((!["innerHTML","textContent","children"].includes(s)||Up.includes(r.tag))&&(r[s==="children"?"innerHTML":s]=n),delete r.props[s])}),r.props.body&&(r.tagPosition="bodyClose",delete r.props.body),r.tag==="script"&&typeof r.innerHTML=="object"&&(r.innerHTML=JSON.stringify(r.innerHTML),r.props.type=r.props.type||"application/json"),Array.isArray(r.props.content)?r.props.content.map(s=>({...r,props:{...r.props,content:s}})):r}function Gp(e,t){var r;const i=e==="class"?" ":";";return typeof t=="object"&&!Array.isArray(t)&&(t=Object.entries(t).filter(([,s])=>s).map(([s,n])=>e==="style"?`${s}:${n}`:s)),(r=String(Array.isArray(t)?t.join(i):t))==null?void 0:r.split(i).filter(s=>s.trim()).filter(Boolean).join(i)}async function ou(e,t){for(const i of Object.keys(e)){if(["class","style"].includes(i)){e[i]=Gp(i,e[i]);continue}if(e[i]instanceof Promise&&(e[i]=await e[i]),!t&&!su.includes(i)){const r=String(e[i]),s=i.startsWith("data-");r==="true"||r===""?e[i]=s?"true":!0:e[i]||(s&&r==="false"?e[i]="false":delete e[i])}}return e}const Vp=10;async function Hp(e){const t=[];return Object.entries(e.resolvedInput).filter(([i,r])=>typeof r<"u"&&Mp.includes(i)).forEach(([i,r])=>{const s=Fp(r);t.push(...s.map(n=>$p(i,n,e)).flat())}),(await Promise.all(t)).flat().filter(Boolean).map((i,r)=>(i._e=e._i,e.mode&&(i._m=e.mode),i._p=(e._i<<Vp)+r,i))}const Fo={base:-10,title:10},Uo={critical:-80,high:-10,low:20};function xr(e){let t=100;const i=e.tagPriority;return typeof i=="number"?i:(e.tag==="meta"?(e.props["http-equiv"]==="content-security-policy"&&(t=-30),e.props.charset&&(t=-20),e.props.name==="viewport"&&(t=-15)):e.tag==="link"&&e.props.rel==="preconnect"?t=20:e.tag in Fo&&(t=Fo[e.tag]),typeof i=="string"&&i in Uo?t+Uo[i]:t)}const zp=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],Mo=["onload","onerror","onabort","onprogress","onloadstart"],Pt="%separator";function cr(e,t,i){if(typeof e!="string"||!e.includes("%"))return e;function r(o){let a;return["s","pageTitle"].includes(o)?a=t.pageTitle:o.includes(".")?a=o.split(".").reduce((u,f)=>u&&u[f]||void 0,t):a=t[o],typeof a<"u"?(a||"").replace(/"/g,'\\"'):!1}let s=e;try{s=decodeURI(e)}catch{}return(s.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(o=>{const a=r(o.slice(1));typeof a=="string"&&(e=e.replace(new RegExp(`\\${o}(\\W|$)`,"g"),(u,f)=>`${a}${f}`).trim())}),e.includes(Pt)&&(e.endsWith(Pt)&&(e=e.slice(0,-Pt.length).trim()),e.startsWith(Pt)&&(e=e.slice(Pt.length).trim()),e=e.replace(new RegExp(`\\${Pt}\\s*\\${Pt}`,"g"),Pt),e=cr(e,{separator:i},i)),e}async function Xp(e,t={}){var c;const i=t.document||e.resolvedOptions.document;if(!i||!e.dirty)return;const r={shouldRender:!0,tags:[]};if(await e.hooks.callHook("dom:beforeRender",r),!r.shouldRender)return;const s=(await e.resolveTags()).map(h=>({tag:h,id:fr.includes(h.tag)?Lo(h):h.tag,shouldRender:!0}));let n=e._dom;if(!n){n={elMap:{htmlAttrs:i.documentElement,bodyAttrs:i.body}};for(const h of["body","head"]){const p=(c=i[h])==null?void 0:c.children,T=[];for(const w of[...p].filter(m=>fr.includes(m.tagName.toLowerCase()))){const m={tag:w.tagName.toLowerCase(),props:await ou(w.getAttributeNames().reduce((S,g)=>({...S,[g]:w.getAttribute(g)}),{})),innerHTML:w.innerHTML};let O=1,d=nu(m);for(;d&&T.find(S=>S._d===d);)d=`${d}:${O++}`;m._d=d||void 0,T.push(m),n.elMap[w.getAttribute("data-hid")||Lo(m)]=w}}}n.pendingSideEffects={...n.sideEffects||{}},n.sideEffects={};function o(h,p,T){const w=`${h}:${p}`;n.sideEffects[w]=T,delete n.pendingSideEffects[w]}function a({id:h,$el:p,tag:T}){const w=T.tag.endsWith("Attrs");n.elMap[h]=p,w||(["textContent","innerHTML"].forEach(m=>{T[m]&&T[m]!==p[m]&&(p[m]=T[m])}),o(h,"el",()=>{var m;(m=n.elMap[h])==null||m.remove(),delete n.elMap[h]}));for(const[m,O]of Object.entries(T._eventHandlers||{}))p.getAttribute(`data-${m}`)!==""&&((T.tag==="bodyAttrs"?i.defaultView:p).addEventListener(m.replace("on",""),O.bind(p)),p.setAttribute(`data-${m}`,""));Object.entries(T.props).forEach(([m,O])=>{const d=`attr:${m}`;if(m==="class")for(const S of(O||"").split(" ").filter(Boolean))w&&o(h,`${d}:${S}`,()=>p.classList.remove(S)),!p.classList.contains(S)&&p.classList.add(S);else if(m==="style")for(const S of(O||"").split(";").filter(Boolean)){const[g,...b]=S.split(":").map(I=>I.trim());o(h,`${d}:${g}`,()=>{p.style.removeProperty(g)}),p.style.setProperty(g,b.join(":"))}else p.getAttribute(m)!==O&&p.setAttribute(m,O===!0?"":String(O)),w&&o(h,d,()=>p.removeAttribute(m))})}const u=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const h of s){const{tag:p,shouldRender:T,id:w}=h;if(T){if(p.tag==="title"){i.title=p.textContent;continue}h.$el=h.$el||n.elMap[w],h.$el?a(h):fr.includes(p.tag)&&u.push(h)}}for(const h of u){const p=h.tag.tagPosition||"head";h.$el=i.createElement(h.tag.tag),a(h),f[p]=f[p]||i.createDocumentFragment(),f[p].appendChild(h.$el)}for(const h of s)await e.hooks.callHook("dom:renderTag",h,i,o);f.head&&i.head.appendChild(f.head),f.bodyOpen&&i.body.insertBefore(f.bodyOpen,i.body.firstChild),f.bodyClose&&i.body.appendChild(f.bodyClose),Object.values(n.pendingSideEffects).forEach(h=>h()),e._dom=n,e.dirty=!1,await e.hooks.callHook("dom:rendered",{renders:s})}async function Wp(e,t={}){const i=t.delayFn||(r=>setTimeout(r,10));return e._domUpdatePromise=e._domUpdatePromise||new Promise(r=>i(async()=>{await Xp(e,t),delete e._domUpdatePromise,r()}))}function Kp(e){return t=>{var r,s;const i=((s=(r=t.resolvedOptions.document)==null?void 0:r.head.querySelector('script[id="unhead:payload"]'))==null?void 0:s.innerHTML)||!1;return i&&t.push(JSON.parse(i)),{mode:"client",hooks:{"entries:updated":function(n){Wp(n,e)}}}}}const Jp=["templateParams","htmlAttrs","bodyAttrs"],Yp={hooks:{"tag:normalise":function({tag:e}){["hid","vmid","key"].forEach(r=>{e.props[r]&&(e.key=e.props[r],delete e.props[r])});const i=nu(e)||(e.key?`${e.tag}:${e.key}`:!1);i&&(e._d=i)},"tags:resolve":function(e){const t={};e.tags.forEach(r=>{const s=(r.key?`${r.tag}:${r.key}`:r._d)||r._p,n=t[s];if(n){let a=r==null?void 0:r.tagDuplicateStrategy;if(!a&&Jp.includes(r.tag)&&(a="merge"),a==="merge"){const u=n.props;["class","style"].forEach(f=>{u[f]&&(r.props[f]?(f==="style"&&!u[f].endsWith(";")&&(u[f]+=";"),r.props[f]=`${u[f]} ${r.props[f]}`):r.props[f]=u[f])}),t[s].props={...u,...r.props};return}else if(r._e===n._e){n._duped=n._duped||[],r._d=`${n._d}:${n._duped.length+1}`,n._duped.push(r);return}else if(xr(r)>xr(n))return}const o=Object.keys(r.props).length+(r.innerHTML?1:0)+(r.textContent?1:0);if(fr.includes(r.tag)&&o===0){delete t[s];return}t[s]=r});const i=[];Object.values(t).forEach(r=>{const s=r._duped;delete r._duped,i.push(r),s&&i.push(...s)}),e.tags=i,e.tags=e.tags.filter(r=>!(r.tag==="meta"&&(r.props.name||r.props.property)&&!r.props.content))}}},Qp={mode:"server",hooks:{"tags:resolve":function(e){const t={};e.tags.filter(i=>["titleTemplate","templateParams","title"].includes(i.tag)&&i._m==="server").forEach(i=>{t[i.tag]=i.tag.startsWith("title")?i.textContent:i.props}),Object.keys(t).length&&e.tags.push({tag:"script",innerHTML:JSON.stringify(t),props:{id:"unhead:payload",type:"application/json"}})}}},Zp=["script","link","bodyAttrs"],eh=e=>({hooks:{"tags:resolve":function(t){for(const i of t.tags.filter(r=>Zp.includes(r.tag)))Object.entries(i.props).forEach(([r,s])=>{r.startsWith("on")&&typeof s=="function"&&(e.ssr&&Mo.includes(r)?i.props[r]=`this.dataset.${r}fired = true`:delete i.props[r],i._eventHandlers=i._eventHandlers||{},i._eventHandlers[r]=s)}),e.ssr&&i._eventHandlers&&(i.props.src||i.props.href)&&(i.key=i.key||Bn(i.props.src||i.props.href))},"dom:renderTag":function({$el:t,tag:i}){var r,s;for(const n of Object.keys((t==null?void 0:t.dataset)||{}).filter(o=>Mo.some(a=>`${a}fired`===o))){const o=n.replace("fired","");(s=(r=i._eventHandlers)==null?void 0:r[o])==null||s.call(t,new Event(o.replace("on","")))}}}}),th=["link","style","script","noscript"],ih={hooks:{"tag:normalise":({tag:e})=>{e.key&&th.includes(e.tag)&&(e.props["data-hid"]=e._h=Bn(e.key))}}},rh={hooks:{"tags:resolve":e=>{const t=i=>{var r;return(r=e.tags.find(s=>s._d===i))==null?void 0:r._p};for(const{prefix:i,offset:r}of zp)for(const s of e.tags.filter(n=>typeof n.tagPriority=="string"&&n.tagPriority.startsWith(i))){const n=t(s.tagPriority.replace(i,""));typeof n<"u"&&(s._p=n+r)}e.tags.sort((i,r)=>i._p-r._p).sort((i,r)=>xr(i)-xr(r))}}},sh={meta:"content",link:"href",htmlAttrs:"lang"},nh=e=>({hooks:{"tags:resolve":t=>{var a;const{tags:i}=t,r=(a=i.find(u=>u.tag==="title"))==null?void 0:a.textContent,s=i.findIndex(u=>u.tag==="templateParams"),n=s!==-1?i[s].props:{},o=n.separator||"|";delete n.separator,n.pageTitle=cr(n.pageTitle||r||"",n,o);for(const u of i.filter(f=>f.processTemplateParams!==!1)){const f=sh[u.tag];f&&typeof u.props[f]=="string"?u.props[f]=cr(u.props[f],n,o):(u.processTemplateParams===!0||["titleTemplate","title"].includes(u.tag))&&["innerHTML","textContent"].forEach(c=>{typeof u[c]=="string"&&(u[c]=cr(u[c],n,o))})}e._templateParams=n,e._separator=o,t.tags=i.filter(u=>u.tag!=="templateParams")}}}),oh={hooks:{"tags:resolve":e=>{const{tags:t}=e;let i=t.findIndex(s=>s.tag==="titleTemplate");const r=t.findIndex(s=>s.tag==="title");if(r!==-1&&i!==-1){const s=Bo(t[i].textContent,t[r].textContent);s!==null?t[r].textContent=s||t[r].textContent:delete t[r]}else if(i!==-1){const s=Bo(t[i].textContent);s!==null&&(t[i].textContent=s,t[i].tag="title",i=-1)}i!==-1&&delete t[i],e.tags=t.filter(Boolean)}}},ah={hooks:{"tags:afterResolve":function(e){for(const t of e.tags)typeof t.innerHTML=="string"&&(t.innerHTML&&["application/ld+json","application/json"].includes(t.props.type)?t.innerHTML=t.innerHTML.replace(/</g,"\\u003C"):t.innerHTML=t.innerHTML.replace(new RegExp(`</${t.tag}`,"g"),`<\\/${t.tag}`))}}};function lh(e={}){const t=uh(e);return t.use(Kp()),t}function jo(e,t){return!e||e==="server"&&t||e==="client"&&!t}function uh(e={}){const t=Bp();t.addHooks(e.hooks||{}),e.document=e.document||(qp?document:void 0);const i=!e.document,r=()=>{a.dirty=!0,t.callHook("entries:updated",a)};let s=0,n=[];const o=[],a={plugins:o,dirty:!1,resolvedOptions:e,hooks:t,headEntries(){return n},use(u){const f=typeof u=="function"?u(a):u;(!f.key||!o.some(c=>c.key===f.key))&&(o.push(f),jo(f.mode,i)&&t.addHooks(f.hooks||{}))},push(u,f){f==null||delete f.head;const c={_i:s++,input:u,...f};return jo(c.mode,i)&&(n.push(c),r()),{dispose(){n=n.filter(h=>h._i!==c._i),t.callHook("entries:updated",a),r()},patch(h){n=n.map(p=>(p._i===c._i&&(p.input=c.input=h),p)),r()}}},async resolveTags(){const u={tags:[],entries:[...n]};await t.callHook("entries:resolve",u);for(const f of u.entries){const c=f.resolvedInput||f.input;if(f.resolvedInput=await(f.transform?f.transform(c):c),f.resolvedInput)for(const h of await Hp(f)){const p={tag:h,entry:f,resolvedOptions:a.resolvedOptions};await t.callHook("tag:normalise",p),u.tags.push(p.tag)}}return await t.callHook("tags:beforeResolve",u),await t.callHook("tags:resolve",u),await t.callHook("tags:afterResolve",u),u.tags},ssr:i};return[Yp,Qp,eh,ih,rh,nh,oh,ah,...(e==null?void 0:e.plugins)||[]].forEach(u=>a.use(u)),a.hooks.callHook("init",a),a}const fh=Yl.startsWith("3");function ch(e){return typeof e=="function"?e():Ae(e)}function ln(e,t=""){if(e instanceof Promise)return e;const i=ch(e);return!e||!i?i:Array.isArray(i)?i.map(r=>ln(r,t)):typeof i=="object"?Object.fromEntries(Object.entries(i).map(([r,s])=>r==="titleTemplate"||r.startsWith("on")?[r,Ae(s)]:[r,ln(s,r)])):i}const ph={hooks:{"entries:resolve":function(e){for(const t of e.entries)t.resolvedInput=ln(t.input)}}},hh="usehead";function dh(e){return{install(i){fh&&(i.config.globalProperties.$unhead=e,i.config.globalProperties.$head=e,i.provide(hh,e))}}.install}function gh(e={}){e.domDelayFn=e.domDelayFn||(i=>_l(()=>setTimeout(()=>i(),0)));const t=lh(e);return t.use(ph),t.install=dh(t),t}function mh(e){try{return JSON.parse(e||"{}")}catch(t){return console.error("[SSG] On state deserialization -",t,e),{}}}function bh(e){return document.readyState==="loading"?new Promise(t=>{document.addEventListener("DOMContentLoaded",()=>t(e))}):Promise.resolve(e)}const yh=Xf({setup(e,{slots:t}){const i=qt(!1);return Ir(()=>i.value=!0),()=>i.value?t.default&&t.default({}):t.placeholder&&t.placeholder({})}});function _h(e,t,i={}){const{transformState:r,registerComponents:s=!0,useHead:n=!0,rootContainer:o="#app"}=i,a=typeof window<"u";async function u(f=!1){const c=f?Ip(e):Rp(e);let h;n&&(h=gh(),c.use(h));const p=[],m={app:c,head:h,isClient:a,router:void 0,routes:void 0,initialState:{},onSSRAppRendered:f?()=>{}:d=>p.push(d),triggerOnSSRAppRendered:()=>Promise.all(p.map(d=>d())),transformState:r};s&&c.component("ClientOnly",yh),f&&(await bh(),m.initialState=(r==null?void 0:r(window.__INITIAL_STATE__||{}))||mh(window.__INITIAL_STATE__)),await(t==null?void 0:t(m));const O=m.initialState;return{...m,initialState:O}}return a&&(async()=>{const{app:f}=await u(!0);f.mount(o,!0)})(),u}const vh=[{id:"http://zotero.org/users/12253141/items/3667AIJ7",type:"book","collection-title":"Grundlagen der Welterklrung",edition:"12., berarbeitete Auflage","event-place":"Tbingen",publisher:"Vandenhoeck & Ruprecht","publisher-place":"Tbingen",title:"Das beste Buch der Welt. Eine Einfhrung in 23 Kapiteln","title-short":"Das beste Buch",volume:"23",author:[{family:"Patzold",given:"Ludwig"}],issued:{"date-parts":[["2023"]]}},{id:"http://zotero.org/users/12253141/items/MX5MSYTL",type:"chapter","collection-title":"Einfhrungen in den Unsinn","container-title":"Groe Widerlegungen der Weltgeschichte. Studien zu Nonsens",edition:"45. unvernderte Auflage","event-place":"New York",page:"2367",publisher:"De Gruyter","publisher-place":"New York",title:"Das beste Kapitel der Welt. Eine Widerlegung von allem","title-short":"Das beste Kapitel",volume:"12",author:[{family:"Mller",given:"Franz"}],editor:[{family:"Max",given:"Mustermann"}],issued:{"date-parts":[["2021"]]}},{id:"http://zotero.org/users/12253141/items/5BC6NWIT",type:"article-journal","container-title":"Viking Studies",page:"2345",title:"Die Wikinger bei Wikingen. Studien zu einem Massengrab","title-short":"Die Wikinger",volume:"26",author:[{family:"Wickie",given:"Willibald"}],issued:{"date-parts":[["2019"]]}},{id:"http://zotero.org/users/12253141/items/MSA45HBC",type:"article-newspaper","container-title":"MGH SS rer. Germ. N.S.",volume:9,"event-place":"Hannover","publisher-place":"Hannover",title:"Chronicon",author:[{family:"Thietmar",given:""}],contributor:[{family:"Holtzmann",given:"Robert"}],issued:{"date-parts":[["1939"]]}},{id:"http://zotero.org/users/12253141/items/EUMYFUEA",type:"entry-encyclopedia","container-title":"Lexikon des Mittelalters","event-place":"Zrich",page:"10121014",publisher:"Artemis","publisher-place":"Zrich",title:"Bldsinn",volume:"3",author:[{family:"Walkes",given:"Otto"}],issued:{"date-parts":[["1996"]]}}];var Vt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var i=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),i}var l={PROCESSOR_VERSION:"1.4.61",error:function(e){throw typeof Error>"u"?new Error("citeproc-js error: "+e):"citeproc-js error: "+e},debug:function(e){typeof console>"u"?dump("CSL: "+e+`
`):console.log("citeproc-js warning: "+e)},toLocaleUpperCase(e){var t=this.tmp.lang_array;try{e=e.toLocaleUpperCase(t)}catch{e=e.toUpperCase()}return e},toLocaleLowerCase(e){var t=this.tmp.lang_array;try{e=e.toLocaleLowerCase(t)}catch{e=e.toLowerCase()}return e},LOCATOR_LABELS_REGEXP:new RegExp("^((vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\\.)\\s+(.*)"),STATUTE_SUBDIV_PLAIN_REGEX:/(?:(?:^| )(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_PLAIN_REGEX_FRONT:/(?:^\s*[.,;]*\s*(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_STRINGS:{"vrs.":"verse","sv.":"sub-verbo","subpara.":"subparagraph","op.":"opus","subch.":"subchapter","add.":"addendum","amend.":"amendment","annot.":"annotation","app.":"appendix","art.":"article","bibliog.":"bibliography","bk.":"book","ch.":"chapter","cl.":"clause","col.":"column","cmt.":"comment","dec.":"decision","dept.":"department","ex.":"example","fig.":"figure","fld.":"field","fol.":"folio","n.":"note","hypo.":"hypothetical","illus.":"illustration","intro.":"introduction","l.":"line","no.":"issue","p.":"page","pp.":"page","para.":"paragraph","pt.":"part","pmbl.":"preamble","princ.":"principle","pub.":"publication","r.":"rule","rn.":"randnummer","sched.":"schedule","sec.":"section","ser.":"series,","subdiv.":"subdivision","subsec.":"subsection","supp.":"supplement","tbl.":"table","tit.":"title","vol.":"volume"},STATUTE_SUBDIV_STRINGS_REVERSE:{verse:"vrs.","sub-verbo":"sv.","sub verbo":"sv.",subparagraph:"subpara.",opus:"op.",subchapter:"subch.",addendum:"add.",amendment:"amend.",annotation:"annot.",appendix:"app.",article:"art.",bibliography:"bibliog.",book:"bk.",chapter:"ch.",clause:"cl.",column:"col.",comment:"cmt.",decision:"dec.",department:"dept.",example:"ex.",figure:"fig.",field:"fld.",folio:"fol.",note:"n.",hypothetical:"hypo.",illustration:"illus.",introduction:"intro.",line:"l.",issue:"no.",page:"p.",paragraph:"para.",part:"pt.",preamble:"pmbl.",principle:"princ.",publication:"pub.",rule:"r.",randnummer:"rn.",schedule:"sched.",section:"sec.","series,":"ser.",subdivision:"subdiv.",subsection:"subsec.",supplement:"supp.",table:"tbl.",title:"tit.",volume:"vol."},LOCATOR_LABELS_MAP:{vrs:"verse",sv:"sub-verbo",subpara:"subparagraph",op:"opus",subch:"subchapter",add:"addendum",amend:"amendment",annot:"annotation",app:"appendix",art:"article",bibliog:"bibliography",bk:"book",ch:"chapter",cl:"clause",col:"column",cmt:"comment",dec:"decision",dept:"department",ex:"example",fig:"figure",fld:"field",fol:"folio",n:"note",hypo:"hypothetical",illus:"illustration",intro:"introduction",l:"line",no:"issue",p:"page",pp:"page",para:"paragraph",pt:"part",pmbl:"preamble",princ:"principle",pub:"publication",r:"rule",rn:"randnummer",sched:"schedule",sec:"section",ser:"series,",subdiv:"subdivision",subsec:"subsection",supp:"supplement",tbl:"table",tit:"title",vol:"volume"},MODULE_MACROS:{"juris-pretitle":!0,"juris-title":!0,"juris-pretitle-short":!0,"juris-title-short":!0,"juris-main":!0,"juris-main-short":!0,"juris-tail":!0,"juris-tail-short":!0,"juris-locator":!0},MODULE_TYPES:{legal_case:!0,legislation:!0,bill:!0,hearing:!0,gazette:!0,report:!0,regulation:!0,standard:!0,patent:!0,locator:!0},checkNestedBrace:function(e){e.opt.xclass==="note"?(this.depth=0,this.update=function(i){for(var i=i||"",r=i.split(/([\(\)])/),s=1,n=r.length;s<n;s+=2)r[s]==="("?(this.depth%2===1&&(r[s]="["),this.depth+=1):r[s]===")"&&(this.depth%2===0&&(r[s]="]"),this.depth-=1);var o=r.join("");return o}):this.update=function(t){return t}},MULTI_FIELDS:["event","publisher","publisher-place","event-place","title","container-title","collection-title","authority","genre","title-short","medium","country","jurisdiction","archive","archive-place"],LangPrefsMap:{title:"titles","title-short":"titles",event:"titles",genre:"titles",medium:"titles","container-title":"journals","collection-title":"titles",archive:"journals",publisher:"publishers",authority:"publishers","publisher-place":"places","event-place":"places","archive-place":"places",jurisdiction:"places",number:"places",edition:"places",issue:"places",volume:"places"},AbbreviationSegments:function(){this["container-title"]={},this["collection-title"]={},this["institution-entire"]={},this["institution-part"]={},this.nickname={},this.number={},this.title={},this.place={},this.hereinafter={},this.classic={},this["container-phrase"]={},this["title-phrase"]={}},getAbbrevsDomain:function(e,t,i){var r=null;if(e.opt.availableAbbrevDomains&&t&&t!=="default"){var s=e.locale[e.opt.lang].opts["jurisdiction-preference"],n=null;if(e.locale[i]&&(n=e.locale[i].opts["jurisdiction-preference"]),n){for(var o=n.length-1;o>-1;o--)if(e.opt.availableAbbrevDomains[t].indexOf(n[o])>-1){r=n[o];break}}if(!r&&s){for(var o=s.length-1;o>-1;o--)if(e.opt.availableAbbrevDomains[t].indexOf(s[o])>-1){r=s[o];break}}}return r},FIELD_CATEGORY_REMAP:{title:"title","container-title":"container-title","collection-title":"collection-title",country:"place",number:"number",place:"place",archive:"container-title","title-short":"title",genre:"title",event:"title",medium:"title","archive-place":"place","publisher-place":"place","event-place":"place",jurisdiction:"place","language-name":"place","language-name-original":"place","call-number":"number","chapter-number":"number","collection-number":"number",edition:"number",page:"number",issue:"number",locator:"number","locator-extra":"number","number-of-pages":"number","number-of-volumes":"number",volume:"number","citation-number":"number",publisher:"institution-part"},parseLocator:function(e){if(this.opt.development_extensions.locator_date_and_revision&&e.locator){e.locator=""+e.locator;var t=e.locator.indexOf("|");if(t>-1){var i=e.locator;e.locator=i.slice(0,t),i=i.slice(t+1);var r=i.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/);r&&(e["locator-date"]=this.fun.dateparser.parseDateToObject(r[1]),i=i.slice(r[1].length)),e["locator-extra"]=i.replace(/^\s+/,"").replace(/\s+$/,"")}}return e.locator&&(e.locator=(""+e.locator).replace(/\s+$/,"")),e},normalizeLocaleStr:function(e){if(e){var t=e.split("-");return t[0]=t[0].toLowerCase(),t[1]&&(t[1]=t[1].toUpperCase()),t.join("-")}},parseNoteFieldHacks:function(e,t,i){if(typeof e.note=="string"){for(var r=[],s=e.note.split(`
`),n=0,o=s.length;n<o;n++){var a=s[n],r=[],u=a.match(l.NOTE_FIELDS_REGEXP);if(u){for(var f=a.split(l.NOTE_FIELDS_REGEXP),c=0,h=f.length-1;c<h;c++)r.push(f[c]),r.push(u[c]);r.push(f[f.length-1]);for(var c=1,h=r.length;c<h&&!(r[c-1].trim()&&(n>0||c>1)&&!r[c-1].match(l.NOTE_FIELD_REGEXP));c+=2)r[c]=`
`+r[c].slice(2,-1).trim()+`
`;s[n]=r.join("")}}s=s.join(`
`).split(`
`);for(var p=0,T={},n=0,o=s.length;n<o;n++){var a=s[n],w=a.match(l.NOTE_FIELD_REGEXP);if(a.trim()){if(!w){if(n===0)continue;p=n;break}}else continue;var m=w[1],O=w[2].replace(/^\s+/,"").replace(/\s+$/,"");if(m==="type")e.type=O,s[n]="";else if(l.DATE_VARIABLES.indexOf(m.replace(/^alt-/,""))>-1)(!e[m]||i)&&(e[m]=l.DateParser.parseDateToArray(O),(!t||t[m]&&this.isDateString(O))&&(s[n]=""));else if(!e[m]){if(l.NAME_VARIABLES.indexOf(m.replace(/^alt-/,""))>-1){T[m]||(T[m]=[]);var d=O.split(/\s*\|\|\s*/);if(d.length===1)T[m].push({literal:d[0]});else if(d.length===2){var S={family:d[0],given:d[1]};l.parseParticles(S),T[m].push(S)}}else e[m]=O;(!t||t[m])&&(s[n]="")}}for(var m in T)e[m]=T[m];if(t){s[p].trim()&&(s[p]=`
`+s[p]);for(var n=p-1;n>-1;n--)s[n].trim()||(s=s.slice(0,n).concat(s.slice(n+1)))}e.note=s.join(`
`).trim()}},checkPrefixSpaceAppend:function(e,n){n||(n="");var i="",r=n.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),s=r.slice(-1);(r.match(l.ENDSWITH_ROMANESQUE_REGEXP)||l.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(s)>-1||s.match(/[\)\],0-9]/))&&(i=" ");var n=(n+i).replace(/\s+/g," ");return n},checkIgnorePredecessor:function(e,t){var i=t.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),r=i.slice(-1);return l.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(r)>-1&&t.trim().indexOf(" ")>-1?(e.tmp.term_predecessor=!1,!0):!1},checkSuffixSpacePrepend:function(e,t){return t?((t.match(l.STARTSWITH_ROMANESQUE_REGEXP)||["[","("].indexOf(t.slice(0,1))>-1)&&(t=" "+t),t):""},GENDERS:["masculine","feminine"],ERROR_NO_RENDERED_FORM:1,PREVIEW:"Just for laughs.",ASSUME_ALL_ITEMS_REGISTERED:2,START:0,END:1,SINGLETON:2,SEEN:6,SUCCESSOR:3,SUCCESSOR_OF_SUCCESSOR:4,SUPPRESS:5,SINGULAR:0,PLURAL:1,LITERAL:!0,BEFORE:1,AFTER:2,DESCENDING:1,ASCENDING:2,PRIMARY:1,SECONDARY:2,POSITION_FIRST:0,POSITION_SUBSEQUENT:1,POSITION_IBID:2,POSITION_IBID_WITH_LOCATOR:3,POSITION_CONTAINER_SUBSEQUENT:4,POSITION_MAP:{0:0,4:1,1:2,2:3,3:4},POSITION_TEST_VARS:["position","first-reference-note-number","near-note"],AREAS:["citation","citation_sort","bibliography","bibliography_sort","intext"],CITE_FIELDS:["first-reference-note-number","first-container-reference-note-number","locator","locator-extra"],SWAPPING_PUNCTUATION:[".","!","?",":",","],TERMINAL_PUNCTUATION:[":",".",";","!","?"," "],NONE:0,NUMERIC:1,POSITION:2,TRIGRAPH:3,DATE_PARTS:["year","month","day"],DATE_PARTS_ALL:["year","month","day","season"],DATE_PARTS_INTERNAL:["year","month","day","year_end","month_end","day_end"],NAME_PARTS:["non-dropping-particle","family","given","dropping-particle","suffix","literal"],DISAMBIGUATE_OPTIONS:["disambiguate-add-names","disambiguate-add-givenname","disambiguate-add-year-suffix"],GIVENNAME_DISAMBIGUATION_RULES:["all-names","all-names-with-initials","primary-name","primary-name-with-initials","by-cite"],NAME_ATTRIBUTES:["and","delimiter-precedes-last","delimiter-precedes-et-al","initialize-with","initialize","name-as-sort-order","sort-separator","et-al-min","et-al-use-first","et-al-subsequent-min","et-al-subsequent-use-first","form","prefix","suffix","delimiter"],LOOSE:0,STRICT:1,TOLERANT:2,PREFIX_PUNCTUATION:/[.;:]\s*$/,SUFFIX_PUNCTUATION:/^\s*[.;:,\(\)]/,NUMBER_REGEXP:/(?:^\d+|\d+$)/,NAME_INITIAL_REGEXP:/^([A-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u042f\u0590-\u05d4\u05d6-\u05ff\u0600-\u06ff\u0370\u0372\u0376\u0386\u0388-\u03ab\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03fd-\u03ff])([a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u052f\u0600-\u06ff\u0370-\u03ff\u1f00-\u1fff]*|)(\.)*/,ROMANESQUE_REGEXP:/[-0-9a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ROMANESQUE_NOT_REGEXP:/[^a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/g,STARTSWITH_ROMANESQUE_REGEXP:/^[&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ENDSWITH_ROMANESQUE_REGEXP:/[.;:&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]$/,ALL_ROMANESQUE_REGEXP:/^[a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]+$/,VIETNAMESE_SPECIALS:/[\u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]/,VIETNAMESE_NAMES:/^(?:(?:[.AaBbCcDdEeGgHhIiKkLlMmNnOoPpQqRrSsTtUuVvXxYy \u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]{2,6})(\s+|$))+$/,NOTE_FIELDS_REGEXP:/\{:(?:[\-_a-z]+|[A-Z]+):[^\}]+\}/g,NOTE_FIELD_REGEXP:/^([\-_a-z]+|[A-Z]+):\s*([^\}]+)$/,PARTICLE_GIVEN_REGEXP:/^([^ ]+(?:\u02bb |\u2019 | |\' ) *)(.+)$/,PARTICLE_FAMILY_REGEXP:/^([^ ]+(?:\-|\u02bb|\u2019| |\') *)(.+)$/,DISPLAY_CLASSES:["block","left-margin","right-inline","indent"],NAME_VARIABLES:["author","chair","collection-editor","compiler","composer","container-author","contributor","curator","director","editor","editor-translator","editorial-director","executive-producer","guest","host","illustrator","interviewer","narrator","organizer","original-author","performer","producer","recipient","reviewed-author","script-writer","series-creator","translator","commenter"],CREATORS:["author","chair","collection-editor","compiler","composer","container-author","contributor","curator","director","editor","editor-translator","editorial-director","executive-producer","guest","host","illustrator","interviewer","narrator","organizer","original-author","performer","producer","recipient","reviewed-author","script-writer","series-creator","translator","commenter"],NUMERIC_VARIABLES:["call-number","chapter-number","collection-number","division","edition","page","issue","locator","locator-extra","number","number-of-pages","number-of-volumes","part-number","printing-number","section","supplement-number","version","volume","supplement","citation-number"],DATE_VARIABLES:["locator-date","issued","event-date","accessed","original-date","publication-date","available-date","submitted","alt-issued","alt-event"],VARIABLES_WITH_SHORT_FORM:["title","container-title"],TITLE_FIELD_SPLITS:function(e){for(var t=["title","short","main","sub","subjoin"],i={},r=0,s=t.length;r<s;r++)i[t[r]]=e+"title"+(t[r]==="title"?"":"-"+t[r]);return i},demoteNoiseWords:function(e,t,i){var r=e.locale[e.opt.lang].opts["leading-noise-words"];if(t&&i){t=t.split(/\s+/),t.reverse();for(var s=[],n=t.length-1;n>-1&&r.indexOf(t[n].toLowerCase())>-1;n+=-1)s.push(t.pop());t.reverse();var o=t.join(" "),a=s.join(" ");i==="drop"||!a?t=o:i==="demote"&&(t=[o,a].join(", "))}return t},extractTitleAndSubtitle:function(e,t){var i=t?"":"",r=[""];this.opt.development_extensions.split_container_title&&r.push("container-");for(var s=0,n=r.length;s<n;s++){var o=r[s],a=l.TITLE_FIELD_SPLITS(o),u=[!1];if(e.multi)for(var f in e.multi._keys[a.short])u.push(f);for(var c=0,h=u.length;c<h;c++){var f=u[c],p={};f?(e.multi._keys[a.title]&&(p[a.title]=e.multi._keys[a.title][f]),e.multi._keys[a.short]&&(p[a.short]=e.multi._keys[a.short][f])):(p[a.title]=e[a.title],p[a.short]=e[a.short]),p[a.main]=p[a.title],p[a.sub]=!1;var T=p[a.short];if(p[a.title]){if(T&&T.toLowerCase()===p[a.title].toLowerCase())p[a.main]=p[a.title],p[a.subjoin]="",p[a.sub]="";else if(T){var w=p[a.title].slice(T.replace(/[\?\!]+$/,"").length),m=p[a.title].replace(w.replace(/^[\?\!]+/,""),"").trim(),O=l.TITLE_SPLIT_REGEXP.matchfirst.exec(w);if(O&&m.toLowerCase()===T.toLowerCase())p[a.main]=m,p[a.subjoin]=O[1].replace(/[\?\!]+(\s*)$/,"$1"),p[a.sub]=w.replace(l.TITLE_SPLIT_REGEXP.matchfirst,""),this.opt.development_extensions.force_short_title_casing_alignment&&(p[a.short]=p[a.main]);else{var d=l.TITLE_SPLIT(p[a.title]);d.length==3?(p[a.main]=d[0],p[a.subjoin]=d[1],p[a.sub]=d[2]):(p[a.main]=p[a.title],p[a.subjoin]="",p[a.sub]="")}}else{var d=l.TITLE_SPLIT(p[a.title]);if(d.length==3){if(p[a.main]=d[0],p[a.subjoin]=d[1],p[a.sub]=d[2],this.opt.development_extensions.implicit_short_title&&e.type!=="legal_case"&&!e[a.short]&&!p[a.main].match(/^[\-\.[0-9]+$/)){var S=p[a.subjoin].trim();["?","!"].indexOf(S)===-1&&(S=""),p[a.short]=p[a.main]+S}}else p[a.main]=p[a.title],p[a.subjoin]="",p[a.sub]=""}if(p[a.subjoin]&&p[a.subjoin].match(/([\?\!])/)){var O=p[a.subjoin].match(/(\s*)$/);p[a.main]=p[a.main]+i+p[a.subjoin].trim(),p[a.subjoin]=O[1]}}if(p[a.subjoin]&&(p[a.subjoin].indexOf(":")>-1&&(p[a.subjoin]=i+": "),(p[a.subjoin].indexOf("-")>-1||p[a.subjoin].indexOf("")>-1)&&(p[a.subjoin]="")),f)for(var g in p)e.multi._keys[g]||(e.multi._keys[g]={}),e.multi._keys[g][f]=p[g];else for(var g in p)e[g]=p[g]}}},titlecaseSentenceOrNormal:function(e,t,i,r,s){var n=l.TITLE_FIELD_SPLITS(i),o={};if(r&&t.multi?(t.multi._keys[n.title]&&(o[n.title]=t.multi._keys[n.title][r]),t.multi._keys[n.main]&&(o[n.main]=t.multi._keys[n.main][r]),t.multi._keys[n.sub]&&(o[n.sub]=t.multi._keys[n.sub][r]),t.multi._keys[n.subjoin]&&(o[n.subjoin]=t.multi._keys[n.subjoin][r])):(o[n.title]=t[n.title],o[n.main]=t[n.main],o[n.sub]=t[n.sub],o[n.subjoin]=t[n.subjoin]),o[n.main]&&o[n.sub]){var a=o[n.main],u=o[n.subjoin],f=o[n.sub];return s?(a=l.Output.Formatters.sentence(e,a),f=l.Output.Formatters.sentence(e,f)):e.opt.development_extensions.uppercase_subtitles&&(f=l.Output.Formatters["capitalize-first"](e,f)),[a,u,f].join("")}else if(o[n.title]){if(s)return l.Output.Formatters.sentence(e,o[n.title]);if(e.opt.development_extensions.uppercase_subtitles){for(var c=l.TITLE_SPLIT(o[n.title]),h=0,p=c.length;h<p;h+=2)c[h]=l.Output.Formatters["capitalize-first"](e,c[h]);for(var h=1,p=c.length-1;h<p;h+=2){var T=c[h].match(/([:\?\!] )/);if(T){var w=e.opt["default-locale"][0].slice(0,2).toLowerCase()==="fr"?"":"";c[h]=w+T[1]}(c[h].indexOf("-")>-1||c[h].indexOf("")>-1)&&(c[h]="")}return o[n.title]=c.join(""),o[n.title]}else return o[n.title]}else return""},getSafeEscape:function(e){if(["bibliography","citation"].indexOf(e.tmp.area)>-1){var t=[];return e.opt.development_extensions.thin_non_breaking_space_html_hack&&e.opt.mode==="html"&&t.push(function(i){return i.replace(/\u202f/g,'<span style="white-space:nowrap">&thinsp;</span>')}),t.length?function(i){for(var r=0,s=t.length;r<s;r+=1)i=t[r](i);return l.Output.Formats[e.opt.mode].text_escape(i)}:l.Output.Formats[e.opt.mode].text_escape}else return function(i){return i}},SKIP_WORDS:["about","above","across","afore","after","against","al","along","alongside","amid","amidst","among","amongst","anenst","apropos","apud","around","as","aside","astride","at","athwart","atop","barring","before","behind","below","beneath","beside","besides","between","beyond","but","by","circa","despite","down","during","et","except","for","forenenst","from","given","in","inside","into","lest","like","modulo","near","next","notwithstanding","of","off","on","onto","out","over","per","plus","pro","qua","sans","since","than","through"," thru","throughout","thruout","till","to","toward","towards","under","underneath","until","unto","up","upon","versus","vs.","v.","vs","v","via","vis--vis","with","within","without","according to","ahead of","apart from","as for","as of","as per","as regards","aside from","back to","because of","close to","due to","except for","far from","inside of","instead of","near to","next to","on to","out from","out of","outside of","prior to","pursuant to","rather than","regardless of","such as","that of","up to","where as","or","yet","so","for","and","nor","a","an","the","de","d'","von","van","c","ca"],FORMAT_KEY_SEQUENCE:["@strip-periods","@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align","@quotes"],INSTITUTION_KEYS:["font-style","font-variant","font-weight","text-decoration","text-case"],SUFFIX_CHARS:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z",ROMAN_NUMERALS:[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xc"],["","c","cc","ccc","cd","d","dc","dcc","dccc","cm"],["","m","mm","mmm","mmmm","mmmmm"]],LANGS:{"af-ZA":"Afrikaans",ar:"Arabic","bg-BG":"Bulgarian","ca-AD":"Catalan","cs-CZ":"Czech","da-DK":"Danish","de-AT":"Austrian","de-CH":"German (CH)","de-DE":"German (DE)","el-GR":"Greek","en-GB":"English (GB)","en-US":"English (US)","es-ES":"Spanish","et-EE":"Estonian",eu:"European","fa-IR":"Persian","fi-FI":"Finnish","fr-CA":"French (CA)","fr-FR":"French (FR)","he-IL":"Hebrew","hr-HR":"Croatian","hu-HU":"Hungarian","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","km-KH":"Khmer","ko-KR":"Korean","lt-LT":"Lithuanian","lv-LV":"Latvian","mn-MN":"Mongolian","nb-NO":"Norwegian (Bokml)","nl-NL":"Dutch","nn-NO":"Norwegian (Nynorsk)","pl-PL":"Polish","pt-BR":"Portuguese (BR)","pt-PT":"Portuguese (PT)","ro-RO":"Romanian","ru-RU":"Russian","sk-SK":"Slovak","sl-SI":"Slovenian","sr-RS":"Serbian","sv-SE":"Swedish","th-TH":"Thai","tr-TR":"Turkish","uk-UA":"Ukrainian","vi-VN":"Vietnamese","zh-CN":"Chinese (CN)","zh-TW":"Chinese (TW)"},LANG_BASES:{af:"af_ZA",ar:"ar",bg:"bg_BG",ca:"ca_AD",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",et:"et_EE",eu:"eu",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",he:"he_IL",hr:"hr-HR",hu:"hu_HU",is:"is_IS",it:"it_IT",ja:"ja_JP",km:"km_KH",ko:"ko_KR",lt:"lt_LT",lv:"lv-LV",mn:"mn_MN",nb:"nb_NO",nl:"nl_NL",nn:"nn-NO",pl:"pl_PL",pt:"pt_PT",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sr:"sr_RS",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",vi:"vi_VN",zh:"zh_CN"},SUPERSCRIPTS:{:"a","":"2","":"3","":"1",:"o",:"h",:"",:"j",:"r",:"",:"",:"",:"w",:"y",:"",:"l",:"s",:"x",:"","":"A","":"","":"B","":"D","":"E","":"","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"","":"P","":"R","":"T","":"U","":"W","":"a","":"","":"","":"","":"b","":"d","":"e","":"","":"","":"","":"g","":"k","":"m","":"","":"o","":"","":"","":"","":"p","":"t","":"u","":"","":"","":"v","":"","":"","":"","":"","":"","":"","":"0","":"i","":"4","":"5","":"6","":"7","":"8","":"9","":"+","":"","":"=","":"(","":")",:"n","":"SM","":"TM","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"",:"",:"",:""},SUPERSCRIPTS_REGEXP:new RegExp("[]","g"),UPDATE_GROUP_CONTEXT_CONDITION:function(e,t,i,r,s){if(e.opt.use_context_condition){var n=e.tmp.group_context.tip;n.condition?(n.condition.termtxt||(n.condition.termtxt=t,n.condition.valueTerm=i),!n.value_seen&&n.condition.test==="comma-safe-numbers-only"&&s&&(n.value_seen=!0,s.match(/^[0-9]/)||(e.tmp.just_did_number=!1))):r&&r.decorations.filter(o=>o[0]==="@vertical-align").length>0||r&&r.strings.suffix?e.tmp.just_did_number=!1:t&&(t.match(/[0-9]$/)?e.tmp.just_did_number=!0:e.tmp.just_did_number=!1)}},EVALUATE_GROUP_CONDITION:function(e,t){if(e.opt.use_context_condition){var i,r=t.condition.test==="comma-safe-numbers-only";if(t.condition.test==="empty-label")i=!t.condition.termtxt;else if(t.condition.test==="empty-label-no-decor")i=!t.condition.termtxt||t.condition.termtxt.indexOf("%s")>-1;else if(["comma-safe","comma-safe-numbers-only"].indexOf(t.condition.test)>-1){var s=t.condition.termtxt,n=!1;t.condition.termtxt&&(n=t.condition.termtxt.slice(0,1).match(l.ALL_ROMANESQUE_REGEXP));var o=e.tmp.just_did_number;o?t.condition.valueTerm?i=!r:s?n?i=!r:["always","after-number"].indexOf(e.opt.require_comma_on_symbol)>-1?i=!0:i=!1:i=!0:t.condition.valueTerm?i=!1:s?n?i=!r:e.opt.require_comma_on_symbol==="always"?i=!0:i=!1:i=!1}if(i)var a=!1;else var a=!0;return t.condition.not&&(a=!a),a}},SYS_OPTIONS:["prioritize_disambiguate_condition","csl_reverse_lookup_support","main_title_from_short_title","uppercase_subtitles","force_short_title_casing_alignment","implicit_short_title","split_container_title"],TITLE_SPLIT_REGEXP:function(){var e=["\\.\\s+","\\!\\s+","\\?\\s+","\\s*::*\\s+","\\s*\\s*","\\s+\\-\\s+","\\s*\\-\\-\\-*\\s*"];return{match:new RegExp("("+e.join("|")+")","g"),matchfirst:new RegExp("^("+e.join("|")+")"),split:new RegExp("(?:"+e.join("|")+")")}}(),TITLE_SPLIT:function(e){if(!e)return e;for(var t=e.match(l.TITLE_SPLIT_REGEXP.match),i=e.split(l.TITLE_SPLIT_REGEXP.split),r=i.length-2;r>-1;r--)i[r]=i[r].trim(),i[r]&&i[r].slice(-1).toLowerCase()!==i[r].slice(-1)?(i[r]=i[r]+t[r]+i[r+1],i=i.slice(0,r+1).concat(i.slice(r+2))):i=i.slice(0,r+1).concat([t[r]]).concat(i.slice(r+1));return i},GET_COURT_CLASS:function(e,t,i){var r="",s=null,n=t.jurisdiction?t.jurisdiction.split(":")[0]:null,o="court_condition_classes";return i&&(o="court_key_classes"),n&&t.authority&&(typeof t.authority=="string"?s=t.authority:t.authority[0]&&t.authority[0].literal&&(s=t.authority[0].literal)),s&&(this.lang&&e.locale[this.lang].opts[o]&&e.locale[this.lang].opts[o][n]&&e.locale[this.lang].opts[o][n][s]?r=e.locale[this.lang].opts[o][n][s]:e.locale[e.opt["default-locale"][0]].opts[o]&&e.locale[e.opt["default-locale"][0]].opts[o][n]&&e.locale[e.opt["default-locale"][0]].opts[o][n][s]&&(r=e.locale[e.opt["default-locale"][0]].opts[o][n][s])),r},SET_COURT_CLASSES:function(e,t,i,r){for(var s=i.getNodesByName(r,"court-class"),n=0,o=i.numberofnodes(s);n<o;n+=1){var a=s[n],u=i.attributes(a),f=u["@name"],c=u["@country"],h=u["@courts"],p="court_key_classes";if(e.registry&&(p="court_condition_classes"),f&&c&&h){h=h.trim().split(/\s+/),e.locale[t].opts[p]||(e.locale[t].opts[p]={}),e.locale[t].opts[p][c]||(e.locale[t].opts[p][c]={});for(var T=0,w=h.length;T<w;T++)e.locale[t].opts[p][c][h[T]]=f}}},INIT_JURISDICTION_MACROS:function(e,t,i,r){if(t["best-jurisdiction"])return!0;if(!e.sys.retrieveStyleModule||!l.MODULE_MACROS[r]||!t.jurisdiction)return!1;var a=e.getJurisdictionList(t.jurisdiction);if(!e.opt.jurisdictions_seen[a[0]]){var s=e.retrieveAllStyleModules(a);for(var n in s){var o=e.loadStyleModule(n,s[n]);o&&(s[o]||(Object.assign(s,e.retrieveAllStyleModules([o])),e.loadStyleModule(o,s[o],!0)))}}var a=e.getJurisdictionList(t.jurisdiction);e.opt.parallel.enable&&(e.parallel||(e.parallel=new l.Parallel(e)));for(var u=0,f=a.length;u<f;u++){var n=a[u];if(i&&e.juris[n]&&!i["best-jurisdiction"]&&e.juris[n].types.locator&&(t["best-jurisdiction"]=n),e.juris[n]&&e.juris[n].types[t.type])return t["best-jurisdiction"]=n,!0}return!1}};l.XmlJSON=function(e){this.dataObj=e,this.institution={name:"institution",attrs:{"institution-parts":"long",delimiter:", "},children:[{name:"institution-part",attrs:{name:"long"},children:[]}]}};l.XmlJSON.prototype.clean=function(e){return e};l.XmlJSON.prototype.getStyleId=function(e,t){var i="id";t&&(i="title");for(var r="",s=e.children,n=0,o=s.length;n<o;n++)if(s[n].name==="info")for(var a=s[n].children,u=0,f=a.length;u<f;u++)a[u].name===i&&(r=a[u].children[0]);return r};l.XmlJSON.prototype.children=function(e){return e&&e.children.length?e.children.slice():!1};l.XmlJSON.prototype.nodename=function(e){return e?e.name:null};l.XmlJSON.prototype.attributes=function(e){var t={};for(var i in e.attrs)t["@"+i]=e.attrs[i];return t};l.XmlJSON.prototype.content=function(e){var t="";if(!e||!e.children)return t;for(var i=0,r=e.children.length;i<r;i+=1)typeof e.children[i]=="string"&&(t+=e.children[i]);return t};l.XmlJSON.prototype.namespace={};l.XmlJSON.prototype.numberofnodes=function(e){return e&&typeof e.length=="number"?e.length:0};l.XmlJSON.prototype.getAttributeValue=function(e,t,i){var r="";return i&&(t=i+":"+t),e&&e.attrs&&(e.attrs[t]?r=e.attrs[t]:r=""),r};l.XmlJSON.prototype.getNodeValue=function(e,t){var i="";if(t)for(var r=0,s=e.children.length;r<s;r+=1)e.children[r].name===t&&(e.children[r].children.length?i=e.children[r]:i="");else e&&(i=e);return i&&i.children&&i.children.length==1&&typeof i.children[0]=="string"&&(i=i.children[0]),i};l.XmlJSON.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,i,r,s){r.slice(0,1)==="@"&&(r=r.slice(1));for(var n=0,o=e.children.length;n<o;n+=1)e.children[n].name===t&&e.children[n].attrs.name===i&&(e.children[n].attrs[r]=s)};l.XmlJSON.prototype.deleteNodeByNameAttribute=function(e,t){var i,r;for(i=0,r=e.children.length;i<r;i+=1)!e.children[i]||typeof e.children[i]=="string"||e.children[i].attrs.name==t&&(e.children=e.children.slice(0,i).concat(e.children.slice(i+1)))};l.XmlJSON.prototype.deleteAttribute=function(e,t){typeof e.attrs[t]<"u"&&e.attrs.pop(t)};l.XmlJSON.prototype.setAttribute=function(e,t,i){return e.attrs[t]=i,!1};l.XmlJSON.prototype.nodeCopy=function(e,t){if(!t)var t={};if(typeof t=="object"&&typeof t.length>"u")for(var i in e)typeof e[i]=="string"?t[i]=e[i]:typeof e[i]=="object"&&(typeof e[i].length>"u"?t[i]=this.nodeCopy(e[i],{}):t[i]=this.nodeCopy(e[i],[]));else for(var r=0,s=e.length;r<s;r+=1)typeof e[r]=="string"?t[r]=e[r]:t[r]=this.nodeCopy(e[r],{});return t};l.XmlJSON.prototype.getNodesByName=function(e,t,i,r){if(!r)var r=[];if(!e||!e.children)return r;t===e.name&&(i?i===e.attrs.name&&r.push(e):r.push(e));for(var s=0,n=e.children.length;s<n;s+=1)typeof e.children[s]=="object"&&this.getNodesByName(e.children[s],t,i,r);return r};l.XmlJSON.prototype.nodeNameIs=function(e,t){return typeof e>"u"?!1:t==e.name};l.XmlJSON.prototype.makeXml=function(e){return typeof e=="string"&&(e.slice(0,1)==="<"?e=this.jsonStringWalker.walkToObject(e):e=JSON.parse(e)),e};l.XmlJSON.prototype.insertChildNodeAfter=function(e,t,i,r){for(var s=0,n=e.children.length;s<n;s+=1)if(t===e.children[s]){e.children=e.children.slice(0,s).concat([r]).concat(e.children.slice(s+1));break}return e};l.XmlJSON.prototype.insertPublisherAndPlace=function(e){if(e.name==="group"){for(var t=!0,i=["publisher","publisher-place"],r=0,s=e.children.length;r<s;r+=1){var n=i.indexOf(e.children[r].attrs.variable),o=e.children[r].name==="text";if(o&&n>-1&&!e.children[r].attrs.prefix&&!e.children[r].attrs.suffix)i=i.slice(0,n).concat(i.slice(n+1));else{t=!1;break}}t&&!i.length&&(e.attrs["has-publisher-and-publisher-place"]=!0)}for(var r=0,s=e.children.length;r<s;r+=1)typeof e.children[r]=="object"&&this.insertPublisherAndPlace(e.children[r])};l.XmlJSON.prototype.isChildOfSubstitute=function(e){if(e.length>0){var t=e.slice(),i=t.pop();return i==="substitute"?!0:this.isChildOfSubstitute(t)}return!1};l.XmlJSON.prototype.addMissingNameNodes=function(e,t){if(t||(t=[]),e.name==="names"&&!this.isChildOfSubstitute(t)){for(var i=!0,r=0,s=e.children.length;r<s;r++)if(e.children[r].name==="name"){i=!1;break}i&&(e.children=[{name:"name",attrs:{},children:[]}].concat(e.children))}t.push(e.name);for(var r=0,s=e.children.length;r<s;r+=1)typeof e.children[r]=="object"&&this.addMissingNameNodes(e.children[r],t);t.pop()};l.XmlJSON.prototype.addInstitutionNodes=function(e){var t;if(e.name==="names"){for(var i={},r=-1,s=0,n=e.children.length;s<n;s+=1){if(e.children[s].name=="name"){for(var o in e.children[s].attrs)i[o]=e.children[s].attrs[o];i.delimiter=e.children[s].attrs.delimiter,i.and=e.children[s].attrs.and,r=s;for(var a=0,u=e.children[s].children.length;a<u;a+=1)if(e.children[s].children[a].attrs.name==="family")for(var o in e.children[s].children[a].attrs)i[o]=e.children[s].children[a].attrs[o]}if(e.children[s].name=="institution"){r=-1;break}}if(r>-1){for(var t=this.nodeCopy(this.institution),s=0,n=l.INSTITUTION_KEYS.length;s<n;s+=1){var f=l.INSTITUTION_KEYS[s];typeof i[f]<"u"&&(t.children[0].attrs[f]=i[f]),i.delimiter&&(t.attrs.delimiter=i.delimiter),i.and&&(t.attrs.and=i.and)}e.children=e.children.slice(0,r+1).concat([t]).concat(e.children.slice(r+1))}}for(var s=0,n=e.children.length;s<n;s+=1)typeof e.children[s]!="string"&&this.addInstitutionNodes(e.children[s])};l.XmlJSON.prototype.flagDateMacros=function(e){for(var t=0,i=e.children.length;t<i;t+=1)e.children[t].name==="macro"&&this.inspectDateMacros(e.children[t])&&(e.children[t].attrs["macro-has-date"]="true")};l.XmlJSON.prototype.inspectDateMacros=function(e){if(!e||!e.children)return!1;if(e.name==="date")return!0;for(var t=0,i=e.children.length;t<i;t+=1)if(this.inspectDateMacros(e.children[t]))return!0;return!1};l.stripXmlProcessingInstruction=function(e){return e&&(e=e.replace(/^<\?[^?]+\?>/,""),e=e.replace(/<!--[^>]+-->/g,""),e=e.replace(/^\s+/g,""),e=e.replace(/\s+$/g,""),e)};l.parseXml=function(e){var t={children:[]},i=[t.children];function r(d){d=d.split(/(?:\r\n|\n|\r)/).join(" ").replace(/>[	 ]+</g,"><").replace(/<\!--.*?-->/g,"");for(var S=d.split("><"),g=null,b=0,I=S.length;b<I;b++)b>0&&(S[b]="<"+S[b]),b<S.length-1&&(S[b]=S[b]+">"),typeof g!="number"&&(S[b].slice(0,7)==="<style "||S[b].slice(0,8)=="<locale ")&&(g=b);S=S.slice(g);for(var b=S.length-2;b>-1;b--)if(S[b].slice(1).indexOf("<")===-1){var N=S[b].slice(0,5);S[b].slice(-2)!=="/>"&&(N==="<term"?S[b+1].slice(0,6)==="</term"&&(S[b]=S[b]+S[b+1],S=S.slice(0,b+1).concat(S.slice(b+2))):["<sing","<mult"].indexOf(N)>-1&&S[b].slice(-2)!=="/>"&&S[b+1].slice(0,1)==="<"&&(S[b]=S[b]+S[b+1],S=S.slice(0,b+1).concat(S.slice(b+2))))}return S}function s(d){return d.split("&amp;").join("&").split("&quot;").join('"').split("&gt;").join(">").split("&lt;").join("<").replace(/&#([0-9]{1,6});/gi,function(S,g){var b=parseInt(g,10);return String.fromCharCode(b)}).replace(/&#x([a-f0-9]{1,6});/gi,function(S,g){var b=parseInt(g,16);return String.fromCharCode(b)})}function n(d){var S=d.match(/([^\'\"=	 ]+)=(?:\"[^\"]*\"|\'[^\']*\')/g);if(S)for(var g=0,b=S.length;g<b;g++)S[g]=S[g].replace(/=.*/,"");return S}function o(d,S){var g=RegExp("^.*[	 ]+"+S+`=("(?:[^"]*)"|'(?:[^']*)').*$`),b=d.match(g);return b?b[1].slice(1,-1):null}function a(d){var S=RegExp("^<([^	 />]+)"),g=d.match(S);return g?g[1]:null}function u(d){var S={};S.name=a(d),S.attrs={};var g=n(d);if(g)for(var b=0,I=g.length;b<I;b++){var N={name:g[b],value:o(d,g[b])};S.attrs[N.name]=s(N.value)}return S.children=[],S}function f(d){var S=d.match(/^.*>([^<]*)<.*$/);return s(S[1])}function c(d){i.slice(-1)[0].push(d)}function h(d){i.push(d.children)}function p(d){var S;if(d.slice(1).indexOf("<")>-1){var g=d.slice(0,d.indexOf(">")+1);S=u(g),S.children=[f(d)],c(S)}else d.slice(-2)==="/>"?(S=u(d),a(d)==="term"&&S.children.push(""),c(S)):d.slice(0,2)==="</"?i.pop():(S=u(d),c(S),h(S))}for(var T=r(e),w=0,m=T.length;w<m;w++){var O=T[w];p(O)}return t.children[0]};l.XmlDOM=function(e){this.dataObj=e,typeof DOMParser>"u"?(DOMParser=function(){},DOMParser.prototype.parseFromString=function(n,o){if(typeof ActiveXObject<"u"){var a=new ActiveXObject("MSXML.DomDocument");return a.async=!1,a.loadXML(n),a}else if(typeof XMLHttpRequest<"u"){var a=new XMLHttpRequest;return o||(o="text/xml"),a.open("GET","data:"+o+";charset=utf-8,"+encodeURIComponent(n),!1),a.overrideMimeType&&a.overrideMimeType(o),a.send(null),a.responseXML}else if(typeof marknote<"u"){var u=new marknote.Parser;return u.parse(n)}},this.hasAttributes=function(n){var o;return n.attributes&&n.attributes.length?o=!0:o=!1,o}):this.hasAttributes=function(n){var o;return n.attributes&&n.attributes.length?o=!0:o=!1,o},this.importNode=function(n,o){var a;return typeof n.importNode>"u"?a=this._importNode(n,o,!0):a=n.importNode(o,!0),a},this._importNode=function(n,o,a){switch(o.nodeType){case 1:var u=n.createElement(o.nodeName);if(o.attributes&&o.attributes.length>0)for(var f=0,c=o.attributes.length;f<c;)u.setAttribute(o.attributes[f].nodeName,o.getAttribute(o.attributes[f++].nodeName));if(a&&o.childNodes&&o.childNodes.length>0)for(var f=0,c=o.childNodes.length;f<c;)u.appendChild(this._importNode(n,o.childNodes[f++],a));return u}},this.parser=new DOMParser;var t='<docco><institution institution-parts="long" delimiter=", " substitute-use-first="1" use-last="1"><institution-part name="long"/></institution></docco>',i=this.parser.parseFromString(t,"text/xml"),r=i.getElementsByTagName("institution");this.institution=r.item(0);var s=i.getElementsByTagName("institution-part");this.institutionpart=s.item(0),this.ns="http://purl.org/net/xbiblio/csl"};l.XmlDOM.prototype.clean=function(e){return e=e.replace(/<\?[^?]+\?>/g,""),e=e.replace(/<![^>]+>/g,""),e=e.replace(/^\s+/,""),e=e.replace(/\s+$/,""),e=e.replace(/^\n*/,""),e};l.XmlDOM.prototype.getStyleId=function(e,t){var i="",r="id";t&&(r="title");var s=e.getElementsByTagName(r);return s&&s.length&&(s=s.item(0)),s&&(i=s.textContent),i||(i=s.innerText),i||(i=s.innerHTML),i};l.XmlDOM.prototype.children=function(e){var t,i,r,s;if(e){for(s=[],t=e.childNodes,i=0,r=t.length;i<r;i+=1)t[i].nodeName!="#text"&&s.push(t[i]);return s}else return[]};l.XmlDOM.prototype.nodename=function(e){var t=e.nodeName;return t};l.XmlDOM.prototype.attributes=function(e){var t,i,r,s,n;if(t=new Object,e&&this.hasAttributes(e))for(i=e.attributes,s=0,n=i.length;s<n;s+=1)r=i[s],t["@"+r.name]=r.value;return t};l.XmlDOM.prototype.content=function(e){var t;return typeof e.textContent<"u"?t=e.textContent:typeof e.innerText<"u"?t=e.innerText:t=e.txt,t};l.XmlDOM.prototype.namespace={xml:"http://www.w3.org/XML/1998/namespace"};l.XmlDOM.prototype.numberofnodes=function(e){return e?e.length:0};l.XmlDOM.prototype.getAttributeName=function(e){var t=e.name;return t};l.XmlDOM.prototype.getAttributeValue=function(e,t,i){var r="";return i&&(t=i+":"+t),e&&this.hasAttributes(e)&&e.getAttribute(t)&&(r=e.getAttribute(t)),r};l.XmlDOM.prototype.getNodeValue=function(e,t){var i=null;if(t){var r=e.getElementsByTagName(t);r.length>0&&(typeof r[0].textContent<"u"?i=r[0].textContent:typeof r[0].innerText<"u"?i=r[0].innerText:i=r[0].text)}return i===null&&e&&e.childNodes&&(e.childNodes.length==0||e.childNodes.length==1&&e.firstChild.nodeName=="#text")&&(typeof e.textContent<"u"?i=e.textContent:typeof e.innerText<"u"?i=e.innerText:i=e.text),i===null&&(i=e),i};l.XmlDOM.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,i,r,s){var n,o,a,u;for(r.slice(0,1)==="@"&&(r=r.slice(1)),a=e.getElementsByTagName(t),n=0,o=a.length;n<o;n+=1)u=a[n],u.getAttribute("name")==i&&u.setAttribute(r,s)};l.XmlDOM.prototype.deleteNodeByNameAttribute=function(e,t){var i,r,s,n;for(n=e.childNodes,i=0,r=n.length;i<r;i+=1)s=n[i],!(!s||s.nodeType==s.TEXT_NODE)&&this.hasAttributes(s)&&s.getAttribute("name")==t&&e.removeChild(n[i])};l.XmlDOM.prototype.deleteAttribute=function(e,t){e.removeAttribute(t)};l.XmlDOM.prototype.setAttribute=function(e,t,i){return e.ownerDocument||(e=e.firstChild),["function","unknown"].indexOf(typeof e.setAttribute)>-1&&e.setAttribute(t,i),!1};l.XmlDOM.prototype.nodeCopy=function(e){var t=e.cloneNode(!0);return t};l.XmlDOM.prototype.getNodesByName=function(e,t,i){var r,s,n,o,a;for(r=[],s=e.getElementsByTagName(t),o=0,a=s.length;o<a;o+=1)n=s.item(o),!(i&&!(this.hasAttributes(n)&&n.getAttribute("name")==i))&&r.push(n);return r};l.XmlDOM.prototype.nodeNameIs=function(e,t){return t==e.nodeName};l.XmlDOM.prototype.makeXml=function(e){e||(e="<docco><bogus/></docco>"),e=e.replace(/\s*<\?[^>]*\?>\s*\n*/g,"");var t=this.parser.parseFromString(e,"application/xml");return t.firstChild};l.XmlDOM.prototype.insertChildNodeAfter=function(e,t,i,r){var s;return s=this.importNode(t.ownerDocument,r),e.replaceChild(s,t),e};l.XmlDOM.prototype.insertPublisherAndPlace=function(e){for(var t=e.getElementsByTagName("group"),i=0,r=t.length;i<r;i+=1){for(var s=t.item(i),n=[],o=0,a=s.childNodes.length;o<a;o+=1)s.childNodes.item(o).nodeType!==1&&n.push(o);if(s.childNodes.length-n.length===2){for(var u=[],o=0,a=2;o<a;o+=1)if(!(n.indexOf(o)>-1)){for(var f=s.childNodes.item(o),c=[],h=0,p=f.childNodes.length;h<p;h+=1)f.childNodes.item(h).nodeType!==1&&c.push(h);if(f.childNodes.length-c.length===0&&(u.push(f.getAttribute("variable")),f.getAttribute("suffix")||f.getAttribute("prefix"))){u=[];break}}u.indexOf("publisher")>-1&&u.indexOf("publisher-place")>-1&&s.setAttribute("has-publisher-and-publisher-place",!0)}}};l.XmlDOM.prototype.isChildOfSubstitute=function(e){return e.parentNode?e.parentNode.tagName.toLowerCase()==="substitute"?!0:this.isChildOfSubstitute(e.parentNode):!1};l.XmlDOM.prototype.addMissingNameNodes=function(e){for(var t=e.getElementsByTagName("names"),i=0,r=t.length;i<r;i+=1){var s=t.item(i),n=s.getElementsByTagName("name");if((!n||n.length===0)&&!this.isChildOfSubstitute(s)){var o=s.ownerDocument,a=o.createElement("name");s.appendChild(a)}}};l.XmlDOM.prototype.addInstitutionNodes=function(e){var t,i,r,s,n,o,a,u,f;for(t=e.getElementsByTagName("names"),u=0,f=t.length;u<f;u+=1)if(i=t.item(u),o=i.getElementsByTagName("name"),o.length!=0&&(r=i.getElementsByTagName("institution"),r.length==0)){s=this.importNode(e.ownerDocument,this.institution),n=s.getElementsByTagName("institution-part").item(0),a=o.item(0),i.insertBefore(s,a.nextSibling);for(var c=0,h=l.INSTITUTION_KEYS.length;c<h;c+=1){var p=l.INSTITUTION_KEYS[c],T=a.getAttribute(p);T&&n.setAttribute(p,T)}for(var w=a.getElementsByTagName("name-part"),c=0,h=w.length;c<h;c+=1)if(w[c].getAttribute("name")==="family")for(var m=0,O=l.INSTITUTION_KEYS.length;m<O;m+=1){var p=l.INSTITUTION_KEYS[m],T=w[c].getAttribute(p);T&&n.setAttribute(p,T)}}};l.XmlDOM.prototype.flagDateMacros=function(e){var t,i,r,s,n=e.getElementsByTagName("macro");for(t=0,i=n.length;t<i;t+=1)r=n.item(t),s=r.getElementsByTagName("date"),s.length&&r.setAttribute("macro-has-date","true")};l.setupXml=function(e){var t={},i=null;return typeof e<"u"?typeof e=="string"?(e=e.replace("^\uFEFF","").replace(/^\s+/,""),e.slice(0,1)==="<"?t=l.parseXml(e):t=JSON.parse(e),i=new l.XmlJSON(t)):typeof e.getAttribute<"u"?i=new l.XmlDOM(e):typeof e.toXMLString<"u"?i=new l.XmlE4X(e):i=new l.XmlJSON(e):l.error("unable to parse XML input"),i||l.error("citeproc-js error: unable to parse CSL style or locale object"),i};l.getSortCompare=function(e){if(l.stringCompare)return l.stringCompare;var t=this,i,r={sensitivity:"base",ignorePunctuation:!0,numeric:!0};e||(e="en-US"),i=function(u,f){return l.toLocaleLowerCase.call(t,u).localeCompare(l.toLocaleLowerCase.call(t,f),e,r)};var s=function(u){return u.replace(/^[\[\]\'\"]*/g,"")},n=function(){return i("[x","x")?function(u,f){return i(s(u),s(f))}:!1},o=n(),a=function(u,f){return o?o(u,f):i(u,f)};return a};l.ambigConfigDiff=function(e,t){var i,r,s,n;if(e.names.length!==t.names.length)return 1;for(i=0,r=e.names.length;i<r;i+=1){if(e.names[i]!==t.names[i])return 1;for(s=0,n=e.givens[i];s<n;s+=1)if(e.givens[i][s]!==t.givens[i][s])return 1}return e.disambiguate!=t.disambiguate||e.year_suffix!==t.year_suffix?1:0};l.cloneAmbigConfig=function(e,t){var i,r,s,n,o,a={};for(a.names=[],a.givens=[],a.year_suffix=!1,a.disambiguate=!1,i=0,r=e.names.length;i<r;i+=1)o=e.names[i],a.names[i]=o;for(i=0,r=e.givens.length;i<r;i+=1){for(o=[],s=0,n=e.givens[i].length;s<n;s+=1)o.push(e.givens[i][s]);a.givens.push(o)}return t?(a.year_suffix=t.year_suffix,a.disambiguate=t.disambiguate):(a.year_suffix=e.year_suffix,a.disambiguate=e.disambiguate),a};l.getAmbigConfig=function(){var e,t;e=this.tmp.disambig_request,e||(e=this.tmp.disambig_settings);var t=l.cloneAmbigConfig(e);return t};l.getMaxVals=function(){return this.tmp.names_max.mystack.slice()};l.getMinVal=function(){return this.tmp["et-al-min"]};l.tokenExec=function(e,t,i){var r,s,n,o;o=!1,r=e.next,s=!1;var a=function(c){return c?(this.tmp.jump.replace("succeed"),e.succeed):(this.tmp.jump.replace("fail"),e.fail)};e.test&&(r=a.call(this,e.test(t,i)));for(var u=0,f=e.execs.length;u<f;u++)n=e.execs[u],s=n.call(e,this,t,i),s&&(r=s);return o&&l.debug(e.name+" ("+e.tokentype+") ---> done"),r};l.expandMacro=function(e,t){var i,r,s,n;i=e.postponed_macro;var o=e.strings.sort_direction;e=new l.Token("group",l.START);var a=!1,u=!1;r=this.cslXml.getNodesByName(this.cslXml.dataObj,"macro",i),r.length&&(u=this.cslXml.getAttributeValue(r[0],"cslid"),a=this.cslXml.getAttributeValue(r[0],"macro-has-date")),a&&(i=i+"@"+this.build.current_default_locale,n=function(h){h.tmp.extension&&(h.tmp["doing-macro-with-date"]=!0)},e.execs.push(n)),this.build.macro_stack.indexOf(i)>-1?l.error('CSL processor error: call to macro "'+i+'" would cause an infinite loop'):this.build.macro_stack.push(i),e.cslid=u,l.MODULE_MACROS[i]&&(e.juris=i,this.opt.update_mode=l.POSITION),l.Node.group.build.call(e,this,t,!0),this.cslXml.getNodeValue(r)||l.error('CSL style error: undefined macro "'+i+'"');var f=l.getMacroTarget.call(this,i);if(f&&(l.buildMacro.call(this,f,r),l.configureMacro.call(this,f)),!this.build.extension){var n=function(p){return function(T,w,m){for(var O=0;O<T.macros[p].length;)O=l.tokenExec.call(T,T.macros[p][O],w,m)}}(i),c=new l.Token("text",l.SINGLETON);c.execs.push(n),t.push(c)}s=new l.Token("group",l.END),s.strings.sort_direction=o,a&&(n=function(h){h.tmp.extension&&(h.tmp["doing-macro-with-date"]=!1)},s.execs.push(n)),e.juris&&(s.juris=i),l.Node.group.build.call(s,this,t,!0),this.build.macro_stack.pop()};l.getMacroTarget=function(e){var t=!1;return this.build.extension?t=this[this.build.root+this.build.extension].tokens:this.macros[e]||(t=[],this.macros[e]=t),t};l.buildMacro=function(e,t){var i=l.makeBuilder(this,e),r;typeof t.length>"u"?r=t:r=t[0],i(r)};l.configureMacro=function(e){this.build.extension||this.configureTokenList(e)};l.XmlToToken=function(e,t,i,r){var s,n,o,a,u,f,c;if(s=e.cslXml.nodename(this),!(e.build.skip&&e.build.skip!==s)){if(!s){n=e.cslXml.content(this),n&&(e.build.text=n);return}if(l.Node[e.cslXml.nodename(this)]||l.error('Undefined node name "'+s+'".'),o=e.cslXml.attributes(this),a=l.setDecorations.call(this,e,o),u=new l.Token(s,t),t!==l.END||s==="if"||s==="else-if"||s==="layout"){for(var f in o)if(o.hasOwnProperty(f)){if(t===l.END&&f!=="@language"&&f!=="@locale")continue;if(o.hasOwnProperty(f))if(l.Attributes[f])try{l.Attributes[f].call(u,e,""+o[f])}catch(p){l.error(f+" attribute: "+p)}else l.debug('warning: undefined attribute "'+f+'" in style')}u.decorations=a,l.DATE_VARIABLES.indexOf(o["@variable"])>-1&&r.push(u.variables)}else t===l.END&&o["@variable"]&&(u.hasVariable=!0,l.DATE_VARIABLES.indexOf(o["@variable"])>-1&&(u.variables=r.pop()));i?c=i:c=e[e.build.area].tokens,l.Node[s].build.call(u,e,c,!0)}};l.DateParser=function(){for(var e=[["",1867],["",1911],["",1925],["",1988]],t=0,i=e.length;t<i;t++){e[t][0];var r=e[t][1]}for(var s=[],n={},t=0,i=e.length;t<i;t++){var o=e[t],r=o[0];s.push(r),n[o[0]]=o[1]}var a=s.join("|"),u=new RegExp("(?:"+a+")(?:[0-9]+)"),f=new RegExp("(?:"+a+")(?:[0-9]+)","g"),c=/(\u6708|\u5E74)/g,h=/\u65E5/g,p=/\u301c/g,T="(?:[?0-9]{1,2}%%NUMD%%){0,2}[?0-9]{4}(?![0-9])",w="[?0-9]{4}(?:%%NUMD%%[?0-9]{1,2}){0,2}(?![0-9])",m="[?0-9]{1,3}",O="[%%DATED%%]",d="[?~]",S="[^-/~?0-9]+",g="("+w+"|"+T+"|"+m+"|"+O+"|"+d+"|"+S+")",b=new RegExp(g.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"-")),I=new RegExp(g.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"/")),N=new RegExp(g.replace(/%%NUMD%%/g,"/").replace(/%%DATED%%/g,"-")),q="january february march april may june july august september october november december spring summer fall winter spring summer";this.monthStrings=q.split(" "),this.setOrderDayMonth=function(){this.monthGuess=1,this.dayGuess=0},this.setOrderMonthDay=function(){this.monthGuess=0,this.dayGuess=1},this.resetDateParserMonths=function(){this.monthSets=[];for(var A=0,_=this.monthStrings.length;A<_;A++)this.monthSets.push([this.monthStrings[A]]);this.monthAbbrevs=[];for(var A=0,_=this.monthSets.length;A<_;A++){this.monthAbbrevs.push([]);for(var B=0,$=this.monthSets[A].length;B<$;B++)this.monthAbbrevs[A].push(this.monthSets[A][0].slice(0,3))}this.monthRexes=[];for(var A=0,_=this.monthAbbrevs.length;A<_;A++)this.monthRexes.push(new RegExp("(?:"+this.monthAbbrevs[A].join("|")+")"))},this.addDateParserMonths=function(A){if(typeof A=="string"&&(A=A.split(/\s+/)),A.length!==12&&A.length!==16){l.debug("month [+season] list of "+A.length+", expected 12 or 16. Ignoring.");return}for(var _=0,B=A.length;_<B;_++){for(var $=null,X=!1,J=3,Y={},ne=0,re=this.monthAbbrevs.length;ne<re;ne++){if(Y[ne]={},ne===_){for(var ee=0,K=this.monthAbbrevs[_].length;ee<K;ee++)if(this.monthAbbrevs[_][ee]===A[_].slice(0,this.monthAbbrevs[_][ee].length)){X=!0;break}}else for(var ee=0,K=this.monthAbbrevs[ne].length;ee<K;ee++)if($=this.monthAbbrevs[ne][ee].length,this.monthAbbrevs[ne][ee]===A[_].slice(0,$)){for(;this.monthSets[ne][ee].slice(0,$)===A[_].slice(0,$);)if($>A[_].length||$>this.monthSets[ne][ee].length){l.debug("unable to disambiguate month string in date parser: "+A[_]);break}else $+=1;J=$,Y[ne][ee]=$}for(var pe in Y)for(var ue in Y[pe])$=Y[pe][ue],pe=parseInt(pe,10),ue=parseInt(ue,10),this.monthAbbrevs[pe][ue]=this.monthSets[pe][ue].slice(0,$)}X||(this.monthSets[_].push(A[_]),this.monthAbbrevs[_].push(A[_].slice(0,J)))}this.monthRexes=[],this.monthRexStrs=[];for(var _=0,B=this.monthAbbrevs.length;_<B;_++)this.monthRexes.push(new RegExp("^(?:"+this.monthAbbrevs[_].join("|")+")")),this.monthRexStrs.push("^(?:"+this.monthAbbrevs[_].join("|")+")");if(this.monthAbbrevs.length===18)for(var _=12,B=14;_<B;_++)this.monthRexes[_+4]=new RegExp("^(?:"+this.monthAbbrevs[_].join("|")+")"),this.monthRexStrs[_+4]="^(?:"+this.monthAbbrevs[_].join("|")+")"},this.convertDateObjectToArray=function(A){A["date-parts"]=[],A["date-parts"].push([]);for(var _=0,B,$=0,X=3;$<X&&(B=["year","month","day"][$],!!A[B]);$++)_+=1,A["date-parts"][0].push(A[B]),delete A[B];A["date-parts"].push([]);for(var $=0,X=_;$<X&&(B=["year_end","month_end","day_end"][$],!!A[B]);$++)A["date-parts"][1].push(A[B]),delete A[B];return A["date-parts"][0].length!==A["date-parts"][1].length&&A["date-parts"].pop(),A},this.convertDateObjectToString=function(A){for(var _=[],B=0,$=3;B<$&&A[l.DATE_PARTS_ALL[B]];B+=1)_.push(A[l.DATE_PARTS_ALL[B]]);return _.join("-")},this._parseNumericDate=function(A,_,B,$){B||(B="");for(var X=$.split(_),J=0,Y=X.length;J<Y;J++)if(X[J].length===4){A["year"+B]=X[J].replace(/^0*/,""),J?X=X.slice(0,J):X=X.slice(1);break}for(var J=0,Y=X.length;J<Y;J++)X[J]=parseInt(X[J],10);if(X.length===1||X.length===2&&!X[1]){var ne=X[0];ne&&(A["month"+B]=""+X[0])}else if(X.length===2)if(X[this.monthGuess]>12){var ne=X[this.dayGuess],re=X[this.monthGuess];ne&&(A["month"+B]=""+ne,re&&(A["day"+B]=""+re))}else{var ne=X[this.monthGuess],re=X[this.dayGuess];ne&&(A["month"+B]=""+ne,re&&(A["day"+B]=""+re))}},this.parseDateToObject=function(A){var _=A,B=-1,$=-1,X=!1,J;if(A){if(A=A.replace(/^(.*[0-9])T[0-9].*/,"$1"),A.slice(0,1)==="-"&&(X=!0,A=A.slice(1)),A.match(/^[0-9]{1,3}$/))for(;A.length<4;)A="0"+A;A=""+A,A=A.replace(/\s*[0-9]{2}:[0-9]{2}(?::[0-9]+)/,"");var Y=A.match(c);if(Y){A=A.replace(/\s+/g,""),A=A.replace(h,""),A=A.replace(c,"-"),A=A.replace(p,"/"),A=A.replace(/\-\//g,"/"),A=A.replace(/-$/g,"");var ne=A.split(u);J=[];var re=A.match(f);if(re){for(var ee=[],K=0,pe=re.length;K<pe;K++)ee=ee.concat(re[K].match(/([^0-9]+)([0-9]+)/).slice(1));for(var K=0,pe=ne.length;K<pe;K++)if(J.push(ne[K]),K!==pe-1){var ue=K*2;J.push(ee[ue]),J.push(ee[ue+1])}}else J=ne;for(var K=1,pe=J.length;K<pe;K+=3)J[K+1]=n[J[K]]+parseInt(J[K+1],10),J[K]="";A=J.join(""),A=A.replace(/\s*-\s*$/,"").replace(/\s*-\s*\//,"/"),A=A.replace(/\.\s*$/,""),A=A.replace(/\.(?! )/,""),B=A.indexOf("/"),$=A.indexOf("-")}}A=A.replace(/([A-Za-z])\./g,"$1");var z="",te="",F={},V,Z;if(A.slice(0,1)==='"'&&A.slice(-1)==='"')return F.literal=A.slice(1,-1),F;if(B>-1&&$>-1){var M=A.split("/");M.length>3?(V="-",A=A.replace(/\_/g,"-"),Z="/",J=A.split(N)):(V="/",A=A.replace(/\_/g,"/"),Z="-",J=A.split(I))}else A=A.replace(/\//g,"-"),A=A.replace(/\_/g,"-"),V="-",Z="-",J=A.split(b);for(var x=[],K=0,pe=J.length;K<pe;K++){var Y=J[K].match(/^\s*([\-\/]|[^\-\/\~\?0-9]+|[\-~?0-9]+)\s*$/);Y&&x.push(Y[1])}var v=x.indexOf(V),j=[],L=!1;v>-1?(j.push([0,v]),j.push([v+1,x.length]),L=!0):j.push([0,x.length]);for(var R="",K=0,pe=j.length;K<pe;K++){var D=j[K],k=x.slice(D[0],D[1]);e:for(var P=0,G=k.length;P<G;P++){var Q=k[P];if(Q.indexOf(Z)>-1){this._parseNumericDate(F,Z,R,Q);continue}if(Q.match(/[0-9]{4}/)){F["year"+R]=Q.replace(/^0*/,"");continue}(Q==="~"||Q==="?"||Q==="c"||Q.match(/^cir/))&&(F.circa=!0);for(var ie=0,le=this.monthRexes.length;ie<le;ie++)if(Q.toLocaleLowerCase().match(this.monthRexes[ie])){F["month"+R]=""+(parseInt(ie,10)+1);continue e}if(Q.match(/^[0-9]+$/)&&(z=Q),Q.toLocaleLowerCase().match(/^bc/)&&z){F["year"+R]=""+z*-1,z="";continue}if(Q.toLocaleLowerCase().match(/^ad/)&&z){F["year"+R]=""+z,z="";continue}if(Q.toLocaleLowerCase().match(/(?:mic|tri|hil|eas)/)&&!F["season"+R]){te=Q;continue}}z&&(F["day"+R]=z,z=""),te&&!F["season"+R]&&(F["season"+R]=te.trim(),te=""),R="_end"}if(L)for(var P=0,G=l.DATE_PARTS_ALL.length;P<G;P++){var H=l.DATE_PARTS_ALL[P];F[H]&&!F[H+"_end"]?F[H+"_end"]=F[H]:!F[H]&&F[H+"_end"]&&(F[H]=F[H+"_end"])}(!F.year||F.year&&F.day&&!F.month)&&(F={literal:_});for(var he=["year","month","day","year_end","month_end","day_end"],K=0,pe=he.length;K<pe;K++){var ce=he[K];typeof F[ce]=="string"&&F[ce].match(/^[0-9]+$/)&&(F[ce]=parseInt(F[ce],10))}return X&&Object.keys(F).indexOf("year")>-1&&(F.year=F.year*-1),F},this.parseDateToArray=function(A){return this.convertDateObjectToArray(this.parseDateToObject(A))},this.parseDateToString=function(A){return this.convertDateObjectToString(this.parseDateToObject(A))},this.parse=function(A){return this.parseDateToObject(A)},this.setOrderMonthDay(),this.resetDateParserMonths()};l.DateParser=new l.DateParser;l.Engine=function(e,t,i,r){var s,n;this.processor_version=l.PROCESSOR_VERSION,this.csl_version="1.0",this.sys=e,typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var p=Object(h),T=1;T<arguments.length;T++){var w=arguments[T];if(w!=null)for(var m in w)Object.prototype.hasOwnProperty.call(w,m)&&(p[m]=w[m])}return p},writable:!0,configurable:!0}),e.variableWrapper&&(l.VARIABLE_WRAPPER_PREPUNCT_REX=new RegExp("^(["+[" "].concat(l.SWAPPING_PUNCTUATION).join("")+"]*)(.*)")),l.retrieveStyleModule&&(this.sys.retrieveStyleModule=l.retrieveStyleModule),l.getAbbreviation&&(this.sys.getAbbreviation=l.getAbbreviation),this.sys.stringCompare&&(l.stringCompare=this.sys.stringCompare),this.sys.AbbreviationSegments=l.AbbreviationSegments,this.transform=new l.Transform(this),this.setParseNames=function(c){this.opt["parse-names"]=c},this.opt=new l.Engine.Opt,this.tmp=new l.Engine.Tmp,this.build=new l.Engine.Build,this.fun=new l.Engine.Fun(this),this.configure=new l.Engine.Configure,this.citation_sort=new l.Engine.CitationSort,this.bibliography_sort=new l.Engine.BibliographySort,this.citation=new l.Engine.Citation(this),this.bibliography=new l.Engine.Bibliography,this.intext=new l.Engine.InText,this.output=new l.Output.Queue(this),this.dateput=new l.Output.Queue(this),this.cslXml=l.setupXml(t);for(var o in l.SYS_OPTIONS){var a=l.SYS_OPTIONS[o];typeof this.sys[a]=="boolean"&&(this.opt.development_extensions[a]=this.sys[a])}(this.opt.development_extensions.uppercase_subtitles||this.opt.development_extensions.implicit_short_title)&&(this.opt.development_extensions.main_title_from_short_title=!0),this.opt.development_extensions.csl_reverse_lookup_support&&(this.build.cslNodeId=0,this.setCslNodeIds=function(c,h){var p=this.cslXml.children(c);this.cslXml.setAttribute(c,"cslid",this.build.cslNodeId),this.opt.nodenames.push(h),this.build.cslNodeId+=1;for(var T=0,w=this.cslXml.numberofnodes(p);T<w;T+=1)h=this.cslXml.nodename(p[T]),h&&this.setCslNodeIds(p[T],h)},this.setCslNodeIds(this.cslXml.dataObj,"style")),this.cslXml.addMissingNameNodes(this.cslXml.dataObj),this.cslXml.addInstitutionNodes(this.cslXml.dataObj),this.cslXml.insertPublisherAndPlace(this.cslXml.dataObj),this.cslXml.flagDateMacros(this.cslXml.dataObj),s=this.cslXml.attributes(this.cslXml.dataObj),typeof s["@sort-separator"]>"u"&&this.cslXml.setAttribute(this.cslXml.dataObj,"sort-separator",", "),this.opt["initialize-with-hyphen"]=!0,this.setStyleAttributes(),this.opt.xclass=this.cslXml.getAttributeValue(this.cslXml.dataObj,"class"),this.opt.class=this.opt.xclass,this.opt.styleID=this.cslXml.getStyleId(this.cslXml.dataObj),this.opt.styleName=this.cslXml.getStyleId(this.cslXml.dataObj,!0),this.opt.version.slice(0,4)==="1.1m"&&(this.opt.development_extensions.consolidate_legal_items=!0,this.opt.development_extensions.consolidate_container_items=!0,this.opt.development_extensions.main_title_from_short_title=!0,this.opt.development_extensions.expect_and_symbol_form=!0,this.opt.development_extensions.require_explicit_legal_case_title_short=!0,this.opt.development_extensions.force_jurisdiction=!0,this.opt.development_extensions.force_title_abbrev_fallback=!0),i&&(i=i.replace("_","-"),i=l.normalizeLocaleStr(i)),this.opt["default-locale"][0]&&(this.opt["default-locale"][0]=this.opt["default-locale"][0].replace("_","-"),this.opt["default-locale"][0]=l.normalizeLocaleStr(this.opt["default-locale"][0])),i&&r&&(this.opt["default-locale"]=[i]),i&&!r&&this.opt["default-locale"][0]&&(i=this.opt["default-locale"][0]),this.opt["default-locale"].length===0&&(i||(i="en-US"),this.opt["default-locale"].push("en-US")),i||(i=this.opt["default-locale"][0]),n=l.localeResolve(i),this.opt.lang=n.best,this.opt["default-locale"][0]=n.best,this.locale={},this.opt["default-locale-sort"]||(this.opt["default-locale-sort"]=this.opt["default-locale"][0]),"dale|".localeCompare("daleb",this.opt["default-locale-sort"])>-1?this.opt.sort_sep="@":this.opt.sort_sep="|",this.localeConfigure(n);function u(h){var h=h.slice(),p=new RegExp("(?:(?:[?!:]*\\s+|-|^)(?:"+h.join("|")+")(?=[!?:]*\\s+|-|$))","g");return p}this.locale[this.opt.lang].opts["skip-words-regexp"]=u(this.locale[this.opt.lang].opts["skip-words"]),this.output.adjust=new l.Output.Queue.adjust(this.getOpt("punctuation-in-quote")),this.registry=new l.Registry(this),this.macros={},this.build.area="citation";var f=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(f,this[this.build.area].tokens),this.build.area="bibliography";var f=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(f,this[this.build.area].tokens),this.build.area="intext";var f=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(f,this[this.build.area].tokens),this.opt.parallel.enable&&(this.parallel=new l.Parallel(this)),this.juris={},this.configureTokenLists(),this.disambiguate=new l.Disambiguation(this),this.splice_delimiter=!1,this.fun.dateparser=l.DateParser,this.fun.flipflopper=new l.Util.FlipFlopper(this),this.setCloseQuotesArray(),this.fun.ordinalizer.init(this),this.fun.long_ordinalizer.init(this),this.fun.page_mangler=l.Util.PageRangeMangler.getFunction(this,"page"),this.fun.year_mangler=l.Util.PageRangeMangler.getFunction(this,"year"),this.setOutputFormat("html")};l.Engine.prototype.setCloseQuotesArray=function(){var e;e=[],e.push(this.getTerm("close-quote")),e.push(this.getTerm("close-inner-quote")),e.push('"'),e.push("'"),this.opt.close_quotes_array=e};l.makeBuilder=function(e,t){var i=[],r=[];function s(u){r.push(u),l.XmlToToken.call(u,e,l.START,t,i)}function n(){var u=r.pop();l.XmlToToken.call(u,e,l.END,t,i)}function o(u){l.XmlToToken.call(u,e,l.SINGLETON,t,i)}function a(u,f,c){u||(u=[]),typeof u.length>"u"&&(u=[u]);for(var h=0;h<u.length;h++){var p=u[h];e.cslXml.nodename(p)!==null&&(f&&e.cslXml.nodename(p)==="date"&&(l.Util.fixDateNode.call(e,f,h,p),p=e.cslXml.children(f)[h]),e.cslXml.numberofnodes(e.cslXml.children(p))?(s(p),a(e.cslXml.children(p),p),n()):o(p))}}return a};l.Engine.prototype.buildTokenLists=function(e,t){if(this.cslXml.getNodeValue(e)){var i=l.makeBuilder(this,t),r;typeof e.length>"u"?r=e:r=e[0],i(r)}};l.Engine.prototype.setStyleAttributes=function(){var i,e,t,i={};i.name=this.cslXml.nodename(this.cslXml.dataObj),e=this.cslXml.attributes(this.cslXml.dataObj);for(t in e)e.hasOwnProperty(t)&&l.Attributes[t].call(i,this,e[t])};l.Engine.prototype.getTerm=function(e,t,i,r,s,n){e&&e.match(/[A-Z]/)&&e===e.toUpperCase()&&(l.debug("Warning: term key is in uppercase form: "+e),e=e.toLowerCase());var o;n?o=this.opt["default-locale"][0]:o=this.opt.lang;var a=l.Engine.getField(l.LOOSE,this.locale[o].terms,e,t,i,r);return!a&&e==="range-delimiter"&&(a=""),typeof a>"u"&&(s===l.STRICT?l.error('Error in getTerm: term "'+e+'" does not exist.'):s===l.TOLERANT&&(a="")),a&&(this.tmp.cite_renders_content=!0),a};l.Engine.prototype.getDate=function(e,t){var i;return t?i=this.opt["default-locale"]:i=this.opt.lang,this.locale[i].dates[e]?this.locale[i].dates[e]:!1};l.Engine.prototype.getOpt=function(e){return typeof this.locale[this.opt.lang].opts[e]<"u"?this.locale[this.opt.lang].opts[e]:!1};l.Engine.prototype.getVariable=function(e,t,i,r){return l.Engine.getField(l.LOOSE,e,t,i,r)};l.Engine.prototype.getDateNum=function(e,t){return typeof e>"u"?0:e[t]};l.Engine.getField=function(e,t,i,r,s,n){var o,a,u,f,c,h;if(o="",typeof t[i]>"u")if(e===l.STRICT)l.error('Error in getField: term "'+i+'" does not exist.');else return;for(n&&t[i][n]?h=t[i][n]:h=t[i],a=[],r==="symbol"?a=["symbol","short"]:r==="verb-short"?a=["verb-short","verb"]:r!=="long"&&(a=[r]),a=a.concat(["long"]),c=a.length,f=0;f<c;f+=1)if(u=a[f],typeof h=="string"||typeof h=="number")o=h;else if(typeof h[u]<"u"){typeof h[u]=="string"||typeof h[u]=="number"?o=h[u]:typeof s=="number"?o=h[u][s]:o=h[u][0];break}return o};l.Engine.prototype.configureTokenLists=function(){var e,t,i;for(i=l.AREAS.length,t=0;t<i;t+=1){e=l.AREAS[t];var r=this[e].tokens;this.configureTokenList(r)}return this.version=l.version,this.state};l.Engine.prototype.configureTokenList=function(e){var t,i,r,s,n,o,a,u;for(t=["year","month","day"],a=e.length-1,n=a;n>-1;n+=-1){if(i=e[n],i.name==="date"&&l.END===i.tokentype&&(r=[]),i.name==="date-part"&&i.strings.name)for(u=t.length,o=0;o<u;o+=1)s=t[o],s===i.strings.name&&r.push(i.strings.name);i.name==="date"&&l.START===i.tokentype&&(r.reverse(),i.dateparts=r),i.next=n+1,i.name&&l.Node[i.name].configure&&l.Node[i.name].configure.call(i,this,n)}};l.Engine.prototype.refetchItems=function(e){for(var t=[],i=0,r=e.length;i<r;i+=1)t.push(this.refetchItem(""+e[i]));return t};l.ITERATION=0;l.Engine.prototype.retrieveItem=function(e){var t,i,r;if(!this.tmp.loadedItemIDs[e])this.tmp.loadedItemIDs[e]=!0;else return this.registry.refhash[e];if(this.opt.development_extensions.normalize_lang_keys_to_lowercase&&typeof this.opt.development_extensions.normalize_lang_keys_to_lowercase=="boolean"){for(var r=0,s=this.opt["default-locale"].length;r<s;r+=1)this.opt["default-locale"][r]=this.opt["default-locale"][r].toLowerCase();for(var r=0,s=this.opt["locale-translit"].length;r<s;r+=1)this.opt["locale-translit"][r]=this.opt["locale-translit"][r].toLowerCase();for(var r=0,s=this.opt["locale-translat"].length;r<s;r+=1)this.opt["locale-translat"][r]=this.opt["locale-translat"][r].toLowerCase();this.opt.development_extensions.normalize_lang_keys_to_lowercase=100}if(l.ITERATION+=1,t=JSON.parse(JSON.stringify(this.sys.retrieveItem(""+e))),this.opt.development_extensions.normalize_lang_keys_to_lowercase){if(t.multi){if(t.multi._keys)for(var n in t.multi._keys)for(var o in t.multi._keys[n])o!==o.toLowerCase()&&(t.multi._keys[n][o.toLowerCase()]=t.multi._keys[n][o],delete t.multi._keys[n][o]);if(t.multi.main)for(var n in t.multi.main)t.multi.main[n]=t.multi.main[n].toLowerCase()}for(var r=0,s=l.NAME_VARIABLES.length;r>s;r+=1){var a=l.NAME_VARIABLES[r];if(t[a]&&t[a].multi)for(var u=0,f=t[a].length;u<f;u+=1){var c=t[a][u];if(c.multi){if(c.multi._key)for(var o in c.multi._key)o!==o.toLowerCase()&&(c.multi._key[o.toLowerCase()]=c.multi._key[o],delete c.multi._key[o]);c.multi.main&&(c.multi.main=c.multi.main.toLowerCase())}}}}if(t.language&&t.language.match(/[><]/)){var i=t.language.match(/(.*?)([<>])(.*)/);i[2]==="<"?(t["language-name"]=i[1],t["language-name-original"]=i[3]):(t["language-name"]=i[3],t["language-name-original"]=i[1]),this.opt.multi_layout?t["language-name-original"]&&(t.language=t["language-name-original"]):t["language-name"]&&(t.language=t["language-name"])}if(t.page){t["page-first"]=t.page;var h=""+t.page,i=h.split(/\s*(?:&|, |-|\u2013)\s*/);i[0].slice(-1)!=="\\"&&(t["page-first"]=i[0])}this.opt.development_extensions.field_hack&&t.note&&l.parseNoteFieldHacks(t,!1,this.opt.development_extensions.allow_field_hack_date_override);for(var o in t)if(l.DATE_VARIABLES.indexOf(o.replace(/^alt-/,""))>-1){var p=t[o];p&&(this.opt.development_extensions.raw_date_parsing&&p.raw&&(!p["date-parts"]||p["date-parts"].length===0)&&(p=this.fun.dateparser.parseDateToObject(p.raw)),t[o]=this.dateParseArray(p))}if(this.opt.development_extensions.consolidate_legal_items&&t.type&&["bill","gazette","legislation","regulation","treaty"].indexOf(t.type)>-1){for(var T,w=["type","title","jurisdiction","genre","volume","container-title"],m=[],r=0,s=w.length;r<s;r+=1)T=w[r],t[T]&&m.push(t[T]);w=["original-date","issued"];for(var r=0,s=w.length;r<s;r+=1)if(T=w[r],t[T]&&t[T].year){var O=t[T].year;m.push(O);break}t.legislation_id=m.join("::")}if(this.bibliography.opt.track_container_items&&this.bibliography.opt.track_container_items.indexOf(t.type)>-1){for(var T,w=["type","container-title","publisher","edition"],d=[],r=0,s=w.length;r<s;r+=1)T=w[r],t[T]&&d.push(t[T]);t.container_id=d.join("::")}if(this.opt.development_extensions.force_jurisdiction&&typeof t.authority=="string"&&(t.authority=[{literal:t.authority,multi:{_key:{}}}],t.multi&&t.multi._keys&&t.multi._keys.authority)){t.authority[0].multi._key={};for(var o in t.multi._keys.authority)t.authority[0].multi._key[o]={literal:t.multi._keys.authority[o]}}if(t["title-short"]||(t["title-short"]=t.shortTitle),this.opt.development_extensions.main_title_from_short_title){var S=this.opt["default-locale"][0].slice(0,2).toLowerCase()==="fr";l.extractTitleAndSubtitle.call(this,t,S)}var g=["bill","legal_case","legislation","gazette","regulation"].indexOf(t.type)>-1;this.opt.development_extensions.force_jurisdiction&&g&&(t.jurisdiction||(t.jurisdiction="us"));var b;if(!g&&t.title&&this.sys.getAbbreviation){t.jurisdiction,this.sys.normalizeAbbrevsKey?b=this.sys.normalizeAbbrevsKey("title",t.title):b=t.title;var I=this.transform.loadAbbreviation(t.jurisdiction,"title",b,t.language);this.transform.abbrevs[I].title&&this.transform.abbrevs[I].title[b]&&(t["title-short"]=this.transform.abbrevs[I].title[b])}if(t["container-title-short"]||(t["container-title-short"]=t.journalAbbreviation),t["container-title"]&&this.sys.getAbbreviation){this.sys.normalizeAbbrevsKey?b=this.sys.normalizeAbbrevsKey(t["container-title"]):b=t["container-title"];var I=this.transform.loadAbbreviation(t.jurisdiction,"container-title",b,t.language);this.transform.abbrevs[I]["container-title"]&&this.transform.abbrevs[I]["container-title"][b]&&(t["container-title-short"]=this.transform.abbrevs[I]["container-title"][b])}if(t.jurisdiction&&(t.country=t.jurisdiction.split(":")[0]),this.registry.refhash[e]){if(JSON.stringify(this.registry.refhash[e])!=JSON.stringify(t)){for(var o in this.registry.refhash[e])delete this.registry.refhash[e][o];this.tmp.taintedItemIDs[t.id]=!0,Object.assign(this.registry.refhash[e],t)}}else this.registry.refhash[e]=t;return this.registry.refhash[e]};l.Engine.prototype.refetchItem=function(e){return this.registry.refhash[e]};l.Engine.prototype.setOpt=function(e,t,i){e.name==="style"||e.name==="cslstyle"?(this.opt.inheritedAttributes[t]=i,this.citation.opt.inheritedAttributes[t]=i,this.bibliography.opt.inheritedAttributes[t]=i):["citation","bibliography"].indexOf(e.name)>-1?this[e.name].opt.inheritedAttributes[t]=i:e.strings[t]=i};l.Engine.prototype.inheritOpt=function(e,t,i,r){if(typeof e.strings[t]<"u")return e.strings[t];var s=this[this.tmp.root].opt.inheritedAttributes[i||t];return typeof s<"u"?s:r};l.Engine.prototype.remapSectionVariable=function(e){for(var t=0,i=e.length;t<i;t+=1){var r=e[t][0],s=e[t][1];if(["bill","gazette","legislation","regulation","treaty"].indexOf(r.type)>-1){if(s.locator){s.locator=s.locator.trim();var n=s.locator.match(l.STATUTE_SUBDIV_PLAIN_REGEX_FRONT);n||(s.label?s.locator=l.STATUTE_SUBDIV_STRINGS_REVERSE[s.label]+" "+s.locator:s.locator="p. "+s.locator)}var o=null;if(r.section){r.section=r.section.trim();var n=r.section.match(l.STATUTE_SUBDIV_PLAIN_REGEX_FRONT);n?o=n[0].trim():(r.section="sec. "+r.section,o="sec.")}if(r.section)if(!s.locator)s.locator=r.section;else{var n=s.locator.match(/^([^ ]*)\s*(.*)/),a=" ";n?(n[1]==="p."&&o!=="p."&&(s.locator=n[2]),["[","(",".",",",";",":","?"].indexOf(s.locator.slice(0,1))>-1&&(a="")):a="",s.locator=r.section+a+s.locator}s.label=""}}};l.Engine.prototype.setNumberLabels=function(e){if(e.number&&["bill","gazette","legislation","regulation","treaty"].indexOf(e.type)>-1&&this.opt.development_extensions.consolidate_legal_items&&!this.tmp.shadow_numbers.number){this.tmp.shadow_numbers.number={},this.tmp.shadow_numbers.number.values=[],this.tmp.shadow_numbers.number.plural=0,this.tmp.shadow_numbers.number.numeric=!1,this.tmp.shadow_numbers.number.label=!1;var t=""+e.number;t=t.split("\\").join("");var i=t.split(/\s+/)[0],r=l.STATUTE_SUBDIV_STRINGS[i];if(r){var s=t.split(l.STATUTE_SUBDIV_PLAIN_REGEX);if(s.length>1){for(var n=[],o=1,a=s.length;o<a;o+=1)n.push(s[o].replace(/\s*$/,"").replace(/^\s*/,""));t=n.join(" ")}else t=s[0];this.tmp.shadow_numbers.number.label=r,this.tmp.shadow_numbers.number.values.push(["Blob",t,!1]),this.tmp.shadow_numbers.number.numeric=!1}else this.tmp.shadow_numbers.number.values.push(["Blob",t,!1]),this.tmp.shadow_numbers.number.numeric=!0}};l.substituteOne=function(e){return function(t,i){return i?e.replace("%%STRING%%",i):""}};l.substituteTwo=function(e){return function(t){var i=e.replace("%%PARAM%%",t);return function(r,s){return s?i.replace("%%STRING%%",s):""}}};l.Mode=function(e){var t,i,r,s,n,o;t={},i=l.Output.Formats[e];for(r in i){if(r.slice(0,1)!=="@"){t[r]=i[r];continue}s=!1,n=i[r],o=r.split("/"),typeof n=="string"&&n.indexOf("%%STRING%%")>-1?n.indexOf("%%PARAM%%")>-1?s=l.substituteTwo(n):s=l.substituteOne(n):typeof n=="boolean"&&!n?s=l.Output.Formatters.passthrough:typeof n=="function"?s=n:l.error("Bad "+e+" config entry for "+r+": "+n),o.length===1?t[o[0]]=s:o.length===2&&(t[o[0]]||(t[o[0]]={}),t[o[0]][o[1]]=s)}return t};l.setDecorations=function(e,t){var i,r,s;i=[];for(s in l.FORMAT_KEY_SEQUENCE){var r=l.FORMAT_KEY_SEQUENCE[s];t[r]&&(i.push([r,t[r]]),delete t[r])}return i};l.Doppeler=function(e,t){var i=new RegExp("("+e+")","g"),r=new RegExp(e,"g");this.split=function(s){t&&(s=t(s));var n=s.match(i);if(!n)return{tags:[],strings:[s]};for(var o=s.split(r),a=n.length-1;a>-1;a--){typeof n[a]=="number"&&(n[a]="");var u=n[a];u==="'"&&o[a+1].length>0&&(o[a+1]=n[a]+o[a+1],n[a]="")}return{tags:n,strings:o,origStrings:o.slice()}},this.join=function(s){for(var n=s.strings.slice(-1),o=s.tags.length-1;o>-1;o--)n.push(s.tags[o]),n.push(s.strings[o]);return n.reverse(),n.join("")}};l.Engine.prototype.normalDecorIsOrphan=function(e,t){if(t[1]==="normal"){var i=!1,r;this.tmp.area==="citation"?r=[this.citation.opt.layout_decorations].concat(e.alldecor):r=e.alldecor;for(var s=r.length-1;s>-1;s+=-1)for(var n=r[s].length-1;n>-1;n+=-1)r[s][n][0]===t[0]&&r[s][n][1]!=="normal"&&(i=!0);if(!i)return!0}return!1};l.Engine.prototype.getCitationLabel=function(e){var t="",i=this.getTrigraphParams(),r=i[0],s=this.getTerm("reference","short",0);typeof s>"u"&&(s="reference"),s=s.replace(".",""),s=s.slice(0,1).toUpperCase()+s.slice(1);for(var n=0,o=l.NAME_VARIABLES.length;n<o;n+=1){var a=l.NAME_VARIABLES[n];if(e[a]){var u=e[a];u.length>i.length?r=i[i.length-1]:r=i[u.length-1];for(var f=0,c=u.length;f<c&&f!==r.authors.length;f+=1){var h=this.nameOutput.getName(u[f],"locale-translit",!0),p=h.name;p&&p.family?(s=p.family,s=s.replace(/^([ \'\u2019a-z]+\s+)/,"")):p&&p.literal&&(s=p.literal);var T=s.toLowerCase().match(/^(a\s+|the\s+|an\s+)/);if(T&&(s=s.slice(T[1].length)),s=s.replace(l.ROMANESQUE_NOT_REGEXP,""),!s)break;s=s.slice(0,r.authors[f]),s.length>1?s=s.slice(0,1).toUpperCase()+s.slice(1).toLowerCase():s.length===1&&(s=s.toUpperCase()),t+=s}break}}if(!t&&e.title){for(var w=this.locale[this.opt.lang].opts["skip-words"],m=e.title.split(/\s+/),n=m.length-1;n>-1;n--)w.indexOf(m[n])>-1&&(m=m.slice(0,n).concat(m.slice(n+1)));var O=m.join("");O=O.slice(0,i[0].authors[0]),O.length>1?O=O.slice(0,1).toUpperCase()+O.slice(1).toLowerCase():O.length===1&&(O=O.toUpperCase()),t=O}var d="0000";return e.issued&&e.issued.year&&(d=""+e.issued.year),d=d.slice(r.year*-1),t=t+d,t};l.Engine.prototype.getTrigraphParams=function(){var e=[],t=this.opt.trigraph.split(":");(!this.opt.trigraph||this.opt.trigraph.slice(0,1)!=="A")&&l.error("Bad trigraph definition: "+this.opt.trigraph);for(var i=0,r=t.length;i<r;i+=1){for(var s=t[i],n={authors:[],year:0},o=0,a=s.length;o<a;o+=1)switch(s.slice(o,o+1)){case"A":n.authors.push(1);break;case"a":n.authors[n.authors.length-1]+=1;break;case"0":n.year+=1;break;default:l.error("Invalid character in trigraph definition: "+this.opt.trigraph)}e.push(n)}return e};l.Engine.prototype.setOutputFormat=function(e){this.opt.mode=e,this.fun.decorate=l.Mode(e),this.output[e]||(this.output[e]={},this.output[e].tmp={})};l.Engine.prototype.getSortFunc=function(){return function(e,t){return e=e.split("-"),t=t.split("-"),e.length<t.length?1:e.length>t.length?-1:(e=e.slice(-1)[0],t=t.slice(-1)[0],e.length<t.length?1:e.length>t.length?-1:0)}};l.Engine.prototype.setLangTagsForCslSort=function(e){var t,i;if(e)for(this.opt["locale-sort"]=[],t=0,i=e.length;t<i;t+=1)this.opt["locale-sort"].push(e[t]);this.opt["locale-sort"].sort(this.getSortFunc())};l.Engine.prototype.setLangTagsForCslTransliteration=function(e){var t,i;if(this.opt["locale-translit"]=[],e)for(t=0,i=e.length;t<i;t+=1)this.opt["locale-translit"].push(e[t]);this.opt["locale-translit"].sort(this.getSortFunc())};l.Engine.prototype.setLangTagsForCslTranslation=function(e){var t,i;if(this.opt["locale-translat"]=[],e)for(t=0,i=e.length;t<i;t+=1)this.opt["locale-translat"].push(e[t]);this.opt["locale-translat"].sort(this.getSortFunc())};l.Engine.prototype.setLangPrefsForCites=function(e,t){var i=this.opt["cite-lang-prefs"];t||(t=function(T){return T.toLowerCase()});for(var r=["Persons","Institutions","Titles","Journals","Publishers","Places"],s=0,n=r.length;s<n;s+=1){var o=t(r[s]),a=r[s].toLowerCase();if(e[o]){for(var u=[];e[o].length>1;)u.push(e[o].pop());var f={orig:1,translit:2,translat:3};for(u.length===2&&f[u[0]]<f[u[1]]&&u.reverse();u.length;)e[o].push(u.pop());for(var c=i[a];c.length;)c.pop();for(var h=0,p=e[o].length;h<p;h+=1)c.push(e[o][h])}}};l.Engine.prototype.setLangPrefsForCiteAffixes=function(e){if(e&&e.length===48){for(var t=this.opt.citeAffixes,i=0,r=["persons","institutions","titles","journals","publishers","places"],s=["translit","orig","translit","translat"],n,o=0,a=r.length;o<a;o+=1)for(var u=0,f=s.length;u<f;u+=1)n="",i%8===4?!t[r[o]]["locale-"+s[u]].prefix&&!t[r[o]]["locale-"+s[u]].suffix&&(n=e[i]?e[i]:"",t[r[o]]["locale-"+s[u]].prefix=n,n=e[i]?e[i+1]:"",t[r[o]]["locale-"+s[u]].suffix=n):(n=e[i]?e[i]:"",t[r[o]]["locale-"+s[u]].prefix=n,n=e[i]?e[i+1]:"",t[r[o]]["locale-"+s[u]].suffix=n),i+=2;this.opt.citeAffixes=t}};l.Engine.prototype.setAutoVietnameseNamesOption=function(e){e?this.opt["auto-vietnamese-names"]=!0:this.opt["auto-vietnamese-names"]=!1};l.Engine.prototype.setAbbreviations=function(e){this.sys.setAbbreviations&&this.sys.setAbbreviations(e)};l.Engine.prototype.setSuppressTrailingPunctuation=function(e){this.citation.opt.suppressTrailingPunctuation=!!e};l.Output={};l.Output.Queue=function(e){this.levelname=["top"],this.state=e,this.queue=[],this.empty=new l.Token("empty");var t={};t.empty=this.empty,this.formats=new l.Stack(t),this.current=new l.Stack(this.queue)};l.Output.Queue.prototype.pop=function(){var e=this.current.value();return e.length?e.pop():e.blobs.pop()};l.Output.Queue.prototype.getToken=function(e){var t=this.formats.value()[e];return t};l.Output.Queue.prototype.mergeTokenStrings=function(e,t){var i,r,s,n;if(i=this.formats.value()[e],r=this.formats.value()[t],s=i,r){i||(i=new l.Token(e,l.SINGLETON),i.decorations=[]),s=new l.Token(e,l.SINGLETON);var n="";for(var n in i.strings)i.strings.hasOwnProperty(n)&&(s.strings[n]=i.strings[n]);for(var n in r.strings)r.strings.hasOwnProperty(n)&&(s.strings[n]=r.strings[n]);s.decorations=i.decorations.concat(r.decorations)}return s};l.Output.Queue.prototype.addToken=function(e,t,i){var r,s;if(r=new l.Token("output"),typeof i=="string"&&(i=this.formats.value()[i]),i&&i.strings){for(s in i.strings)i.strings.hasOwnProperty(s)&&(r.strings[s]=i.strings[s]);r.decorations=i.decorations}typeof t=="string"&&(r.strings.delimiter=t),this.formats.value()[e]=r};l.Output.Queue.prototype.pushFormats=function(e){e||(e={}),e.empty=this.empty,this.formats.push(e)};l.Output.Queue.prototype.popFormats=function(){this.formats.pop()};l.Output.Queue.prototype.startTag=function(e,t){var i={};this.state.tmp["doing-macro-with-date"]&&this.state.tmp.extension&&(t=this.empty,e="empty"),i[e]=t,this.pushFormats(i),this.openLevel(e)};l.Output.Queue.prototype.endTag=function(e){this.closeLevel(e),this.popFormats()};l.Output.Queue.prototype.openLevel=function(e){var t,i;typeof e=="object"?t=new l.Blob(void 0,e):typeof e>"u"?t=new l.Blob(void 0,this.formats.value().empty,"empty"):((!this.formats.value()||!this.formats.value()[e])&&l.error('CSL processor error: call to nonexistent format token "'+e+'"'),t=new l.Blob(void 0,this.formats.value()[e],e)),i=this.current.value(),!this.state.tmp.just_looking&&this.checkNestedBrace&&(t.strings.prefix=this.checkNestedBrace.update(t.strings.prefix)),i.push(t),this.current.push(t)};l.Output.Queue.prototype.closeLevel=function(e){e&&e!==this.current.value().levelname&&l.error("Level mismatch error:  wanted "+e+" but found "+this.current.value().levelname);var t=this.current.pop();!this.state.tmp.just_looking&&this.checkNestedBrace&&(t.strings.suffix=this.checkNestedBrace.update(t.strings.suffix))};l.Output.Queue.prototype.append=function(e,t,i,r,s){var n,o,a,u=!0;if(i&&(r=!0),this.state.tmp["doing-macro-with-date"]&&!i){if(t!=="macro-with-date")return!1;t==="macro-with-date"&&(t="empty")}if(typeof e>"u"||(typeof e=="number"&&(e=""+e),!i&&this.state.tmp.element_trace&&this.state.tmp.element_trace.value()==="suppress-me"))return!1;if(o=!1,t?t==="literal"?(n=!0,u=!1):typeof t=="string"?n=this.formats.value()[t]:n=t:n=this.formats.value().empty,n||l.error("CSL processor error: unknown format token name: "+t),n.strings&&typeof n.strings.delimiter>"u"&&(n.strings.delimiter=""),typeof e=="string"&&e.length&&(e=e.replace(/ ([:;?!\u00bb])/g,"$1").replace(/\u00ab /g,""),this.last_char_rendered=e.slice(-1),e=e.replace(/\s+'/g," '"),i||(e=e.replace(/^'/g," '")),r?i&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),o=new l.Blob(e,n),a=this.current.value(),typeof a>"u"&&this.current.mystack.length===0&&(this.current.mystack.push([]),a=this.current.value()),typeof o.blobs=="string"&&(r?i&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),typeof e=="string"){if(typeof o.blobs=="string"&&o.blobs.slice(0,1)!==" "){for(var f="",c=o.blobs;l.TERMINAL_PUNCTUATION.indexOf(c.slice(0,1))>-1;)f=f+c.slice(0,1),c=c.slice(1);c&&f&&(o.strings.prefix=o.strings.prefix+f,o.blobs=c)}o.strings["text-case"]&&(o.blobs=l.Output.Formatters[o.strings["text-case"]](this.state,e)),this.state.tmp.strip_periods&&!s&&(o.blobs=o.blobs.replace(/\.([^a-z]|$)/g,"$1"));for(var h=o.decorations.length-1;h>-1;h+=-1)o.decorations[h][0]==="@quotes"&&o.decorations[h][1]!=="false"&&(o.punctuation_in_quote=this.state.getOpt("punctuation-in-quote")),o.blobs.match(l.ROMANESQUE_REGEXP)||o.decorations[h][0]==="@font-style"&&(o.decorations=o.decorations.slice(0,h).concat(o.decorations.slice(h+1)));a.push(o),this.state.fun.flipflopper.processTags(o)}else u?a.push(o):a.push(e);return!0};l.Output.Queue.prototype.string=function(e,t,i){var r,s,n,o,a,u=l.getSafeEscape(this.state),f=t.slice(),c=[];if(f.length===0)return c;var h="";i?h=i.strings.delimiter:(e.tmp.count_offset_characters=!1,e.tmp.offset_characters=0),i&&i.new_locale&&(i.old_locale=e.opt.lang,e.opt.lang=i.new_locale);for(var p,T,w,m,r=0,s=f.length;r<s;r+=1){if(p=f[r],p.strings.first_blob&&(e.tmp.count_offset_characters=p.strings.first_blob),typeof p.blobs=="string"){if(typeof p.num=="number")c.push(p);else if(p.blobs){p.particle&&(p.blobs=p.particle+p.blobs,p.particle=""),a=u(p.blobs);var O=a.length;if(!e.tmp.suppress_decorations)for(n=0,o=p.decorations.length;n<o;n+=1)m=p.decorations[n],m[0]!=="@showid"&&(e.normalDecorIsOrphan(p,m)||(a=e.fun.decorate[m[0]][m[1]].call(p,e,a,m[2])));if(a&&a.length){if(a=u(p.strings.prefix)+a+u(p.strings.suffix),e.opt.development_extensions.csl_reverse_lookup_support&&!e.tmp.suppress_decorations)for(n=0,o=p.decorations.length;n<o;n+=1)m=p.decorations[n],m[0]==="@showid"&&(a=e.fun.decorate[m[0]][m[1]].call(p,e,a,m[2]));c.push(a),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=O+p.strings.suffix.length+p.strings.prefix.length)}}}else if(p.blobs.length){var d=e.output.string(e,p.blobs,p);if(i&&d!=="string"&&d.length>1&&p.strings.delimiter)for(var S=!1,n=0,o=d.length;n<o;n++)typeof d[n]!="string"?S=!0:S&&(d[n]=p.strings.delimiter+d[n]);c=c.concat(d)}p.strings.first_blob&&e.registry.registry[p.strings.first_blob]&&(e.registry.registry[p.strings.first_blob].offset=e.tmp.offset_characters,e.tmp.count_offset_characters=!1)}for(r=0,s=c.length-1;r<s;r+=1)typeof c[r].num=="number"&&typeof c[r+1].num=="number"&&!c[r+1].UGLY_DELIMITER_SUPPRESS_HACK&&(c[r].strings.suffix=c[r].strings.suffix+(h||""),c[r+1].successor_prefix="",c[r+1].UGLY_DELIMITER_SUPPRESS_HACK=!0);for(var g=0,r=0,s=c.length;r<s;r+=1)typeof c[r]=="string"&&(g=parseInt(r,10)+1,r<c.length-1&&typeof c[r+1]=="object"&&(h&&!c[r+1].UGLY_DELIMITER_SUPPRESS_HACK&&(c[r]+=u(h)),c[r+1].UGLY_DELIMITER_SUPPRESS_HACK=!0));if(i&&(i.decorations.length||i.strings.suffix))g=c.length;else if(i&&i.strings.prefix){for(var r=0,s=c.length;r<s;r++)if(typeof c[r].num<"u"){g=r,r===0&&(c[r].strings.prefix=i.strings.prefix+c[r].strings.prefix);break}}var b=e.output.renderBlobs(c.slice(0,g),h,!1,i);if(b&&i&&(i.decorations.length||i.strings.suffix||i.strings.prefix)){if(!e.tmp.suppress_decorations)for(var r=0,s=i.decorations.length;r<s;r+=1)m=i.decorations[r],!(["@cite","@bibliography","@display","@showid"].indexOf(m[0])>-1)&&(e.normalDecorIsOrphan(p,m)||m[0]&&typeof b=="string"&&(b=e.fun.decorate[m[0]][m[1]].call(i,e,b,m[2])));if(a=b,T=i.strings.suffix,a&&a.length&&(w=i.strings.prefix,a=u(w)+a+u(T),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=w.length+T.length)),b=a,!e.tmp.suppress_decorations)for(var r=0,s=i.decorations.length;r<s;r+=1)m=i.decorations[r],["@cite","@bibliography","@display","@showid"].indexOf(m[0])!==-1&&typeof b=="string"&&(b=e.fun.decorate[m[0]][m[1]].call(i,e,b,m[2]))}var I=c.slice(g,c.length);return!I.length&&b?c=[b]:I.length&&!b?c=I:b&&I.length&&(c=[b].concat(I)),typeof i>"u"?(this.queue=[],this.current.mystack=[],this.current.mystack.push(this.queue),e.tmp.suppress_decorations&&(c=e.output.renderBlobs(c,void 0,!1))):typeof i=="boolean"&&(c=e.output.renderBlobs(c,void 0,!0)),i&&i.new_locale&&(e.opt.lang=i.old_locale),c};l.Output.Queue.prototype.clearlevel=function(){var e,t,i;for(e=this.current.value(),i=e.blobs.length,t=0;t<i;t+=1)e.blobs.pop()};l.Output.Queue.prototype.renderBlobs=function(e,t,i,r){var s,n,o,a,u,f,c,h,p,T,w;if(w=l.getSafeEscape(this.state),t||(t=""),s=this.state,n="",o="",f=e.length,this.state.tmp.area==="citation"&&!this.state.tmp.just_looking&&f===1&&typeof e[0]=="object"&&r)return e[0].strings.prefix=r.strings.prefix+e[0].strings.prefix,e[0].strings.suffix=e[0].strings.suffix+r.strings.suffix,e[0].decorations=e[0].decorations.concat(r.decorations),e[0].params=r.params,e[0];var m=!0;for(u=0;u<f;u+=1)e[u].checkNext?(e[u].checkNext(e[u+1],m),m=!1):e[u+1]&&e[u+1].splice_prefix?m=!1:m=!0;var O=!0;for(u=e.length-1;u>0;u+=-1)e[u].checkLast?O&&e[u].checkLast(e[u-1])&&(O=!1):O=!0;for(f=e.length,u=0;u<f;u+=1)if(a=e[u],n&&(o=t),typeof a=="string")n+=w(o),n+=a,s.tmp.count_offset_characters&&(s.tmp.offset_characters+=o.length);else if(i)n?n=[n,a]:n=[a];else if(a.status!==l.SUPPRESS){a.particle?p=a.particle+a.num:p=a.formatter.format(a.num,a.gender);var d=p.replace(/<[^>]*>/g,"").length;this.append(p,"empty",!0);var S=this.pop(),g=s.tmp.count_offset_characters;if(p=this.string(s,[S],!1),s.tmp.count_offset_characters=g,a.strings["text-case"]&&(p=l.Output.Formatters[a.strings["text-case"]](this.state,p)),p&&this.state.tmp.strip_periods&&(p=p.replace(/\.([^a-z]|$)/g,"$1")),!s.tmp.suppress_decorations)for(h=a.decorations.length,c=0;c<h;c+=1)T=a.decorations[c],!s.normalDecorIsOrphan(a,T)&&(p=s.fun.decorate[T[0]][T[1]].call(a,s,p,T[2]));p=w(a.strings.prefix)+p+w(a.strings.suffix);var b="";a.status===l.END?b=w(a.range_prefix):a.status===l.SUCCESSOR?b=w(a.successor_prefix):a.status===l.START?u>0&&!a.suppress_splice_prefix?b=w(a.splice_prefix):b="":a.status===l.SEEN&&(b=w(a.splice_prefix)),n+=b,n+=p,s.tmp.count_offset_characters&&(s.tmp.offset_characters+=b.length+a.strings.prefix.length+d+a.strings.suffix.length)}return n};l.Output.Queue.purgeEmptyBlobs=function(e){if(!(typeof e!="object"||typeof e.blobs!="object"||!e.blobs.length))for(var t=e.blobs.length-1;t>-1;t--){l.Output.Queue.purgeEmptyBlobs(e.blobs[t]);var i=e.blobs[t];if(!i||!i.blobs||!i.blobs.length){for(var r=[];e.blobs.length-1>t;)r.push(e.blobs.pop());for(e.blobs.pop();r.length;)e.blobs.push(r.pop())}}};l.Output.Queue.adjust=function(e){var t={";":!0,":":!0},i={".":!0,"!":!0,"?":!0},r={"!":{".":"!","?":"!?",":":"!",",":"!,",";":"!;"},"?":{"!":"?!",".":"?",":":"?",",":"?,",";":"?;"},".":{"!":".!","?":".?",":":".:",",":".,",";":".;"},":":{"!":"!","?":"?",".":":",",":":,",";":":;"},",":{"!":",!","?":",?",":":",:",".":",.",";":",;"},";":{"!":"!","?":"?",":":";",",":";,",".":";"}},s={},n={},o={},a={};for(var u in r)o[u]=!0,a[u]=!0,t[u]||(s[u]=!0),i[u]||(n[u]=!0);a[" "]=!0,a[""]=!0;var f={};for(var u in r)for(var c in r[u])f[c]||(f[c]={}),f[c][u]=r[u][c];function h(A){return typeof A.num=="number"||A.blobs&&A.blobs.length===1&&typeof A.blobs[0].num=="number"}function p(A){if(typeof A.num=="number")return!0;if(!A.blobs||typeof A.blobs!="object")return!1;if(p(A.blobs[A.blobs.length-1]))return!0}function T(A,_){var B=!1,$=["@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align"];if(_&&$.push("@quotes"),A.decorations){for(var X=0,J=A.decorations.length;X<J;X++)if($.indexOf(A.decorations[X][0])>-1){B=!0;break}}return B}function w(A){if(A.decorations){for(var _=0,B=A.decorations.length;_<B;_++)if(A.decorations[_][0]==="@quotes"&&A.decorations[_][1]!=="false")return!0}return typeof A.blobs!="object"?!1:w(A.blobs[A.blobs.length-1])}function m(A,_){var B=_.strings.suffix.slice(-1);!B&&typeof _.blobs=="string"&&(B=_.blobs.slice(-1));var $=f[A][B];return $&&$.length===1?!0:typeof _.blobs!="object"?!1:!!m(A,_.blobs[_.blobs.length-1])}function O(A,_){if(!o[_])return!1;if(typeof A.blobs=="string")return A.blobs.slice(-1)===_;var B=A.blobs[A.blobs.length-1];if(B){var $=B.strings.suffix.slice(-1);return $?B.strings.suffix.slice(-1)==_:O(B,_)}else return!1}function d(A,_,B,$,X){var J=_==="blobs"?A:A.strings,Y=$==="blobs"?B:B.strings,ne=J[_].slice(-1),re=Y[$].slice(0,1);function ee(){Y[$]=Y[$].slice(1)}function K(){J[_]=J[_].slice(0,-1)}function pe(j){Y[$]=j+Y[$]}function ue(j){J[_]+=j}var z=X?K:ee;function te(){return f[re]}function F(){return r[ne]}var V=X?F:te;function Z(){var j=r[ne][re];typeof j=="string"?(K(),ee(),pe(j)):(pe(ne),K())}function M(){var j=f[re][ne];typeof j=="string"?(K(),ee(),ue(j)):(ue(re),ee())}var x=X?Z:M,v=ne===re;v?z():V()&&x()}function S(A){if(A.blobs&&typeof A.blobs=="string"){o[A.strings.suffix.slice(0,1)]&&A.strings.suffix.slice(0,1)===A.blobs.slice(-1)&&(A.strings.suffix=A.strings.suffix.slice(1));return}else if(typeof A!="object"||typeof A.blobs!="object"||!A.blobs.length)return;for(var _=T(A,!0),B=A.blobs.length-1;B>-1;B--){this.upward(A.blobs[B]);var $=A.strings,X=A.blobs[B].strings;if(B===0){$.prefix.slice(-1)===" "&&X.prefix.slice(0,1)===" "&&(X.prefix=X.prefix.slice(1));var J=X.prefix.slice(0,1);!_&&a[J]&&!$.prefix&&($.prefix+=J,X.prefix=X.prefix.slice(1))}if(B===A.blobs.length-1){var J=X.suffix.slice(-1);!_&&[" "].indexOf(J)>-1&&($.suffix.slice(0,1)!==J&&($.suffix=J+$.suffix),X.suffix=X.suffix.slice(0,-1))}$.delimiter&&B>0&&a[$.delimiter.slice(-1)]&&$.delimiter.slice(-1)===X.prefix.slice(0,1)&&(X.prefix=X.prefix.slice(1))}}function g(A){if(!(typeof A!="object"||typeof A.blobs!="object"||!A.blobs.length)){for(var _=A.blobs.length-1;_>-1;_--)if(this.leftward(A.blobs[_]),_<A.blobs.length-1&&!A.strings.delimiter){var B=A.blobs[_],$=B.strings.suffix.slice(-1),X=A.blobs[_+1],J=X.strings.prefix.slice(0,1),Y=T(B)||T(X),ne=typeof $=="number"||typeof J=="number";if(!Y&&!ne&&o[J]&&!ne){var re=J===B.strings.suffix.slice(-1),ee=!B.strings.suffix&&typeof B.blobs=="string"&&B.blobs.slice(-1)===J;!re&&!ee?d(B,"suffix",X,"prefix"):X.strings.prefix=X.strings.prefix.slice(1)}}}}function b(A){if(A.blobs&&typeof A.blobs=="string"){o[A.strings.suffix.slice(0,1)]&&A.strings.suffix.slice(0,1)===A.blobs.slice(-1)&&(A.strings.suffix=A.strings.suffix.slice(1));return}else if(typeof A!="object"||typeof A.blobs!="object"||!A.blobs.length)return;for(var _=A.strings,B=0,$=A.blobs.length;B<$&&!h(A.blobs[B]);B++);if(_.delimiter&&o[_.delimiter.slice(0,1)]){for(var X=_.delimiter.slice(0,1),B=A.blobs.length-2;B>-1;B--){var J=A.blobs[B].strings;J.suffix.slice(-1)!==X&&(J.suffix+=X)}_.delimiter=_.delimiter.slice(1)}for(var B=A.blobs.length-1;B>-1;B--){var Y=A.blobs[B],J=A.blobs[B].strings,ne=T(Y,!0),re=h(Y);if(B===A.blobs.length-1){{var ee=_.suffix.slice(0,1),K=!1;o[ee]&&(K=m(ee,Y),!K&&e&&(K=w(Y))),K&&o[ee]&&(p(Y)||(typeof Y.blobs=="string"?d(Y,"blobs",A,"suffix"):d(Y,"suffix",A,"suffix"),_.suffix.slice(0,1)==="."&&(J.suffix+=_.suffix.slice(0,1),_.suffix=_.suffix.slice(1)))),J.suffix.slice(-1)===""&&_.suffix.slice(0,1)===" "&&(_.suffix=_.suffix.slice(1)),a[J.suffix.slice(0,1)]&&(typeof Y.blobs=="string"&&Y.blobs.slice(-1)===J.suffix.slice(0,1)&&(J.suffix=J.suffix.slice(1)),J.suffix.slice(-1)===_.suffix.slice(0,1)&&(_.suffix=_.suffix.slice(0,-1)))}O(A,A.strings.suffix.slice(0,1))&&(A.strings.suffix=A.strings.suffix.slice(1))}else if(_.delimiter)a[_.delimiter.slice(0,1)]&&_.delimiter.slice(0,1)===J.suffix.slice(-1)&&(A.blobs[B].strings.suffix=A.blobs[B].strings.suffix.slice(0,-1));else{var pe=A.blobs[B+1].strings;!h(Y)&&!ne&&a[J.suffix.slice(-1)]&&J.suffix.slice(-1)===pe.prefix.slice(0,1)&&(pe.prefix=pe.prefix.slice(1))}!re&&!ne&&o[J.suffix.slice(0,1)]&&typeof Y.blobs=="string"&&d(Y,"blobs",Y,"suffix"),this.downward(A.blobs[B])}}function I(A){var _=A.strings.suffix.slice(0,1);if(typeof A.blobs=="string")for(;s[_];)d(A,"blobs",A,"suffix"),_=A.strings.suffix.slice(0,1);else for(;s[_];)d(A.blobs[A.blobs.length-1],"suffix",A,"suffix"),_=A.strings.suffix.slice(0,1)}function N(A){if(typeof A.blobs=="string")for(var _=A.blobs.slice(-1);n[_];)d(A,"blobs",A,"suffix",!0),_=A.blobs.slice(-1);else for(var _=A.blobs[A.blobs.length-1].strings.suffix.slice(-1);n[_];)d(A.blobs[A.blobs.length-1],"suffix",A,"suffix",!0),_=A.blobs[A.blobs.length-1].strings.suffix.slice(-1)}function q(A){if(!(typeof A!="object"||typeof A.blobs!="object"||!A.blobs.length)){for(var _,B=0,$=A.blobs.length;B<$;B++){for(var X=A.blobs[B],J=!1,Y=0,ne=X.decorations.length;Y<ne;Y++){var re=X.decorations[Y];re[0]==="@quotes"&&re[1]!=="false"&&(J=!0)}J&&(e?I(X):N(X)),_=this.fix(A.blobs[B]),X.blobs&&typeof X.blobs=="string"&&(_=X.blobs.slice(-1))}return _}}this.upward=S,this.leftward=g,this.downward=b,this.fix=q};l.Engine.Opt=function(){this.parallel={enable:!1},this.has_disambiguate=!1,this.mode="html",this.dates={},this.jurisdictions_seen={},this.suppressedJurisdictions={},this.inheritedAttributes={},this["locale-sort"]=[],this["locale-translit"]=[],this["locale-translat"]=[],this.citeAffixes={persons:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},institutions:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},titles:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},journals:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},publishers:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},places:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}}},this["default-locale"]=[],this.update_mode=l.NONE,this.bib_mode=l.NONE,this.sort_citations=!1,this["et-al-min"]=0,this["et-al-use-first"]=1,this["et-al-use-last"]=!1,this["et-al-subsequent-min"]=!1,this["et-al-subsequent-use-first"]=!1,this["demote-non-dropping-particle"]="display-and-sort",this["parse-names"]=!0,this.citation_number_slug=!1,this.trigraph="Aaaa00:AaAa00:AaAA00:AAAA00",this.nodenames=[],this.gender={},this["cite-lang-prefs"]={persons:["orig"],institutions:["orig"],titles:["orig"],journals:["orig"],publishers:["orig"],places:["orig"],number:["orig"]},this.has_layout_locale=!1,this.disable_duplicate_year_suppression=[],this.use_context_condition=!1,this.jurisdiction_fallbacks={},this.development_extensions={},this.development_extensions.field_hack=!0,this.development_extensions.allow_field_hack_date_override=!0,this.development_extensions.locator_date_and_revision=!0,this.development_extensions.locator_label_parse=!0,this.development_extensions.raw_date_parsing=!0,this.development_extensions.clean_up_csl_flaws=!0,this.development_extensions.consolidate_legal_items=!1,this.development_extensions.csl_reverse_lookup_support=!1,this.development_extensions.wrap_url_and_doi=!1,this.development_extensions.thin_non_breaking_space_html_hack=!1,this.development_extensions.apply_citation_wrapper=!1,this.development_extensions.main_title_from_short_title=!1,this.development_extensions.uppercase_subtitles=!1,this.development_extensions.normalize_lang_keys_to_lowercase=!1,this.development_extensions.strict_text_case_locales=!1,this.development_extensions.expect_and_symbol_form=!1,this.development_extensions.require_explicit_legal_case_title_short=!1,this.development_extensions.spoof_institutional_affiliations=!1,this.development_extensions.force_jurisdiction=!1,this.development_extensions.parse_names=!0,this.development_extensions.hanging_indent_legacy_number=!1,this.development_extensions.throw_on_empty=!1,this.development_extensions.strict_inputs=!0,this.development_extensions.prioritize_disambiguate_condition=!1,this.development_extensions.force_short_title_casing_alignment=!0,this.development_extensions.implicit_short_title=!1,this.development_extensions.force_title_abbrev_fallback=!1,this.development_extensions.split_container_title=!1,this.development_extensions.legacy_institution_name_ordering=!1,this.development_extensions.etal_min_etal_usefirst_hack=!1};l.Engine.Tmp=function(){this.names_max=new l.Stack,this.names_base=new l.Stack,this.givens_base=new l.Stack,this.value=[],this.namepart_decorations={},this.namepart_type=!1,this.area="citation",this.root="citation",this.extension="",this.can_substitute=new l.Stack(0,l.LITERAL),this.element_rendered_ok=!1,this.element_trace=new l.Stack("style"),this.nameset_counter=0,this.group_context=new l.Stack({term_intended:!1,variable_attempt:!1,variable_success:!1,output_tip:void 0,label_form:void 0,parallel_first:void 0,parallel_last:void 0,parallel_delimiter_override:void 0,condition:!1,force_suppress:!1,done_vars:[]}),this.term_predecessor=!1,this.in_cite_predecessor=!1,this.jump=new l.Stack(0,l.LITERAL),this.decorations=new l.Stack,this.tokenstore_stack=new l.Stack,this.last_suffix_used="",this.last_names_used=[],this.last_years_used=[],this.years_used=[],this.names_used=[],this.taintedItemIDs={},this.taintedCitationIDs={},this.initialize_with=new l.Stack,this.disambig_request=!1,this["name-as-sort-order"]=!1,this.suppress_decorations=!1,this.disambig_settings=new l.AmbigConfig,this.bib_sort_keys=[],this.prefix=new l.Stack("",l.LITERAL),this.suffix=new l.Stack("",l.LITERAL),this.delimiter=new l.Stack("",l.LITERAL),this.cite_locales=[],this.cite_affixes={citation:!1,bibliography:!1,citation_sort:!1,bibliography_sort:!1},this.strip_periods=0,this.shadow_numbers={},this.authority_stop_last=0,this.loadedItemIDs={},this.condition_counter=0,this.condition_lang_val_arr=[],this.condition_lang_counter_arr=[]};l.Engine.Fun=function(e){this.match=new l.Util.Match,this.suffixator=new l.Util.Suffixator(l.SUFFIX_CHARS),this.romanizer=new l.Util.Romanizer,this.ordinalizer=new l.Util.Ordinalizer(e),this.long_ordinalizer=new l.Util.LongOrdinalizer};l.Engine.Build=function(){this["alternate-term"]=!1,this.in_bibliography=!1,this.in_style=!1,this.skip=!1,this.postponed_macro=!1,this.layout_flag=!1,this.name=!1,this.names_variables=[[]],this.name_label=[{}],this.form=!1,this.term=!1,this.macro={},this.macro_stack=[],this.text=!1,this.lang=!1,this.area="citation",this.root="citation",this.extension="",this.substitute_level=new l.Stack(0,l.LITERAL),this.names_level=0,this.render_nesting_level=0,this.render_seen=!1,this.bibliography_key_pos=0};l.Engine.Configure=function(){this.tests=[],this.fail=[],this.succeed=[]};l.Engine.Citation=function(e){this.opt={inheritedAttributes:{}},this.tokens=[],this.srt=new l.Registry.Comparifier(e,"citation_sort"),this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="citation"};l.Engine.Bibliography=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt["line-spacing"]=1,this.opt["entry-spacing"]=1,this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="bibliography"};l.Engine.BibliographySort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.opt.topdecor=[],this.opt.citation_number_sort_direction=l.ASCENDING,this.opt.citation_number_secondary=!1,this.tmp={},this.keys=[],this.root="bibliography"};l.Engine.CitationSort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="citation"};l.Engine.InText=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="intext"};l.Engine.prototype.previewCitationCluster=function(e,t,i,r){var s=this.opt.mode;this.setOutputFormat(r),e.citationID&&delete e.citationID;var n=this.processCitationCluster(e,t,i,l.PREVIEW);return this.setOutputFormat(s),n[1]};l.Engine.prototype.appendCitationCluster=function(e){for(var t=[],i=this.registry.citationreg.citationByIndex.length,r=0;r<i;r+=1){var s=this.registry.citationreg.citationByIndex[r];t.push([""+s.citationID,s.properties.noteIndex])}return this.processCitationCluster(e,t,[])[1]};l.Engine.prototype.processCitationCluster=function(e,t,i,r){var s,n,o,a,u,f,c,h,p,T,w,m,O,d,S,g,b,I;this.debug=!1,this.tmp.loadedItemIDs={},this.tmp.citation_errors=[],this.registry.return_data={bibchange:!1},this.setCitationId(e);var N,q,A;if(r===l.PREVIEW){this.debug&&l.debug("****** start state save *********"),N=this.registry.citationreg.citationByIndex.slice(),q=this.registry.reflist.slice();for(var _=t.concat(i),B={},$=[],a=0,u=_.length;a<u;a+=1)for(s=this.registry.citationreg.citationById[_[a][0]],f=0,c=s.citationItems.length;f<c;f+=1)B[s.citationItems[f].id]=!0,$.push(""+s.citationItems[f].id);for(f=0,c=e.citationItems.length;f<c;f+=1)B[e.citationItems[f].id]=!0,$.push(""+e.citationItems[f].id);A={};for(var a=0,u=q.length;a<u;a+=1)if(!B[q[a].id]){var X=this.registry.registry[q[a].id].ambig,J=this.registry.ambigcites[X];if(J)for(f=0,c=J.length;f<c;f+=1)A[J[f]]=l.cloneAmbigConfig(this.registry.registry[J[f]].disambig)}this.debug&&l.debug("****** end state save *********")}this.tmp.taintedCitationIDs={};for(var Y=[],ne={},a=0,u=e.citationItems.length;a<u;a+=1){d={};for(var m in e.citationItems[a])d[m]=e.citationItems[a][m];if(O=this.retrieveItem(""+d.id),O.id&&this.transform.loadAbbreviation("default","hereinafter",O.id,O.language),d=l.parseLocator.call(this,d),this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable([[O,d]]),this.opt.development_extensions.locator_label_parse&&d.locator&&["bill","gazette","legislation","regulation","treaty"].indexOf(O.type)===-1&&(!d.label||d.label==="page")){var b=l.LOCATOR_LABELS_REGEXP.exec(d.locator);if(b){var re=l.LOCATOR_LABELS_MAP[b[2]];this.getTerm(re)&&(d.label=re,d.locator=b[3])}}var ee=[O,d];Y.push(ee),e.citationItems[a].item=O}e.sortedItems=Y;var K=[],pe={},ue;for(a=0,u=t.length;a<u;a+=1)n=t[a],this.opt.development_extensions.strict_inputs&&(pe[n[0]]&&l.error("Previously referenced citationID "+n[0]+" encountered in citationsPre"),n[1]&&(ue>n[1]&&l.debug("Note index sequence is not sane at citationsPre["+a+"]"),ue=n[1])),this.registry.citationreg.citationById[n[0]].properties.noteIndex=n[1],K.push(this.registry.citationreg.citationById[n[0]]),pe[n[0]]=this.registry.citationreg.citationById[n[0]];for(e.properties||(e.properties={noteIndex:0}),this.opt.development_extensions.strict_inputs&&(pe[e.citationID]&&l.error("Citation with previously referenced citationID "+e.citationID),e.properties.noteIndex&&(ue>e.properties.noteIndex&&l.debug("Note index sequence is not sane for citation "+e.citationID),ue=e.properties.noteIndex)),K.push(e),pe[e.citationID]=e,a=0,u=i.length;a<u;a+=1)o=i[a],this.opt.development_extensions.strict_inputs&&(pe[o[0]]&&l.error("Previously referenced citationID "+o[0]+" encountered in citationsPost"),o[1]&&(ue>o[1]&&l.debug("Note index sequence is not sane at postCitation["+a+"]"),ue=o[1])),this.registry.citationreg.citationById[o[0]].properties.noteIndex=o[1],K.push(this.registry.citationreg.citationById[o[0]]),pe[o[0]]=this.registry.citationreg.citationById[o[0]];this.registry.citationreg.citationByIndex=K,this.registry.citationreg.citationById=pe,this.registry.citationreg.citationsByItemId={},this.opt.update_mode===l.POSITION&&(g=[],S=[],I={});for(var z=[],a=0,u=K.length;a<u;a+=1){for(K[a].properties.index=a,f=0,c=K[a].sortedItems.length;f<c;f+=1)d=K[a].sortedItems[f],this.registry.citationreg.citationsByItemId[d[1].id]||(this.registry.citationreg.citationsByItemId[d[1].id]=[],z.push(""+d[1].id)),this.registry.citationreg.citationsByItemId[d[1].id].indexOf(K[a])===-1&&this.registry.citationreg.citationsByItemId[d[1].id].push(K[a]);this.opt.update_mode===l.POSITION&&(K[a].properties.noteIndex?S.push(K[a]):(K[a].properties.noteIndex=0,g.push(K[a])))}if(r!==l.ASSUME_ALL_ITEMS_REGISTERED&&(this.debug&&l.debug("****** start update items *********"),this.updateItems(z,null,null,!0),this.debug&&l.debug("****** endo update items *********")),!this.opt.citation_number_sort&&Y&&Y.length>1&&this.citation_sort.tokens.length>0){for(var a=0,u=Y.length;a<u;a+=1)Y[a][1].sortkeys=l.getSortKeys.call(this,Y[a][0],"citation_sort");if(this.opt.grouped_sort&&!e.properties.unsorted){for(var a=0,u=Y.length;a<u;a+=1){var te=Y[a][1].sortkeys;this.tmp.authorstring_request=!0;var F=this.registry.registry[Y[a][0].id].disambig;this.tmp.authorstring_request=!0,l.getAmbiguousCite.call(this,Y[a][0],F);var V=this.registry.authorstrings[Y[a][0].id];this.tmp.authorstring_request=!1,Y[a][1].sortkeys=[V].concat(te)}Y.sort(this.citation.srt.compareCompositeKeys);for(var Z=!1,M=!1,x=!1,a=0,u=Y.length;a<u;a+=1)Y[a][1].sortkeys[0]!==Z&&(x=Y[a][1].sortkeys[0],M=Y[a][1].sortkeys[1]),Y[a][1].sortkeys[0]=""+M+a,Z=x}e.properties.unsorted||Y.sort(this.citation.srt.compareCompositeKeys)}this.opt.parallel.enable&&this.parallel.StartCitation(e.sortedItems);var v;if(this.opt.update_mode===l.POSITION)for(var a=0;a<2;a+=1){var j={},L={},R={};for(v=[g,S][a],f=0,c=v.length;f<c;f+=1){var D=v[f];for(v[f].properties.noteIndex||(v[f].properties.noteIndex=0),v[f].properties.noteIndex=parseInt(v[f].properties.noteIndex,10),f>0&&D.properties.noteIndex&&v[f-1].properties.noteIndex>D.properties.noteIndex&&(I={},j={},L={},R={}),h=0,p=D.sortedItems.length;h<p;h+=1)D.sortedItems[h][1].parallel&&D.sortedItems[h][1].parallel!=="first"||(I[D.properties.noteIndex]?I[D.properties.noteIndex]+=1:I[D.properties.noteIndex]=1);for(h=0,p=v[f].sortedItems.length;h<p;h+=1){d=v[f].sortedItems[h];var k=d[0].id,P=d[0].legislation_id?d[0].legislation_id:d[0].id,G=d[0].legislation_id?d[0].legislation_id:d[0].container_id?d[0].container_id:d[0].id,Q=d[1]["locator-extra"],ie=d[1].locator,le=d[1].label,H,he;if(h>0)if(D.sortedItems[h-1][0].legislation_id)H=D.sortedItems[h-1][0].legislation_id;else{H=D.sortedItems[h-1][1].id,he=D.sortedItems[h-1][1]["locator-extra"];for(var ce=h-2;ce>-1;ce--)D.sortedItems[ce][1].parallel==="first"&&(H=D.sortedItems[ce][1].id,he=D.sortedItems[ce][1]["locator-extra"])}if(r===l.PREVIEW&&D.citationID!=e.citationID){typeof j[d[1].id]>"u"&&(j[P]=D.properties.noteIndex),L[G]=D.properties.noteIndex;continue}var fe={};if(fe.position=d[1].position,fe["first-reference-note-number"]=d[1]["first-reference-note-number"],fe["first-container-reference-note-number"]=d[1]["first-container-reference-note-number"],fe["near-note"]=d[1]["near-note"],d[1]["first-reference-note-number"]=0,d[1]["first-container-reference-note-number"]=0,d[1]["near-note"]=!1,this.registry.citationreg.citationsByItemId[k]&&this.opt.xclass==="note"&&this.opt.has_disambiguate){var de=this.registry.registry[d[0].id]["citation-count"],be=this.registry.citationreg.citationsByItemId[k].length;if(this.registry.registry[d[0].id]["citation-count"]=this.registry.citationreg.citationsByItemId[k].length,typeof de=="number"){var ge=de<2,ye=be<2;if(ge!==ye)for(var ce=0,xe=this.registry.citationreg.citationsByItemId[k].length;ce<xe;ce++)ne[this.registry.registry[d[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[k][ce].citationID]=!0}else for(var ce=0,xe=this.registry.citationreg.citationsByItemId[k].length;ce<xe;ce++)ne[this.registry.registry[d[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[k][ce].citationID]=!0}var Te,Oe;if(typeof L[G]>"u"&&D.properties.mode!=="author-only")j[P]=D.properties.noteIndex,L[G]=D.properties.noteIndex,R[G]=D.properties.noteIndex,d[1].position=l.POSITION_FIRST;else{var C=!1,y=!1,E=null;if(f>0)var E=v[f-1];var U=v[f];if(f>0){var W=1;E.properties.mode==="author-only"&&f>1&&(W=2);var se=f-W;v[se].sortedItems.length&&(Te=v[se].sortedItems.slice(-1)[0][1].id,Oe=v[f-W].sortedItems.slice(-1)[0][1]["locator-extra"]),E.sortedItems.length&&E.sortedItems[0].slice(-1)[0].legislation_id&&(Te=E.sortedItems[0].slice(-1)[0].legislation_id)}if(f>0&&h===0&&E.properties.noteIndex!==U.properties.noteIndex){var ae=!1,_e=E.sortedItems[0][0].id;if(E.sortedItems[0][0].legislation_id&&(_e=E.sortedItems[0][0].legislation_id),_e==P&&E.properties.noteIndex>=U.properties.noteIndex-1){var Le=E.sortedItems[0][1]["locator-extra"],Be=U.sortedItems[0][1]["locator-extra"];(I[E.properties.noteIndex]===1||E.properties.noteIndex===0)&&Le===Be&&(ae=!0)}ae?C=!0:y=!0}else h>0&&H==P&&he==Q||h===0&&f>0&&E.properties.noteIndex==U.properties.noteIndex&&E.sortedItems.length&&Te==P&&Oe==Q?C=!0:y=!0;var Re,we,Ur,kt,Mr;C&&(h>0?Re=D.sortedItems[h-1][1]:Re=v[f-1].sortedItems[0][1],Re.locator?(Re.label?Ur=Re.label:Ur="",we=""+Re.locator+Ur):we=Re.locator,ie?(le?Mr=le:Mr="",kt=""+ie+Mr):kt=ie),C&&we&&!kt&&(C=!1,y=!0),C&&(!we&&kt?d[1].position=l.POSITION_IBID_WITH_LOCATOR:!we&&!kt||we&&kt===we?d[1].position=l.POSITION_IBID:we&&kt&&kt!==we?d[1].position=l.POSITION_IBID_WITH_LOCATOR:(C=!1,y=!0)),y&&(d[1].position=l.POSITION_CONTAINER_SUBSEQUENT,typeof j[P]>"u"?j[P]=D.properties.noteIndex:d[1].position=l.POSITION_SUBSEQUENT),(y||C)&&(D.properties.mode==="author-only"&&(d[1].position=l.POSITION_FIRST),R[G]!=D.properties.noteIndex&&(d[1]["first-container-reference-note-number"]=R[G],this.registry.registry[d[0].id]&&(this.registry.registry[d[0].id]["first-container-reference-note-number"]=R[G])),j[P]!=D.properties.noteIndex&&(d[1]["first-reference-note-number"]=j[P],this.registry.registry[d[0].id]&&(this.registry.registry[d[0].id]["first-reference-note-number"]=j[P])))}if(D.properties.noteIndex){var Wu=parseInt(D.properties.noteIndex,10)-parseInt(L[G],10);d[1].position!==l.POSITION_FIRST&&Wu<=this.citation.opt["near-note-distance"]&&(d[1]["near-note"]=!0),L[G]=D.properties.noteIndex}else d[1].position!==l.POSITION_FIRST&&(d[1]["near-note"]=!0);if(D.citationID!=e.citationID)for(T=0,w=l.POSITION_TEST_VARS.length;T<w;T+=1){var jr=l.POSITION_TEST_VARS[T];d[1][jr]!==fe[jr]&&(this.registry.registry[d[0].id]&&jr==="first-reference-note-number"&&(ne[this.registry.registry[d[0].id].ambig]=!0,this.tmp.taintedItemIDs[d[0].id]=!0),this.tmp.taintedCitationIDs[D.citationID]=!0)}this.sys.variableWrapper&&(d[1].index=D.properties.index,d[1].noteIndex=D.properties.noteIndex)}}}if(this.opt.citation_number_sort&&Y&&Y.length>1&&this.citation_sort.tokens.length>0&&!e.properties.unsorted){for(var a=0,u=Y.length;a<u;a+=1)Y[a][1].sortkeys=l.getSortKeys.call(this,Y[a][0],"citation_sort");Y.sort(this.citation.srt.compareCompositeKeys)}for(var m in this.tmp.taintedItemIDs)if(this.tmp.taintedItemIDs.hasOwnProperty(m)&&(v=this.registry.citationreg.citationsByItemId[m],v))for(var a=0,u=v.length;a<u;a+=1)this.tmp.taintedCitationIDs[v[a].citationID]=!0;var Ti=[];if(r===l.PREVIEW){this.debug&&l.debug("****** start run processor *********");try{Ti=this.process_CitationCluster.call(this,e.sortedItems,e)}catch(zi){l.error("Error running CSL processor for preview: "+zi)}this.debug&&(l.debug("****** end run processor *********"),l.debug("****** start state restore *********")),this.registry.citationreg.citationByIndex=N,this.registry.citationreg.citationById={};for(var a=0,u=N.length;a<u;a+=1)this.registry.citationreg.citationById[N[a].citationID]=N[a];this.debug&&l.debug("****** start final update *********");for(var Jn=[],a=0,u=q.length;a<u;a+=1)Jn.push(""+q[a].id);this.updateItems(Jn,null,null,!0),this.debug&&l.debug("****** end final update *********");for(var m in A)A.hasOwnProperty(m)&&(this.registry.registry[m].disambig=A[m]);this.debug&&l.debug("****** end state restore *********")}else{for(var Ku in ne)this.disambiguate.run(Ku,e);var gt;for(var m in this.tmp.taintedCitationIDs)if(m!=e.citationID){var ot=this.registry.citationreg.citationById[m];if(!ot.properties.unsorted){for(var a=0,u=ot.sortedItems.length;a<u;a+=1)ot.sortedItems[a][1].sortkeys=l.getSortKeys.call(this,ot.sortedItems[a][0],"citation_sort");ot.sortedItems.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_pos=ot.properties.index,this.tmp.citation_note_index=ot.properties.noteIndex,this.tmp.citation_id=""+ot.citationID,gt=[],gt.push(ot.properties.index),gt.push(this.process_CitationCluster.call(this,ot.sortedItems,ot)),gt.push(ot.citationID),Ti.push(gt)}this.tmp.taintedItemIDs={},this.tmp.taintedCitationIDs={},this.tmp.citation_pos=e.properties.index,this.tmp.citation_note_index=e.properties.noteIndex,this.tmp.citation_id=""+e.citationID,gt=[],gt.push(t.length),gt.push(this.process_CitationCluster.call(this,Y,e)),gt.push(e.citationID),Ti.push(gt),Ti.sort(function(zi,Yn){return zi[0]>Yn[0]?1:zi[0]<Yn[0]?-1:0})}return this.registry.return_data.citation_errors=this.tmp.citation_errors.slice(),[this.registry.return_data,Ti]};l.Engine.prototype.process_CitationCluster=function(e,t){var i="";if(t&&t.properties&&t.properties.mode==="composite"){t.properties.mode="author-only";var r=l.getCitationCluster.call(this,e,t);t.properties.mode="suppress-author";var s="";t.properties.infix&&(this.output.append(t.properties.infix),s=this.output.string(this,this.output.queue),typeof s=="object"&&(s=s.join("")));var n=l.getCitationCluster.call(this,e,t);t.properties.mode="composite",r&&s&&l.SWAPPING_PUNCTUATION.concat(["","'"]).indexOf(s[0])>-1&&(r+=s,s=!1),i=[r,s,n].filter(function(o){return o}).join(" ")}else i=l.getCitationCluster.call(this,e,t);return i};l.Engine.prototype.makeCitationCluster=function(e){var t,i,c,r,s,n,o;for(t=[],s=e.length,r=0;r<s;r+=1){n={};for(var a in e[r])n[a]=e[r][a];if(o=this.retrieveItem(""+n.id),this.opt.development_extensions.locator_label_parse&&n.locator&&["bill","gazette","legislation","regulation","treaty"].indexOf(o.type)===-1&&(!n.label||n.label==="page")){var u=l.LOCATOR_LABELS_REGEXP.exec(n.locator);if(u){var f=l.LOCATOR_LABELS_MAP[u[2]];this.getTerm(f)&&(n.label=f,n.locator=u[3])}}n.locator&&(n.locator=(""+n.locator).replace(/\s+$/,"")),i=[o,n],t.push(i)}if(this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable(t),t&&t.length>1&&this.citation_sort.tokens.length>0){for(s=t.length,r=0;r<s;r+=1)t[r][1].sortkeys=l.getSortKeys.call(this,t[r][0],"citation_sort");t.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_errors=[];var c=l.getCitationCluster.call(this,t);return c};l.getAmbiguousCite=function(e,t,i,r){var p,s=this.tmp.group_context.tip,n={term_intended:s.term_intended,variable_attempt:s.variable_attempt,variable_success:s.variable_success,output_tip:s.output_tip,label_form:s.label_form,non_parallel:s.non_parallel,parallel_last:s.parallel_last,parallel_first:s.parallel_first,parallel_last_override:s.parallel_last_override,parallel_delimiter_override:s.parallel_delimiter_override,parallel_delimiter_override_on_suppress:s.parallel_delimiter_override_on_suppress,condition:s.condition,force_suppress:s.force_suppress,done_vars:s.done_vars.slice()};t?this.tmp.disambig_request=t:this.tmp.disambig_request=!1;var o={position:l.POSITION_SUBSEQUENT,"near-note":!0};r&&(o.locator=r.locator,o.label=r.label),this.registry.registry[e.id]&&this.registry.citationreg.citationsByItemId&&this.registry.citationreg.citationsByItemId[e.id]&&this.registry.citationreg.citationsByItemId[e.id].length&&i&&this.citation.opt["givenname-disambiguation-rule"]==="by-cite"&&(o["first-reference-note-number"]=this.registry.registry[e.id]["first-reference-note-number"]),this.tmp.area="citation",this.tmp.root="citation";var a=this.tmp.suppress_decorations;this.tmp.suppress_decorations=!0,this.tmp.just_looking=!0,l.getCite.call(this,e,o,null,!1);for(var u=0,f=this.output.queue.length;u<f;u+=1)l.Output.Queue.purgeEmptyBlobs(this.output.queue[u]);if(this.opt.development_extensions.clean_up_csl_flaws)for(var c=0,h=this.output.queue.length;c<h;c+=1)this.output.adjust.upward(this.output.queue[c]),this.output.adjust.leftward(this.output.queue[c]),this.output.adjust.downward(this.output.queue[c]),this.output.adjust.fix(this.output.queue[c]);var p=this.output.string(this,this.output.queue);return this.tmp.just_looking=!1,this.tmp.suppress_decorations=a,this.tmp.group_context.replace(n),p};l.getSpliceDelimiter=function(e,t,i){if(this.citation.opt["after-collapse-delimiter"]!==void 0)e?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:t&&!this.tmp.have_collapsed?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:!t&&!this.tmp.have_collapsed&&this.citation.opt.collapse!=="year-suffix"?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:this.tmp.splice_delimiter=this.citation.opt.layout_delimiter;else if(this.tmp.use_cite_group_delimiter)this.tmp.splice_delimiter=this.citation.opt.cite_group_delimiter;else if(this.tmp.have_collapsed&&this.opt.xclass==="in-text"&&this.opt.update_mode!==l.NUMERIC)this.tmp.splice_delimiter=", ";else if(this.tmp.cite_locales[i-1]){var r=this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[i-1]];r&&r.delimiter&&(this.tmp.splice_delimiter=r.delimiter)}else this.tmp.splice_delimiter||(this.tmp.splice_delimiter="");return this.tmp.splice_delimiter};l.getCitationCluster=function(e,t){var i,r,s,n,o,a,u,f,c,h,p,T,w,m,O,d,S,g,b,I,N,q="";this.output.checkNestedBrace=new l.checkNestedBrace(this),t&&(b=t.citationID,I=t.properties.mode==="author-only"?!!t.properties.mode:!1,this.opt.xclass!=="note"&&(N=t.properties.mode==="suppress-author"?!!t.properties.mode:!1),t.properties.prefix&&(q=l.checkPrefixSpaceAppend(this,t.properties.prefix))),e=e||[],this.tmp.last_primary_names_string=!1,S=l.getSafeEscape(this),this.tmp.area="citation",this.tmp.root="citation",i="",r=[],this.tmp.last_suffix_used="",this.tmp.last_names_used=[],this.tmp.last_years_used=[],this.tmp.backref_index=[],this.tmp.cite_locales=[],this.tmp.just_looking||(this.tmp.abbrev_trimmer={QUASHES:{}});var A=this.output.checkNestedBrace.update(this.citation.opt.layout_prefix+q),_=!1;if(this.citation.opt.suppressTrailingPunctuation&&(_=!0),b&&this.registry.citationreg.citationById[b].properties["suppress-trailing-punctuation"]&&(_=!0),this.opt.xclass==="note"){for(var B=[],$=!1,X=!1,J=[],Y=0,ne=e.length;Y<ne;Y+=1){var re=e[Y][0].type,ee=e[Y][0].title,K=e[Y][1].position,pe=e[Y][0].id;ee&&re==="legal_case"&&pe!==X&&K&&((ee!==$||B.length===0)&&(J=[],B.push(J)),J.push(e[Y][1])),$=ee,X=pe}for(Y=0,ne=B.length;Y<ne;Y+=1)if(J=B[Y],!(J.length<2)){var ue=J.slice(-1)[0].locator;if(ue)for(var z=0,te=J.length-1;z<te;z+=1)J[z].locator&&(ue=!1);ue&&(J[0].locator=ue,delete J.slice(-1)[0].locator,J[0].label=J.slice(-1)[0].label,J.slice(-1)[0].label&&delete J.slice(-1)[0].label)}}for(s=[],n=e.length,e[0]&&e[0][1]&&(I?(delete e[0][1]["suppress-author"],e[0][1]["author-only"]=!0):N&&(delete e[0][1]["author-only"],e[0][1]["suppress-author"]=!0)),this.opt.parallel.enable&&this.parallel.StartCitation(e),o=0;o<n;o+=1){this.tmp.cite_index=o,T=e[o][0],a=e[o][1],a=l.parseLocator.call(this,a),u=this.tmp.have_collapsed;var F=!1;if(o>0&&e[o-1][1]&&(F=!!e[o-1][1].locator),f={},this.tmp.shadow_numbers={},!this.tmp.just_looking&&this.opt.hasPlaceholderTerm){var V=this.output;this.output=new l.Output.Queue(this),this.output.adjust=new l.Output.Queue.adjust,l.getAmbiguousCite.call(this,T,null,!1,a),this.output=V}if(this.tmp.in_cite_predecessor=!1,o>0?l.getCite.call(this,T,a,""+e[o-1][0].id,!0):(this.tmp.term_predecessor=!1,l.getCite.call(this,T,a,null,!0)),this.tmp.cite_renders_content||(g={citationID:""+this.tmp.citation_id,index:this.tmp.citation_pos,noteIndex:this.tmp.citation_note_index,itemID:""+T.id,citationItems_pos:o,error_code:l.ERROR_NO_RENDERED_FORM},this.tmp.citation_errors.push(g)),f.splice_delimiter=l.getSpliceDelimiter.call(this,F,u,o),a&&a["author-only"]&&(this.tmp.suppress_decorations=!0),o>0){d=e[o-1][1];var Z=d.suffix&&[";",".",","].indexOf(d.suffix.slice(-1))>-1,M=!d.suffix&&a.prefix&&[";",".",","].indexOf(a.prefix.slice(0,1))>-1;if(Z||M){var x=f.splice_delimiter.indexOf(" ");x>-1&&!M?f.splice_delimiter=f.splice_delimiter.slice(x):f.splice_delimiter=""}}if(f.suppress_decorations=this.tmp.suppress_decorations,f.have_collapsed=this.tmp.have_collapsed,s.push(f),a["author-only"])break}p=this.output.queue.slice();var v="";t&&(v=l.checkSuffixSpacePrepend(this,t.properties.suffix));var j=this.citation.opt.layout_suffix,L=this.tmp.cite_locales[this.tmp.cite_locales.length-1];L&&this.tmp.cite_affixes[this.tmp.area][L]&&this.tmp.cite_affixes[this.tmp.area][L].suffix&&(j=this.tmp.cite_affixes[this.tmp.area][L].suffix),l.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(j.slice(0,1))>-1&&(j=j.slice(0,1)),j=this.output.checkNestedBrace.update(v+j);for(var Y=0,ne=this.output.queue.length;Y<ne;Y+=1)l.Output.Queue.purgeEmptyBlobs(this.output.queue[Y]);if(!this.tmp.suppress_decorations&&this.output.queue.length&&(this.opt.development_extensions.apply_citation_wrapper&&this.sys.wrapCitationEntry&&!this.tmp.just_looking&&this.tmp.area==="citation"||(_||(this.output.queue[this.output.queue.length-1].strings.suffix=j),this.output.queue[0].strings.prefix=A)),this.opt.development_extensions.clean_up_csl_flaws)for(var z=0,te=this.output.queue.length;z<te;z+=1)this.output.adjust.upward(this.output.queue[z]),this.output.adjust.leftward(this.output.queue[z]),this.output.adjust.downward(this.output.queue[z]),this.tmp.last_chr=this.output.adjust.fix(this.output.queue[z]);for(o=0,n=p.length;o<n;o+=1){var R=[];if(this.output.queue=[p[o]],this.tmp.suppress_decorations=s[o].suppress_decorations,this.tmp.splice_delimiter=s[o].splice_delimiter,p[o].parallel_delimiter&&(this.tmp.splice_delimiter=p[o].parallel_delimiter),this.tmp.have_collapsed=s[o].have_collapsed,c=this.output.string(this,this.output.queue),this.tmp.suppress_decorations=!1,typeof c=="string")return this.tmp.suppress_decorations=!1,c||(this.opt.development_extensions.throw_on_empty?l.error("Citation would render no content"):c="[NO_PRINTED_FORM]"),c;if(typeof c=="object"&&c.length===0&&!a["suppress-author"]){if(o===0){var D="[CSL STYLE ERROR: reference with no printed form.]",k=o===0?S(this.citation.opt.layout_prefix):"",P=o===p.length-1?S(this.citation.opt.layout_suffix):"";c.push(k+D+P)}else if(o===p.length-1){var G=r[r.length-1];typeof G=="string"?r[r.length-1]+=S(this.citation.opt.layout_suffix):typeof G=="object"&&(G.strings.suffix+=S(this.citation.opt.layout_suffix))}}if(R.length&&typeof c[0]=="string"){c.reverse();var Q=c.pop();Q&&Q.slice(0,1)===","?R.push(Q):typeof R.slice(-1)[0]=="string"&&R.slice(-1)[0].slice(-1)===","?R.push(" "+Q):Q&&R.push(S(this.tmp.splice_delimiter)+Q)}else c.reverse(),h=c.pop(),typeof h<"u"&&(R.length&&typeof R[R.length-1]=="string"&&(R[R.length-1]+=h.successor_prefix),R.push(h));for(w=c.length,m=0;m<w;m+=1){if(O=c[m],typeof O=="string"){R.push(S(this.tmp.splice_delimiter)+O);continue}h=c.pop(),typeof h<"u"&&R.push(h)}R.length===0&&e[o][1]["suppress-author"],R.length>1&&typeof R[0]!="string"&&(R=[this.output.renderBlobs(R)]),R.length&&(typeof R[0]=="string"?o>0&&(R[0]=S(this.tmp.splice_delimiter)+R[0]):o>0?R[0].splice_prefix=this.tmp.splice_delimiter:R[0].splice_prefix=""),r=r.concat(R)}if(i+=this.output.renderBlobs(r),i&&!this.tmp.suppress_decorations)for(n=this.citation.opt.layout_decorations.length,o=0;o<n;o+=1)f=this.citation.opt.layout_decorations[o],f[1]!=="normal"&&(!a||!a["author-only"])&&(i=this.fun.decorate[f[0]][f[1]](this,i));return this.tmp.suppress_decorations=!1,i||(this.opt.development_extensions.throw_on_empty?l.error("Citation would render no content"):i="[NO_PRINTED_FORM]"),i};l.getCite=function(e,t,i,r){var s,n,o=this.tmp.area;for(t&&t["author-only"]&&this.intext&&this.intext.tokens.length>0&&(this.tmp.area="intext"),this.tmp.cite_renders_content=!1,this.tmp.probably_rendered_something=!1,this.tmp.prevItemID=i,l.citeStart.call(this,e,t,r),s=0,this.tmp.name_node={},this.nameOutput=new l.NameOutput(this,e,t);s<this[this.tmp.area].tokens.length;)s=l.tokenExec.call(this,this[this.tmp.area].tokens[s],e,t);return l.citeEnd.call(this,e,t),!this.tmp.cite_renders_content&&!this.tmp.just_looking&&this.tmp.area==="bibliography"&&(n={index:this.tmp.bibliography_pos,itemID:""+e.id,error_code:l.ERROR_NO_RENDERED_FORM},this.tmp.bibliography_errors.push(n)),this.tmp.area=o,""+e.id};l.citeStart=function(e,t,i){if(this.tmp.lang_array=[],e.language){var r=e.language.match(/^([a-zA-Z]+).*/);r&&this.tmp.lang_array.push(r[1].toLowerCase())}if(this.tmp.lang_array.push(this.opt.lang),i||(this.tmp.shadow_numbers={}),this.tmp.disambiguate_count=0,this.tmp.disambiguate_maxMax=0,this.tmp.same_author_as_previous_cite=!1,this.tmp.suppress_decorations?this.tmp.subsequent_author_substitute_ok=!1:this.tmp.subsequent_author_substitute_ok=!0,this.tmp.lastchr="",this.tmp.area==="citation"&&this.citation.opt.collapse&&this.citation.opt.collapse.length?this.tmp.have_collapsed=!0:this.tmp.have_collapsed=!1,this.tmp.render_seen=!1,this.tmp.disambig_request&&!this.tmp.disambig_override?this.tmp.disambig_settings=this.tmp.disambig_request:this.registry.registry[e.id]&&!this.tmp.disambig_override?(this.tmp.disambig_request=this.registry.registry[e.id].disambig,this.tmp.disambig_settings=this.registry.registry[e.id].disambig):this.tmp.disambig_settings=new l.AmbigConfig,this.tmp.area!=="citation"){if(!this.registry.registry[e.id])this.tmp.disambig_restore=new l.AmbigConfig;else if(this.tmp.disambig_restore=l.cloneAmbigConfig(this.registry.registry[e.id].disambig),this.tmp.area==="bibliography"&&this.tmp.disambig_settings&&this.tmp.disambig_override&&(this.opt["disambiguate-add-names"]&&(this.tmp.disambig_settings.names=this.registry.registry[e.id].disambig.names.slice(),this.tmp.disambig_request&&(this.tmp.disambig_request.names=this.registry.registry[e.id].disambig.names.slice())),this.opt["disambiguate-add-givenname"])){this.tmp.disambig_request=this.tmp.disambig_settings,this.tmp.disambig_settings.givens=this.registry.registry[e.id].disambig.givens.slice(),this.tmp.disambig_request.givens=this.registry.registry[e.id].disambig.givens.slice();for(var s=0,n=this.tmp.disambig_settings.givens.length;s<n;s+=1)this.tmp.disambig_settings.givens[s]=this.registry.registry[e.id].disambig.givens[s].slice();for(var s=0,n=this.tmp.disambig_request.givens.length;s<n;s+=1)this.tmp.disambig_request.givens[s]=this.registry.registry[e.id].disambig.givens[s].slice()}}this.tmp.names_used=[],this.tmp.nameset_counter=0,this.tmp.years_used=[],this.tmp.names_max.clear(),this.tmp.just_looking||(!t||t.parallel==="first"||!t.parallel)&&(this.tmp.abbrev_trimmer={QUASHES:{}}),this.tmp.splice_delimiter=this[this.tmp.area].opt.layout_delimiter,this.bibliography_sort.keys=[],this.citation_sort.keys=[],this.tmp.has_done_year_suffix=!1,this.tmp.last_cite_locale=!1,!this.tmp.just_looking&&t&&!t.position&&this.registry.registry[e.id]&&(this.tmp.disambig_restore=l.cloneAmbigConfig(this.registry.registry[e.id].disambig)),this.tmp.first_name_string=!1,this.tmp.authority_stop_last=0};l.citeEnd=function(e,t){if(this.tmp.disambig_restore&&this.registry.registry[e.id]){this.registry.registry[e.id].disambig.names=this.tmp.disambig_restore.names.slice(),this.registry.registry[e.id].disambig.givens=this.tmp.disambig_restore.givens.slice();for(var i=0,r=this.registry.registry[e.id].disambig.givens.length;i<r;i+=1)this.registry.registry[e.id].disambig.givens[i]=this.tmp.disambig_restore.givens[i].slice()}if(this.tmp.disambig_restore=!1,t&&t.suffix?this.tmp.last_suffix_used=t.suffix:this.tmp.last_suffix_used="",this.tmp.last_years_used=this.tmp.years_used.slice(),this.tmp.last_names_used=this.tmp.names_used.slice(),this.tmp.cut_var=!1,this.tmp.disambig_request=!1,this.tmp.cite_locales.push(this.tmp.last_cite_locale),this.tmp.issued_date&&this.tmp.renders_collection_number){for(var s=[],i=this.tmp.issued_date.list.length-1;i>this.tmp.issued_date.pos;i+=-1)s.push(this.tmp.issued_date.list.pop());for(this.tmp.issued_date.list.pop(),i=s.length-1;i>-1;i+=-1)this.tmp.issued_date.list.push(s.pop())}this.tmp.issued_date=!1,this.tmp.renders_collection_number=!1};l.Engine.prototype.makeBibliography=function(e){var t,i,r,s,n,o,a,u,f;if(t=!1,!e&&(this.bibliography.opt.exclude_types||this.bibliography.opt.exclude_with_fields)){if(e={exclude:[]},this.bibliography.opt.exclude_types)for(var c in this.bibliography.opt.exclude_types){var h=this.bibliography.opt.exclude_types[c];e.exclude.push({field:"type",value:h})}if(this.bibliography.opt.exclude_with_fields)for(var c in this.bibliography.opt.exclude_with_fields){var p=this.bibliography.opt.exclude_with_fields[c];e.exclude.push({field:p,value:!0})}}if(!this.bibliography.tokens.length)return!1;if(typeof e=="string"&&(this.opt.citation_number_slug=e,e=!1),t){for(n=this.bibliography.tokens.length,o=0;o<n;o+=1)a=this.bibliography.tokens[o],l.debug("bibtok: "+a.name);for(l.debug("---"),n=this.citation.tokens.length,o=0;o<n;o+=1)this.citation.tokens[o],l.debug("cittok: "+a.name);for(l.debug("---"),n=this.bibliography_sort.tokens.length,o=0;o<n;o+=1)this.bibliography_sort.tokens[o],l.debug("bibsorttok: "+a.name)}i=l.getBibliographyEntries.call(this,e),u=i[0],f=i[1];var T=i[2];for(r={maxoffset:0,entryspacing:this.bibliography.opt["entry-spacing"],linespacing:this.bibliography.opt["line-spacing"],"second-field-align":!1,entry_ids:u,bibliography_errors:this.tmp.bibliography_errors.slice(),done:T},this.bibliography.opt["second-field-align"]&&(r["second-field-align"]=this.bibliography.opt["second-field-align"]),n=this.registry.reflist.length,o=0;o<n;o+=1)s=this.registry.reflist[o],s.offset>r.maxoffset&&(r.maxoffset=s.offset);return this.bibliography.opt.hangingindent&&(r.hangingindent=this.bibliography.opt.hangingindent),r.bibstart=this.fun.decorate.bibstart,r.bibend=this.fun.decorate.bibend,this.opt.citation_number_slug=!1,[r,f]};l.getBibliographyEntries=function(e){var t,i,r,s,n,o,a,u,f,c,h,p,T,w,m,O,d,S,g,b,I;t=[],g=[],this.tmp.area="bibliography",this.tmp.root="bibliography",this.tmp.last_rendered_name=!1,this.tmp.bibliography_errors=[],this.tmp.bibliography_pos=0,e&&e.page_start&&e.page_length?i=this.registry.getSortedIds():i=this.refetchItems(this.registry.getSortedIds()),this.tmp.disambig_override=!0;function N(re,ee){return re===ee}function q(re,ee){for(c=ee.length,h=0;h<c;h+=1)if(N(re,ee[h]))return!0;return!1}function A(re,ee){return typeof re=="boolean"||!re?re?!!ee:!ee:typeof ee=="string"?N(re,ee):ee?q(re,ee):!1}d={};var _;if(e&&e.page_start&&e.page_length&&(_=0,e.page_start!==!0))for(w=0,m=i.length;w<m&&(d[i[w]]=!0,e.page_start!=i[w]);w+=1);var B=[],$={};for(this.tmp.container_item_count={},i=i.filter(re=>{var ee=re;return re.legislation_id?$[re.legislation_id]?ee=!1:$[re.legislation_id]=!0:re.container_id&&(this.tmp.container_item_count[re.container_id]||(this.tmp.container_item_count[re.container_id]=0),this.tmp.container_item_count[re.container_id]++,this.bibliography.opt.consolidate_containers.indexOf(re.type)>-1&&($[re.container_id]?ee=!1:$[re.container_id]=!0)),ee}),this.tmp.container_item_pos={},w=0,m=i.length;w<m;w+=1){if(e&&e.page_start&&e.page_length){if(d[i[w]])continue;if(u=this.refetchItem(i[w]),_===e.page_length)break}else if(u=i[w],d[u.id])continue;if(e){if(r=!0,e.include){for(r=!1,b=0,I=e.include.length;b<I;b+=1)if(f=e.include[b],A(f.value,u[f.field])){r=!0;break}}else if(e.exclude){for(s=!1,b=0,I=e.exclude.length;b<I;b+=1)if(f=e.exclude[b],A(f.value,u[f.field])){s=!0;break}s&&(r=!1)}else if(e.select){for(r=!1,n=!0,b=0,I=e.select.length;b<I;b+=1)f=e.select[b],A(f.value,u[f.field])||(n=!1);n&&(r=!0)}if(e.quash){for(n=!0,b=0,I=e.quash.length;b<I;b+=1)f=e.quash[b],A(f.value,u[f.field])||(n=!1);n&&(r=!1)}if(!r)continue}if(u.container_id&&(this.tmp.container_item_pos[u.container_id]||(this.tmp.container_item_pos[u.container_id]=0),this.tmp.container_item_pos[u.container_id]++),o=new l.Token("group",l.START),o.decorations=[["@bibliography","entry"]].concat(this.bibliography.opt.layout_decorations),this.output.startTag("bib_entry",o),u.system_id&&this.sys.embedBibliographyEntry?this.output.current.value().item_id=u.system_id:this.output.current.value().system_id=u.id,T=[],this.registry.registry[u.id].master&&!(e&&e.page_start&&e.page_length)){S=[[u,{id:u.id}]],O=this.registry.registry[u.id].siblings;for(var b=0,I=O.length;b<I;b++)S.push([this.refetchItem(O[b]),{id:O[b]}]);for(this.parallel.StartCitation(S),this.registry.registry[u.id].parallel_delimiter_override?this.output.queue[0].strings.delimiter=this.registry.registry[u.id].parallel_delimiter_override:this.output.queue[0].strings.delimiter=", ",this.tmp.term_predecessor=!1,this.tmp.cite_index=0,b=0,I=S.length;b<I;b+=1)b<S.length-1?this.tmp.parallel_and_not_last=!0:delete this.tmp.parallel_and_not_last,T.push(""+l.getCite.call(this,S[b][0],S[b][1])),this.tmp.cite_index++,d[S[b][0].id]=!0}else this.registry.registry[u.id].siblings||(this.tmp.term_predecessor=!1,this.tmp.cite_index=0,T.push(""+l.getCite.call(this,u)),e&&e.page_start&&e.page_length&&(_+=1));for(g.push(""),this.tmp.bibliography_pos+=1,B.push(T),this.output.endTag("bib_entry"),this.output.queue[0].blobs.length&&this.output.queue[0].blobs[0].blobs.length&&(this.output.queue[0].blobs[0].blobs[0].strings?p=this.output.queue[0].blobs[0].blobs:p=this.output.queue[0].blobs,p[0].strings.prefix=this.bibliography.opt.layout_prefix+p[0].strings.prefix),b=0,I=this.output.queue.length;b<I;b+=1)l.Output.Queue.purgeEmptyBlobs(this.output.queue[b]);for(b=0,I=this.output.queue.length;b<I;b+=1)this.output.adjust.upward(this.output.queue[b]),this.output.adjust.leftward(this.output.queue[b]),this.output.adjust.downward(this.output.queue[b],!0),this.output.adjust.fix(this.output.queue[b]);if(a=this.output.string(this,this.output.queue)[0],!a&&this.opt.update_mode===l.NUMERIC){var X=t.length+1+". [CSL STYLE ERROR: reference with no printed form.]";a=l.Output.Formats[this.opt.mode]["@bibliography/entry"](this,X)}a&&t.push(a)}var J=!1;if(e&&e.page_start&&e.page_length){var Y=i.slice(-1)[0],ne=B.slice(-1)[0];(!Y||!ne||Y==ne)&&(J=!0)}return this.tmp.disambig_override=!1,[B,t,J]};l.Engine.prototype.setCitationId=function(e,t){var i,r,s;if(i=!1,!e.citationID||t){for(r=Math.floor(Math.random()*1e14);;){if(s=0,this.registry.citationreg.citationById[r])!s&&r<5e13?s=1:s=-1;else{e.citationID="a"+r.toString(32);break}s===1?r+=1:r+=-1}i=""+r}return this.registry.citationreg.citationById[e.citationID]=e,i};l.Engine.prototype.rebuildProcessorState=function(e,t,i){e||(e=[]),t||(t="html");for(var r={},s=[],n=0,o=e.length;n<o;n+=1)for(var a=0,u=e[n].citationItems.length;a<u;a+=1){var f=""+e[n].citationItems[a].id;r[f]||s.push(f),r[f]=!0}this.updateItems(s);var c=[],h=[],p=[],T=this.opt.mode;this.setOutputFormat(t);for(var n=0,o=e.length;n<o;n+=1){var w=this.processCitationCluster(e[n],c,h,l.ASSUME_ALL_ITEMS_REGISTERED);c.push([e[n].citationID,e[n].properties.noteIndex]);for(var a=0,u=w[1].length;a<u;a+=1){var m=w[1][a][0];p[m]=[c[m][0],c[m][1],w[1][a][1]]}}return this.updateUncitedItems(i),this.setOutputFormat(T),p};l.Engine.prototype.restoreProcessorState=function(e){var t,i,r,s,n,o,a,u,f,c;u=[],f=[],e||(e=[]);var h=[],p={};for(t=0,i=e.length;t<i;t+=1)p[e[t].citationID]&&this.setCitationId(e[t],!0),p[e[t].citationID]=!0,h.push(e[t].properties.index);var T=e.slice();for(T.sort(function(m,O){return m.properties.index<O.properties.index?-1:m.properties.index>O.properties.index?1:0}),t=0,i=T.length;t<i;t+=1)T[t].properties.index=t;for(t=0,i=T.length;t<i;t+=1){for(c=[],r=0,s=T[t].citationItems.length;r<s;r+=1)n=T[t].citationItems[r],typeof n.sortkeys>"u"&&(n.sortkeys=[]),o=this.retrieveItem(""+n.id),a=[o,n],c.push(a),T[t].citationItems[r].item=o,f.push(""+n.id);T[t].properties.unsorted||c.sort(this.citation.srt.compareCompositeKeys),T[t].sortedItems=c,this.registry.citationreg.citationById[T[t].citationID]=T[t]}for(this.updateItems(f),t=0,i=e.length;t<i;t+=1)u.push([""+e[t].citationID,e[t].properties.noteIndex]);var w=[];return e&&e.length?w=this.processCitationCluster(e[0],[],u.slice(1)):(this.registry=new l.Registry(this),this.tmp=new l.Engine.Tmp,this.disambiguate=new l.Disambiguation(this)),w};l.Engine.prototype.updateItems=function(e,t,i,r){var s=this.tmp.area,n=this.tmp.root,o=this.tmp.extension;if(this.bibliography_sort.tokens.length===0&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",r||(this.tmp.loadedItemIDs={}),this.registry.init(e),i)for(var a in this.registry.ambigcites)this.registry.ambigsTouched[a]=!0;return this.registry.dodeletes(this.registry.myhash),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=o,this.tmp.area=s,this.tmp.root=n,this.registry.getSortedIds()};l.Engine.prototype.updateUncitedItems=function(e,t){var i,r=this.tmp.area,s=this.tmp.root,n=this.tmp.extension;if(this.bibliography_sort.tokens.length===0&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",this.tmp.loadedItemIDs={},e||(e=[]),typeof e=="object"){if(typeof e.length>"u"){i=e,e=[];for(var o in i)e.push(o)}else if(typeof e.length=="number"){i={};for(var a=0,u=e.length;a<u;a+=1)i[e[a]]=!0}}return this.registry.init(e,!0),this.registry.dopurge(i),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=n,this.tmp.area=r,this.tmp.root=s,this.registry.getSortedIds()};l.localeResolve=function(e,t){var i,r;return t||(t="en-US"),e||(e=t),i={},r=e.split(/[\-_]/),i.base=l.LANG_BASES[r[0]],typeof i.base>"u"?{base:t,best:e,bare:r[0]}:(r.length===1&&(i.generic=!0),r.length===1||r[1]==="x"?i.best=i.base.replace("_","-"):i.best=r.slice(0,2).join("-"),i.base=i.base.replace("_","-"),i.bare=r[0],i)};l.Engine.prototype.localeConfigure=function(e,t){var i;if(!(t&&this.locale[e.best])&&(e.best==="en-US"?(i=l.setupXml(this.sys.retrieveLocale("en-US")),this.localeSet(i,"en-US",e.best)):e.best!=="en-US"&&(e.base!==e.best&&(i=l.setupXml(this.sys.retrieveLocale(e.base)),this.localeSet(i,e.base,e.best)),i=l.setupXml(this.sys.retrieveLocale(e.best)),this.localeSet(i,e.best,e.best)),this.localeSet(this.cslXml,"",e.best),this.localeSet(this.cslXml,e.bare,e.best),e.base!==e.best&&this.localeSet(this.cslXml,e.base,e.best),this.localeSet(this.cslXml,e.best,e.best),typeof this.locale[e.best].terms["page-range-delimiter"]>"u"&&(["fr","pt"].indexOf(e.best.slice(0,2).toLowerCase())>-1?this.locale[e.best].terms["page-range-delimiter"]="-":this.locale[e.best].terms["page-range-delimiter"]=""),typeof this.locale[e.best].terms["year-range-delimiter"]>"u"&&(this.locale[e.best].terms["year-range-delimiter"]=""),typeof this.locale[e.best].terms["citation-range-delimiter"]>"u"&&(this.locale[e.best].terms["citation-range-delimiter"]=""),this.opt.development_extensions.normalize_lang_keys_to_lowercase)){for(var r=["default-locale","locale-sort","locale-translit","locale-translat"],s=0,n=r.length;s<n;s+=1)for(var o=0,a=this.opt[r[s]].length;o<a;o+=1)this.opt[r[s]][o]=this.opt[r[s]][o].toLowerCase();this.opt.lang=this.opt.lang.toLowerCase()}};l.Engine.prototype.localeSet=function(e,t,i){var r,s,n,o,a,u,f,c,h,p,T,w,m,O,d,S;if(t=t.replace("_","-"),i=i.replace("_","-"),this.opt.development_extensions.normalize_lang_keys_to_lowercase&&(t=t.toLowerCase(),i=i.toLowerCase()),this.locale[i]||(this.locale[i]={},this.locale[i].terms={},this.locale[i].opts={},this.locale[i].opts["skip-words"]=l.SKIP_WORDS,this.locale[i].opts["leading-noise-words"]||(this.locale[i].opts["leading-noise-words"]=[]),this.locale[i].dates={},this.locale[i].ord={"1.0.1":!1,keys:{}},this.locale[i]["noun-genders"]={}),s=e.makeXml(),e.nodeNameIs(e.dataObj,"locale"))s=e.dataObj;else{n=e.getNodesByName(e.dataObj,"locale");var g=!1;for(a=0,w=e.numberofnodes(n);a<w;a+=1)if(r=n[a],!g&&e.getAttributeValue(r,"lang","xml")===t)s=r,g=!0;else{var b=e.getAttributeValue(r,"lang","xml"),I=e.getNodesByName(r,"style-options");if(b&&I&&I.length){var N=e.getAttributeValue(I[0],"jurisdiction-preference");N&&(this.locale[b]||(this.locale[b]={opts:{}}),this.locale[b].opts["jurisdiction-preference"]=N.split(/\s+/))}}}for(n=e.getNodesByName(s,"type"),d=0,S=e.numberofnodes(n);d<S;d+=1){var q=n[d],A=e.getAttributeValue(q,"name"),_=e.getAttributeValue(q,"gender");this.opt.gender[A]=_}var B=e.getNodesByName(s,"term","ordinal").length;if(B){for(var $ in this.locale[i].ord.keys)delete this.locale[i].terms[$];this.locale[i].ord={"1.0.1":!1,keys:{}}}n=e.getNodesByName(s,"term");var X={"last-digit":{},"last-two-digits":{},"whole-number":{}},J=!1,Y={};for(a=0,w=e.numberofnodes(n);a<w;a+=1){if(u=n[a],c=e.getAttributeValue(u,"name"),c==="sub verbo"&&(c="sub-verbo"),c.slice(0,7)==="ordinal"){if(c==="ordinal")J=!0;else{var ne=e.getAttributeValue(u,"match"),re=c.slice(8),m=e.getAttributeValue(u,"gender-form");m||(m="neuter"),ne||(ne="last-two-digits",re.slice(0,1)==="0"&&(ne="last-digit")),re.slice(0,1)==="0"&&(re=re.slice(1)),X[ne][re]||(X[ne][re]={}),X[ne][re][m]=c}this.locale[i].ord.keys[c]=!0}typeof this.locale[i].terms[c]>"u"&&(this.locale[i].terms[c]={}),f="long",m=!1,e.getAttributeValue(u,"form")&&(f=e.getAttributeValue(u,"form")),e.getAttributeValue(u,"gender-form")&&(m=e.getAttributeValue(u,"gender-form")),e.getAttributeValue(u,"gender")&&(this.locale[i]["noun-genders"][c]=e.getAttributeValue(u,"gender")),m?(this.locale[i].terms[c][m]={},this.locale[i].terms[c][m][f]=[],O=this.locale[i].terms[c][m],Y[c]=!0):(this.locale[i].terms[c][f]=[],O=this.locale[i].terms[c]),e.numberofnodes(e.getNodesByName(u,"multiple"))?(O[f][0]=e.getNodeValue(u,"single"),O[f][0].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0),O[f][1]=e.getNodeValue(u,"multiple"),O[f][1].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0)):(O[f]=e.getNodeValue(u),O[f].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0))}if(this.locale[i].terms.supplement||(this.locale[i].terms.supplement={}),this.locale[i].terms.supplement.long||(this.locale[i].terms.supplement.long=["supplement","supplements"]),J){for(var ee in Y){var K={},pe=0;for(var ue in this.locale[i].terms[ee])["masculine","feminine"].indexOf(ue)>-1?K[ue]=this.locale[i].terms[ee][ue]:pe+=1;if(!pe){if(K.feminine)for(var ue in K.feminine)this.locale[i].terms[ee][ue]=K.feminine[ue];else if(K.masculine)for(var ue in K.masculine)this.locale[i].terms[ee][ue]=K.masculine[ue]}}this.locale[i].ord["1.0.1"]=X}for(c in this.locale[i].terms)for(d=0,S=2;d<S;d+=1)if(m=l.GENDERS[d],this.locale[i].terms[c][m])for(f in this.locale[i].terms[c])this.locale[i].terms[c][m][f]||(this.locale[i].terms[c][m][f]=this.locale[i].terms[c][f]);for(n=e.getNodesByName(s,"style-options"),a=0,w=e.numberofnodes(n);a<w;a+=1){h=n[a],o=e.attributes(h);for(T in o)if(o.hasOwnProperty(T)){if(T==="@punctuation-in-quote"||T==="@limit-day-ordinals-to-day-1")o[T]==="true"?this.locale[i].opts[T.slice(1)]=!0:this.locale[i].opts[T.slice(1)]=!1;else if(T==="@jurisdiction-preference"){var z=o[T].split(/\s+/);this.locale[i].opts[T.slice(1)]=z}else if(T==="@skip-words"){var te=o[T].split(/\s*,\s*/);this.locale[i].opts[T.slice(1)]=te}else if(T==="@leading-noise-words"){var F=o[T].split(/\s*,\s*/);this.locale[i].opts["leading-noise-words"]=F}else if(T==="@name-as-sort-order"){this.locale[i].opts["name-as-sort-order"]={};for(var V=o[T].split(/\s+/),d=0,S=V.length;d<S;d+=1)this.locale[i].opts["name-as-sort-order"][V[d]]=!0}else if(T==="@name-as-reverse-order"){this.locale[i].opts["name-as-reverse-order"]={};for(var V=o[T].split(/\s+/),d=0,S=V.length;d<S;d+=1)this.locale[i].opts["name-as-reverse-order"][V[d]]=!0}else if(T==="@name-never-short"){this.locale[i].opts["name-never-short"]={};for(var V=o[T].split(/\s+/),d=0,S=V.length;d<S;d+=1)this.locale[i].opts["name-never-short"][V[d]]=!0}}}for(n=e.getNodesByName(s,"date"),a=0,w=e.numberofnodes(n);a<w;a+=1){var p=n[a];this.locale[i].dates[e.getAttributeValue(p,"form")]=p}l.SET_COURT_CLASSES(this,i,e,s)};l.getLocaleNames=function(e,t){var i=l.setupXml(e);function r(h,p){var T=["base","best"];if(p)for(var w=l.localeResolve(p),m=0,O=T.length;m<O;m++)w[T[m]]&&h.indexOf(w[T[m]])===-1&&h.push(w[T[m]])}var s=["en-US"];function n(h){for(var p=i.getNodesByName(i.dataObj,h),T=0,w=p.length;T<w;T++){var m=i.getAttributeValue(p[T],"locale");if(m){m=m.split(/ +/);for(var O=0,d=m.length;O<d;O++)this.extendLocaleList(s,m[O])}}}r(s,t);var o=i.getNodesByName(i.dataObj,"style")[0],a=i.getAttributeValue(o,"default-locale");r(s,a);for(var u=["layout","if","else-if","condition"],f=0,c=u.length;f<c;f++)n(i);return s};l.Node={};l.Node.bibliography={build:function(e,t){if(this.tokentype===l.START){e.build.area="bibliography",e.build.root="bibliography",e.build.extension="";var i=function(r){r.tmp.area="bibliography",r.tmp.root="bibliography",r.tmp.extension=""};this.execs.push(i)}t.push(this)}};l.Node.choose={build:function(e,t){var i;this.tokentype===l.START&&(i=function(r){r.tmp.jump.push(void 0,l.LITERAL)}),this.tokentype===l.END&&(i=function(r){r.tmp.jump.pop()}),this.execs.push(i),t.push(this)},configure:function(e,t){this.tokentype===l.END?(e.configure.fail.push(t),e.configure.succeed.push(t)):(e.configure.fail.pop(),e.configure.succeed.pop())}};l.Node.citation={build:function(e,t){if(this.tokentype===l.START){e.build.area="citation",e.build.root="citation",e.build.extension="";var i=function(s){s.tmp.area="citation",s.tmp.root="citation",s.tmp.extension=""};this.execs.push(i)}if(this.tokentype===l.END){if(e.opt.grouped_sort=e.opt.xclass==="in-text"&&e.citation.opt.collapse&&e.citation.opt.collapse.length||e.citation.opt.cite_group_delimiter&&e.citation.opt.cite_group_delimiter.length&&e.opt.update_mode!==l.POSITION&&e.opt.update_mode!==l.NUMERIC,e.opt.grouped_sort&&e.citation_sort.opt.sort_directions.length){var r=e.citation_sort.opt.sort_directions[0].slice();e.citation_sort.opt.sort_directions=[r].concat(e.citation_sort.opt.sort_directions)}e.citation.srt=new l.Registry.Comparifier(e,"citation_sort")}t.push(this)}};l.Node["#comment"]={build:function(){}};l.Node.date={build:function(e,t){var i,r,s,n,o,a,u,f,c,h;(this.tokentype===l.START||this.tokentype===l.SINGLETON)&&(e.dateput.string(e,e.dateput.queue),e.tmp.date_token=l.Util.cloneToken(this),e.tmp.date_token.strings.prefix="",e.tmp.date_token.strings.suffix="",e.dateput.openLevel(this),e.build.date_parts=[],e.build.date_variables=this.variables,e.build.extension||l.Util.substituteStart.call(this,e,t),e.build.extension?i=l.dateMacroAsSortKey:i=function(p,T,w){var m;if(p.tmp.element_rendered_ok=!1,p.tmp.donesies=[],p.tmp.dateparts=[],m=[],this.variables.length&&!(p.tmp.just_looking&&this.variables[0]==="accessed")){for(r=T[this.variables[0]],typeof r>"u"&&(r={"date-parts":[[0]]},p.opt.development_extensions.locator_date_and_revision&&w&&this.variables[0]==="locator-date"&&w["locator-date"]&&(r=w["locator-date"])),p.tmp.date_object=r,s=this.dateparts.length,n=0;n<s;n+=1)o=this.dateparts[n],(typeof p.tmp.date_object[o+"_end"]<"u"||o==="month"&&typeof p.tmp.date_object.season_end<"u")&&m.push(o);for(a=[],u=["year","month","day"],s=u.length,n=0;n<s;n+=1)m.indexOf(u[n])>-1&&a.push(u[n]);for(m=a.slice(),f=2,s=m.length,n=0;n<s;n+=1)if(o=m[n],c=p.tmp.date_object[o],h=p.tmp.date_object[o+"_end"],c!==h){f=n;break}p.tmp.date_collapse_at=m.slice(f)}else p.tmp.date_object=!1},this.execs.push(i),i=function(p,T){if(T[this.variables[0]]&&(p.output.startTag("date",this),this.variables[0]==="issued"&&(T.type==="legal_case"||T.type==="legislation")&&p.opt.disable_duplicate_year_suppression.indexOf(T.country)===-1&&!p.tmp.extension&&""+T["collection-number"]==""+p.tmp.date_object.year&&this.dateparts.length===1&&this.dateparts[0]==="year")){for(var w in p.tmp.date_object)if(p.tmp.date_object.hasOwnProperty(w)&&w.slice(0,4)==="year"){p.tmp.issued_date={};var m=p.output.current.mystack.slice(-2)[0].blobs;p.tmp.issued_date.list=m,p.tmp.issued_date.pos=m.length-1}}},this.execs.push(i)),!e.build.extension&&(this.tokentype===l.END||this.tokentype===l.SINGLETON)&&(i=function(p,T){T[this.variables[0]]&&p.output.endTag()},this.execs.push(i)),t.push(this),(this.tokentype===l.END||this.tokentype===l.SINGLETON)&&(e.build.extension||l.Util.substituteEnd.call(this,e,t))}};l.Node["date-part"]={build:function(e,t){var i,r,s,n,o,a,u,f,c,h,p,T,w,m,O,d,S,g,b,I,N;this.strings.form||(this.strings.form="long"),e.build.date_parts.push(this.strings.name);var q=e.build.date_variables[0];function A(_,B,$){if(!$)return $;if($=""+l.Util.Dates[this.strings.name][_](e,$,B,this.default_locale),this.strings.name==="month"){if(e.tmp.strip_periods)$=$.replace(/\./g,"");else for(var X=0,J=this.decorations.length;X<J;X+=1)if(this.decorations[X][0]==="@strip-periods"&&this.decorations[X][1]==="true"){$=$.replace(/\./g,"");break}}return $}i=function(_,B){if(_.tmp.date_object)_.tmp.probably_rendered_something=!0;else return;var $="";if(n=!0,o="",a="",_.tmp.donesies.push(this.strings.name),_.tmp.date_object.literal&&this.strings.name==="year"&&($=_.tmp.date_object.literal,_.output.append(_.tmp.date_object.literal,this)),_.tmp.date_object&&(o=_.tmp.date_object[this.strings.name],a=_.tmp.date_object[this.strings.name+"_end"]),this.strings.name==="year"&&o===0&&!_.tmp.suppress_decorations&&(o=!1),u=!_.tmp.suppress_decorations,f=_.tmp.have_collapsed,c=_[_.tmp.area].opt.collapse==="year-suffix"||_[_.tmp.area].opt.collapse==="year-suffix-ranged",h=_.opt["disambiguate-add-year-suffix"],u&&h&&c&&(_.tmp.years_used.push(o),p=_.tmp.last_years_used.length>=_.tmp.years_used.length,p&&f&&_.tmp.last_years_used[_.tmp.years_used.length-1]===o&&(o=!1)),typeof o<"u"){T=!1,w=!1,this.strings.name==="year"&&(parseInt(o,10)<500&&parseInt(o,10)>0&&(w=_.getTerm("ad")),parseInt(o,10)<0&&(T=_.getTerm("bc"),o=parseInt(o,10)*-1),a&&(parseInt(a,10)<500&&parseInt(a,10)>0&&_.getTerm("ad"),parseInt(a,10)<0&&(_.getTerm("bc"),a=parseInt(a,10)*-1)));for(var X=""+_.tmp.date_object.month;X.length<2;)X="0"+X;X="month-"+X;var J=_.locale[_.opt.lang]["noun-genders"][X];if(this.strings.form){var Y=this.strings.form,ne=this.strings.form;this.strings.name==="day"&&Y==="ordinal"&&_.locale[_.opt.lang].opts["limit-day-ordinals-to-day-1"]&&(o!=1&&(Y="numeric"),a!=1&&(ne="numeric")),o=A.call(this,Y,J,o),a=A.call(this,ne,J,a)}if(_.output.openLevel("empty"),_.tmp.date_collapse_at.length){for(m=!0,s=_.tmp.date_collapse_at.length,r=0;r<s;r+=1)if(I=_.tmp.date_collapse_at[r],_.tmp.donesies.indexOf(I)===-1){m=!1;break}if(m){if(""+a!="0"){if(_.dateput.queue.length===0&&(n=!0),_.opt["year-range-format"]&&_.opt["year-range-format"]!=="expanded"&&!_.tmp.date_object.day&&!_.tmp.date_object.month&&!_.tmp.date_object.season&&this.strings.name==="year"&&o&&a){a=_.fun.year_mangler(o+"-"+a,!0);var re=_.getTerm("year-range-delimiter");a=a.slice(a.indexOf(re)+1)}$=a,_.dateput.append(a,this),n&&(N=_.dateput.current.value().blobs[0],N&&(N.strings.prefix=""))}$=o,_.output.append(o,this),O=_.output.current.value(),N=O.blobs[O.blobs.length-1],N&&(N.strings.suffix=""),this.strings["range-delimiter"]?_.output.append(this.strings["range-delimiter"]):_.output.append(_.getTerm("year-range-delimiter"),"empty"),_.dateput.closeLevel(),d=_.dateput.current.value(),O.blobs=O.blobs.concat(d),_.dateput.string(_,_.dateput.queue),_.dateput.openLevel(_.tmp.date_token),_.tmp.date_collapse_at=[]}else $=o,_.output.append(o,this),_.tmp.date_collapse_at.indexOf(this.strings.name)>-1&&""+a!="0"&&(_.dateput.queue.length===0&&(n=!0),_.dateput.openLevel("empty"),$=a,_.dateput.append(a,this),n&&(N=_.dateput.current.value().blobs[0],N&&(N.strings.prefix="")),T&&($=T,_.dateput.append(T)),w&&($=w,_.dateput.append(w)),_.dateput.closeLevel())}else $=o,_.output.append(o,this);T&&($=T,_.output.append(T)),w&&($=w,_.output.append(w)),_.output.closeLevel()}else this.strings.name==="month"&&_.tmp.date_object.season&&(o=""+_.tmp.date_object.season,o&&o.match(/^[1-4]$/)?(_.tmp.group_context.tip.variable_success=!0,$="winter",_.output.append(_.getTerm("season-0"+o),this)):o&&($=o,_.output.append(o,this)));_.tmp.value=[],B[q]&&(o||_.tmp.have_collapsed)&&!_.opt.has_year_suffix&&this.strings.name==="year"&&!_.tmp.just_looking&&_.registry.registry[B.id]&&_.registry.registry[B.id].disambig.year_suffix!==!1&&!_.tmp.has_done_year_suffix&&(_.tmp.has_done_year_suffix=!0,$="x",g=parseInt(_.registry.registry[B.id].disambig.year_suffix,10),S=new l.NumericBlob(_,!1,g,this,B.id),this.successor_prefix=_[_.build.area].opt.layout_delimiter,this.splice_prefix=_[_.build.area].opt.layout_delimiter,b=new l.Util.Suffixator(l.SUFFIX_CHARS),S.setFormatter(b),_[_.tmp.area].opt.collapse==="year-suffix-ranged"&&(S.range_prefix=_.getTerm("citation-range-delimiter")),_[_.tmp.area].opt.cite_group_delimiter?S.successor_prefix=_[_.tmp.area].opt.cite_group_delimiter:_[_.tmp.area].opt["year-suffix-delimiter"]?S.successor_prefix=_[_.tmp.area].opt["year-suffix-delimiter"]:S.successor_prefix=_[_.tmp.area].opt.layout_delimiter,S.UGLY_DELIMITER_SUPPRESS_HACK=!0,_.output.append(S,"literal")),$&&!_.tmp.group_context.tip.condition&&(_.tmp.just_did_number=$.match(/[0-9]$/),_.output.current.tip.strings.suffix&&(_.tmp.just_did_number=!1))},this.execs.push(i),t.push(this)}};l.Node["else-if"]={build:function(e,t){l.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){l.Conditions.Configure.call(this,e,t)}};l.Node.else={build:function(e,t){t.push(this)},configure:function(e,t){this.tokentype===l.START&&(e.configure.fail[e.configure.fail.length-1]=t)}};l.Node["et-al"]={build:function(e,t){if(e.build.area==="citation"||e.build.area==="bibliography"){var i=function(r){r.tmp.etal_node=this,typeof this.strings.term=="string"&&(r.tmp.etal_term=this.strings.term)};this.execs.push(i)}t.push(this)}};l.Node.group={build:function(e,t,i){var r,s;if(this.realGroup=i,this.tokentype===l.START&&(l.Util.substituteStart.call(this,e,t),e.build.substitute_level.value()&&e.build.substitute_level.replace(e.build.substitute_level.value()+1),this.juris||t.push(this),r=function(p){if(p.output.startTag("group",this),this.strings.label_form_override&&(p.tmp.group_context.tip.label_form||(p.tmp.group_context.tip.label_form=this.strings.label_form_override)),this.strings.label_capitalize_if_first_override&&(p.tmp.group_context.tip.label_capitalize_if_first||(p.tmp.group_context.tip.label_capitalize_if_first=this.strings.label_capitalize_if_first_override)),this.realGroup){p.tmp.group_context.tip.condition&&l.UPDATE_GROUP_CONTEXT_CONDITION(p,this.strings.prefix,null,this);var T=!1,w=!1;p.tmp.group_context.mystack.length&&(p.output.current.value().parent=p.tmp.group_context.tip.output_tip);var m=p.tmp.group_context.tip.label_form;m||(m=this.strings.label_form_override);var O=p.tmp.group_context.tip.label_capitalize_if_first;O||(O=this.strings.label_capitalize_if_first),p.tmp.group_context.tip.condition?(T=p.tmp.group_context.tip.condition,w=p.tmp.group_context.tip.force_suppress):this.strings.reject?T={test:this.strings.reject,not:!0}:this.strings.require&&(T={test:this.strings.require,not:!1});var d={old_term_predecessor:p.tmp.term_predecessor,term_intended:!1,variable_attempt:!1,variable_success:!1,variable_success_parent:p.tmp.group_context.tip.variable_success,output_tip:p.output.current.tip,label_form:m,label_static:p.tmp.group_context.tip.label_static,label_capitalize_if_first:O,parallel_delimiter_override:this.strings.set_parallel_delimiter_override,parallel_delimiter_override_on_suppress:this.strings.set_parallel_delimiter_override_on_suppress,condition:T,force_suppress:w,done_vars:p.tmp.group_context.tip.done_vars.slice()};if(this.non_parallel){var S=p.tmp.group_context.tip.non_parallel;S||(S={}),Object.assign(S,this.non_parallel),d.non_parallel=S}if(this.parallel_first){var g=p.tmp.group_context.tip.parallel_first;g||(g={}),Object.assign(g,this.parallel_first),d.parallel_first=g}if(this.parallel_last){var b=p.tmp.group_context.tip.parallel_last;b||(b={}),Object.assign(b,this.parallel_last),d.parallel_last=b}if(p.tmp.abbrev_trimmer&&p.tmp.abbrev_trimmer.LAST_TO_FIRST&&d.parallel_last){d.parallel_first||(d.parallel_first={});for(var I in p.tmp.abbrev_trimmer.LAST_TO_FIRST)d.parallel_last[I]&&(d.parallel_first[I]=!0,delete d.parallel_last[I])}if(p.tmp.group_context.push(d),p.tmp.abbrev_trimmer&&this.parallel_last_to_first){p.tmp.abbrev_trimmer.LAST_TO_FIRST||(p.tmp.abbrev_trimmer.LAST_TO_FIRST={});for(var I in this.parallel_last_to_first)p.tmp.abbrev_trimmer.LAST_TO_FIRST[I]=!0}}},s=[],s.push(r),this.execs=s.concat(this.execs),this.strings["has-publisher-and-publisher-place"]&&(e.build["publisher-special"]=!0,this.strings["subgroup-delimiter"]&&(r=function(p,T){if(T.publisher&&T["publisher-place"]){var w=T.publisher.split(/;\s*/),m=T["publisher-place"].split(/;\s*/);w.length>1&&w.length===m.length&&(p.publisherOutput=new l.PublisherOutput(p,this),p.publisherOutput["publisher-list"]=w,p.publisherOutput["publisher-place-list"]=m)}},this.execs.push(r))),this.juris)){var n=new l.Token("choose",l.START);l.Node.choose.build.call(n,e,t);var o=new l.Token("if",l.START);r=function(p){return function(T,w){return l.INIT_JURISDICTION_MACROS(e,T,w,p)}}(this.juris),o.tests||(o.tests=[]),o.tests.push(r),o.test=e.fun.match.any(o,e,o.tests),t.push(o);var a=new l.Token("text",l.SINGLETON);r=function(p,T,w){var m=T;w&&w["best-jurisdiction"]&&this.juris==="juris-locator"&&(m=w);var O=0;if(p.juris[m["best-jurisdiction"]][this.juris])for(;O<p.juris[m["best-jurisdiction"]][this.juris].length;)O=l.tokenExec.call(p,p.juris[m["best-jurisdiction"]][this.juris][O],T,w)},a.juris=this.juris,a.execs.push(r),t.push(a);var u=new l.Token("if",l.END);l.Node.if.build.call(u,e,t);var f=new l.Token("else",l.START);l.Node.else.build.call(f,e,t)}if(this.tokentype===l.END&&(e.build["publisher-special"]&&(e.build["publisher-special"]=!1,r=function(p){p.publisherOutput&&(p.publisherOutput.render(),p.publisherOutput=!1)},this.execs.push(r)),r=function(p,T,w){if(p.tmp.group_context.tip.condition||p.output.current.tip.strings.suffix&&(p.tmp.just_did_number=!1),p.output.endTag(),this.realGroup){var m=p.tmp.group_context.pop();if(m.parallel_delimiter_override&&(p.tmp.group_context.tip.parallel_delimiter_override=m.parallel_delimiter_override,!p.tmp.just_looking&&p.registry.registry[T.id].master&&(p.registry.registry[T.id].parallel_delimiter_override=m.parallel_delimiter_override)),m.parallel_delimiter_override_on_suppress&&(p.tmp.group_context.tip.parallel_delimiter_override_on_suppress=m.parallel_delimiter_override_on_suppress),p.tmp.area==="bibliography_sort"){var O=m.done_vars.indexOf("citation-number");this.strings.sort_direction&&O>-1&&p.tmp.group_context.length()==1&&(this.strings.sort_direction===l.DESCENDING?p.bibliography_sort.opt.citation_number_sort_direction=l.DESCENDING:p.bibliography_sort.opt.citation_number_sort_direction=l.ASCENDING,m.done_vars=m.done_vars.slice(0,O).concat(m.done_vars.slice(O+1)))}if(m.condition&&(m.force_suppress=l.EVALUATE_GROUP_CONDITION(p,m)),p.tmp.group_context.tip.condition&&(p.tmp.group_context.tip.force_suppress=m.force_suppress),!m.force_suppress&&(m.variable_success||m.term_intended&&!m.variable_attempt)){this.isJurisLocatorLabel||(p.tmp.group_context.tip.variable_success=!0);var d=p.output.current.value().blobs;if(p.output.current.value().blobs.length-1,!p.tmp.just_looking&&(m.non_parallel||m.parallel_last||m.parallel_first||m.parallel_delimiter_override||m.parallel_delimiter_override_on_suppress)){var S=p.parallel.checkRepeats(m);if(S&&d&&d.pop(),p.tmp.cite_index>0&&(S||!m.parallel_first&&!m.parallel_last&&!m.non_parallel)){var g=p.tmp.suppress_repeats[p.tmp.cite_index-1];S&&m.parallel_delimiter_override_on_suppress&&(g.SIBLING||g.ORPHAN)?p.output.queue.slice(-1)[0].parallel_delimiter=m.parallel_delimiter_override_on_suppress:m.parallel_delimiter_override&&g.SIBLING&&(p.output.queue.slice(-1)[0].parallel_delimiter=m.parallel_delimiter_override)}}}else{if(p.tmp.term_predecessor=m.old_term_predecessor,p.tmp.group_context.tip.variable_attempt=m.variable_attempt,m.force_suppress&&!p.tmp.group_context.tip.condition&&(p.tmp.group_context.tip.variable_attempt=!0,p.tmp.group_context.tip.variable_success=m.variable_success_parent),m.force_suppress)for(var b=0,I=m.done_vars.length;b<I;b++)for(var N=m.done_vars[b],q=0,A=p.tmp.done_vars.length;q<A;q++)p.tmp.done_vars[q]===N&&(p.tmp.done_vars=p.tmp.done_vars.slice(0,q).concat(p.tmp.done_vars.slice(q+1)));p.output.current.value().blobs&&p.output.current.value().blobs.pop()}}},this.execs.push(r),this.juris)){var c=new l.Token("else",l.END);l.Node.else.build.call(c,e,t);var h=new l.Token("choose",l.END);l.Node.choose.build.call(h,e,t)}this.tokentype===l.END&&(this.juris||t.push(this),e.build.substitute_level.value()&&e.build.substitute_level.replace(e.build.substitute_level.value()-1),l.Util.substituteEnd.call(this,e,t))}};l.Node.if={build:function(e,t){l.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){l.Conditions.Configure.call(this,e,t)}};l.Node.conditions={build:function(e){this.tokentype===l.START&&e.tmp.conditions.addMatch(this.match),this.tokentype===l.END&&e.tmp.conditions.matchCombine()}};l.Node.condition={build:function(e){if(this.tokentype===l.SINGLETON){var t=e.fun.match[this.match](this,e,this.tests);e.tmp.conditions.addTest(t)}}};l.Conditions={};l.Conditions.TopNode=function(e){var t;(this.tokentype===l.START||this.tokentype===l.SINGLETON)&&(this.locale&&(e.opt.lang=this.locale),!this.tests||!this.tests.length?e.tmp.conditions=new l.Conditions.Engine(e,this):this.test=e.fun.match[this.match](this,e,this.tests),e.build.substitute_level.value()===0&&(t=function(i){i.tmp.condition_counter++},this.execs.push(t))),(this.tokentype===l.END||this.tokentype===l.SINGLETON)&&(e.build.substitute_level.value()===0&&(t=function(i){if(i.tmp.condition_counter--,i.tmp.condition_lang_counter_arr.length>0){var r=i.tmp.condition_lang_counter_arr.slice(-1)[0];r===i.tmp.condition_counter&&(i.opt.lang=i.tmp.condition_lang_val_arr.pop(),i.tmp.condition_lang_counter_arr.pop())}this.locale_default&&(i.output.current.value().old_locale=this.locale_default,i.output.closeLevel("empty"),i.opt.lang=this.locale_default)},this.execs.push(t)),t=function(i){var r=this[i.tmp.jump.value()];return r},this.execs.push(t),this.locale_default&&(e.opt.lang=this.locale_default))};l.Conditions.Configure=function(e,t){this.tokentype===l.START?(this.fail=e.configure.fail.slice(-1)[0],this.succeed=this.next,e.configure.fail[e.configure.fail.length-1]=t):this.tokentype===l.SINGLETON?(this.fail=this.next,this.succeed=e.configure.succeed.slice(-1)[0],e.configure.fail[e.configure.fail.length-1]=t):(this.succeed=e.configure.succeed.slice(-1)[0],this.fail=this.next)};l.Conditions.Engine=function(e,t){this.token=t,this.state=e};l.Conditions.Engine.prototype.addTest=function(e){this.token.tests||(this.token.tests=[]),this.token.tests.push(e)};l.Conditions.Engine.prototype.addMatch=function(e){this.token.match=e};l.Conditions.Engine.prototype.matchCombine=function(){this.token.test=this.state.fun.match[this.token.match](this.token,this.state,this.token.tests)};l.Node.info={build:function(e){this.tokentype===l.START?e.build.skip="info":e.build.skip=!1}};l.Node.institution={build:function(e,t){if([l.SINGLETON,l.START].indexOf(this.tokentype)>-1){var i=function(r){typeof this.strings.delimiter=="string"?r.tmp.institution_delimiter=this.strings.delimiter:r.tmp.institution_delimiter=r.tmp.name_delimiter,r.inheritOpt(this,"and")==="text"?this.and_term=r.getTerm("and","long",0):r.inheritOpt(this,"and")==="symbol"?r.opt.development_extensions.expect_and_symbol_form?this.and_term=r.getTerm("and","symbol",0):this.and_term="&":r.inheritOpt(this,"and")==="none"&&(this.and_term=r.tmp.institution_delimiter),typeof this.and_term>"u"&&r.tmp.and_term&&(this.and_term=r.tmp.and_term),l.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ",typeof r.tmp.institution_delimiter=="string"&&(this.and_prefix_multiple=r.tmp.institution_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),r.inheritOpt(this,"delimiter-precedes-last")==="always"?this.and_prefix_single=r.tmp.institution_delimiter:r.inheritOpt(this,"delimiter-precedes-last")==="never"&&this.and_prefix_multiple&&(this.and_prefix_multiple=" "),this.and={},typeof this.and_term<"u"?(r.output.append(this.and_term,"empty",!0),this.and.single=r.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,r.output.append(this.and_term,"empty",!0),this.and.multiple=r.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):this.strings.delimiter!=="undefined"&&(this.and.single=new l.Blob(r.tmp.institution_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new l.Blob(r.tmp.institution_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),r.nameOutput.institution=this};this.execs.push(i)}t.push(this)},configure:function(e){[l.SINGLETON,l.START].indexOf(this.tokentype)>-1&&(e.build.has_institution=!0)}};l.Node["institution-part"]={build:function(e,t){var i;this.strings.name==="long"?this.strings["if-short"]?i=function(r){r.nameOutput.institutionpart["long-with-short"]=this}:i=function(r){r.nameOutput.institutionpart.long=this}:this.strings.name==="short"&&(i=function(r){r.nameOutput.institutionpart.short=this}),this.execs.push(i),t.push(this)}};l.Node.key={build:function(e,t){t=e[e.build.root+"_sort"].tokens;var i,r=new l.Token("key",l.START);e.tmp.root=e.build.root,r.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),r.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),r.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),i=function(d){d.tmp.done_vars=[]},r.execs.push(i),i=function(d){d.output.openLevel("empty")},r.execs.push(i);var s=[];if(this.strings.sort_direction===l.DESCENDING?(s.push(1),s.push(-1)):(s.push(-1),s.push(1)),e[e.build.area].opt.sort_directions.push(s),l.DATE_VARIABLES.indexOf(this.variables[0])>-1&&(e.build.date_key=!0),i=function(d){d.tmp.sort_key_flag=!0,d.inheritOpt(this,"et-al-min")&&(d.tmp["et-al-min"]=d.inheritOpt(this,"et-al-min")),d.inheritOpt(this,"et-al-use-first")&&(d.tmp["et-al-use-first"]=d.inheritOpt(this,"et-al-use-first")),typeof d.inheritOpt(this,"et-al-use-last")=="boolean"&&(d.tmp["et-al-use-last"]=d.inheritOpt(this,"et-al-use-last"))},r.execs.push(i),t.push(r),this.variables.length){var n=this.variables[0];if(l.NAME_VARIABLES.indexOf(n)>-1){var o=new l.Token("names",l.START);o.tokentype=l.START,o.variables=this.variables,l.Node.names.build.call(o,e,t);var a=new l.Token("name",l.SINGLETON);a.tokentype=l.SINGLETON,a.strings["name-as-sort-order"]="all",a.strings["sort-separator"]=" ",a.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),a.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),a.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),l.Node.name.build.call(a,e,t);var u=new l.Token("institution",l.SINGLETON);u.tokentype=l.SINGLETON,l.Node.institution.build.call(u,e,t);var f=new l.Token("names",l.END);f.tokentype=l.END,l.Node.names.build.call(f,e,t)}else{var c=new l.Token("text",l.SINGLETON);if(c.strings.sort_direction=this.strings.sort_direction,c.dateparts=this.dateparts,l.NUMERIC_VARIABLES.indexOf(n)>-1)n==="citation-number"?i=function(d,S){if(d.tmp.area==="bibliography_sort"&&(this.strings.sort_direction===l.DESCENDING?d.bibliography_sort.opt.citation_number_sort_direction=l.DESCENDING:d.bibliography_sort.opt.citation_number_sort_direction=l.ASCENDING),d.tmp.area==="citation_sort"&&d.bibliography_sort.tmp.citation_number_map)var g=d.bibliography_sort.tmp.citation_number_map[d.registry.registry[S.id].seq];else var g=d.registry.registry[S.id].seq;g&&(g=l.Util.padding(""+g)),d.output.append(g,this)}:i=function(d,S){var g=!1;g=S[n],g&&(g=l.Util.padding(g)),d.output.append(g,this)};else if(n==="citation-label")i=function(d,S){var g=d.getCitationLabel(S);d.output.append(g,this)};else if(l.DATE_VARIABLES.indexOf(n)>-1)i=l.dateAsSortKey,c.variables=this.variables;else if(n==="title"){var h="title",p=!1,T=!1,w=!0;i=e.transform.getOutputFunction(this.variables,h,p,T,w)}else n==="court-class"?i=function(d,S,g){l.INIT_JURISDICTION_MACROS(d,S,g,"juris-main");var b=l.GET_COURT_CLASS(d,S,!0);d.output.append(b,"empty")}:i=function(d,S){var g=S[n];d.output.append(g,"empty")};c.execs.push(i),t.push(c)}}else{var m=new l.Token("text",l.SINGLETON);m.strings.sort_direction=this.strings.sort_direction,m.postponed_macro=this.postponed_macro,l.expandMacro.call(e,m,t)}var O=new l.Token("key",l.END);i=function(d){var S=d.output.string(d,d.output.queue);d.sys.normalizeUnicode&&(S=d.sys.normalizeUnicode(S)),S=S?S.split(" ").join(d.opt.sort_sep)+d.opt.sort_sep:"",S===""&&(S=void 0),typeof S!="string"&&(S=void 0),d[d[d.tmp.area].root+"_sort"].keys.push(S),d.tmp.value=[]},O.execs.push(i),e.build.date_key&&(e.build.area==="citation"&&e.build.extension==="_sort"&&(e[e.build.area].opt.sort_directions.push([-1,1]),i=function(d,S){var g=d.registry.registry[S.id].disambig.year_suffix;g||(g=0);var b=l.Util.padding(""+g);d[d.tmp.area].keys.push(b)},O.execs.push(i)),e.build.date_key=!1),i=function(d){d.tmp["et-al-min"]=void 0,d.tmp["et-al-use-first"]=void 0,d.tmp["et-al-use-last"]=void 0,d.tmp.sort_key_flag=!1},O.execs.push(i),t.push(O)}};l.Node.label={build:function(e,t){if(this.strings.term){var i=function(a,u,f){var c=l.evaluateLabel(this,a,u,f);f&&this.strings.term==="locator"&&(f.section_form_override=this.strings.form),c&&(a.tmp.group_context.tip.term_intended=!0),l.UPDATE_GROUP_CONTEXT_CONDITION(a,c,null,this),c.indexOf("%s")===-1&&(this.strings.capitalize_if_first&&!a.tmp.term_predecessor&&!(a.opt.class==="in-text"&&a.tmp.area==="citation")&&(c=l.Output.Formatters["capitalize-first"](a,c)),a.output.append(c,this))};this.execs.push(i)}else{this.strings.form||(this.strings.form="long");for(var r=e.build.names_variables[e.build.names_variables.length-1],s=e.build.name_label[e.build.name_label.length-1],n=0,o=r.length;n<o;n+=1)s[r[n]]||(s[r[n]]={});if(e.build.name_flag)for(var n=0,o=r.length;n<o;n+=1)s[r[n]].after=this;else for(var n=0,o=r.length;n<o;n+=1)s[r[n]].before=this}t.push(this)}};l.Node.layout={build:function(e,t){var i,r,s,n;function o(){e.build.area==="bibliography"&&(s=new l.Token("text",l.SINGLETON),i=function(f){if(!f.tmp.parallel_and_not_last){var c;f.tmp.cite_affixes[f.tmp.area][f.tmp.last_cite_locale]?c=f.tmp.cite_affixes[f.tmp.area][f.tmp.last_cite_locale].suffix:c=f.bibliography.opt.layout_suffix;var h=f.output.current.value();f.opt.using_display?h.blobs[h.blobs.length-1].strings.suffix=c:h.strings.suffix=c}f.bibliography.opt["second-field-align"]&&f.output.endTag("bib_other")},s.execs.push(i),t.push(s))}this.tokentype===l.START&&(this.locale_raw?e.build.current_default_locale=this.locale_raw:e.build.current_default_locale=e.opt["default-locale"],i=function(f,c,h){if(f.opt.development_extensions.apply_citation_wrapper&&f.sys.wrapCitationEntry&&!f.tmp.just_looking&&c.system_id&&f.tmp.area==="citation"){var p=new l.Token("group",l.START);p.decorations=[["@cite","entry"]],f.output.startTag("cite_entry",p),f.output.current.value().item_id=c.system_id,h&&(f.output.current.value().locator_txt=h.locator_txt,f.output.current.value().suffix_txt=h.suffix_txt)}},this.execs.push(i)),this.tokentype===l.START&&!e.tmp.cite_affixes[e.build.area]&&(i=function(f,c,h){if(f.tmp.done_vars=[],h&&h["author-only"]&&f.tmp.done_vars.push("locator"),f.opt.suppressedJurisdictions[c.country]&&c.country&&["treaty","patent"].indexOf(c.type)===-1&&f.tmp.done_vars.push("country"),!f.tmp.just_looking&&f.registry.registry[c.id]&&f.registry.registry[c.id].parallel&&f.tmp.done_vars.push("first-reference-note-number"),!f.tmp.just_looking&&f.tmp.abbrev_trimmer&&c.jurisdiction)for(var p in f.tmp.abbrev_trimmer.QUASHES[c.jurisdiction])f.tmp.done_vars.push(p);f.tmp.rendered_name=!1},this.execs.push(i),i=function(f){f.tmp.sort_key_flag=!1},this.execs.push(i),i=function(f){f.tmp.nameset_counter=0},this.execs.push(i),i=function(f,c){var h=new l.Token;f.output.openLevel(h)},this.execs.push(i),t.push(this),e.build.area==="citation"&&(r=new l.Token("text",l.SINGLETON),i=function(f,c,h){if(h&&h.prefix){var p=l.checkPrefixSpaceAppend(f,h.prefix);f.tmp.just_looking||(p=f.output.checkNestedBrace.update(p));var T=l.checkIgnorePredecessor(f,p);f.output.append(p,this,!1,T)}},r.execs.push(i),t.push(r)));var a;if(this.locale_raw&&(a=new l.Token("dummy",l.START),a.locale=this.locale_raw,a.strings.delimiter=this.strings.delimiter,a.strings.suffix=this.strings.suffix,e.tmp.cite_affixes[e.build.area]||(e.tmp.cite_affixes[e.build.area]={})),this.tokentype===l.START&&(e.build.layout_flag=!0,this.locale_raw||(e[e.tmp.area].opt.topdecor=[this.decorations],e[e.tmp.area+"_sort"].opt.topdecor=[this.decorations],e[e.build.area].opt.layout_prefix=this.strings.prefix,e[e.build.area].opt.layout_suffix=this.strings.suffix,e[e.build.area].opt.layout_delimiter=this.strings.delimiter,e[e.build.area].opt.layout_decorations=this.decorations,e.tmp.cite_affixes[e.build.area]&&(n=new l.Token("else",l.START),l.Node.else.build.call(n,e,t))),this.locale_raw)){if(e.build.layout_locale_flag)a.name="else-if",l.Attributes["@locale-internal"].call(a,e,this.locale_raw),l.Node["else-if"].build.call(a,e,t);else{var u=new l.Token("choose",l.START);l.Node.choose.build.call(u,e,t),a.name="if",l.Attributes["@locale-internal"].call(a,e,this.locale_raw),l.Node.if.build.call(a,e,t)}e.tmp.cite_affixes[e.build.area][a.locale]={},e.tmp.cite_affixes[e.build.area][a.locale].delimiter=this.strings.delimiter,e.tmp.cite_affixes[e.build.area][a.locale].suffix=this.strings.suffix}this.tokentype===l.END&&(this.locale_raw&&(o(),e.build.layout_locale_flag?(a.name="else-if",a.tokentype=l.END,l.Attributes["@locale-internal"].call(a,e,this.locale_raw),l.Node["else-if"].build.call(a,e,t)):(a.name="if",a.tokentype=l.END,l.Attributes["@locale-internal"].call(a,e,this.locale_raw),l.Node.if.build.call(a,e,t),e.build.layout_locale_flag=!0)),this.locale_raw||(o(),e.tmp.cite_affixes[e.build.area]&&e.build.layout_locale_flag&&(n=new l.Token("else",l.END),l.Node.else.build.call(n,e,t),n=new l.Token("choose",l.END),l.Node.choose.build.call(n,e,t)),e.build_layout_locale_flag=!0,e.build.area==="citation"&&(s=new l.Token("text",l.SINGLETON),i=function(f,c,h){if(h&&h.suffix){var p=l.checkSuffixSpacePrepend(f,h.suffix);f.tmp.just_looking||(p=f.output.checkNestedBrace.update(p)),f.output.append(p,this)}},s.execs.push(i),t.push(s)),i=function(f){f.output.closeLevel()},this.execs.push(i),i=function(f,c){f.opt.development_extensions.apply_citation_wrapper&&f.sys.wrapCitationEntry&&!f.tmp.just_looking&&c.system_id&&f.tmp.area==="citation"&&f.output.endTag()},this.execs.push(i),t.push(this),e.build.layout_flag=!1,e.build.layout_locale_flag=!1))}};l.Node.macro={build:function(){}};l.Node.alternative={build:function(e,t){if(this.tokentype===l.START){var i=new l.Token("choose",l.START);l.Node.choose.build.call(i,e,t);var r=new l.Token("if",l.START);l.Attributes["@alternative-node-internal"].call(r,e),l.Node.if.build.call(r,e,t);var s=function(n,o){if(n.tmp.oldItem=o,n.tmp.oldLang=n.opt.lang,n.tmp.abort_alternative=!0,o["language-name"]&&o["language-name-original"]){var a=JSON.parse(JSON.stringify(o));a.language=a["language-name"];var u=l.localeResolve(a.language,n.opt["default-locale"][0]);if(n.opt.multi_layout)for(var f in n.opt.multi_layout){var c=n.opt.multi_layout[f],h=!1;for(var p in c){var T=c[p];if(u.best===T.best||u.base===T.base||u.bare===T.bare){h=c[0].best;break}}h||(h=n.opt["default-locale"][0]),n.opt.lang=h}for(var w in a)if(["id","type","language","multi"].indexOf(w)===-1&&w.slice(0,4)!=="alt-")if(a.multi&&a.multi._keys[w]){var m=!0;for(var O in a.multi._keys[w])if(u.bare===O.replace(/^([a-zA-Z]+).*/,"$1")){m=!1;break}m&&delete a[w]}else delete a[w];for(var w in a)w.slice(0,4)==="alt-"?(a[w.slice(4)]=a[w],n.tmp.abort_alternative=!1):a.multi&&a.multi._keys&&!a["alt-"+w]&&a.multi._keys[w]&&(a.multi._keys[w][u.best]?(a[w]=a.multi._keys[w][u.best],n.tmp.abort_alternative=!1):a.multi._keys[w][u.base]?(a[w]=a.multi._keys[w][u.base],n.tmp.abort_alternative=!1):a.multi._keys[w][u.bare]&&(a[w]=a.multi._keys[w][u.bare],n.tmp.abort_alternative=!1))}n.output.openLevel(this),n.registry.refhash[o.id]=a,n.nameOutput=new l.NameOutput(n,a)};this.execs.push(s),t.push(this);var i=new l.Token("choose",l.START);l.Node.choose.build.call(i,e,t);var r=new l.Token("if",l.START);l.Attributes["@alternative-node-internal"].call(r,e);var s=function(n){n.tmp.abort_alternative=!0};r.execs.push(s),l.Node.if.build.call(r,e,t)}else if(this.tokentype===l.END){var r=new l.Token("if",l.END);l.Node.if.build.call(r,e,t);var i=new l.Token("choose",l.END);l.Node.choose.build.call(i,e,t);var s=function(u,f){u.output.closeLevel(),u.registry.refhash[f.id]=u.tmp.oldItem,u.opt.lang=u.tmp.oldLang,u.nameOutput=new l.NameOutput(u,u.tmp.oldItem),u.tmp.abort_alternative=!1};this.execs.push(s),t.push(this);var r=new l.Token("if",l.END);l.Node.if.build.call(r,e,t);var i=new l.Token("choose",l.END);l.Node.choose.build.call(i,e,t)}}};l.Node["alternative-text"]={build:function(e,t){if(this.tokentype===l.SINGLETON){var i=function(r,n){var n=r.refetchItem(n.id);l.getCite.call(r,n)};this.execs.push(i)}t.push(this)}};l.NameOutput=function(e,t,i){this.debug=!1,this.state=e,this.debug&&this.state.sys.print("(1)"),this.Item=t,this.item=i,this.nameset_base=0,this.etal_spec={},this._first_creator_variable=!1,this._please_chop=!1};l.NameOutput.prototype.init=function(e){this.requireMatch=e.requireMatch,this.state.tmp.term_predecessor&&(this.state.tmp.subsequent_author_substitute_ok=!1),this.nameset_offset&&(this.nameset_base=this.nameset_base+this.nameset_offset),this.nameset_offset=0,this.names=e,this.variables=e.variables,this.state.tmp.value=[],this.state.tmp.rendered_name=[],this.state.tmp.label_blob=!1,this.state.tmp.etal_node=!1,this.state.tmp.etal_term=!1;for(var t=0,i=this.variables.length;t<i;t+=1)this.Item[this.variables[t]]&&this.Item[this.variables[t]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[t]]));if(this["et-al"]=void 0,this.with=void 0,this.name=void 0,this.institutionpart={},this.state.tmp.group_context.tip.variable_attempt=!0,this.labelVariable=this.variables[0],!!this.state.tmp.value.length){var r=this.checkCommonAuthor(this.requireMatch);if(r){this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0);for(var t in this.variables){var s=this.state.tmp.done_vars.indexOf(this.variables[t]);s>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,s).concat(this.state.tmp.done_vars.slice(t+1)))}this.state.tmp.common_term_match_fail=!0,this.variables=[]}}};l.NameOutput.prototype.reinit=function(e,t){if(this.requireMatch=e.requireMatch,this.labelVariable=t,this.state.tmp.can_substitute.value()){this.nameset_offset=0,this.variables=e.variables;var i=this.state.tmp.value.slice();this.state.tmp.value=[];for(var r=0,s=this.variables.length;r<s;r+=1)this.Item[this.variables[r]]&&this.Item[this.variables[r]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[r]]));this.state.tmp.value.length&&this.state.tmp.can_substitute.replace(!1,l.LITERAL),this.state.tmp.value=i}var n=this.checkCommonAuthor(this.requireMatch);if(n){this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0);for(var r in this.variables){var o=this.state.tmp.done_vars.indexOf(this.variables[r]);o>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,o).concat(this.state.tmp.done_vars.slice(r+1)))}this.variables=[]}};l.NameOutput.prototype.outputNames=function(){var e,t,i=this.variables;if(this.institution.and&&((!this.institution.and.single.blobs||!this.institution.and.single.blobs.length)&&(this.institution.and.single.blobs=this.name.and.single.blobs),(!this.institution.and.multiple.blobs||!this.institution.and.multiple.blobs.length)&&(this.institution.and.multiple.blobs=this.name.and.multiple.blobs)),this.variable_offset={},this.family)for(this.family_decor=l.Util.cloneToken(this.family),this.family_decor.strings.prefix="",this.family_decor.strings.suffix="",e=0,t=this.family.execs.length;e<t;e+=1)this.family.execs[e].call(this.family_decor,this.state,this.Item);else this.family_decor=!1;if(this.given)for(this.given_decor=l.Util.cloneToken(this.given),this.given_decor.strings.prefix="",this.given_decor.strings.suffix="",e=0,t=this.given.execs.length;e<t;e+=1)this.given.execs[e].call(this.given_decor,this.state,this.Item);else this.given_decor=!1;if(this.debug&&this.state.sys.print("(2)"),this.getEtAlConfig(),this.debug&&this.state.sys.print("(3)"),this.divideAndTransliterateNames(),this.debug&&this.state.sys.print("(4)"),this.truncatePersonalNameLists(),this.debug&&this.state.sys.print("(5)"),this.debug&&this.state.sys.print("(6)"),this.disambigNames(),this.constrainNames(),this.debug&&this.state.sys.print("(7)"),this.name.strings.form==="count"){(this.state.tmp.extension||this.names_count!=0)&&(this.state.output.append(this.names_count,"empty"),this.state.tmp.group_context.tip.variable_success=!0);return}this.debug&&this.state.sys.print("(8)"),this.setEtAlParameters(),this.debug&&this.state.sys.print("(9)"),this.setCommonTerm(this.requireMatch),this.debug&&this.state.sys.print("(10)"),this.renderAllNames(),this.debug&&this.state.sys.print("(11)");var r=[];for(e=0,t=i.length;e<t;e+=1){var s=i[e],n=[],o=!1,a=null;if(!this.state.opt.development_extensions.spoof_institutional_affiliations)a=this._join([this.freeters[s]],"");else{this.debug&&this.state.sys.print("(11a)");for(var u=0,f=this.institutions[s].length;u<f;u+=1)n.push(this.joinPersonsAndInstitutions([this.persons[s][u],this.institutions[s][u]]));if(this.debug&&this.state.sys.print("(11b)"),this.institutions[s].length){var c=this.nameset_base+this.variable_offset[s];this.freeters[s].length&&(c+=1),o=this.joinInstitutionSets(n,c)}this.debug&&this.state.sys.print("(11c)");var a=this.joinFreetersAndInstitutionSets([this.freeters[s],o]);this.debug&&this.state.sys.print("(11d)")}if(a&&(this.state.tmp.extension||(a=this._applyLabels(a,s)),r.push(a)),this.debug&&this.state.sys.print("(11e)"),this.common_term)break}for(this.debug&&this.state.sys.print("(12)"),this.state.output.openLevel("empty"),this.state.output.current.value().strings.delimiter=this.state.inheritOpt(this.names,"delimiter","names-delimiter"),this.debug&&this.state.sys.print("(13)"),e=0,t=r.length;e<t;e+=1)this.state.output.append(r[e],"literal",!0);!this.state.tmp.just_looking&&r.length>0&&(this.state.tmp.probably_rendered_something=!0),this.debug&&this.state.sys.print("(14)"),this.state.output.closeLevel("empty"),this.debug&&this.state.sys.print("(15)");var h=this.state.output.pop();this.state.tmp.name_node.top=h,this.debug&&this.state.sys.print("(16)");var p=l.Util.cloneToken(this.names);if(this.state.tmp.group_context.tip.condition&&l.UPDATE_GROUP_CONTEXT_CONDITION(this.state,this.names.strings.prefix,null,this.names),this.state.output.append(h,p),this.state.tmp.term_predecessor_name&&(this.state.tmp.term_predecessor=!0),this.debug&&this.state.sys.print("(17)"),this.debug&&this.state.sys.print("(18)"),i[0]!=="authority"){var T=[],w=this.Item[i[0]];if(w)for(var e=0,t=w.length;e<t;e+=1){var m=l.Util.Names.getRawName(w[e]);m&&T.push(m)}T=T.join(", "),T&&(this.state.tmp.name_node.string=T)}if(this.state.tmp.name_node.string&&!this.state.tmp.first_name_string&&(this.state.tmp.first_name_string=this.state.tmp.name_node.string),this.Item.type==="classic"&&this.state.tmp.first_name_string){var O=[];O.push(this.state.tmp.first_name_string),this.Item.title&&O.push(this.Item.title),O=O.join(", "),O&&this.state.sys.getAbbreviation&&(this.state.sys.normalizeAbbrevsKey&&(O=this.state.sys.normalizeAbbrevsKey("classic",O)),this.state.transform.loadAbbreviation("default","classic",O,this.Item.language),this.state.transform.abbrevs.default.classic[O]&&(this.state.tmp.done_vars.push("title"),this.state.output.append(this.state.transform.abbrevs.default.classic[O],"empty",!0),h=this.state.output.pop(),this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.top.blobs.push(h)))}this._collapseAuthor(),this.variables=[],this.state.tmp.authority_stop_last=0,this.debug&&this.state.sys.print("(19)")};l.NameOutput.prototype._applyLabels=function(e,t){var i;if(!this.label||!this.label[this.labelVariable])return e;var r=0,s=this.freeters_count[t]+this.institutions_count[t];if(s>1)r=1;else{for(var n=0,o=this.persons[t].length;n<o;n+=1)s+=this.persons_count[t][n];s>1&&(r=1)}return this.label[this.labelVariable].before?(typeof this.label[this.labelVariable].before.strings.plural=="number"&&(r=this.label[this.labelVariable].before.strings.plural),i=this._buildLabel(t,r,"before",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(i,this.label[this.labelVariable].before,!0),this.state.output.append(e,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()):this.label[this.labelVariable].after&&(typeof this.label[this.labelVariable].after.strings.plural=="number"&&(r=this.label[this.labelVariable].after.strings.plural),i=this._buildLabel(t,r,"after",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(e,"literal",!0),this.state.output.append(i,this.label[this.labelVariable].after,!0),this.state.tmp.label_blob=this.state.output.pop(),this.state.output.append(this.state.tmp.label_blob,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()),e};l.NameOutput.prototype._buildLabel=function(e,t,i,r){this.common_term&&(e=this.common_term);var s=!1,n=this.label[r][i];return n&&(s=l.castLabel(this.state,n,e,t,l.TOLERANT)),s};l.NameOutput.prototype._collapseAuthor=function(){var e,t,i;this.state.tmp.name_node.top.blobs.length!==0&&(this.nameset_base===0&&this.Item[this.variables[0]]&&!this._first_creator_variable&&(this._first_creator_variable=this.variables[0]),(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter.length)&&(this.state.tmp.authorstring_request?(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,i=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),this.state.tmp.offset_characters=i,this.state.registry.authorstrings[this.Item.id]=t):!this.state.tmp.just_looking&&!this.state.tmp.suppress_decorations&&(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter)&&(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,i=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),t===this.state.tmp.last_primary_names_string?((this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length)&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=i),this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!0)):(this.state.tmp.last_primary_names_string=t,this.variables.indexOf(this._first_creator_variable)>-1&&this.item&&this.item["suppress-author"]&&this.Item.type!=="legal_case"&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=i,this.state.tmp.term_predecessor=!1),this.state.tmp.have_collapsed=!1,this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!1)))))};l.NameOutput.prototype.isPerson=function(e){return!(e.literal||!e.given&&e.family&&e.isInstitution)};l.NameOutput.prototype.truncatePersonalNameLists=function(){var e,t,i,r,s,n;this.freeters_count={},this.persons_count={},this.institutions_count={};for(e in this.freeters)this.freeters.hasOwnProperty(e)&&(this.freeters_count[e]=this.freeters[e].length,this.freeters[e]=this._truncateNameList(this.freeters,e));for(e in this.persons)if(this.persons.hasOwnProperty(e))for(this.institutions_count[e]=this.institutions[e].length,this._truncateNameList(this.institutions,e),this.persons[e]=this.persons[e].slice(0,this.institutions[e].length),this.persons_count[e]=[],r=0,s=this.persons[e].length;r<s;r+=1)this.persons_count[e][r]=this.persons[e][r].length,this.persons[e][r]=this._truncateNameList(this.persons,e,r);if(this.state.opt.development_extensions.etal_min_etal_usefirst_hack&&this.etal_min===1&&this.etal_use_first===1&&!(this.state.tmp.extension||this.state.tmp.just_looking)?n=e:n=!1,n||this._please_chop)for(t=0,i=this.variables.length;t<i;t+=1){e=this.variables[t],this.freeters[e].length&&(this._please_chop===e?(this.freeters[e]=this.freeters[e].slice(1),this.freeters_count[e]+=-1,this._please_chop=!1):n&&!this._please_chop&&(this.freeters[e]=this.freeters[e].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],this._please_chop=n));for(var r=0,s=this.persons[e].length;r<s;r++)if(this.persons[e][r].length){if(this._please_chop===e){this.persons[e][r]=this.persons[e][r].slice(1),this.persons_count[e][r]+=-1,this._please_chop=!1;break}else if(n&&!this._please_chop){this.freeters[e]=this.persons[e][r].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],this._please_chop=n;break}}this.institutions[e].length&&(this._please_chop===e?(this.institutions[e]=this.institutions[e].slice(1),this.institutions_count[e]+=-1,this._please_chop=!1):n&&!this._please_chop&&(this.institutions[e]=this.institutions[e].slice(0,1),this.institutions_count[e]=1,this._please_chop=n))}for(t=0,i=this.variables.length;t<i;t+=1){this.institutions[e].length&&(this.nameset_offset+=1);for(var r=0,s=this.persons[e].length;r<s;r++)this.persons[e][r].length&&(this.nameset_offset+=1)}};l.NameOutput.prototype._truncateNameList=function(e,t,i){var r;if(typeof i>"u"?r=e[t]:r=e[t][i],this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names&&r.length>50&&r.length>this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names+2){var s=this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names;r=r.slice(0,s+1).concat(r.slice(-1))}return r};l.NameOutput.prototype.divideAndTransliterateNames=function(){var e,t,i,r,s=this.Item,n=this.variables;for(this.varnames=n.slice(),this.freeters={},this.persons={},this.institutions={},e=0,t=n.length;e<t;e+=1){var o=n[e];this.variable_offset[o]=this.nameset_offset;var a=this._normalizeVariableValue(s,o);if(this.name.strings["suppress-min"]&&a.length>=this.name.strings["suppress-min"]&&(a=[]),this.name.strings["suppress-max"]&&a.length<=this.name.strings["suppress-max"]&&(a=[]),this._getFreeters(o,a),this._getPersonsAndInstitutions(o,a),this.state.opt.development_extensions.spoof_institutional_affiliations){if(this.name.strings["suppress-min"]===0)for(this.freeters[o]=[],i=0,r=this.persons[o].length;i<r;i+=1)this.persons[o][i]=[];else if(this.institution.strings["suppress-min"]===0){for(this.institutions[o]=[],this.freeters[o]=this.freeters[o].concat(this.persons[o]),i=0,r=this.persons[o].length;i<r;i+=1)for(var u=0,f=this.persons[o][i].length;u<f;u+=1)this.freeters[o].push(this.persons[o][i][u]);this.persons[o]=[]}}}};l.NameOutput.prototype._normalizeVariableValue=function(e,t){var i;return typeof e[t]=="string"||typeof e[t]=="number"?(l.debug('name variable "'+t+'" is string or number, not array. Attempting to fix.'),i=[{literal:e[t]+""}]):e[t]?(typeof e[t].length!="number"&&(l.debug('name variable "'+t+'" is object, not array. Attempting to fix.'),e[t]=[e[t]]),i=e[t].slice()):i=[],i};l.NameOutput.prototype._getFreeters=function(e,t){if(this.freeters[e]=[],this.state.opt.development_extensions.spoof_institutional_affiliations)for(var i=t.length-1;i>-1&&this.isPerson(t[i]);i--){var r=this._checkNickname(t.pop());r&&this.freeters[e].push(r)}else for(var i=t.length-1;i>-1;i--){var r=t.pop();if(this.isPerson(r))var r=this._checkNickname(r);this.freeters[e].push(r)}this.freeters[e].reverse(),this.freeters[e].length&&(this.nameset_offset+=1)};l.NameOutput.prototype._getPersonsAndInstitutions=function(e,t){if(this.persons[e]=[],this.institutions[e]=[],!!this.state.opt.development_extensions.spoof_institutional_affiliations){for(var i=[],r=!1,s=!0,n=t.length-1;n>-1;n+=-1)if(this.isPerson(t[n])){var o=this._checkNickname(t[n]);o&&i.push(o)}else r=!0,this.institutions[e].push(t[n]),s||(i.reverse(),this.persons[e].push(i),i=[]),s=!1;r&&(i.reverse(),this.persons[e].push(i),this.persons[e].reverse(),this.institutions[e].reverse())}};l.NameOutput.prototype._clearValues=function(e){for(var t=e.length-1;t>-1;t+=-1)e.pop()};l.NameOutput.prototype._checkNickname=function(e){if(["interview","personal_communication"].indexOf(this.Item.type)>-1){var t="";if(t=l.Util.Names.getRawName(e),t&&this.state.sys.getAbbreviation&&!(this.item&&this.item["suppress-author"])){var i=t;this.state.sys.normalizeAbbrevsKey&&(i=this.state.sys.normalizeAbbrevsKey("author",t)),this.state.transform.loadAbbreviation("default","nickname",i,this.Item.language);var r=this.state.transform.abbrevs.default.nickname[i];r&&(r==="!here>>>"?e=!1:e={family:r,given:""})}}return e};l.NameOutput.prototype._purgeEmptyBlobs=function(e){for(var t=e.length-1;t>-1;t+=-1)(!e[t]||e[t].length===0||!e[t].blobs.length)&&(e=e.slice(0,t).concat(e.slice(t+1)));return e};l.NameOutput.prototype.joinPersons=function(e,t,i,r){var s;return e=this._purgeEmptyBlobs(e),typeof i>"u"?this.etal_spec[t].freeters===1?s=this._joinEtAl(e):this.etal_spec[t].freeters===2?s=this._joinEllipsis(e):this.state.tmp.sort_key_flag?s=this._join(e,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):s=this._joinAnd(e):this.etal_spec[t].persons[i]===1?s=this._joinEtAl(e):this.etal_spec[t].persons[i]===2?s=this._joinEllipsis(e):this.state.tmp.sort_key_flag?s=this._join(e,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):s=this._joinAnd(e),s};l.NameOutput.prototype.joinInstitutionSets=function(e,t){var i;return e=this._purgeEmptyBlobs(e),this.etal_spec[t].institutions===1?i=this._joinEtAl(e,"institution"):this.etal_spec[t].institutions===2?i=this._joinEllipsis(e,"institution"):i=this._joinAnd(e),i};l.NameOutput.prototype.joinPersonsAndInstitutions=function(e){e=this._purgeEmptyBlobs(e);var t=this._join(e,this.state.tmp.name_delimiter);return t.isInstitution=!0,t};l.NameOutput.prototype.joinFreetersAndInstitutionSets=function(e){e=this._purgeEmptyBlobs(e);var t=this._join(e,"[never here]",this.with.single,this.with.multiple);return t};l.NameOutput.prototype._getAfterInvertedName=function(e,t,i){if(i&&e.length>1&&this.state.inheritOpt(this.name,"delimiter-precedes-last")==="after-inverted-name"){var r=e[e.length-2];r.blobs.length>0&&r.blobs[0].isInverted&&(i.strings.prefix=t)}return i};l.NameOutput.prototype._getAndJoin=function(e,t){var i=!1;if(e.length>1){var r="single";e.length>2&&(r="multiple"),e[e.length-1].isInstitution?i=this.institution.and[r]:i=this.name.and[r],i=JSON.parse(JSON.stringify(i)),i=this._getAfterInvertedName(e,t,i)}return i};l.NameOutput.prototype._joinEtAl=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),i=this._join(e,t);return this.state.output.openLevel(this._getToken("name")),this.state.output.current.value().strings.delimiter="",this.state.output.append(i,"literal",!0),e.length>1?this.state.output.append(this["et-al"].multiple,"literal",!0):e.length===1&&this.state.output.append(this["et-al"].single,"literal",!0),this.state.output.closeLevel(),this.state.output.pop()};l.NameOutput.prototype._joinEllipsis=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),i=!1;if(e.length>1){var r="single";e.length>2&&(r="multiple"),i=JSON.parse(JSON.stringify(this.name.ellipsis[r])),i=this._getAfterInvertedName(e,t,i)}return this._join(e,t,i)};l.NameOutput.prototype._joinAnd=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),i=this._getAndJoin(e,t);return this._join(e,t,i)};l.NameOutput.prototype._join=function(e,t,i){var r,s;if(!e||(e=this._purgeEmptyBlobs(e),!e.length))return!1;if(e.length>1)if(e.length===2)i?e=[e[0],i,e[1]]:e[0].strings.suffix+=t;else{var n;i?n=1:n=0;for(var o=e.pop(),r=0,s=e.length-n;r<s;r++)e[r].strings.suffix+=t;e.push(i),e.push(o)}for(this.state.output.openLevel(),r=0,s=e.length;r<s;r+=1)this.state.output.append(e[r],!1,!0);return this.state.output.closeLevel(),this.state.output.pop()};l.NameOutput.prototype._getToken=function(e){var t=this[e];if(e==="institution"){var i=new l.Token;return i}return t};l.NameOutput.prototype.checkCommonAuthor=function(e){if(!e)return!1;var t=!1;if(this.variables.length===2){var i=this.variables,r=i.slice();r.sort(),t=r.join("")}if(!t)return!1;var s=!1;if(this.state.locale[this.state.opt.lang].terms[t]&&(s=!0),!s)return this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1]),!1;var n=this.Item[this.variables[0]],o=this.Item[this.variables[1]],a=this._compareNamesets(n,o);return a===!0&&(this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1])),!a};l.NameOutput.prototype.setCommonTerm=function(){var e=this.variables,t=e.slice();if(t.sort(),this.common_term=t.join(""),!!this.common_term){var i=!1;if(this.label&&this.label[this.variables[0]]&&(this.label[this.variables[0]].before?i=this.state.getTerm(this.common_term,this.label[this.variables[0]].before.strings.form,0):this.label[this.variables[0]].after&&(i=this.state.getTerm(this.common_term,this.label[this.variables[0]].after.strings.form,0))),!this.state.locale[this.state.opt.lang].terms[this.common_term]||!i||this.variables.length<2){this.common_term=!1;return}for(var r=0,s=this.variables.length-1;r<s;r+=1){var n=this.variables[r],o=this.variables[r+1];if((this.freeters[n].length||this.freeters[o].length)&&(this.etal_spec[n].freeters!==this.etal_spec[o].freeters||!this._compareNamesets(this.freeters[n],this.freeters[o]))){this.common_term=!1;return}if(this.persons[n].length!==this.persons[o].length){this.common_term=!1;return}for(var a=0,u=this.persons[n].length;a<u;a+=1)if(this.etal_spec[n].persons[a]!==this.etal_spec[o].persons[a]||!this._compareNamesets(this.persons[n][a],this.persons[o][a])){this.common_term=!1;return}}}};l.NameOutput.prototype._compareNamesets=function(e,t){if(!e||!t||e.length!==t.length)return!1;for(var i=0,r=t.length;i<r;i+=1)for(var s=0,n=l.NAME_PARTS.length;s<n;s+=1){var o=l.NAME_PARTS[s];if(!e[i]||e[i][o]!=t[i][o])return!1}return!0};l.NameOutput.prototype.constrainNames=function(){this.names_count=0;for(var e,t=0,i=this.variables.length;t<i;t+=1){var r=this.variables[t];e=this.nameset_base+t,this.freeters[r].length&&(this.state.tmp.names_max.push(this.freeters[r].length,"literal"),this._imposeNameConstraints(this.freeters,this.freeters_count,r,e),this.names_count+=this.freeters[r].length),this.institutions[r].length&&(this.state.tmp.names_max.push(this.institutions[r].length,"literal"),this._imposeNameConstraints(this.institutions,this.institutions_count,r,e),this.persons[r]=this.persons[r].slice(0,this.institutions[r].length),this.names_count+=this.institutions[r].length);for(var s=0,n=this.persons[r].length;s<n;s+=1)this.persons[r][s].length&&(this.state.tmp.names_max.push(this.persons[r][s].length,"literal"),this._imposeNameConstraints(this.persons[r],this.persons_count[r],s,e),this.names_count+=this.persons[r][s].length)}};l.NameOutput.prototype._imposeNameConstraints=function(e,t,i,r){var s=e[i],n=this.state.tmp["et-al-min"];this.state.tmp.suppress_decorations?this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[r]?n=this.state.tmp.disambig_request.names[r]:t[i]>=this.etal_min&&(n=this.etal_use_first):(this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[r]>this.etal_use_first?t[i]<this.etal_min?n=t[i]:n=this.state.tmp.disambig_request.names[r]:t[i]>=this.etal_min&&(n=this.etal_use_first),this.etal_use_last&&n>this.etal_min-2&&(n=this.etal_min-2));var o=this.etal_min>=this.etal_use_first,a=t[i]>n;n>t[i]&&(n=s.length),o&&a&&(this.etal_use_last?e[i]=s.slice(0,n).concat(s.slice(-1)):e[i]=s.slice(0,n)),this.state.tmp.disambig_settings.names[r]=e[i].length,this.state.disambiguate.padBase(this.state.tmp.disambig_settings)};l.NameOutput.prototype.disambigNames=function(){for(var e,t=0,i=this.variables.length;t<i;t+=1){var r=this.variables[t];if(e=this.nameset_base+t,this.freeters[r].length&&this._runDisambigNames(this.freeters[r],e),this.institutions[r].length){typeof this.state.tmp.disambig_settings.givens[e]>"u"&&(this.state.tmp.disambig_settings.givens[e]=[]);for(var s=0,n=this.institutions[r].length;s<n;s+=1)typeof this.state.tmp.disambig_settings.givens[e][s]>"u"&&this.state.tmp.disambig_settings.givens[e].push(2)}for(var s=0,n=this.persons[r].length;s<n;s+=1)this.persons[r][s].length&&this._runDisambigNames(this.persons[r][s],e)}};l.NameOutput.prototype._runDisambigNames=function(e,t){var i,r,s,n,o,a,u;for(o=0,a=e.length;o<a;o+=1)if(!(!e[o].given&&!e[o].family)){if(s=this.state.inheritOpt(this.name,"initialize-with"),this.state.registry.namereg.addname(""+this.Item.id,e[o],o),i=this.state.tmp.disambig_settings.givens[t],typeof i>"u")for(var f=0,c=t+1;f<c;f+=1)this.state.tmp.disambig_settings.givens[f]||(this.state.tmp.disambig_settings.givens[f]=[]);if(i=this.state.tmp.disambig_settings.givens[t][o],typeof i>"u"&&(r=this.state.inheritOpt(this.name,"form","name-form","long"),n=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,0,r,s),this.state.tmp.disambig_settings.givens[t].push(n)),r=this.state.inheritOpt(this.name,"form","name-form","long"),u=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,0,r,s),this.state.tmp.disambig_request){var h=this.state.tmp.disambig_settings.givens[t][o];h===1&&this.state.citation.opt["givenname-disambiguation-rule"]==="by-cite"&&(typeof this.state.inheritOpt(this.name,"initialize-with")>"u"||typeof e[o].given>"u")&&(h=2),n=h,this.state.opt["disambiguate-add-givenname"]&&e[o].given&&(n=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,n,this.state.inheritOpt(this.name,"form","name-form","long"),this.state.inheritOpt(this.name,"initialize-with")))}else n=u;!this.state.tmp.just_looking&&this.item&&this.item.position===l.POSITION_FIRST&&u>n&&(n=u),this.state.tmp.sort_key_flag||(this.state.tmp.disambig_settings.givens[t][o]=n,typeof s=="string"&&(typeof this.name.strings.initialize>"u"||this.name.strings.initialize===!0)&&(this.state.tmp.disambig_settings.use_initials=!0))}};l.NameOutput.prototype.getEtAlConfig=function(){var e=this.item;this["et-al"]={},this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].single=this.state.output.pop(),this["et-al"].single.strings.suffix=this.etal_suffix,this["et-al"].single.strings.prefix=this.etal_prefix_single,this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].multiple=this.state.output.pop(),this["et-al"].multiple.strings.suffix=this.etal_suffix,this["et-al"].multiple.strings.prefix=this.etal_prefix_multiple,typeof e>"u"&&(e={}),e.position?(this.state.inheritOpt(this.name,"et-al-subsequent-min")?this.etal_min=this.state.inheritOpt(this.name,"et-al-subsequent-min"):this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.inheritOpt(this.name,"et-al-subsequent-use-first")?this.etal_use_first=this.state.inheritOpt(this.name,"et-al-subsequent-use-first"):this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first")):(this.state.tmp["et-al-min"]?this.etal_min=this.state.tmp["et-al-min"]:this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.tmp["et-al-use-first"]?this.etal_use_first=this.state.tmp["et-al-use-first"]:this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first"),typeof this.state.tmp["et-al-use-last"]=="boolean"?this.etal_use_last=this.state.tmp["et-al-use-last"]:this.etal_use_last=this.state.inheritOpt(this.name,"et-al-use-last")),this.state.tmp["et-al-min"]||(this.state.tmp["et-al-min"]=this.etal_min)};l.NameOutput.prototype.setEtAlParameters=function(){var e,t,i,r;for(e=0,t=this.variables.length;e<t;e+=1){var s=this.variables[e];for(typeof this.etal_spec[s]>"u"&&(this.etal_spec[s]={freeters:0,institutions:0,persons:[]}),this.etal_spec[this.nameset_base+e]=this.etal_spec[s],this.freeters[s].length&&this._setEtAlParameter("freeters",s),i=0,r=this.persons[s].length;i<r;i+=1)typeof this.etal_spec[s][i]>"u"&&(this.etal_spec[s].persons[i]=0),this._setEtAlParameter("persons",s,i);this.institutions[s].length&&this._setEtAlParameter("institutions",s)}};l.NameOutput.prototype._setEtAlParameter=function(e,t,i){var r,s;e==="persons"?(r=this.persons[t][i],s=this.persons_count[t][i]):(r=this[e][t],s=this[e+"_count"][t]),r.length<s&&!this.state.tmp.sort_key_flag?this.etal_use_last?e==="persons"?this.etal_spec[t].persons[i]=2:this.etal_spec[t][e]=2:e==="persons"?this.etal_spec[t].persons[i]=1:this.etal_spec[t][e]=1:e==="persons"?this.etal_spec[t].persons[i]=0:this.etal_spec[t][e]=0};l.NameOutput.prototype.renderAllNames=function(){for(var e,t=0,i=this.variables.length;t<i;t+=1){var r=this.variables[t];(this.freeters[r].length||this.institutions[r].length)&&(this.state.tmp.group_context.tip.condition||(this.state.tmp.just_did_number=!1)),e=this.nameset_base+t,this.freeters[r].length&&(this.freeters[r]=this._renderNames(r,this.freeters[r],e));for(var s=0,n=this.institutions[r].length;s<n;s+=1)this.persons[r][s]=this._renderNames(r,this.persons[r][s],e,s)}this.renderInstitutionNames()};l.NameOutput.prototype.renderInstitutionNames=function(){for(var e=0,t=this.variables.length;e<t;e+=1)for(var i=this.variables[e],r=0,s=this.institutions[i].length;r<s;r+=1){var h,n=this.institutions[i][r],r,s,o;this.state.tmp.extension?o=["sort"]:n.isInstitution||n.literal?o=this.state.opt["cite-lang-prefs"].institutions:o=this.state.opt["cite-lang-prefs"].persons;var a={primary:"locale-orig",secondary:!1,tertiary:!1};if(o)for(var u=["primary","secondary","tertiary"],f=0,c=u.length;f<c&&!(o.length-1<f);f+=1)o[f]&&(a[u[f]]="locale-"+o[f]);else a.primary="locale-translat";this.state.tmp.area!=="bibliography"&&!(this.state.tmp.area==="citation"&&this.state.opt.xclass==="note"&&this.item&&!this.item.position)&&(a.secondary=!1,a.tertiary=!1),this.setRenderedName(n);var h=this._renderInstitutionName(i,n,a,r);this.institutions[i][r]=h}};l.NameOutput.prototype._renderInstitutionName=function(e,t,i,r){var s,n,o,a,u,f,c,h=this.getName(t,i.primary,!0),p=h.name,T=h.usedOrig;if(p&&(p=this.fixupInstitution(p,e,r)),s=!1,i.secondary){h=this.getName(t,i.secondary,!1,T);var s=h.name;T=h.usedOrig,s&&(s=this.fixupInstitution(s,e,r))}n=!1,i.tertiary&&(h=this.getName(t,i.tertiary,!1,T),n=h.name,n&&(n=this.fixupInstitution(n,e,r)));var w={l:{pri:!1,sec:!1,ter:!1},s:{pri:!1,sec:!1,ter:!1}};switch(p&&(w.l.pri=p.long,w.s.pri=p.short.length?p.short:p.long),s&&(w.l.sec=s.long,w.s.sec=s.short.length?s.short:s.long),n&&(w.l.ter=n.long,w.s.ter=n.short.length?n.short:n.long),this.institution.strings["institution-parts"]){case"short":p.short.length?(a=this._getShortStyle(),u=[this._composeOneInstitutionPart([w.s.pri,w.s.sec,w.s.ter],i,a,e)]):(o=this._getLongStyle(p,e,r),u=[this._composeOneInstitutionPart([w.l.pri,w.l.sec,w.l.ter],i,o,e)]);break;case"short-long":o=this._getLongStyle(p,e,r),a=this._getShortStyle(),f=this._renderOneInstitutionPart(p.short,a),c=this._composeOneInstitutionPart([w.l.pri,w.l.sec,w.l.ter],i,o,e),u=[f,c];break;case"long-short":o=this._getLongStyle(p,e,r),a=this._getShortStyle(),f=this._renderOneInstitutionPart(p.short,a),c=this._composeOneInstitutionPart([w.l.pri,w.l.sec,w.l.ter],i,o,e),u=[c,f];break;default:o=this._getLongStyle(p,e,r),u=[this._composeOneInstitutionPart([w.l.pri,w.l.sec,w.l.ter],i,o,e)];break}var m=this._join(u," ");return m&&(m.isInstitution=!0),this.state.tmp.name_node.children.push(m),m};l.NameOutput.prototype._composeOneInstitutionPart=function(e,t,i){var r=!1,s=!1,n=!1,o,a,u;if(e[0]){if(o=l.Util.cloneToken(i),this.state.opt.citeAffixes[t.primary]&&this.state.opt.citeAffixes.institutions[t.primary].prefix==="<i>"){for(var f=!1,c=0,h=o.decorations.length;c<h;c+=1)i.decorations[c][0]==="@font-style"&&o.decorations[c][1]==="italic"&&(f=!0);f||o.decorations.push(["@font-style","italic"])}r=this._renderOneInstitutionPart(e[0],o)}e[1]&&(s=this._renderOneInstitutionPart(e[1],i)),e[2]&&(n=this._renderOneInstitutionPart(e[2],i));var p;if(s||n){this.state.output.openLevel("empty"),this.state.output.append(r),a=l.Util.cloneToken(i),t.secondary&&(a.strings.prefix=this.state.opt.citeAffixes.institutions[t.secondary].prefix,a.strings.suffix=this.state.opt.citeAffixes.institutions[t.secondary].suffix,a.strings.prefix||(a.strings.prefix=" "));var T=new l.Token;T.decorations.push(["@font-style","normal"]),T.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(T),this.state.output.append(s,a),this.state.output.closeLevel(),u=l.Util.cloneToken(i),t.tertiary&&(u.strings.prefix=this.state.opt.citeAffixes.institutions[t.tertiary].prefix,u.strings.suffix=this.state.opt.citeAffixes.institutions[t.tertiary].suffix,u.strings.prefix||(u.strings.prefix=" "));var w=new l.Token;w.decorations.push(["@font-style","normal"]),w.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(w),this.state.output.append(n,u),this.state.output.closeLevel(),this.state.output.closeLevel(),p=this.state.output.pop()}else p=r;return p};l.NameOutput.prototype._renderOneInstitutionPart=function(e,t){for(var i=0,r=e.length;i<r;i+=1)if(e[i]){var s=e[i];if(this.state.tmp.strip_periods)s=s.replace(/\./g,"");else for(var n=0,o=t.decorations.length;n<o;n+=1)if(t.decorations[n][0]==="@strip-periods"&&t.decorations[n][1]==="true"){s=s.replace(/\./g,"");break}this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,l.LITERAL),s==="!here>>>"?e[i]=!1:(this.state.output.append(s,t,!0),e[i]=this.state.output.pop())}return typeof this.institution.strings["part-separator"]>"u"&&(this.institution.strings["part-separator"]=this.state.tmp.name_delimiter),this._join(e,this.institution.strings["part-separator"])};l.NameOutput.prototype._renderNames=function(e,t,i,r){var s=!1;if(t.length){for(var n=[],o=0,a=t.length;o<a;o+=1){var u=t[o],s,f;this.state.tmp.extension?f=["sort"]:u.isInstitution||u.literal?f=this.state.opt["cite-lang-prefs"].institutions:f=this.state.opt["cite-lang-prefs"].persons;var c={primary:"locale-orig",secondary:!1,tertiary:!1};if(f)for(var h=["primary","secondary","tertiary"],p=0,T=h.length;p<T&&!(f.length-1<p);p+=1)c[h[p]]="locale-"+f[p];else c.primary="locale-translat";if((this.state.tmp.sort_key_flag||this.state.tmp.area!=="bibliography"&&!(this.state.tmp.area==="citation"&&this.state.opt.xclass==="note"&&this.item&&!this.item.position))&&(c.secondary=!1,c.tertiary=!1),this.setRenderedName(u),!u.literal&&!u.isInstitution){var w=this._renderPersonalName(e,u,c,i,o,r),m=l.Util.cloneToken(this.name);this.state.output.append(w,m,!0),n.push(this.state.output.pop())}else n.push(this._renderInstitutionName(e,u,c,r))}s=this.joinPersons(n,i,r)}return s};l.NameOutput.prototype._renderPersonalName=function(e,t,i,r,s,n){var o=this.getName(t,i.primary,!0),a=this._renderOnePersonalName(o.name,r,s,n),u=!1;i.secondary&&(o=this.getName(t,i.secondary,!1,o.usedOrig),o.name&&(u=this._renderOnePersonalName(o.name,r,s,n)));var f=!1;i.tertiary&&(o=this.getName(t,i.tertiary,!1,o.usedOrig),o.name&&(f=this._renderOnePersonalName(o.name,r,s,n)));var c;if(u||f){this.state.output.openLevel("empty"),this.state.output.append(a);var h=new l.Token;i.secondary&&(h.strings.prefix=this.state.opt.citeAffixes.persons[i.secondary].prefix,h.strings.suffix=this.state.opt.citeAffixes.persons[i.secondary].suffix,h.strings.prefix||(h.strings.prefix=" ")),this.state.output.append(u,h);var p=new l.Token;i.tertiary&&(p.strings.prefix=this.state.opt.citeAffixes.persons[i.tertiary].prefix,p.strings.suffix=this.state.opt.citeAffixes.persons[i.tertiary].suffix,p.strings.prefix||(p.strings.prefix=" ")),this.state.output.append(f,p),this.state.output.closeLevel(),c=this.state.output.pop()}else c=a;return c};l.NameOutput.prototype._isRomanesque=function(e){var t=2;e.family.replace(/\"/g,"").match(l.ROMANESQUE_REGEXP)||(t=0),!t&&e.given&&e.given.match(l.STARTSWITH_ROMANESQUE_REGEXP)&&(t=1);var i;return t==2&&(e.multi&&e.multi.main?i=e.multi.main.slice(0,2):this.Item.language&&(i=this.Item.language.slice(0,2)),["ja","zh"].indexOf(i)>-1&&(t=1)),t};l.NameOutput.prototype._renderOnePersonalName=function(e,t,i,r){var s=e,n=this._droppingParticle(s,t,r),o=this._familyName(s),a=this._nonDroppingParticle(s),u=this._givenName(s,t,i),f=u.blob,c=this._nameSuffix(s);f===!1&&(n=!1,c=!1);var h=this.state.inheritOpt(this.name,"sort-separator");h||(h="");var p;s["comma-suffix"]?p=", ":p=" ";var T=this._isRomanesque(s);function w(A){return A?typeof A.blobs=="string"?["","'","-"," "].indexOf(A.blobs.slice(-1))>-1:w(A.blobs[A.blobs.length-1]):!1}var m=w(a),O;["fr","ru","cs"].indexOf(this.state.opt["default-locale"][0].slice(0,2))>-1?O="":O=" ";var d,S,g,b;if(T===0)d=this._join([a,o,f],"");else if(T===1||s["static-ordering"])S=this._join([a,o],O),d=this._join([S,f]," ");else if(s["reverse-ordering"])S=this._join([a,o],O),d=this._join([f,S]," ");else if(this.state.tmp.sort_key_flag)this.state.opt["demote-non-dropping-particle"]==="never"?(S=this._join([a,o],O),S=this._join([S,n]," "),S=this._join([S,f],this.state.opt.sort_sep),d=this._join([S,c]," ")):(b=this._join([f,n,a]," "),S=this._join([o,b],this.state.opt.sort_sep),d=this._join([S,c]," "));else if(this.state.inheritOpt(this.name,"name-as-sort-order")==="all"||this.state.inheritOpt(this.name,"name-as-sort-order")==="first"&&i===0&&(r===0||typeof r>"u"))["Lord","Lady"].indexOf(s.given)>-1&&(h=", "),["always","display-and-sort"].indexOf(this.state.opt["demote-non-dropping-particle"])>-1?(b=this._join([f,n],s["comma-dropping-particle"]+" "),b=this._join([b,a]," "),b&&this.given&&(b.strings.prefix=this.given.strings.prefix,b.strings.suffix=this.given.strings.suffix),o&&this.family&&(o.strings.prefix=this.family.strings.prefix,o.strings.suffix=this.family.strings.suffix),S=this._join([o,b],h),d=this._join([S,c],h)):(m?g=this._join([a,o],""):g=this._join([a,o],O),g&&this.family&&(g.strings.prefix=this.family.strings.prefix,g.strings.suffix=this.family.strings.suffix),b=this._join([f,n],s["comma-dropping-particle"]+" "),b&&this.given&&(b.strings.prefix=this.given.strings.prefix,b.strings.suffix=this.given.strings.suffix),S=this._join([g,b],h),d=this._join([S,c],h)),d.isInverted=!0;else{if(s["dropping-particle"]&&s.family&&!s["non-dropping-particle"]){var I=s["dropping-particle"],N=["'","","","-"];N.indexOf(I.slice(-1))>-1&&I.slice(0,-1)!=="de"&&(o=this._join([n,o],""),n=!1)}m?(b=this._join([a,o],""),b=this._join([n,b],O)):b=this._join([n,a,o],O),b=this._join([b,c],p),b&&this.family&&(b.strings.prefix=this.family.strings.prefix,b.strings.suffix=this.family.strings.suffix),f&&this.given&&(f.strings.prefix=this.given.strings.prefix,f.strings.suffix=this.given.strings.suffix),b.strings.prefix&&(s["comma-dropping-particle"]="");var q;this.state.inheritOpt(this.name,"initialize-with")&&this.state.inheritOpt(this.name,"initialize-with").match(/[\u00a0\ufeff]/)&&u.initializationLevel===1?q=O:q=" ",d=this._join([f,b],s["comma-dropping-particle"]+q)}return this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,l.LITERAL),this.state.tmp.term_predecessor=!0,this.state.tmp.name_node.children.push(d),d};l.NameOutput.prototype._normalizeNameInput=function(e){var t={literal:e.literal,family:e.family,isInstitution:e.isInstitution,given:e.given,suffix:e.suffix,"comma-suffix":e["comma-suffix"],"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],"static-ordering":e["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":e["reverse-ordering"],"full-form-always":e["full-form-always"],"parse-names":e["parse-names"],"comma-dropping-particle":"",block_initialize:e.block_initialize,multi:e.multi};return this._parseName(t),t};l.NameOutput.prototype._stripPeriods=function(e,t){var i=this[e+"_decor"];if(t){if(this.state.tmp.strip_periods)t=t.replace(/\./g,"");else if(i){for(var r=0,s=i.decorations.length;r<s;r+=1)if(i.decorations[r][0]==="@strip-periods"&&i.decorations[r][1]==="true"){t=t.replace(/\./g,"");break}}}return t};l.NameOutput.prototype._nonDroppingParticle=function(e){var t=e["non-dropping-particle"];t&&this.state.tmp.sort_key_flag&&(t=t.replace(/[\'\u2019]/,""));var i=this._stripPeriods("family",t);return this.state.output.append(i,this.family_decor,!0)?this.state.output.pop():!1};l.NameOutput.prototype._droppingParticle=function(e,t,i){var r=e["dropping-particle"];r&&this.state.tmp.sort_key_flag&&(r=r.replace(/[\'\u2019]/,""));var s=this._stripPeriods("given",r);if(e["dropping-particle"]&&e["dropping-particle"].match(/^et.?al[^a-z]$/))this.state.inheritOpt(this.name,"et-al-use-last")?typeof i>"u"?this.etal_spec[t].freeters=2:this.etal_spec[t].persons=2:typeof i>"u"?this.etal_spec[t].freeters=1:this.etal_spec[t].persons=1,e["comma-dropping-particle"]="";else if(this.state.output.append(s,this.given_decor,!0))return this.state.output.pop();return!1};l.NameOutput.prototype._familyName=function(e){var t=this._stripPeriods("family",e.family);return this.state.output.append(t,this.family_decor,!0)?this.state.output.pop():!1};l.NameOutput.prototype._givenName=function(e,t,i){var r,s=this.state.inheritOpt(this.name,"form","name-form","long")!=="long",n=this.state.inheritOpt(this.name,"initialize")!==!1,o=typeof this.state.inheritOpt(this.name,"initialize-with")=="string"&&!e.block_initialize,a,u;if(e["full-form-always"])u=2;else{s?a=0:o?a=1:a=2;var f=this.state.tmp.disambig_settings.givens[t][i];f>a?u=f:u=a}var c=this.state.citation.opt["givenname-disambiguation-rule"];if(c&&c.slice(-14)==="-with-initials"&&(o=!0),e.family&&u===1)if(o){var h=this.state.inheritOpt(this.name,"initialize-with",!1,"");e.given=l.Util.Names.initializeWith(this.state,e.given,h,!n)}else e.given=l.Util.Names.unInitialize(this.state,e.given);else{if(u===0)return{blob:!1};u===2&&(e.given=l.Util.Names.unInitialize(this.state,e.given))}var p=this._stripPeriods("given",e.given),T=this.state.output.append(p,this.given_decor,!0);return T?(r=this.state.output.pop(),{blob:r,initializationLevel:u}):{blob:!1}};l.NameOutput.prototype._nameSuffix=function(e){var t=e.suffix,i;t&&typeof this.state.inheritOpt(this.name,"initialize-with")=="string"&&(t=l.Util.Names.initializeWith(this.state,t,this.state.inheritOpt(this.name,"initialize-with"),!0)),t=this._stripPeriods("family",t);var r="";t&&t.slice(-1)==="."&&(t=t.slice(0,-1),r=".");var s=this.state.output.append(t,"empty",!0);return s?(i=this.state.output.pop(),i.strings.suffix=r+i.strings.suffix,i):!1};l.NameOutput.prototype._getLongStyle=function(e){var t;return e.short.length?this.institutionpart["long-with-short"]?t=this.institutionpart["long-with-short"]:t=this.institutionpart.long:t=this.institutionpart.long,t||(t=new l.Token),t};l.NameOutput.prototype._getShortStyle=function(){var e;return this.institutionpart.short?e=this.institutionpart.short:e=new l.Token,e};l.NameOutput.prototype._parseName=function(e){if(!e["parse-names"]&&typeof e["parse-names"]<"u")return e;e.family&&!e.given&&e.isInstitution&&(e.literal=e.family,e.family=void 0,e.isInstitution=void 0);var t;e.family&&e.family.slice(0,1)==='"'&&e.family.slice(-1)==='"'||!e["parse-names"]&&typeof e["parse-names"]<"u"?(e.family=e.family.slice(1,-1),t=!0,e["parse-names"]=0):t=!1,this.state.opt.development_extensions.parse_names&&!e["non-dropping-particle"]&&e.family&&!t&&e.given&&(e["static-particles"]||l.parseParticles(e,!0))};l.NameOutput.prototype.getName=function(e,t,i,r){if(r&&t==="locale-orig")return{name:!1,usedOrig:r};e.family||(e.family=""),e.given||(e.given="");var s={};s["static-ordering"]=this.getStaticOrder(e);var n=!0,o;if(t!=="locale-orig"&&(n=!1,e.multi)){for(var a=this.state.opt[t],u=0,f=a.length;u<f;u+=1)if(o=a[u],e.multi._key[o]){n=!0;var c=e.isInstitution;e=e.multi._key[o],e.isInstitution=c,s=this.getNameParams(o),s.transliterated=!0;break}}if(n||(o=!1,e.multi&&e.multi.main?o=e.multi.main:this.Item.language&&(o=this.Item.language),o&&(s=this.getNameParams(o))),!i&&!n)return{name:!1,usedOrig:r};e.family||(e.family=""),e.given||(e.given=""),e.literal&&(delete e.family,delete e.given),e={family:e.family,given:e.given,"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],suffix:e.suffix,"static-ordering":s["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":s["reverse-ordering"],"full-form-always":s["full-form-always"],"parse-names":e["parse-names"],"comma-suffix":e["comma-suffix"],"comma-dropping-particle":e["comma-dropping-particle"],transliterated:s.transliterated,block_initialize:s["block-initialize"],literal:e.literal,isInstitution:e.isInstitution,multi:e.multi},!e.literal&&!e.given&&e.family&&e.isInstitution&&(e.literal=e.family),e.literal&&(delete e.family,delete e.given),e=this._normalizeNameInput(e);var h;return r?h=r:h=!n,{name:e,usedOrig:h}};l.NameOutput.prototype.getNameParams=function(e){var t={},i=l.localeResolve(this.Item.language,this.state.opt["default-locale"][0]),r=this.state.locale[i.best]?i.best:this.state.opt["default-locale"][0],s=this.state.locale[r].opts["name-as-sort-order"],n=this.state.locale[r].opts["name-as-reverse-order"],o=this.state.locale[r].opts["name-never-short"],a=e.split("-")[0];return s&&s[a]&&(t["static-ordering"]=!0,t["reverse-ordering"]=!1),n&&n[a]&&(t["reverse-ordering"]=!0,t["static-ordering"]=!1),o&&o[a]&&(t["full-form-always"]=!0),t["static-ordering"]&&(t["block-initialize"]=!0),t};l.NameOutput.prototype.setRenderedName=function(e){if(this.state.tmp.area==="bibliography"){for(var t="",i=0,r=l.NAME_PARTS.length;i<r;i+=1)e[l.NAME_PARTS[i]]&&(t+=e[l.NAME_PARTS[i]]);this.state.tmp.rendered_name.push(t)}};l.NameOutput.prototype.fixupInstitution=function(e,t,i){!e.literal&&e.family&&(e.literal=e.family,delete e.family);var r=e.literal,s=r,n={long:r.split(/\s*\|\s*/),short:s.split(/\s*\|\s*/)};if(this.state.sys.getAbbreviation){if(this.institution.strings.form==="short"){let p=this.Item.jurisdiction;p=this.state.transform.loadAbbreviation(p,"institution-entire",r,this.Item.language),this.state.transform.abbrevs[p]["institution-entire"][r]?r=this.state.transform.abbrevs[p]["institution-entire"][r]:(p=this.Item.jurisdiction,p=this.state.transform.loadAbbreviation(p,"institution-part",r,this.Item.language),this.state.transform.abbrevs[p]["institution-part"][r]&&(r=this.state.transform.abbrevs[p]["institution-part"][r])),r=this._quashChecks(p,r)}if(["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1){let p=this.Item.jurisdiction;p=this.state.transform.loadAbbreviation(p,"institution-part",s,this.Item.language),this.state.transform.abbrevs[p]["institution-part"][s]&&(s=this.state.transform.abbrevs[p]["institution-part"][s]),s=this._quashChecks(p,s),["short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1&&s===r&&(s="")}if(n.long=r.split(/\s*\|\s*/),n.short=s.split(/\s*\|\s*/),["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1)for(var o=n.short.length-1;o>-1;o--){let p=this.Item.jurisdiction;var a=n.short[o];if(p=this.state.transform.loadAbbreviation(p,"institution-part",a,this.Item.language),this.state.transform.abbrevs[p]["institution-part"][a]&&(n.short[o]=this.state.transform.abbrevs[p]["institution-part"][a]),n.short[o].indexOf("|")>-1){let T=n.short,w=T[o].split(/\s*\|\s*/);n.short=T.slice(0,o).concat(w).concat(T.slice(o+1))}}if(this.state.opt.development_extensions.legacy_institution_name_ordering&&n.short.reverse(),n.short=this._trimInstitution(n.short),this.institution.strings["reverse-order"]&&n.short.reverse(),!this.state.tmp.just_looking&&this.Item.jurisdiction){let p=this.Item.jurisdiction;var u=this.state.tmp.abbrev_trimmer;if(u&&u[p]&&u[p][t])for(var f=0,c=n.short.length;f<c;f++){var h=n.short[f];n.short[f]=h.replace(u[p][t],"").trim()}}}return this.state.opt.development_extensions.legacy_institution_name_ordering&&n.long.reverse(),n.long=this._trimInstitution(n.long),this.institution.strings["reverse-order"]&&n.long.reverse(),n};l.NameOutput.prototype.getStaticOrder=function(e,t){var i=!1;return(!t&&e["static-ordering"]||this._isRomanesque(e)===0||(!e.multi||!e.multi.main)&&this.Item.language&&["vi","hu"].indexOf(this.Item.language)>-1||e.multi&&e.multi.main&&["vi","hu"].indexOf(e.multi.main.slice(0,2))>-1||this.state.opt["auto-vietnamese-names"]&&l.VIETNAMESE_NAMES.exec(e.family+" "+e.given)&&l.VIETNAMESE_SPECIALS.exec(e.family+e.given))&&(i=!0),i};l.NameOutput.prototype._quashChecks=function(e,i){var i=this.state.transform.quashCheck(e,i),r=i.split(/>>[0-9]{4}>>/),s=i.match(/>>([0-9]{4})>>/);i=r.pop();var n=this.Item["original-date"]?this.Item["original-date"]:this.Item.issued;if(n&&(n=parseInt(n.year,10),n=isNaN(n)?!1:n),n){if(r.length>0)for(var o=s.length-1;o>0&&!(n>=parseInt(s[o],10));o--)i=r.pop();i=i.replace(/\s*\|\s*/g,"|")}return i};l.NameOutput.prototype._trimInstitution=function(e){var t=!1,i=!1,r=!1,s=!1,n=e.slice();if(this.institution){if(typeof this.institution.strings["use-first"]<"u"&&(t=this.institution.strings["use-first"]),typeof this.institution.strings["use-last"]<"u"&&(r=this.institution.strings["use-last"]),typeof this.institution.strings["stop-first"]<"u"&&(s=this.institution.strings["stop-first"]),typeof this.institution.strings["stop-last"]<"u"&&(i=this.institution.strings["stop-last"]),t&&(i&&(n=n.slice(0,i*-1)),n=n.slice(0,t)),r){var o=e.slice();t?s=t:n=[],s&&(o=o.slice(s)),o=o.slice(r*-1),n=n.concat(o)}e=n}return e};l.PublisherOutput=function(e,t){this.state=e,this.group_tok=t,this.varlist=[]};l.PublisherOutput.prototype.render=function(){this.clearVars(),this.composeAndBlob(),this.composeElements(),this.composePublishers(),this.joinPublishers()};l.PublisherOutput.prototype.composeAndBlob=function(){this.and_blob={};var e=!1;this.group_tok.strings.and==="text"?e=this.state.getTerm("and"):this.group_tok.strings.and==="symbol"&&(e="&");var t=new l.Token;t.strings.suffix=" ",t.strings.prefix=" ",this.state.output.append(e,t,!0);var i=this.state.output.pop();t.strings.prefix=this.group_tok.strings["subgroup-delimiter"],this.state.output.append(e,t,!0);var r=this.state.output.pop();this.and_blob.single=!1,this.and_blob.multiple=!1,e&&(this.group_tok.strings["subgroup-delimiter-precedes-last"]==="always"?this.and_blob.single=r:this.group_tok.strings["subgroup-delimiter-precedes-last"]==="never"?(this.and_blob.single=i,this.and_blob.multiple=i):(this.and_blob.single=i,this.and_blob.multiple=r))};l.PublisherOutput.prototype.composeElements=function(){for(var e=0,t=2;e<t;e+=1)for(var i=["publisher","publisher-place"][e],r=0,s=this["publisher-list"].length;r<s;r+=1){var n=this[i+"-list"][r],o=this[i+"-token"];this.state.output.append(n,o,!0),this[i+"-list"][r]=this.state.output.pop()}};l.PublisherOutput.prototype.composePublishers=function(){for(var e,t=0,i=this["publisher-list"].length;t<i;t+=1)e=[this[this.varlist[0]+"-list"][t],this[this.varlist[1]+"-list"][t]],this["publisher-list"][t]=this._join(e,this.group_tok.strings.delimiter)};l.PublisherOutput.prototype.joinPublishers=function(){var e=this["publisher-list"],t=this._join(e,this.group_tok.strings["subgroup-delimiter"],this.and_blob.single,this.and_blob.multiple,this.group_tok);this.state.output.append(t,"literal")};l.PublisherOutput.prototype._join=l.NameOutput.prototype._join;l.PublisherOutput.prototype._getToken=l.NameOutput.prototype._getToken;l.PublisherOutput.prototype.clearVars=function(){this.state.tmp["publisher-list"]=!1,this.state.tmp["publisher-place-list"]=!1,this.state.tmp["publisher-group-token"]=!1,this.state.tmp["publisher-token"]=!1,this.state.tmp["publisher-place-token"]=!1};l.evaluateLabel=function(e,t,i,r){var s;e.strings.term==="locator"?(r&&r.label&&(r.label==="sub verbo"?s="sub-verbo":s=r.label),s||(s="page")):s=e.strings.term;var n=e.strings.plural;if(typeof n!="number"){var o=r&&e.strings.term==="locator"?r:i;o[e.strings.term]&&(t.processNumber(!1,o,e.strings.term,i.type),n=t.tmp.shadow_numbers[e.strings.term].plural,!t.tmp.shadow_numbers[e.strings.term].labelForm&&!t.tmp.shadow_numbers[e.strings.term].labelDecorations&&(e.strings.form?t.tmp.shadow_numbers[e.strings.term].labelForm=e.strings.form:t.tmp.group_context.tip.label_form&&(t.tmp.shadow_numbers[e.strings.term].labelForm=t.tmp.group_context.tip.label_form),t.tmp.shadow_numbers[e.strings.term].labelCapitalizeIfFirst=e.strings.capitalize_if_first,t.tmp.shadow_numbers[e.strings.term].labelDecorations=e.decorations.slice()),["locator","number","page"].indexOf(e.strings.term)>-1&&t.tmp.shadow_numbers[e.strings.term].label&&(s=t.tmp.shadow_numbers[e.strings.term].label),e.decorations&&t.opt.development_extensions.csl_reverse_lookup_support&&(e.decorations.reverse(),e.decorations.push(["@showid","true",e.cslid]),e.decorations.reverse()))}return l.castLabel(t,e,s,n,l.TOLERANT)};l.castLabel=function(e,t,i,r,s){var n=t.strings.form,o=t.strings.capitalize_if_first;e.tmp.group_context.tip.label_form&&(n==="static"?e.tmp.group_context.tip.label_static=!0:n=e.tmp.group_context.tip.label_form),e.tmp.group_context.tip.label_capitalize_if_first&&(o=e.tmp.group_context.tip.label_capitalize_if_first);var a=e.getTerm(i,n,r,!1,s,t.default_locale);if(o&&(a=l.Output.Formatters["capitalize-first"](e,a)),e.tmp.strip_periods)a=a.replace(/\./g,"");else for(var u=0,f=t.decorations.length;u<f;u+=1)if(t.decorations[u][0]==="@strip-periods"&&t.decorations[u][1]==="true"){a=a.replace(/\./g,"");break}return a};l.Node.name={build:function(e,t){var i;if([l.SINGLETON,l.START].indexOf(this.tokentype)>-1){var r;typeof e.tmp.root>"u"?(r=void 0,e.tmp.root="citation"):r=e.tmp.root,e.inheritOpt(this,"et-al-subsequent-min")&&e.inheritOpt(this,"et-al-subsequent-min")!==e.inheritOpt(this,"et-al-min")&&(e.opt.update_mode=l.POSITION),e.inheritOpt(this,"et-al-subsequent-use-first")&&e.inheritOpt(this,"et-al-subsequent-use-first")!==e.inheritOpt(this,"et-al-use-first")&&(e.opt.update_mode=l.POSITION),e.tmp.root=r,i=function(s){s.tmp.etal_term="et-al",s.tmp.name_delimiter=s.inheritOpt(this,"delimiter","name-delimiter",", "),s.tmp["delimiter-precedes-et-al"]=s.inheritOpt(this,"delimiter-precedes-et-al"),s.inheritOpt(this,"and")==="text"?this.and_term=s.getTerm("and","long",0):s.inheritOpt(this,"and")==="symbol"&&(s.opt.development_extensions.expect_and_symbol_form?this.and_term=s.getTerm("and","symbol",0):this.and_term="&"),s.tmp.and_term=this.and_term,l.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ",typeof s.tmp.name_delimiter=="string"&&(this.and_prefix_multiple=s.tmp.name_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),s.inheritOpt(this,"delimiter-precedes-last")==="always"?this.and_prefix_single=s.tmp.name_delimiter:s.inheritOpt(this,"delimiter-precedes-last")==="never"?this.and_prefix_multiple&&(this.and_prefix_multiple=" "):s.inheritOpt(this,"delimiter-precedes-last")==="after-inverted-name"&&(this.and_prefix_single&&(this.and_prefix_single=s.tmp.name_delimiter),this.and_prefix_multiple&&(this.and_prefix_multiple=" ")),this.and={},s.inheritOpt(this,"and")?(s.output.append(this.and_term,"empty",!0),this.and.single=s.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,s.output.append(this.and_term,"empty",!0),this.and.multiple=s.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):s.tmp.name_delimiter&&(this.and.single=new l.Blob(s.tmp.name_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new l.Blob(s.tmp.name_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),this.ellipsis={},s.inheritOpt(this,"et-al-use-last")&&(this.ellipsis_term="",this.ellipsis_prefix_single=" ",this.ellipsis_prefix_multiple=s.inheritOpt(this,"delimiter","name-delimiter",", "),this.ellipsis_suffix=" ",this.ellipsis.single=new l.Blob(this.ellipsis_term),this.ellipsis.single.strings.prefix=this.ellipsis_prefix_single,this.ellipsis.single.strings.suffix=this.ellipsis_suffix,this.ellipsis.multiple=new l.Blob(this.ellipsis_term),this.ellipsis.multiple.strings.prefix=this.ellipsis_prefix_multiple,this.ellipsis.multiple.strings.suffix=this.ellipsis_suffix),typeof s.tmp["et-al-min"]>"u"&&(s.tmp["et-al-min"]=s.inheritOpt(this,"et-al-min")),typeof s.tmp["et-al-use-first"]>"u"&&(s.tmp["et-al-use-first"]=s.inheritOpt(this,"et-al-use-first")),typeof s.tmp["et-al-use-last"]>"u"&&(s.tmp["et-al-use-last"]=s.inheritOpt(this,"et-al-use-last")),s.nameOutput.name=this},e.build.name_flag=!0,this.execs.push(i)}t.push(this)}};l.Node["name-part"]={build:function(e){e.build[this.strings.name]=this}};l.Node.names={build:function(e,t){var i;if((this.tokentype===l.START||this.tokentype===l.SINGLETON)&&(l.Util.substituteStart.call(this,e,t),e.build.substitute_level.push(1)),this.tokentype===l.SINGLETON){e.build.names_variables[e.build.names_variables.length-1].concat(this.variables);for(var r in this.variables){var s=this.variables[r],n=e.build.name_label[e.build.name_label.length-1];Object.keys(n).length&&(n[s]=n[Object.keys(n)[0]])}i=function(u){u.nameOutput.reinit(this,this.variables_real[0])},this.execs.push(i)}if(this.tokentype===l.START&&(e.build.names_flag=!0,e.build.name_flag=!1,e.build.names_level+=1,e.build.names_variables.push(this.variables),e.build.name_label.push({}),i=function(u){u.tmp.can_substitute.push(!0),u.tmp.name_node={},u.tmp.name_node.children=[],u.nameOutput.init(this)},this.execs.push(i)),this.tokentype===l.END){for(var r=0,o=3;r<o;r+=1){var a=["family","given","et-al"][r];this[a]=e.build[a],e.build.names_level===1&&(e.build[a]=void 0)}this.label=e.build.name_label[e.build.name_label.length-1],e.build.names_level+=-1,e.build.names_variables.pop(),e.build.name_label.pop(),i=function(u){u.tmp.etal_node?this.etal_style=u.tmp.etal_node:this.etal_style="empty",this.etal_term=u.getTerm(u.tmp.etal_term,"long",0),this.etal_prefix_single=" ",this.etal_prefix_multiple=u.tmp.name_delimiter,u.tmp["delimiter-precedes-et-al"]==="always"?this.etal_prefix_single=u.tmp.name_delimiter:u.tmp["delimiter-precedes-et-al"]==="never"?this.etal_prefix_multiple=" ":u.tmp["delimiter-precedes-et-al"]==="after-inverted-name"&&(this.etal_prefix_single=u.tmp.name_delimiter,this.etal_prefix_multiple=" "),this.etal_suffix="",l.STARTSWITH_ROMANESQUE_REGEXP.test(this.etal_term)||(this.etal_prefix_single===" "&&(this.etal_prefix_single=""),this.etal_prefix_multiple===" "&&(this.etal_prefix_multiple=""),this.etal_suffix===" "&&(this.etal_suffix=""));for(var f=0,c=3;f<c;f+=1){var h=["family","given"][f];u.nameOutput[h]=this[h]}u.nameOutput.with=this.with;var p="with",T="",w="";l.STARTSWITH_ROMANESQUE_REGEXP.test(p)&&(T=" ",w=" ");var m={};m.single=new l.Blob(p),m.single.strings.suffix=w,m.multiple=new l.Blob(p),m.multiple.strings.suffix=w,u.inheritOpt(u.nameOutput.name,"delimiter-precedes-last")==="always"?(m.single.strings.prefix=u.inheritOpt(this,"delimiter","names-delimiter"),m.multiple.strings.prefix=u.inheritOpt(this,"delimiter","names-delimiter")):u.inheritOpt(u.nameOutput.name,"delimiter-precedes-last")==="contextual"?(m.single.strings.prefix=T,m.multiple.strings.prefix=u.inheritOpt(this,"delimiter","names-delimiter")):u.inheritOpt(u.nameOutput.name,"delimiter-precedes-last")==="after-inverted-name"?(m.single.strings.prefix=u.inheritOpt(this,"delimiter","names-delimiter"),m.multiple.strings.prefix=T):(m.single.strings.prefix=T,m.multiple.strings.prefix=T),u.nameOutput.with=m,u.nameOutput.label=this.label,u.nameOutput.etal_style=this.etal_style,u.nameOutput.etal_term=this.etal_term,u.nameOutput.etal_prefix_single=this.etal_prefix_single,u.nameOutput.etal_prefix_multiple=this.etal_prefix_multiple,u.nameOutput.etal_suffix=this.etal_suffix,u.nameOutput.outputNames(),u.tmp["et-al-use-first"]=void 0,u.tmp["et-al-min"]=void 0,u.tmp["et-al-use-last"]=void 0},this.execs.push(i),i=function(u){u.tmp.can_substitute.pop()||u.tmp.can_substitute.replace(!1,l.LITERAL),u.tmp.can_substitute.mystack.length===1&&(u.tmp.can_block_substitute=!1)},this.execs.push(i),e.build.name_flag=!1}t.push(this),(this.tokentype===l.END||this.tokentype===l.SINGLETON)&&(e.build.substitute_level.pop(),l.Util.substituteEnd.call(this,e,t))}};l.Node.number={build:function(e,t){var i;l.Util.substituteStart.call(this,e,t),this.strings.form==="roman"?this.formatter=e.fun.romanizer:this.strings.form==="ordinal"?this.formatter=e.fun.ordinalizer:this.strings.form==="long-ordinal"&&(this.formatter=e.fun.long_ordinalizer),typeof this.successor_prefix>"u"&&(this.successor_prefix=e[e.build.area].opt.layout_delimiter),typeof this.splice_prefix>"u"&&(this.splice_prefix=e[e.build.area].opt.layout_delimiter),i=function(r,s,n){if(this.variables.length!==0){var o;if(o=this.variables[0],typeof n>"u")var n={};if(["locator","locator-extra"].indexOf(o)>-1){if(r.tmp.just_looking||!n[o])return}else if(!s[o])return;o==="collection-number"&&s.type==="legal_case"&&(r.tmp.renders_collection_number=!0);var a=this;if(r.tmp.group_context.tip.force_suppress)return!1;if(["locator","locator-extra"].indexOf(o)>-1?r.processNumber.call(r,a,n,o,s.type):(!r.tmp.group_context.tip.condition&&s[o]&&(r.tmp.just_did_number=(""+s[o]).match(/[0-9]$/)),r.processNumber.call(r,a,s,o,s.type)),this.substring){var u=s[o].slice(this.substring);r.output.append(u,a)}else l.Util.outputNumericField(r,o,s.id);["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!r.tmp.just_looking&&(r.tmp.done_vars.push(this.variables_real[0]),r.tmp.group_context.tip.done_vars.push(this.variables_real[0]))}},this.execs.push(i),t.push(this),l.Util.substituteEnd.call(this,e,t)}};l.Node.sort={build:function(e,t){if(t=e[e.build.root+"_sort"].tokens,this.tokentype===l.START){e.build.area==="citation"&&(e.opt.sort_citations=!0),e.build.area=e.build.root+"_sort",e.build.extension="_sort";var i=function(r,s){if(r.opt.has_layout_locale){for(var n=l.localeResolve(s.language,r.opt["default-locale"][0]),o=r[r.tmp.area.slice(0,-5)].opt.sort_locales,a,u=0,f=o.length;u<f&&(a=o[u][n.bare],a||(a=o[u][n.best]),!a);u+=1);a||(a=r.opt["default-locale"][0]),r.tmp.lang_sort_hold=r.opt.lang,r.opt.lang=a}};this.execs.push(i)}if(this.tokentype===l.END){e.build.area=e.build.root,e.build.extension="";var i=function(s){s.opt.has_layout_locale&&(s.opt.lang=s.tmp.lang_sort_hold,delete s.tmp.lang_sort_hold)};this.execs.push(i)}t.push(this)}};l.Node.substitute={build:function(e,t){var i;if(this.tokentype===l.START){var r=new l.Token("choose",l.START);l.Node.choose.build.call(r,e,t);var s=new l.Token("if",l.SINGLETON);i=function(){return!!(e.tmp.value.length&&!e.tmp.common_term_match_fail)},s.tests=[i],s.test=e.fun.match.any(s,e,s.tests),t.push(s),i=function(o){o.tmp.can_block_substitute=!0,o.tmp.value.length&&!o.tmp.common_term_match_fail&&o.tmp.can_substitute.replace(!1,l.LITERAL),o.tmp.common_term_match_fail=!1},this.execs.push(i),t.push(this)}if(this.tokentype===l.END){t.push(this);var n=new l.Token("choose",l.END);l.Node.choose.build.call(n,e,t)}}};l.Node.text={build:function(e,t){var i,r,s,n,o,a,u,f,c,h,p;if(this.postponed_macro){var T=l.Util.cloneToken(this);T.name="group",T.tokentype=l.START,l.Node.group.build.call(T,e,t),l.expandMacro.call(e,this,t);var w=l.Util.cloneToken(this);w.name="group",w.tokentype=l.END,this.postponed_macro==="juris-locator-label"&&(w.isJurisLocatorLabel=!0),l.Node.group.build.call(w,e,t)}else{if(l.Util.substituteStart.call(this,e,t),this.variables_real||(this.variables_real=[]),this.variables||(this.variables=[]),r="long",s=0,this.strings.form&&(r=this.strings.form),this.strings.plural&&(s=this.strings.plural),this.variables_real[0]==="citation-number"||this.variables_real[0]==="year-suffix"||this.variables_real[0]==="citation-label")this.variables_real[0]==="citation-number"?(e.build.root==="citation"&&(e.opt.update_mode=l.NUMERIC),e.build.root==="bibliography"&&(e.opt.bib_mode=l.NUMERIC),e[e.tmp.area].opt.collapse==="citation-number"&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,this.splice_prefix=e[e.build.area].opt.layout_delimiter,i=function(g,b,I){if(n=""+b.id,!g.tmp.just_looking){if(g.tmp.area.slice(-5)==="_sort"&&this.variables[0]==="citation-number"){if(g.tmp.area==="bibliography_sort"&&g.tmp.group_context.tip.done_vars.push("citation-number"),g.tmp.area==="citation_sort"&&g.bibliography_sort.tmp.citation_number_map)var N=g.bibliography_sort.tmp.citation_number_map[g.registry.registry[b.id].seq];else var N=g.registry.registry[b.id].seq;N&&(N=l.Util.padding(""+N)),g.output.append(N,this);return}I&&I["author-only"]&&g.tmp.element_trace.replace("suppress-me"),g.tmp.area!=="bibliography_sort"&&g.bibliography_sort.tmp.citation_number_map&&g.bibliography_sort.opt.citation_number_sort_direction===l.DESCENDING?N=g.bibliography_sort.tmp.citation_number_map[g.registry.registry[n].seq]:N=g.registry.registry[n].seq,g.opt.citation_number_slug?g.output.append(g.opt.citation_number_slug,this):(a=new l.NumericBlob(g,!1,N,this,b.id),g.tmp.in_cite_predecessor&&(a.suppress_splice_prefix=!0),g.output.append(a,"literal"))}},this.execs.push(i)):this.variables_real[0]==="year-suffix"?(e.opt.has_year_suffix=!0,e[e.tmp.area].opt.collapse==="year-suffix-ranged"&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,e[e.tmp.area].opt["year-suffix-delimiter"]&&(this.successor_prefix=e[e.build.area].opt["year-suffix-delimiter"]),i=function(g,b){if(g.registry.registry[b.id]&&g.registry.registry[b.id].disambig.year_suffix!==!1&&!g.tmp.just_looking){o=parseInt(g.registry.registry[b.id].disambig.year_suffix,10),g[g.tmp.area].opt.cite_group_delimiter&&(this.successor_prefix=g[g.tmp.area].opt.cite_group_delimiter),a=new l.NumericBlob(g,!1,o,this,b.id),u=new l.Util.Suffixator(l.SUFFIX_CHARS),a.setFormatter(u),g.output.append(a,"literal"),f=!1;for(var I=0,N=g.tmp.group_context.mystack.length;I<N;I++){var q=g.tmp.group_context.mystack[I];if(!q.variable_success&&(q.variable_attempt||!q.variable_attempt&&!q.term_intended)){f=!0;break}}c=g[g.tmp.area].opt["year-suffix-delimiter"],f&&c&&!g.tmp.sort_key_flag&&(g.tmp.splice_delimiter=g[g.tmp.area].opt["year-suffix-delimiter"])}},this.execs.push(i)):this.variables_real[0]==="citation-label"&&(e.build.root==="bibliography"&&(e.opt.bib_mode=l.TRIGRAPH),e.opt.has_year_suffix=!0,i=function(g,b){h=b["citation-label"],h||(h=g.getCitationLabel(b)),g.tmp.just_looking||(p="",g.registry.registry[b.id]&&g.registry.registry[b.id].disambig.year_suffix!==!1&&(o=parseInt(g.registry.registry[b.id].disambig.year_suffix,10),p=g.fun.suffixator.format(o)),h+=p),g.output.append(h,this)},this.execs.push(i));else if(this.strings.term)i=function(g,b){var I=g.opt.gender[b.type],N=this.strings.term;N=g.getTerm(N,r,s,I,l.TOLERANT,this.default_locale);var q;if(N!==""&&(g.tmp.group_context.tip.term_intended=!0),l.UPDATE_GROUP_CONTEXT_CONDITION(g,N,null,this),!g.tmp.term_predecessor&&!(g.opt.class==="in-text"&&g.tmp.area==="citation")?q=l.Output.Formatters["capitalize-first"](g,N):q=N,g.tmp.strip_periods)q=q.replace(/\./g,"");else for(var A=0,_=this.decorations.length;A<_;A+=1)if(this.decorations[A][0]==="@strip-periods"&&this.decorations[A][1]==="true"){q=q.replace(/\./g,"");break}g.output.append(q,this),g.tmp.can_block_substitute&&g.tmp.can_substitute.replace(!1,l.LITERAL)},this.execs.push(i),e.build.term=!1,e.build.form=!1,e.build.plural=!1;else if(this.variables_real.length){if(i=function(g,b){this.variables_real[0]!=="locator"&&(g.tmp.have_collapsed=!1),!g.tmp.group_context.tip.condition&&b[this.variables[0]]&&(g.tmp.just_did_number=!1);var I=b[this.variables[0]];I&&!g.tmp.group_context.tip.condition&&((""+I).slice(-1).match(/[0-9]/)?g.tmp.just_did_number=!0:g.tmp.just_did_number=!1)},this.execs.push(i),l.MULTI_FIELDS.indexOf(this.variables_real[0])>-1||this.variables_real[0].indexOf("-main")>-1||this.variables_real[0].indexOf("-sub")>-1||["language-name","language-name-original"].indexOf(this.variables_real[0])>-1){var m=this.variables[0],O=!1,d=!1,S=!1;r==="short"?this.variables_real[0].slice(-6)!=="-short"&&(d=this.variables_real[0]+"-short"):m=!1,e.build.extension?S=!0:(S=!0,O=!0),i=e.transform.getOutputFunction(this.variables,m,O,d,S)}else l.CITE_FIELDS.indexOf(this.variables_real[0])>-1?i=function(g,b,I){I&&I[this.variables[0]]&&(g.processNumber(this,I,this.variables[0],b.type),l.Util.outputNumericField(g,this.variables[0],b.id),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!g.tmp.just_looking&&g.tmp.done_vars.push(this.variables_real[0]))}:["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume"].indexOf(this.variables_real[0])>-1?i=function(g,b){g.processNumber(this,b,this.variables[0],b.type),l.Util.outputNumericField(g,this.variables[0],b.id)}:["URL","DOI"].indexOf(this.variables_real[0])>-1?i=function(g,b){var I;if(this.variables[0]&&(I=g.getVariable(b,this.variables[0],r),I))if(this.variables[0]==="URL"&&r==="short"&&(I=I.replace(/(.*\.[^\/]+)\/.*/,"$1"),I.match(/\/\/www\./)&&(I=I.replace(/https?:\/\//,""))),g.opt.development_extensions.wrap_url_and_doi)if(!this.decorations.length||this.decorations[0][0]!=="@"+this.variables[0]){var N=l.Util.cloneToken(this),q=new l.Blob(null,null,"url-wrapper");if(q.decorations.push(["@DOI","true"]),this.variables_real[0]==="DOI"){var A;this.strings.prefix&&this.strings.prefix.match(/^.*https:\/\/doi\.org\/$/)&&(I=I.replace(/^https?:\/\/doi\.org\//,""),I.match(/^https?:\/\//)?A="":A="https://doi.org/",N.strings.prefix=this.strings.prefix.slice(0,N.strings.prefix.length-16));var _=new l.Blob(A),B=new l.Blob(I);q.push(_),q.push(B),g.output.append(q,N,!1,!1,!0)}else{var B=new l.Blob(I);q.push(B),g.output.append(q,N,!1,!1,!0)}}else g.output.append(I,this,!1,!1,!0);else{if(this.decorations.length)for(var $=this.decorations.length-1;$>-1;$--)this.decorations[$][0]==="@"+this.variables[0]&&(this.decorations=this.decorations.slice(0,$).concat(this.decorations.slice($+1)));g.output.append(I,this,!1,!1,!0)}}:this.variables_real[0]==="section"?i=function(g,b){var I;I=g.getVariable(b,this.variables[0],r),I&&g.output.append(I,this)}:this.variables_real[0]==="hereinafter"?i=function(g,b){var I=g.transform.abbrevs.default.hereinafter[b.id];I&&(g.output.append(I,this),g.tmp.group_context.tip.variable_success=!0)}:i=function(g,b){var I;this.variables[0]&&(I=g.getVariable(b,this.variables[0],r),I&&(I=""+I,I=I.split("\\").join(""),g.output.append(I,this)))};this.execs.push(i)}else this.strings.value&&(i=function(g){g.tmp.group_context.tip.term_intended=!0,l.UPDATE_GROUP_CONTEXT_CONDITION(g,this.strings.value,!0,this),g.output.append(this.strings.value,this),g.tmp.can_block_substitute&&g.tmp.can_substitute.replace(!1,l.LITERAL)},this.execs.push(i));t.push(this),l.Util.substituteEnd.call(this,e,t)}}};l.Node.intext={build:function(e,t){if(this.tokentype===l.START){e.build.area="intext",e.build.root="intext",e.build.extension="";var i=function(r,s){r.tmp.area="intext",r.tmp.root="intext",r.tmp.extension=""};this.execs.push(i)}this.tokentype===l.END&&(e.intext_sort={opt:{sort_directions:e.citation_sort.opt.sort_directions}},e.intext.srt=e.citation.srt),t.push(this)}};l.Attributes={};l.Attributes["@disambiguate"]=function(e,t){if(this.tests||(this.tests=[]),t==="true"){e.opt.has_disambiguate=!0;var i=function(r){if(e.tmp.area==="bibliography"){if(e.tmp.disambiguate_count<e.registry.registry[r.id].disambig.disambiguate)return e.tmp.disambiguate_count+=1,!0}else if(e.tmp.disambiguate_maxMax+=1,e.tmp.disambig_settings.disambiguate&&e.tmp.disambiguate_count<e.tmp.disambig_settings.disambiguate)return e.tmp.disambiguate_count+=1,!0;return!1};this.tests.push(i)}else if(t==="check-ambiguity-and-backreference"){var i=function(s){return!!(e.registry.registry[s.id].disambig.disambiguate&&e.registry.registry[s.id]["citation-count"]>1)};this.tests.push(i)}};l.Attributes["@is-numeric"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(n){return function(o,a){var u=o;if(a&&["locator","locator-extra"].indexOf(n)>-1&&(u=a),!u[n])return!1;if(l.NUMERIC_VARIABLES.indexOf(n)>-1){if(e.tmp.shadow_numbers[n]||e.processNumber(!1,u,n,o.type),e.tmp.shadow_numbers[n].numeric)return!0}else if(["title","version"].indexOf(n)>-1&&u[n].slice(-1)===""+parseInt(u[n].slice(-1),10))return!0;return!1}},s=0;s<i.length;s+=1)this.tests.push(r(i[s]))};l.Attributes["@is-uncertain-date"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(o){return function(a){return!!(a[o]&&a[o].circa)}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))};l.Attributes["@locator"]=function(e,t){this.tests||(this.tests=[]);var i=t.replace("sub verbo","sub-verbo");i=i.split(/\s+/);for(var r=function(o){return function(a,u){var f;return e.processNumber(!1,u,"locator"),f=e.tmp.shadow_numbers.locator.label,!!(f&&o===f)}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))};l.Attributes["@position"]=function(e,t){this.tests||(this.tests=[]);var i;e.opt.update_mode=l.POSITION;for(var r=t.split(/\s+/),s=function(f,c){return!!(c&&l.POSITION_MAP[c.position]>=l.POSITION_MAP[l.POSITION_SUBSEQUENT]&&c["near-note"])},n=function(f,c){return!!(c&&l.POSITION_MAP[c.position]==l.POSITION_MAP[l.POSITION_SUBSEQUENT]&&!c["near-note"])},o=function(f){return function(c,h){if(e.tmp.area==="bibliography")return!1;if(h&&typeof h.position>"u"&&(h.position=0),h&&typeof h.position=="number"){if(h.position===0&&f===0)return!0;if(f>0&&l.POSITION_MAP[h.position]>=l.POSITION_MAP[f])return!0}else if(f===0)return!0;return!1}},a=0,u=r.length;a<u;a+=1){var i=r[a];i==="first"?i=l.POSITION_FIRST:i==="container-subsequent"?i=l.POSITION_CONTAINER_SUBSEQUENT:i==="subsequent"?i=l.POSITION_SUBSEQUENT:i==="ibid"?i=l.POSITION_IBID:i==="ibid-with-locator"&&(i=l.POSITION_IBID_WITH_LOCATOR),i==="near-note"?this.tests.push(s):i==="far-note"?this.tests.push(n):this.tests.push(o(i))}};l.Attributes["@type"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(a){return function(u){var f=u.type===a;return!!f}},s=[],n=0,o=i.length;n<o;n+=1)s.push(r(i[n]));this.tests.push(e.fun.match.any(this,e,s))};l.Attributes["@variable"]=function(e,t){this.tests||(this.tests=[]);var i;if(this.variables=t.split(/\s+/),this.variables_real=this.variables.slice(),this.name==="label"&&this.variables[0])this.strings.term=this.variables[0];else if(["names","date","text","number"].indexOf(this.name)>-1)i=function(o,a,u){for(var f=this.variables.length-1;f>-1;f+=-1)this.variables.pop();for(var f=0,c=this.variables_real.length;f<c;f++)o.tmp.done_vars.indexOf(this.variables_real[f])===-1&&this.variables.push(this.variables_real[f]),o.tmp.can_block_substitute&&o.tmp.done_vars.push(this.variables_real[f])},this.execs.push(i),i=function(o,a,u){for(var f=!1,c=0,h=this.variables.length;c<h;c++){var p=this.variables[c];if(["authority","committee"].indexOf(p)>-1&&typeof a[p]=="string"&&this.name==="names"){var T=!0,w=a[p].split(/\s*;\s*/),m={};if(a.multi&&a.multi._keys[p]){for(var O in a.multi._keys[p])if(m[O]=a.multi._keys[p][O].split(/\s*;\s*/),m[O].length!==w.length){T=!1;break}}T||(w=[a[p]],m=a.multi._keys[p]);for(var d=0,S=w.length;d<S;d++){var g={literal:w[d],multi:{_key:{}}};for(var O in m){var b={literal:m[O][d]};g.multi._key[O]=b}w[d]=g}a[p]=w}if(this.strings.form==="short"&&!a[p]&&(p==="title"?p="title-short":p==="container-title"&&(p="container-title-short")),p==="year-suffix"){f=!0;break}else if(l.DATE_VARIABLES.indexOf(p)>-1){if(o.opt.development_extensions.locator_date_and_revision&&p==="locator-date"){f=!0;break}if(a[p]){for(var I in a[p])if(!(this.dateparts.indexOf(I)===-1&&I!=="literal")&&a[p][I]){f=!0;break}if(f)break}}else if(p==="locator"){u&&u.locator&&(f=!0);break}else if(p==="locator-extra"){u&&u["locator-extra"]&&(f=!0);break}else if(["citation-number","citation-label"].indexOf(p)>-1){f=!0;break}else if(p==="first-reference-note-number"){u&&u["first-reference-note-number"]&&(f=!0);break}else if(p==="first-container-reference-note-number"){u&&u["first-container-reference-note-number"]&&(f=!0);break}else if(p==="hereinafter"){o.transform.abbrevs.default.hereinafter[a.id]&&o.sys.getAbbreviation&&a.id&&(f=!0);break}else{if(typeof a[p]=="object")break;if(typeof a[p]=="string"&&a[p]){f=!0;break}else if(typeof a[p]=="number"){f=!0;break}}if(f)break}if(f){for(var c=0,h=this.variables_real.length;c<h;c++){var p=this.variables_real[c];(p!=="citation-number"||o.tmp.area!=="bibliography")&&(o.tmp.cite_renders_content=!0),o.tmp.group_context.tip.variable_success=!0,o.tmp.can_substitute.value()&&o.tmp.area==="bibliography"&&typeof a[p]=="string"&&(o.tmp.name_node.top=o.output.current.value(),o.tmp.rendered_name.push(a[p]))}o.tmp.can_substitute.replace(!1,l.LITERAL)}else o.tmp.group_context.tip.variable_attempt=!0},this.execs.push(i);else if(["if","else-if","condition"].indexOf(this.name)>-1)for(var r=function(o){return function(a,u){var f=a;if(u&&["locator","locator-extra","first-reference-note-number","first-container-reference-note-number","locator-date"].indexOf(o)>-1&&(f=u),o==="hereinafter"&&e.sys.getAbbreviation&&f.id){if(e.transform.abbrevs.default.hereinafter[f.id])return!0}else if(f[o]){if(typeof f[o]=="number"||typeof f[o]=="string")return!0;if(typeof f[o]=="object"){for(var c in f[o])if(f[o][c])return!0}}return!1}},s=0,n=this.variables.length;s<n;s+=1)this.tests.push(r(this.variables[s]))};l.Attributes["@page"]=function(e,t){this.tests||(this.tests=[]);var i=t.replace("sub verbo","sub-verbo");i=i.split(/\s+/);for(var r=function(o){return function(a){var u;return e.processNumber(!1,a,"page",a.type),e.tmp.shadow_numbers.page.label?e.tmp.shadow_numbers.page.label==="sub verbo"?u="sub-verbo":u=e.tmp.shadow_numbers.page.label:u="page",e.tmp.shadow_numbers.page.values.length>0&&e.tmp.shadow_numbers.page.values[0].gotosleepability&&(e.tmp.shadow_numbers.page.values[0].labelVisibility=!1),o===u}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))};l.Attributes["@number"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(o){return function(a){var u;return e.processNumber(!1,a,"number",a.type),e.tmp.shadow_numbers.number.label?u=e.tmp.shadow_numbers.number.label:u="number",o===u}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))};l.Attributes["@jurisdiction"]=function(e,t){this.tests||(this.tests=[]);var i=t.split(/\s+/),r=function(s){return function(n){if(!n.jurisdiction)return!1;for(var o=n.jurisdiction,a=0,u=s.length;a<u;a++)if(o===s[a])return!0;return!1}};this.tests.push(r(i))};l.Attributes["@country"]=function(e,t){this.tests||(this.tests=[]);var i=t.split(/\s+/),r=function(s){return function(n){if(!n.country)return!1;for(var o=n.country,a=0,u=s.length;a<u;a++)if(o===s[a])return!0;return!1}};this.tests.push(r(i))};l.Attributes["@context"]=function(e,t){this.tests||(this.tests=[]);var i=function(){if(["bibliography","citation"].indexOf(t)>-1){var r=e.tmp.area.slice(0,t.length);return r===t}else if(t==="alternative")return!!e.tmp.abort_alternative};this.tests.push(i)};l.Attributes["@has-year-only"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(o){return function(a){var u=a[o];return!(!u||u.month||u.season)}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))};l.Attributes["@has-to-month-or-season"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(o){return function(a){var u=a[o];return!(!u||!u.month&&!u.season||u.day)}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))};l.Attributes["@has-day"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(o){return function(a){var u=a[o];return!(!u||!u.day)}},s=0,n=i.length;s<n;s+=1)this.tests.push(r(i[s]))};l.Attributes["@is-plural"]=function(e,t){this.tests||(this.tests=[]);var i=function(r){var s=r[t];if(s&&s.length){for(var n=0,o=0,a=!1,u=0,f=s.length;u<f;u+=1)e.opt.development_extensions.spoof_institutional_affiliations&&(s[u].literal||s[u].isInstitution&&s[u].family&&!s[u].given)?(o+=1,a=!1):(n+=1,a=!0);if(n>1)return!0;if(o>1)return!0;if(o&&a)return!0}return!1};this.tests.push(i)};l.Attributes["@is-multiple"]=function(e,t){this.tests||(this.tests=[]);var i=function(r){var s=""+r[t],n=s.split(/(?:,\s|\s(?:tot\sen\smet|ldz|oraz|and|bis|||och|a|do|en|et|in|ir|ja|og|sa|to|un|und|s|i|i|u|y||e|a||-|)\s||\&)/);return n.length>1};this.tests.push(i)};l.Attributes["@locale"]=function(e,t){this.tests||(this.tests=[]);var i,r,s,n,o,a=e.opt["default-locale"][0];if(this.name==="layout"){if(this.locale_raw=t,this.tokentype===l.START){e.opt.multi_layout||(e.opt.multi_layout=[]);var u=[],f=t.split(/\s+/),c={},h=l.localeResolve(f[0],a);u.push(h),h.generic?c[h.generic]=h.best:c[h.best]=h.best;for(var n=1,o=f.length;n<o;n+=1){var p=l.localeResolve(f[n],a);u.push(p),p.generic?c[p.generic]=h.best:c[p.best]=h.best}e[e.build.area].opt.sort_locales.push(c),e.opt.multi_layout.push(u)}e.opt.has_layout_locale=!0}else{s=t.split(/\s+/);var T=[];for(n=0,o=s.length;n<o;n+=1)r=s[n],i=l.localeResolve(r,a),s[n].length===2&&T.push(i.bare),e.localeConfigure(i,!0),s[n]=i;var w=s.slice(),m=function(O,d,S){return function(g){var b;b=!1;var I=!1,N;for(g.language?N=g.language:N=d,I=l.localeResolve(N,d),n=0,o=O.length;n<o;n+=1)if(I.best===O[n].best){e.tmp.condition_lang_counter_arr.push(e.tmp.condition_counter),e.tmp.condition_lang_val_arr.push(e.opt.lang),e.opt.lang=O[0].best,b=!0;break}return!b&&S.indexOf(I.bare)>-1&&(e.tmp.condition_lang_counter_arr.push(e.tmp.condition_counter),e.tmp.condition_lang_val_arr.push(e.opt.lang),e.opt.lang=O[0].best,b=!0),b}};this.tests.push(m(w,a,T))}};l.Attributes["@alternative-node-internal"]=function(e){this.tests||(this.tests=[]);var t=function(){return function(){return!e.tmp.abort_alternative}};this.tests.push(t())};l.Attributes["@locale-internal"]=function(e,t){this.tests||(this.tests=[]);var i,r,s,n,o;for(s=t.split(/\s+/),this.locale_bares=[],n=0,o=s.length;n<o;n+=1)r=s[n],i=l.localeResolve(r,e.opt["default-locale"][0]),s[n].length===2&&this.locale_bares.push(i.bare),e.localeConfigure(i),s[n]=i;this.locale_default=e.opt["default-locale"][0],this.locale=s[0].best,this.locale_list=s.slice();var a=function(f){return function(c){var h;h=!1;var p=!1;if(c.language&&(r=c.language,p=l.localeResolve(r,e.opt["default-locale"][0]),p.best===e.opt["default-locale"][0]&&(p=!1)),p){for(n=0,o=f.locale_list.length;n<o;n+=1)if(p.best===f.locale_list[n].best){e.opt.lang=f.locale,e.tmp.last_cite_locale=f.locale,e.output.openLevel("empty"),e.output.current.value().new_locale=f.locale,h=!0;break}!h&&f.locale_bares.indexOf(p.bare)>-1&&(e.opt.lang=f.locale,e.tmp.last_cite_locale=f.locale,e.output.openLevel("empty"),e.output.current.value().new_locale=f.locale,h=!0)}return h}},u=this;this.tests.push(a(u))};l.Attributes["@court-class"]=function(e,t){this.tests||(this.tests=[]);for(var i=t.split(/\s+/),r=function(o){return function(a){var u=l.GET_COURT_CLASS(e,a);return u===o}},s=0,n=i.length;s<n;s++)this.tests.push(r(i[s]))};l.Attributes["@container-multiple"]=function(e,t){this.tests||(this.tests=[]);var i=t==="true",r=function(s){return function(n){if(e.tmp.container_item_count[n.container_id]){if(e.tmp.container_item_count[n.container_id]>1)return s}else return!s;return!s}};this.tests.push(r(i))};l.Attributes["@container-subsequent"]=function(e,t){this.tests||(this.tests=[]);var i=t==="true",r=function(s){return function(n){return e.tmp.container_item_pos[n.container_id]>1?s:!s}};this.tests.push(r(i))};l.Attributes["@has-subunit"]=function(e,t){this.tests||(this.tests=[]);var i=function(r){return function(s){var n=0;for(var o in s[r]){var a=s[r][o];if(!a.given){var u=a.literal?a.literal:a.family,f=u.split("|").length;(n===0||f<n)&&(n=f)}}return n>1}};this.tests.push(i(t))};l.Attributes["@cite-form"]=function(e,t){this.tests||(this.tests=[]);var i=function(r){return function(s){return s["cite-form"]===r}};this.tests.push(i(t))};l.Attributes["@disable-duplicate-year-suppression"]=function(e,t){e.opt.disable_duplicate_year_suppression=t.split(/\s+/)};l.Attributes["@consolidate-containers"]=function(e,t){l.Attributes["@track-containers"](e,t);var i=t.split(/\s+/);e.bibliography.opt.consolidate_containers=i};l.Attributes["@track-containers"]=function(e,t){var i=t.split(/\s+/);e.bibliography.opt.track_container_items||(e.bibliography.opt.track_container_items=[]),e.bibliography.opt.consolidate_containers||(e.bibliography.opt.consolidate_containers=[]),e.bibliography.opt.track_container_items=e.bibliography.opt.track_container_items.concat(i)};l.Attributes["@parallel-first"]=function(e,t){e.opt.parallel.enable=!0;var i=t.split(/\s+/);e.opt.track_repeat||(e.opt.track_repeat={}),this.parallel_first={};for(var r in i){var s=i[r];this.parallel_first[s]=!0,e.opt.track_repeat[s]=!0}};l.Attributes["@parallel-last"]=function(e,t){e.opt.parallel.enable=!0;var i=t.split(/\s+/);e.opt.track_repeat||(e.opt.track_repeat={}),this.parallel_last={};for(var r in i){var s=i[r];this.parallel_last[s]=!0,e.opt.track_repeat[s]=!0}};l.Attributes["@parallel-last-to-first"]=function(e,t){e.opt.parallel.enable=!0;var i=t.split(/\s+/);this.parallel_last_to_first={};for(var r=0,s=i.length;r<s;r++)this.parallel_last_to_first[i[r]]=!0};l.Attributes["@parallel-delimiter-override"]=function(e,t){e.opt.parallel.enable=!0,this.strings.set_parallel_delimiter_override=t};l.Attributes["@parallel-delimiter-override-on-suppress"]=function(e,t){e.opt.parallel.enable=!0,this.strings.set_parallel_delimiter_override_on_suppress=t};l.Attributes["@no-repeat"]=function(e,t){e.opt.parallel.enable=!0;var i=t.split(/\s+/);e.opt.track_repeat||(e.opt.track_repeat={}),this.non_parallel={};for(var r in i){var s=i[r];this.non_parallel[s]=!0,e.opt.track_repeat[s]=!0}};l.Attributes["@require"]=function(e,t){e.opt.use_context_condition=!0,this.strings.require=t};l.Attributes["@reject"]=function(e,t){e.opt.use_context_condition=!0,this.strings.reject=t};l.Attributes["@require-comma-on-symbol"]=function(e,t){e.opt.require_comma_on_symbol=t};l.Attributes["@gender"]=function(e,t){this.gender=t};l.Attributes["@cslid"]=function(e,t){this.cslid=parseInt(t,10)};l.Attributes["@capitalize-if-first"]=function(e,t){this.strings.capitalize_if_first_override=t};l.Attributes["@label-capitalize-if-first"]=function(e,t){this.strings.label_capitalize_if_first_override=t};l.Attributes["@label-form"]=function(e,t){this.strings.label_form_override=t};l.Attributes["@part-separator"]=function(e,t){this.strings["part-separator"]=t};l.Attributes["@leading-noise-words"]=function(e,t){this["leading-noise-words"]=t};l.Attributes["@name-never-short"]=function(e,t){this["name-never-short"]=t};l.Attributes["@class"]=function(e,t){e.opt.class=t};l.Attributes["@version"]=function(e,t){e.opt.version=t};l.Attributes["@value"]=function(e,t){this.strings.value=t};l.Attributes["@name"]=function(e,t){this.strings.name=t};l.Attributes["@form"]=function(e,t){this.strings.form=t};l.Attributes["@date-parts"]=function(e,t){this.strings["date-parts"]=t};l.Attributes["@range-delimiter"]=function(e,t){this.strings["range-delimiter"]=t};l.Attributes["@macro"]=function(e,t){this.postponed_macro=t};l.Attributes["@term"]=function(e,t){t==="sub verbo"?this.strings.term="sub-verbo":this.strings.term=t};l.Attributes["@xmlns"]=function(){};l.Attributes["@lang"]=function(e,t){t&&(e.build.lang=t)};l.Attributes["@lingo"]=function(){};l.Attributes["@macro-has-date"]=function(){this["macro-has-date"]=!0};l.Attributes["@suffix"]=function(e,t){this.strings.suffix=t};l.Attributes["@prefix"]=function(e,t){this.strings.prefix=t};l.Attributes["@delimiter"]=function(e,t){this.strings.delimiter=t};l.Attributes["@match"]=function(e,t){this.match=t};l.Attributes["@names-min"]=function(e,t){var i=parseInt(t,10);e[e.build.area].opt.max_number_of_names<i&&(e[e.build.area].opt.max_number_of_names=i),this.strings["et-al-min"]=i};l.Attributes["@names-use-first"]=function(e,t){this.strings["et-al-use-first"]=parseInt(t,10)};l.Attributes["@names-use-last"]=function(e,t){t==="true"?this.strings["et-al-use-last"]=!0:this.strings["et-al-use-last"]=!1};l.Attributes["@sort"]=function(e,t){t==="descending"&&(this.strings.sort_direction=l.DESCENDING)};l.Attributes["@plural"]=function(e,t){t==="always"||t==="true"?this.strings.plural=1:t==="never"||t==="false"?this.strings.plural=0:t==="contextual"&&(this.strings.plural=!1)};l.Attributes["@has-publisher-and-publisher-place"]=function(){this.strings["has-publisher-and-publisher-place"]=!0};l.Attributes["@publisher-delimiter-precedes-last"]=function(e,t){this.strings["publisher-delimiter-precedes-last"]=t};l.Attributes["@publisher-delimiter"]=function(e,t){this.strings["publisher-delimiter"]=t};l.Attributes["@publisher-and"]=function(e,t){this.strings["publisher-and"]=t};l.Attributes["@givenname-disambiguation-rule"]=function(e,t){l.GIVENNAME_DISAMBIGUATION_RULES.indexOf(t)>-1&&(e.citation.opt["givenname-disambiguation-rule"]=t)};l.Attributes["@collapse"]=function(e,t){t&&(e[this.name].opt.collapse=t)};l.Attributes["@cite-group-delimiter"]=function(e,t){t&&(e[e.tmp.area].opt.cite_group_delimiter=t)};l.Attributes["@names-delimiter"]=function(e,t){e.setOpt(this,"names-delimiter",t)};l.Attributes["@name-form"]=function(e,t){e.setOpt(this,"name-form",t)};l.Attributes["@subgroup-delimiter"]=function(e,t){this.strings["subgroup-delimiter"]=t};l.Attributes["@subgroup-delimiter-precedes-last"]=function(e,t){this.strings["subgroup-delimiter-precedes-last"]=t};l.Attributes["@name-delimiter"]=function(e,t){e.setOpt(this,"name-delimiter",t)};l.Attributes["@et-al-min"]=function(e,t){var i=parseInt(t,10);e[e.build.area].opt.max_number_of_names<i&&(e[e.build.area].opt.max_number_of_names=i),e.setOpt(this,"et-al-min",i)};l.Attributes["@et-al-use-first"]=function(e,t){e.setOpt(this,"et-al-use-first",parseInt(t,10))};l.Attributes["@et-al-use-last"]=function(e,t){t==="true"?e.setOpt(this,"et-al-use-last",!0):e.setOpt(this,"et-al-use-last",!1)};l.Attributes["@et-al-subsequent-min"]=function(e,t){var i=parseInt(t,10);e[e.build.area].opt.max_number_of_names<i&&(e[e.build.area].opt.max_number_of_names=i),e.setOpt(this,"et-al-subsequent-min",i)};l.Attributes["@et-al-subsequent-use-first"]=function(e,t){e.setOpt(this,"et-al-subsequent-use-first",parseInt(t,10))};l.Attributes["@suppress-min"]=function(e,t){this.strings["suppress-min"]=parseInt(t,10)};l.Attributes["@suppress-max"]=function(e,t){this.strings["suppress-max"]=parseInt(t,10)};l.Attributes["@and"]=function(e,t){e.setOpt(this,"and",t)};l.Attributes["@delimiter-precedes-last"]=function(e,t){e.setOpt(this,"delimiter-precedes-last",t)};l.Attributes["@delimiter-precedes-et-al"]=function(e,t){e.setOpt(this,"delimiter-precedes-et-al",t)};l.Attributes["@initialize-with"]=function(e,t){e.setOpt(this,"initialize-with",t)};l.Attributes["@initialize"]=function(e,t){t==="false"&&e.setOpt(this,"initialize",!1)};l.Attributes["@name-as-reverse-order"]=function(e,t){this["name-as-reverse-order"]=t};l.Attributes["@name-as-sort-order"]=function(e,t){this.name==="style-options"?this["name-as-sort-order"]=t:e.setOpt(this,"name-as-sort-order",t)};l.Attributes["@sort-separator"]=function(e,t){e.setOpt(this,"sort-separator",t)};l.Attributes["@require-match"]=function(e,t){t==="true"&&(this.requireMatch=!0)};l.Attributes["@exclude-types"]=function(e,t){e.bibliography.opt.exclude_types=t.split(/\s+/)};l.Attributes["@exclude-with-fields"]=function(e,t){e.bibliography.opt.exclude_with_fields=t.split(/\s+/)};l.Attributes["@year-suffix-delimiter"]=function(e,t){e[this.name].opt["year-suffix-delimiter"]=t};l.Attributes["@after-collapse-delimiter"]=function(e,t){e[this.name].opt["after-collapse-delimiter"]=t};l.Attributes["@subsequent-author-substitute"]=function(e,t){e[this.name].opt["subsequent-author-substitute"]=t};l.Attributes["@subsequent-author-substitute-rule"]=function(e,t){e[this.name].opt["subsequent-author-substitute-rule"]=t};l.Attributes["@disambiguate-add-names"]=function(e,t){t==="true"&&(e.opt["disambiguate-add-names"]=!0)};l.Attributes["@disambiguate-add-givenname"]=function(e,t){t==="true"&&(e.opt["disambiguate-add-givenname"]=!0)};l.Attributes["@disambiguate-add-year-suffix"]=function(e,t){t==="true"&&e.opt.xclass!=="numeric"&&(e.opt["disambiguate-add-year-suffix"]=!0)};l.Attributes["@second-field-align"]=function(e,t){(t==="flush"||t==="margin")&&(e[this.name].opt["second-field-align"]=t)};l.Attributes["@hanging-indent"]=function(e,t){t==="true"&&(e.opt.development_extensions.hanging_indent_legacy_number?e[this.name].opt.hangingindent=2:e[this.name].opt.hangingindent=!0)};l.Attributes["@line-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["line-spacing"]=parseFloat(t,10))};l.Attributes["@entry-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["entry-spacing"]=parseFloat(t,10))};l.Attributes["@near-note-distance"]=function(e,t){e[this.name].opt["near-note-distance"]=parseInt(t,10)};l.Attributes["@substring"]=function(e,t){this.substring=parseInt(t,10)};l.Attributes["@text-case"]=function(e,t){var i=function(r,s){t==="normal"?this.text_case_normal=!0:(this.strings["text-case"]=t,t==="title"&&s.jurisdiction&&(this.strings["text-case"]="passthrough"))};this.execs.push(i)};l.Attributes["@page-range-format"]=function(e,t){e.opt["page-range-format"]=t};l.Attributes["@year-range-format"]=function(e,t){e.opt["year-range-format"]=t};l.Attributes["@default-locale"]=function(e,t){if(this.name==="style"){var i,r,s,o,n,o=t.match(/-x-(sort|translit|translat)-/g);if(o)for(s=0,r=o.length;s<r;s+=1)o[s]=o[s].replace(/^-x-/,"").replace(/-$/,"");for(i=t.split(/-x-(?:sort|translit|translat)-/),n=[i[0]],s=1,r=i.length;s<r;s+=1)n.push(o[s-1]),n.push(i[s]);for(i=n.slice(),r=i.length,s=1;s<r;s+=2)e.opt["locale-"+i[s]].push(i[s+1].replace(/^\s*/g,"").replace(/\s*$/g,""));i.length?e.opt["default-locale"]=i.slice(0,1):e.opt["default-locale"]=["en"]}else t==="true"&&(this.default_locale=!0)};l.Attributes["@default-locale-sort"]=function(e,t){e.opt["default-locale-sort"]=t};l.Attributes["@demote-non-dropping-particle"]=function(e,t){e.opt["demote-non-dropping-particle"]=t};l.Attributes["@initialize-with-hyphen"]=function(e,t){t==="false"&&(e.opt["initialize-with-hyphen"]=!1)};l.Attributes["@institution-parts"]=function(e,t){this.strings["institution-parts"]=t};l.Attributes["@if-short"]=function(e,t){t==="true"&&(this.strings["if-short"]=!0)};l.Attributes["@substitute-use-first"]=function(e,t){this.strings["substitute-use-first"]=parseInt(t,10)};l.Attributes["@use-first"]=function(e,t){this.strings["use-first"]=parseInt(t,10)};l.Attributes["@use-last"]=function(e,t){this.strings["use-last"]=parseInt(t,10)};l.Attributes["@stop-first"]=function(e,t){this.strings["stop-first"]=parseInt(t,10)};l.Attributes["@stop-last"]=function(e,t){this.strings["stop-last"]=parseInt(t,10)*-1};l.Attributes["@reverse-order"]=function(e,t){t==="true"&&(this.strings["reverse-order"]=!0)};l.Attributes["@display"]=function(e,t){e.bibliography.tokens.length===2&&(e.opt.using_display=!0),this.strings.cls=t};l.Stack=function(e,t){this.mystack=[],(t||e)&&this.mystack.push(e),this.tip=this.mystack[0]};l.Stack.prototype.push=function(e,t){t||e?this.mystack.push(e):this.mystack.push(""),this.tip=this.mystack[this.mystack.length-1]};l.Stack.prototype.clear=function(){this.mystack=[],this.tip={}};l.Stack.prototype.replace=function(e,t){this.mystack.length===0&&l.error("Internal CSL processor error: attempt to replace nonexistent stack item with "+e),t||e?this.mystack[this.mystack.length-1]=e:this.mystack[this.mystack.length-1]="",this.tip=this.mystack[this.mystack.length-1]};l.Stack.prototype.pop=function(){var e=this.mystack.pop();return this.mystack.length?this.tip=this.mystack[this.mystack.length-1]:this.tip={},e};l.Stack.prototype.value=function(){return this.mystack.slice(-1)[0]};l.Stack.prototype.length=function(){return this.mystack.length};l.Parallel=function(e){this.state=e};l.Parallel.prototype.StartCitation=function(e,t){if(this.state.tmp.suppress_repeats=[],!(e.length<2)){for(var i=0,r=!1,s=[],n=0,o=e.length-1;n<o;n++){var a=e[n][0],u=e[n+1][0],f=!1,c={};if(e[n][0].seeAlso&&e[n][0].seeAlso.length>0&&!r){f=!0,r=[e[n][0].id].concat(e[n][0].seeAlso);var h=r.slice(),p=e.slice(n);p[0][1].parallel="first";for(var T=0,w=p.length;T<w;T++){var m=p[T][0].id,O=h.indexOf(m);if(i=!1,O===-1?i=n+T-1:n+T===e.length-1&&(i=n+T),i){s.push([n,i]);break}else h=h.slice(0,O).concat(h.slice(O+1))}}n>0&&f&&(this.state.tmp.suppress_repeats[n-1].START=!0,f=!1);for(var d in this.state.opt.track_repeat)if(!a[d]||!u[d])c[d]=!1;else if(typeof u[d]=="string"||typeof u[d]=="number"){if(d==="title"&&a["title-short"]&&u["title-short"])var S=a["title-short"],g=u["title-short"];else var S=a[d],g=u[d];S==g?c[d]=!0:c[d]=!1}else if(typeof a[d].length>"u"){c[d]=!1;var b=a[d].year,I=u[d].year;b&&I&&b==I&&(c[d]=!0)}else{var S=JSON.stringify(a[d]),g=JSON.stringify(u[d]);S===g?c[d]=!0:c[d]=!1}r||(c.ORPHAN=!0),i===n&&(c.END=!0,r=!1),this.state.tmp.suppress_repeats.push(c)}for(var T=0,w=s.length;T<w;T++){var N=e[s[T][0]][0].id;this.state.registry.registry[N].master=!0,this.state.registry.registry[N].siblings=[];for(var q=s[T][0],A=s[T][1],_=q;_<A;_++){this.state.tmp.suppress_repeats[_].SIBLING=!0;var B=e[_+1][0].id;e[_+1][1].parallel="other",this.state.registry.registry[N].siblings.push(B)}}}};l.Parallel.prototype.checkRepeats=function(e){var t=this.state.tmp.cite_index;if(this.state.tmp.suppress_repeats){if(e.parallel_first&&Object.keys(e.parallel_first).length>0){var i=[{}].concat(this.state.tmp.suppress_repeats),r=!0;for(var s in e.parallel_first)(!i[t][s]||i[t].START)&&(r=!1);return r}if(e.parallel_last&&Object.keys(e.parallel_last).length>0){var i=this.state.tmp.suppress_repeats.concat([{}]),r=Object.keys(e.parallel_last).length>0;for(var s in e.parallel_last)(!i[t][s]||i[t].END)&&(r=!1);return r}if(e.non_parallel&&Object.keys(e.non_parallel).length>0){var i=[{}].concat(this.state.tmp.suppress_repeats),r=!0;for(var s in e.non_parallel)i[t][s]||(r=!1);return r}}return!1};l.Util={};l.Util.Match=function(){this.any=function(e,t,i){return function(r,s){for(var n=0,o=i.length;n<o;n+=1){var a=i[n](r,s);if(a)return!0}return!1}},this.none=function(e,t,i){return function(r,s){for(var n=0,o=i.length;n<o;n+=1){var a=i[n](r,s);if(a)return!1}return!0}},this.all=function(e,t,i){return function(r,s){for(var n=0,o=i.length;n<o;n+=1){var a=i[n](r,s);if(!a)return!1}return!0}},this[void 0]=this.all,this.nand=function(e,t,i){return function(r,s){for(var n=0,o=i.length;n<o;n+=1){var a=i[n](r,s);if(!a)return!0}return!1}}};l.Transform=function(e){this.abbrevs={},this.abbrevs.default=new e.sys.AbbreviationSegments;function t(c,h,p){var T="";return e.sys.getHumanForm&&(c==="country"?(T=e.sys.getHumanForm(h.toLowerCase(),!1,!0),T=T.split("|")[0]):c==="jurisdiction"&&(T=e.sys.getHumanForm(h.toLowerCase(),!1,!0),p?T="":T=T.split("|").slice(1).join(", "))),T}function i(c,h,p,T,w,m,O){var d="",S=l.FIELD_CATEGORY_REMAP[m],g;if(!S)return w;var b=m,I=w;c.sys.normalizeAbbrevsKey&&(I=c.sys.normalizeAbbrevsKey(m,w));var N=!1;if(b==="jurisdiction"&&I&&(N=I.indexOf(":")===-1),["jurisdiction","country"].indexOf(m)>-1&&w===w.toLowerCase()&&(I=w.toUpperCase()),c.sys.getAbbreviation){["jurisdiction","country","language-name","language-name-original"].indexOf(b)>-1?g="default":p.jurisdiction?g=p.jurisdiction:g="default";var q=c.transform.loadAbbreviation(g,S,I,p.language);if(c.transform.abbrevs[q][S]&&I){var A=c.transform.abbrevs[q][S][I];h.strings.form==="short"&&A?N?d="":d=A:d=t(b,I,N)}}return!d&&(!c.opt.development_extensions.require_explicit_legal_case_title_short||p.type!=="legal_case")&&T&&p[T]&&O&&(d=p[T]),!d&&!c.sys.getAbbreviation&&c.sys.getHumanForm&&(d=t(b,I,N)),!d&&!N&&(!c.sys.getHumanForm||b!=="jurisdiction")&&(d=w),c.opt.development_extensions.force_title_abbrev_fallback&&b==="title"&&d===w&&p["title-short"]&&(d=p["title-short"]),d}function r(c,h){var p=e.opt["default-locale"][0].slice(0,2),T;if(e.opt.development_extensions.strict_text_case_locales?T=new RegExp("^([a-zA-Z]{2})(?:$|-.*| .*)"):T=new RegExp("^([a-zA-Z]{2})(?:$|-.*|.*)"),c.language){var w=(""+c.language).match(T);w?p=w[1]:p="tlh"}return c.multi&&c.multi&&c.multi.main&&c.multi.main[h]&&(p=c.multi.main[h]),(!e.opt.development_extensions.strict_text_case_locales||e.opt.development_extensions.normalize_lang_keys_to_lowercase)&&(p=p.toLowerCase()),p}function s(c,h,p,T,w,m){var O,d,S,g,b=w,I=!1;if(!c[h])return{name:"",usedOrig:w,token:l.Util.cloneToken(this)};var N=!1;l.VARIABLES_WITH_SHORT_FORM.indexOf(h)>-1&&m&&(h=h+"-short",N=!0);var q=!1,A=null,_=[];h.slice(-6)==="-short"?(_.push(h),_.push(h.slice(0,-6))):_.push(h);for(var B=0,$=_.length;B<$;B++){var X=!1,h=_[B];S={name:"",usedOrig:w,locale:r(c,h)},g=e.opt[p]?e.opt[p].slice():[];var J=!1;if(p==="locale-orig"?(w||(S.name=c[h],S.usedOrig=!1),J=!0,I=!0):T&&(typeof g>"u"||g.length===0)&&(S.name=c[h],S.usedOrig=!0,J=!0,I=!0),!J){for(var Y=0,ne=g.length;Y<ne;Y+=1)if(O=g[Y],d=O.split(/[\-_]/)[0],O&&c.multi&&c.multi._keys[h]&&c.multi._keys[h][O]){S.name=c.multi._keys[h][O],S.locale=O,J=!0,X=!0,I=!1;break}else if(d&&c.multi&&c.multi._keys[h]&&c.multi._keys[h][d]){S.name=c.multi._keys[h][d],S.locale=d,J=!0,X=!0,I=!1;break}!S.name&&T&&(S={name:c[h],usedOrig:!0,locale:r(c,h)},I=!0)}if(S.token=l.Util.cloneToken(this),B===0?(X&&(S.found_variant_ok=!0),A=S,!N&&(typeof g>"u"||g.length===0)&&(q=!0),X&&(q=!0)):!N&&!X&&A?(S=A,h=_[0]):X&&(S.found_variant_ok=!0),["title","container-title"].indexOf(h)>-1&&!b&&(!S.token.strings["text-case"]||S.token.strings["text-case"]==="sentence"||S.token.strings["text-case"]==="normal")){e.opt.lang;var re;I?re=!1:re=S.locale;var ee=h.slice(0,-5),K=S.token.strings["text-case"]==="sentence";S.name=l.titlecaseSentenceOrNormal(e,c,ee,re,K),delete S.token.strings["text-case"]}if(q)break}return S}this.getTextSubField=s;function n(c,h,p,T){c||(c="default");var w=c.split(":")[0],m=l.getAbbrevsDomain(e,w,T);return m&&(c+="@"+m),p?(e.sys.getAbbreviation&&(c=e.sys.getAbbreviation(e.opt.styleID,e.transform.abbrevs,c,h,p),c||(c="default",m&&(c+="@"+m))),c):(e.transform.abbrevs[c]||(e.transform.abbrevs[c]=new e.sys.AbbreviationSegments),e.transform.abbrevs[c][h]||(e.transform.abbrevs[c][h]={}),c)}this.loadAbbreviation=n;function o(c,h,p,T){var w=c.variables[0];if(e.publisherOutput&&p){if(["publisher","publisher-place"].indexOf(w)===-1)return!1;e.publisherOutput[w+"-token"]=c,e.publisherOutput.varlist.push(w);var m=p.split(/;\s*/);m.length===e.publisherOutput[w+"-list"].length&&(e.publisherOutput[w+"-list"]=m);for(var O=0,d=m.length;O<d;O+=1)m[O]=i(e,c,h,!1,m[O],T,!0);return e.tmp[w+"-token"]=c,!0}return!1}function a(c,h){var p=h.match(/^#([0-9]+).*>>>/);p&&p[1]&&(c["cite-form"]=p[1])}function u(c,h){var p=h.match(/^(?:#[0-9]+)*(?:!((?:[-_a-z]+(?:(?:.*)))(?:,(?:[-_a-z]+(?:(?:.*))))*))*>>>/);if(p&&(h=h.slice(p[0].length),p[1]))for(var T=p[1].split(","),w=0,m=T.length;w<m;w+=1){var O=T[w],d=O.match(/^([-_a-z]+)(?:\:(.*))*$/),S=d[1],g=e.tmp.abbrev_trimmer;d[2]?g&&c&&(g[c]||(g[c]={}),g[c][S]=d[2]):e.tmp.done_vars.indexOf(S)===-1&&(g&&c&&(g.QUASHES[c]||(g.QUASHES[c]={}),g.QUASHES[c][S]=!0),e.tmp.done_vars.push(S))}return h}this.quashCheck=u;function f(c,h,p,T){var w,m=l.LangPrefsMap[c[0]];return m?w=e.opt["cite-lang-prefs"][m]:w=!1,function(O,d,S){var g,b,I,N,q,A,ne;if(!c[0]||!d[c[0]]&&!d[T]||!O.tmp.just_looking&&S&&S["suppress-author"]&&!O.tmp.probably_rendered_something&&O.tmp.can_substitute.length()>1)return null;var _={primary:!1,secondary:!1,tertiary:!1};if(O.tmp.area.slice(-5)==="_sort")_.primary="locale-sort";else if(w&&w.length===1&&w[0]==="locale-orig")_.primary="locale-orig",w=!1;else if(w&&!O.tmp.multi_layout)for(var B=["primary","secondary","tertiary"],$=0,X=B.length;$<X&&!(w.length-1<$);$+=1)w[$]&&(_[B[$]]="locale-"+w[$]);else _.primary="locale-orig";if((c[0]==="title-short"||O.tmp.area!=="bibliography"&&!(O.tmp.area==="citation"&&O.opt.xclass==="note"&&S&&!S.position))&&(_.secondary=!1,_.tertiary=!1),O.tmp.multi_layout&&(_.secondary=!1,_.tertiary=!1),O.tmp["publisher-list"])return c[0]==="publisher"?O.tmp["publisher-token"]=this:c[0]==="publisher-place"&&(O.tmp["publisher-place-token"]=this),null;var J=O.tmp.lang_array.slice(),Y=s.call(this,d,c[0],_.primary,!0,null,h);g=Y.name,b=Y.locale;var ne=Y.token,re=Y.usedOrig;if(h&&!Y.found_variant_ok&&(g=i(O,ne,d,T,g,h,!0),g&&(a(d,g),O.tmp.just_looking||(g=u(d.jurisdiction,g)))),o(this,d,g,h))return O.tmp.lang_array=J,null;I=!1,q=!1;var ee,K;_.secondary&&(Y=s.call(this,d,c[0],_.secondary,!1,Y.usedOrig,null,h),I=Y.name,N=Y.locale,ee=Y.token,h&&!Y.found_variant_ok&&I&&(I=i(O,ee,d,!1,I,h,!0))),_.tertiary&&(Y=s.call(this,d,c[0],_.tertiary,!1,Y.usedOrig,null,h),q=Y.name,A=Y.locale,K=Y.token,h&&!Y.found_variant_ok&&q&&(q=i(O,K,d,!1,q,h,!0)));var pe;if(_.primary==="locale-translit"&&(pe=O.opt.citeAffixes[m][_.primary].prefix),pe==="<i>"&&c[0]==="title"&&!re){for(var ue=!1,$=0,X=ne.decorations.length;$<X;$+=1)ne.decorations[$][0]==="@font-style"&&ne.decorations[$][1]==="italic"&&(ue=!0);ue||ne.decorations.push(["@font-style","italic"])}if(b!=="en"&&ne.strings["text-case"]==="title"&&(ne.strings["text-case"]="passthrough"),c[0]==="title"&&(g=l.demoteNoiseWords(O,g,this["leading-noise-words"])),I||q){if(O.output.openLevel("empty"),ne.strings.suffix=ne.strings.suffix.replace(/[ .,]+$/,""),b&&(O.tmp.lang_array=[b].concat(J)),l.UPDATE_GROUP_CONTEXT_CONDITION(O,null,null,ne,ne.strings.prefix+g),O.output.append(g,ne),O.tmp.probably_rendered_something=!0,g===I&&(I=!1),I){ee.strings.prefix=O.opt.citeAffixes[m][_.secondary].prefix,ee.strings.suffix=O.opt.citeAffixes[m][_.secondary].suffix,ee.strings.prefix||(ee.strings.prefix=" ");for(var $=ee.decorations.length-1;$>-1;$+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(ee.decorations[$].join("/"))>-1&&(ee.decorations=ee.decorations.slice(0,$).concat(ee.decorations.slice($+1)));N!=="en"&&ee.strings["text-case"]==="title"&&(ee.strings["text-case"]="passthrough"),N&&(O.tmp.lang_array=[N].concat(J));var z=new l.Token;z.decorations.push(["@font-style","normal"]),z.decorations.push(["@font-weight","normal"]),O.output.openLevel(z),O.output.append(I,ee),O.output.closeLevel(),O.output.current.value(),O.output.current.value().blobs.length-1}if(g===q&&(q=!1),q){K.strings.prefix=O.opt.citeAffixes[m][_.tertiary].prefix,K.strings.suffix=O.opt.citeAffixes[m][_.tertiary].suffix,K.strings.prefix||(K.strings.prefix=" ");for(var $=K.decorations.length-1;$>-1;$+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(K.decorations[$].join("/"))>-1&&(K.decorations=K.decorations.slice(0,$).concat(K.decorations.slice($+1)));A!=="en"&&K.strings["text-case"]==="title"&&(K.strings["text-case"]="passthrough"),A&&(O.tmp.lang_array=[A].concat(J));var te=new l.Token;te.decorations.push(["@font-style","normal"]),te.decorations.push(["@font-weight","normal"]),O.output.openLevel(te),O.output.append(q,K),O.output.closeLevel(),O.output.current.value(),O.output.current.value().blobs.length-1}O.output.closeLevel()}else b&&(O.tmp.lang_array=[b].concat(J)),l.UPDATE_GROUP_CONTEXT_CONDITION(O,null,null,ne,ne.strings.prefix+g),O.output.append(g,ne),O.tmp.probably_rendered_something=!0;return O.tmp.lang_array=J,O.tmp.can_block_substitute&&O.tmp.name_node.children.push(O.output.current.value()),null}}this.getOutputFunction=f};l.Token=function(e,t,i){this.name=e,this.strings={},this.strings.delimiter=void 0,this.strings.prefix="",this.strings.suffix="",this.decorations=[],this.variables=[],this.execs=[],this.tokentype=t};l.Util.cloneToken=function(e){var t,i,r,s;if(typeof e=="string")return e;t=new l.Token(e.name,e.tokentype);for(var i in e.strings)e.strings.hasOwnProperty(i)&&(t.strings[i]=e.strings[i]);if(e.decorations)for(t.decorations=[],r=0,s=e.decorations.length;r<s;r+=1)t.decorations.push(e.decorations[r].slice());return e.variables&&(t.variables=e.variables.slice()),e.execs&&(t.execs=e.execs.slice(),e.tests&&(t.tests=e.tests.slice())),t};l.AmbigConfig=function(){this.maxvals=[],this.minval=1,this.names=[],this.givens=[],this.year_suffix=!1,this.disambiguate=0};l.Blob=function(e,t,i){var r,s,n;if(this.levelname=i,t){this.strings={prefix:"",suffix:""};for(var n in t.strings)t.strings.hasOwnProperty(n)&&(this.strings[n]=t.strings[n]);for(this.decorations=[],t.decorations===void 0?r=0:r=t.decorations.length,s=0;s<r;s+=1)this.decorations.push(t.decorations[s].slice())}else this.strings={},this.strings.prefix="",this.strings.suffix="",this.strings.delimiter="",this.decorations=[];typeof e=="string"?this.blobs=e:e?this.blobs=[e]:this.blobs=[],this.alldecor=[this.decorations]};l.Blob.prototype.push=function(e){typeof this.blobs=="string"?l.error("Attempt to push blob onto string object"):e!==!1&&(e.alldecor=e.alldecor.concat(this.alldecor),this.blobs.push(e))};l.NumericBlob=function(e,t,i,r,s){if(this.id=s,this.alldecor=[],this.num=i,this.particle=t,this.blobs=i.toString(),this.status=l.START,this.strings={},r){if(r.strings["text-case"]){var n=r.strings["text-case"];this.particle=l.Output.Formatters[n](e,this.particle),this.blobs=l.Output.Formatters[n](e,this.blobs)}this.gender=r.gender,this.decorations=r.decorations,this.strings.prefix=r.strings.prefix,this.strings.suffix=r.strings.suffix,this.strings["text-case"]=r.strings["text-case"],this.successor_prefix=r.successor_prefix,this.range_prefix=r.range_prefix,this.splice_prefix=r.splice_prefix,this.formatter=r.formatter,this.formatter||(this.formatter=new l.Output.DefaultFormatter),this.formatter&&(this.type=this.formatter.format(1))}else this.decorations=[],this.strings.prefix="",this.strings.suffix="",this.successor_prefix="",this.range_prefix="",this.splice_prefix="",this.formatter=new l.Output.DefaultFormatter};l.NumericBlob.prototype.setFormatter=function(e){this.formatter=e,this.type=this.formatter.format(1)};l.Output.DefaultFormatter=function(){};l.Output.DefaultFormatter.prototype.format=function(e){return e.toString()};l.NumericBlob.prototype.checkNext=function(e,t){t?(this.status=l.START,typeof e=="object"&&(e.num===this.num+1?e.status=l.SUCCESSOR:e.status=l.SEEN)):!e||!e.num||this.type!==e.type||e.num!==this.num+1?(this.status===l.SUCCESSOR_OF_SUCCESSOR&&(this.status=l.END),typeof e=="object"&&(e.status=l.SEEN)):this.status===l.START||this.status===l.SEEN?e.status=l.SUCCESSOR:(this.status===l.SUCCESSOR||this.status===l.SUCCESSOR_OF_SUCCESSOR)&&(this.range_prefix?(e.status=l.SUCCESSOR_OF_SUCCESSOR,this.status=l.SUPPRESS):e.status=l.SUCCESSOR)};l.NumericBlob.prototype.checkLast=function(e){return this.status===l.SEEN||e.num!==this.num-1&&this.status===l.SUCCESSOR?(this.status=l.SUCCESSOR,!0):!1};l.Util.fixDateNode=function(e,t,i){var r,s,n,o,a,u,f,c,h,p,T,w,m,d=this.cslXml.getAttributeValue(i,"lingo"),O=this.cslXml.getAttributeValue(i,"default-locale");this.build.date_key=!0,r=this.cslXml.getAttributeValue(i,"form");var d;if(O?d=this.opt["default-locale"][0]:d=this.cslXml.getAttributeValue(i,"lingo"),!this.getDate(r,O))return e;var S=this.cslXml.getAttributeValue(i,"date-parts");s=this.cslXml.getAttributeValue(i,"variable"),c=this.cslXml.getAttributeValue(i,"prefix"),h=this.cslXml.getAttributeValue(i,"suffix"),w=this.cslXml.getAttributeValue(i,"display"),m=this.cslXml.getAttributeValue(i,"cslid"),n=this.cslXml.nodeCopy(this.getDate(r,O)),this.cslXml.setAttribute(n,"lingo",this.opt.lang),this.cslXml.setAttribute(n,"form",r),this.cslXml.setAttribute(n,"date-parts",S),this.cslXml.setAttribute(n,"cslid",m),this.cslXml.setAttribute(n,"variable",s),this.cslXml.setAttribute(n,"default-locale",O),c&&this.cslXml.setAttribute(n,"prefix",c),h&&this.cslXml.setAttribute(n,"suffix",h),w&&this.cslXml.setAttribute(n,"display",w),p=this.cslXml.children(n);for(var g in p)o=p[g],this.cslXml.nodename(o)==="date-part"&&(a=this.cslXml.getAttributeValue(o,"name"),O&&this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(n,"date-part",a,"@default-locale","true"));p=this.cslXml.children(i);for(var g in p)if(o=p[g],this.cslXml.nodename(o)==="date-part"){a=this.cslXml.getAttributeValue(o,"name"),T=this.cslXml.attributes(o);for(u in T)u!=="@name"&&(d&&d!==this.opt.lang&&["@suffix","@prefix","@form"].indexOf(u)>-1||(f=T[u],this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(n,"date-part",a,u,f)))}if(this.cslXml.getAttributeValue(i,"date-parts")==="year")this.cslXml.deleteNodeByNameAttribute(n,"month"),this.cslXml.deleteNodeByNameAttribute(n,"day");else if(this.cslXml.getAttributeValue(i,"date-parts")==="year-month")this.cslXml.deleteNodeByNameAttribute(n,"day");else if(this.cslXml.getAttributeValue(i,"date-parts")==="month-day"){for(var b=this.cslXml.children(n),I=1,N=this.cslXml.numberofnodes(b);I<N;I++)if(this.cslXml.getAttributeValue(b[I],"name")==="year"){this.cslXml.setAttribute(b[I-1],"suffix","");break}this.cslXml.deleteNodeByNameAttribute(n,"year")}return this.cslXml.insertChildNodeAfter(e,i,t,n)};l.dateMacroAsSortKey=function(e,t){l.dateAsSortKey.call(this,e,t,!0)};l.dateAsSortKey=function(e,t,i){var r,s,n,o,a,u,f,c,h=this.variables[0],p="empty";if(i&&e.tmp.extension&&(p="macro-with-date"),r=t[h],typeof r>"u"&&(r={"date-parts":[[0]]}),typeof this.dateparts>"u"&&(this.dateparts=["year","month","day"]),r.raw?r=e.fun.dateparser.parseDateToArray(r.raw):r["date-parts"]&&(r=e.dateParseArray(r)),typeof r>"u"&&(r={}),r.year)for(f=0,c=l.DATE_PARTS_INTERNAL.length;f<c;f+=1)if(s=l.DATE_PARTS_INTERNAL[f],n=0,o=s,o.slice(-4)==="_end"&&(o=o.slice(0,-4)),r[s]&&this.dateparts.indexOf(o)>-1&&(n=r[s]),s.slice(0,4)==="year"){a=l.Util.Dates[o].numeric(e,n);var u="1";a[0]==="-"&&(u="0",a=a.slice(1),a=9999-parseInt(a,10)),e.output.append(l.Util.Dates[s.slice(0,4)].numeric(e,u+a),p)}else n=l.Util.Dates[o]["numeric-leading-zeros"](e,n),n||(n="00"),e.output.append(n,p)};l.Engine.prototype.dateParseArray=function(e){var t,i,r,s;t={};for(i in e)if(i==="date-parts"){r=e["date-parts"],r.length>1&&r[0].length!==r[1].length&&l.error("CSL data error: element mismatch in date range input."),s=["","_end"];for(var n=0,o=r.length;n<o;n+=1)for(var a=0,u=l.DATE_PARTS.length;a<u;a+=1)isNaN(parseInt(r[n][a],10))?t[l.DATE_PARTS[a]+s[n]]=void 0:t[l.DATE_PARTS[a]+s[n]]=parseInt(r[n][a],10)}else e.hasOwnProperty(i)&&(i==="literal"&&typeof e.literal=="object"&&typeof e.literal.part=="string"?(l.debug("Warning: fixing up weird literal date value"),t.literal=e.literal.part):t[i]=e[i]);return t};l.Util.Names={};l.Util.Names.compareNamesets=l.NameOutput.prototype._compareNamesets;l.Util.Names.unInitialize=function(e,t){var i,r,s,n,o;if(!t)return"";for(s=t.split(/(?:\-|\s+)/),n=t.match(/(\-|\s+)/g),o="",i=0,r=s.length;i<r;i+=1)o+=s[i],i<r-1&&(o+=n[i]);return o};l.Util.Names.initializeWith=function(e,t,i,r){var s,n,o;if(!t)return"";if(i||(i=""),["Lord","Lady"].indexOf(t)>-1||!t.replace(/^(?:<[^>]+>)*/,"").match(l.STARTSWITH_ROMANESQUE_REGEXP)&&!i.match("%s"))return t;e.opt["initialize-with-hyphen"]===!1&&(t=t.replace(/\-/g," ")),t=t.replace(/\s*\-\s*/g,"-").replace(/\s+/g," "),t=t.replace(/-([a-z])/g,"$1");for(var s=t.length-2;s>-1;s+=-1)t.slice(s,s+1)==="."&&t.slice(s+1,s+2)!==" "&&(t=t.slice(0,s)+". "+t.slice(s+1));var a=l.Output.Formatters.nameDoppel.split(t),u=[];if(u=[a.strings[0]],a.tags.length===0){var f=u[0].match(/[^\.]+$/);f&&f[0].length===1&&f[0]!==f[0].toLowerCase()&&(u[0]+=".")}for(s=1,n=a.strings.length;s<n;s+=1)u.push(a.tags[s-1]),u.push(a.strings[s]);return r?o=this.doNormalize(e,u,i):o=this.doInitialize(e,u,i),o=o.replace(/\u2013([a-z])/g,"-$1"),o};l.Util.Names.notag=function(e){return e.replace(/^(?:<[^>]+>)*/,"")};l.Util.Names.mergetag=function(e,t,i){var r=t.match(/(?:-*<[^>]+>-*)/g);if(r)t=r.join("");else return i;return r=i.match(/^(.*[^\s])*(\s+)$/),r?(r[1]=r[1]?r[1]:"",i=r[1]+t+r[2]):i=i+t,i};l.Util.Names.tagonly=function(e,t){var i=t.match(/(?:<[^>]+>)+/);return i?i.join(""):t};l.Util.Names.doNormalize=function(e,t,i){var r,s;i=i||"";var n=[];for(r=0,s=t.length;r<s;r+=1)this.notag(t[r]).length>1&&this.notag(t[r]).slice(-1)==="."?(t[r]=t[r].replace(/^(.*)\.(.*)$/,"$1$2"),n.push(!0)):t[r].length===1&&t[r].toUpperCase()===t[r]?n.push(!0):n.push(!1);for(r=0,s=t.length;r<s;r+=2)n[r]&&(r<t.length-2&&(t[r+1]=this.tagonly(e,t[r+1]),n[r+2]||(t[r+1]=this.tagonly(e,t[r+1])+" "),t[r+2].length>1?t[r+1]=i.replace(/\ufeff$/,"")+t[r+1]:t[r+1]=this.mergetag(e,t[r+1],i)),r===t.length-1&&(t[r]=t[r]+i));return t.join("").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")};l.Util.Names.doInitialize=function(e,t,i){var r,s,n,o,a,u,f;for(r=0,s=t.length;r<s;r+=2)if(f=t[r],!!f)if(n=f.match(l.NAME_INITIAL_REGEXP),!n&&!f.match(l.STARTSWITH_ROMANESQUE_REGEXP)&&f.length>1&&i.match("%s")&&(n=f.match(/(.)(.*)/)),n&&n[2]&&n[3]&&(n[1]=n[1]+n[2],n[2]=""),n&&n[1].slice(0,1)===n[1].slice(0,1).toUpperCase()){var c="";if(n[2]){var h="";for(u=n[2].split(""),o=0,a=u.length;o<a;o+=1){var p=u[o];if(p===p.toUpperCase())h+=p;else break}h.length<n[2].length&&(c=l.toLocaleLowerCase.call(e,h))}t[r]=n[1]+c,r<s-1?i.match("%s")?t[r]=i.replace("%s",t[r]):t[r+1].indexOf("-")>-1?t[r+1]=this.mergetag(e,t[r+1].replace("-",""),i)+"-":t[r+1]=this.mergetag(e,t[r+1],i):i.match("%s")?t[r]=i.replace("%s",t[r]):t.push(i)}else f.match(l.ROMANESQUE_REGEXP)&&(!n||!n[3])&&(t[r]=" "+f);var T=t.join("");return T=T.replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," "),T};l.Util.Names.getRawName=function(e){var t=[];return e.literal?t.push(e.literal):(e.given&&t.push(e.given),e.family&&t.push(e.family)),t.join(" ")};l.Util.Dates={};l.Util.Dates.year={};l.Util.Dates.year.long=function(e,t){return t||(typeof t=="boolean"?t="":t=0),t.toString()};l.Util.Dates.year.imperial=function(e,t,i){var r="";t||(typeof t=="boolean"?t="":t=0),i=i?"_end":"";var s=e.tmp.date_object["month"+i];for(s=s?""+s:"1";s.length<2;)s="0"+s;var n=e.tmp.date_object["day"+i];for(n=n?""+n:"1";n.length<2;)n="0"+n;var o=parseInt(t+s+n,10),a,u;if(o>=18680908&&o<19120730?(a="",u=1867):o>=19120730&&o<19261225?(a="",u=1911):o>=19261225&&o<19890108?(a="",u=1925):o>=19890108&&(a="",u=1988),a&&u){var f=a;e.sys.normalizeAbbrevsKey&&(f=e.sys.normalizeAbbrevsKey("number",a)),e.transform.abbrevs.default.number[f]||e.transform.loadAbbreviation("default","number",f,null),e.transform.abbrevs.default.number[f]&&(a=e.transform.abbrevs.default.number[f]),r=a+(t-u)}return r};l.Util.Dates.year.short=function(e,t){if(t=t.toString(),t&&t.length===4)return t.substr(2)};l.Util.Dates.year.numeric=function(e,t){var r,i;t=""+t;var r=t.match(/([0-9]*)$/);for(r?(i=t.slice(0,r[1].length*-1),t=r[1]):(i=t,t="");t.length<4;)t="0"+t;return i+t};l.Util.Dates.normalizeMonth=function(e,t){var i;if(e||(e=0),e=""+e,e.match(/^[0-9]+$/)||(e=0),e=parseInt(e,10),t){var r={stub:"month-",num:e};if(r.num<1||r.num>24)r.num=0;else{for(;r.num>16;)r.num=r.num-4;r.num>12&&(r.stub="season-",r.num=r.num-12)}i=r}else(e<1||e>12)&&(e=0),i=e;return i};l.Util.Dates.month={};l.Util.Dates.month.numeric=function(e,i){var i=l.Util.Dates.normalizeMonth(i);return i||(i=""),i};l.Util.Dates.month["numeric-leading-zeros"]=function(e,i){var i=l.Util.Dates.normalizeMonth(i);if(!i)i="";else for(i=""+i;i.length<2;)i="0"+i;return i};l.Util.Dates.month.long=function(e,n,i,r){var s=l.Util.Dates.normalizeMonth(n,!0),n=s.num;if(!n)n="";else{for(n=""+n;n.length<2;)n="0"+n;n=e.getTerm(s.stub+n,"long",0,0,!1,r)}return n};l.Util.Dates.month.short=function(e,n,i,r){var s=l.Util.Dates.normalizeMonth(n,!0),n=s.num;if(!n)n="";else{for(n=""+n;n.length<2;)n="0"+n;n=e.getTerm(s.stub+n,"short",0,0,!1,r)}return n};l.Util.Dates.day={};l.Util.Dates.day.numeric=function(e,t){return t.toString()};l.Util.Dates.day.long=l.Util.Dates.day.numeric;l.Util.Dates.day["numeric-leading-zeros"]=function(e,t){for(t||(t=0),t=t.toString();t.length<2;)t="0"+t;return t.toString()};l.Util.Dates.day.ordinal=function(e,t,i){return e.fun.ordinalizer.format(t,i)};l.Util.Sort={};l.Util.Sort.strip_prepositions=function(e){var t;return typeof e=="string"&&(t=e.match(/^(([aA]|[aA][nN]|[tT][hH][eE])\s+)/)),t&&(e=e.substr(t[1].length)),e};l.Util.substituteStart=function(e,t){var i,r,s,n,o,a,u;n=function(f,c,h){for(var p=0,T=this.decorations.length;p<T;p+=1)if(this.decorations[p][0]==="@strip-periods"&&this.decorations[p][1]==="true"){f.tmp.strip_periods+=1;break}},this.execs.push(n),this.decorations&&e.opt.development_extensions.csl_reverse_lookup_support&&(this.decorations.reverse(),this.decorations.push(["@showid","true",this.cslid]),this.decorations.reverse()),u=["number","date","names"],(this.name==="text"&&!this.postponed_macro||u.indexOf(this.name)>-1)&&(i=function(f,c,h){f.tmp.element_trace.value()==="author"||this.name==="names"?(!f.tmp.just_looking&&h&&h["author-only"]&&f.tmp.area!=="intext"&&f.tmp.probably_rendered_something&&f.tmp.element_trace.push("suppress-me"),!f.tmp.just_looking&&h&&h["suppress-author"]&&(f.tmp.probably_rendered_something||f.tmp.element_trace.push("suppress-me"))):this.name==="date"?!f.tmp.just_looking&&h&&h["author-only"]&&f.tmp.area!=="intext"&&f.tmp.probably_rendered_something&&f.tmp.element_trace.push("suppress-me"):!f.tmp.just_looking&&h&&h["author-only"]&&f.tmp.area!=="intext"?!f.tmp.probably_rendered_something&&f.tmp.can_block_substitute||f.tmp.element_trace.push("suppress-me"):h&&h["suppress-author"]&&f.tmp.element_trace.push("do-not-suppress-me")},this.execs.push(i)),r=this.strings.cls,this.strings.cls=!1,e.build.render_nesting_level===0&&(e.build.area==="bibliography"&&e.bibliography.opt["second-field-align"]?(s=new l.Token("group",l.START),s.decorations=[["@display","left-margin"]],n=function(f,c){f.tmp.render_seen||(s.strings.first_blob=c.id,f.output.startTag("bib_first",s))},s.execs.push(n),t.push(s)):l.DISPLAY_CLASSES.indexOf(r)>-1&&(s=new l.Token("group",l.START),s.decorations=[["@display",r]],n=function(f,c){s.strings.first_blob=c.id,f.output.startTag("bib_first",s)},s.execs.push(n),t.push(s)),e.build.cls=r),e.build.render_nesting_level+=1,e.build.substitute_level.value()===1&&(o=new l.Token("choose",l.START),l.Node.choose.build.call(o,e,t),a=new l.Token("if",l.START),n=function(){return!!e.tmp.can_substitute.value()},a.tests||(a.tests=[]),a.tests.push(n),a.test=e.fun.match.any(this,e,a.tests),t.push(a)),e.sys.variableWrapper&&this.variables_real&&this.variables_real.length&&(n=function(f,c,h){if(!f.tmp.just_looking&&!f.tmp.suppress_decorations){var p=new l.Token("text",l.START);p.decorations=[["@showid","true"]],f.output.startTag("variable_entry",p);var T=null;h&&(T=h.position),T||(T=0);var w=["first","container-subsequent","subsequent","ibid","ibid-with-locator"],m=0;h&&h.noteIndex&&(m=h.noteIndex);var O=0;h&&h["first-reference-note-number"]&&(O=h["first-reference-note-number"]);var d=0;h&&h["first-container-reference-note-number"]&&(d=h["first-container-reference-note-number"]);var S=0;h&&h["citation-number"]&&(S=h["citation-number"]);var g=0;h&&h.index&&(g=h.index);var b={itemData:c,variableNames:this.variables,context:f.tmp.area,xclass:f.opt.xclass,position:w[T],"note-number":m,"first-reference-note-number":O,"first-container-reference-note-number":d,"citation-number":S,index:g,mode:f.opt.mode};f.output.current.value().params=b}},this.execs.push(n))};l.Util.substituteEnd=function(e,t){var i,r,s,n,o,a;if(e.sys.variableWrapper&&(this.hasVariable||this.variables_real&&this.variables_real.length)&&(i=function(f){!f.tmp.just_looking&&!f.tmp.suppress_decorations&&f.output.endTag("variable_entry")},this.execs.push(i)),i=function(f){for(var c=0,h=this.decorations.length;c<h;c+=1)if(this.decorations[c][0]==="@strip-periods"&&this.decorations[c][1]==="true"){f.tmp.strip_periods+=-1;break}},this.execs.push(i),e.build.render_nesting_level+=-1,e.build.render_nesting_level===0&&(e.build.cls?(i=function(f){f.output.endTag("bib_first")},this.execs.push(i),e.build.cls=!1):e.build.area==="bibliography"&&e.bibliography.opt["second-field-align"]&&(r=new l.Token("group",l.END),i=function(f){f.tmp.render_seen||f.output.endTag("bib_first")},r.execs.push(i),t.push(r),s=new l.Token("group",l.START),s.decorations=[["@display","right-inline"]],i=function(f){f.tmp.render_seen||(f.tmp.render_seen=!0,f.output.startTag("bib_other",s))},s.execs.push(i),t.push(s))),e.build.substitute_level.value()===1&&(n=new l.Token("if",l.END),t.push(n),o=new l.Token("choose",l.END),l.Node.choose.build.call(o,e,t)),this.name==="names"||this.name==="text"&&this.variables_real!=="title"){new l.Token("text",l.SINGLETON);var u=this.name;i=function(f,c){if(f.tmp.area==="bibliography"&&typeof f.bibliography.opt["subsequent-author-substitute"]=="string"&&!(this.variables_real&&!c[this.variables_real])&&!(this.variables_real&&u==="names")){var h=f.bibliography.opt["subsequent-author-substitute-rule"],p,T,w=!f.tmp.suppress_decorations;if(w&&f.tmp.subsequent_author_substitute_ok&&f.tmp.rendered_name){if(h==="partial-each"||h==="partial-first"){var m=!0,O=[];for(p=0,T=f.tmp.name_node.children.length;p<T;p+=1){var d=f.tmp.rendered_name[p];m&&f.tmp.last_rendered_name&&f.tmp.last_rendered_name.length>p-1&&d&&!d.localeCompare(f.tmp.last_rendered_name[p])?(a=new l.Blob(f[f.tmp.area].opt["subsequent-author-substitute"]),f.tmp.name_node.children[p].blobs=[a],h==="partial-first"&&(m=!1)):m=!1,O.push(d)}f.tmp.last_rendered_name=O}else if(h==="complete-each"){var O=f.tmp.rendered_name.join(",");if(O){if(f.tmp.last_rendered_name&&!O.localeCompare(f.tmp.last_rendered_name))for(p=0,T=f.tmp.name_node.children.length;p<T;p+=1)a=new l.Blob(f[f.tmp.area].opt["subsequent-author-substitute"]),f.tmp.name_node.children[p].blobs=[a];f.tmp.last_rendered_name=O}}else{var O=f.tmp.rendered_name.join(",");O&&(f.tmp.last_rendered_name&&!O.localeCompare(f.tmp.last_rendered_name)&&(a=new l.Blob(f[f.tmp.area].opt["subsequent-author-substitute"]),f.tmp.label_blob?f.tmp.name_node.top.blobs=[a,f.tmp.label_blob]:f.tmp.name_node.top.blobs.length?f.tmp.name_node.top.blobs[0].blobs=[a]:f.tmp.name_node.top.blobs=[a],f.tmp.substituted_variable=u),f.tmp.last_rendered_name=O)}f.tmp.subsequent_author_substitute_ok=!1}}},this.execs.push(i)}(this.name==="text"&&!this.postponed_macro||["number","date","names"].indexOf(this.name)>-1)&&(i=function(f,c){f.tmp.element_trace.mystack.length>1&&f.tmp.element_trace.pop()},this.execs.push(i))};l.Util.padding=function(e){var t=e.match(/\s*(-{0,1}[0-9]+)/);if(t)for(e=parseInt(t[1],10),e<0&&(e=1e20+e),e=""+e;e.length<20;)e="0"+e;return e};l.Util.LongOrdinalizer=function(){};l.Util.LongOrdinalizer.prototype.init=function(e){this.state=e};l.Util.LongOrdinalizer.prototype.format=function(e,t){e<10&&(e="0"+e);var i=l.Engine.getField(l.LOOSE,this.state.locale[this.state.opt.lang].terms,"long-ordinal-"+e,"long",0,t);return i||(i=this.state.fun.ordinalizer.format(e,t)),this.state.tmp.cite_renders_content=!0,i};l.Util.Ordinalizer=function(e){this.state=e,this.suffixes={}};l.Util.Ordinalizer.prototype.init=function(){if(!this.suffixes[this.state.opt.lang]){this.suffixes[this.state.opt.lang]={};for(var e=0,t=3;e<t;e+=1){var i=[void 0,"masculine","feminine"][e];this.suffixes[this.state.opt.lang][i]=[];for(var r=1;r<5;r+=1){var s=this.state.getTerm("ordinal-0"+r,"long",!1,i);if(typeof s>"u"){delete this.suffixes[this.state.opt.lang][i];break}this.suffixes[this.state.opt.lang][i].push(s)}}}};l.Util.Ordinalizer.prototype.format=function(e,t){var i;e=parseInt(e,10),i=""+e;var r="",s=[];if(t&&s.push(t),s.push("neuter"),this.state.locale[this.state.opt.lang].ord["1.0.1"]){r=this.state.getTerm("ordinal",!1,0,t);for(var n,o=0,a=s.length;o<a;o+=1){n=s[o];var u=this.state.locale[this.state.opt.lang].ord["1.0.1"];if(u["whole-number"][i]&&u["whole-number"][i][n]?r=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["whole-number"][i][n],!1,0,t):u["last-two-digits"][i.slice(i.length-2)]&&u["last-two-digits"][i.slice(i.length-2)][n]?r=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-two-digits"][i.slice(i.length-2)][n],!1,0,t):u["last-digit"][i.slice(i.length-1)]&&u["last-digit"][i.slice(i.length-1)][n]&&(r=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-digit"][i.slice(i.length-1)][n],!1,0,t)),r)break}}else t||(t=void 0),this.state.fun.ordinalizer.init(),e/10%10===1||e>10&&e<20?r=this.suffixes[this.state.opt.lang][t][3]:e%10===1&&e%100!==11?r=this.suffixes[this.state.opt.lang][t][0]:e%10===2&&e%100!==12?r=this.suffixes[this.state.opt.lang][t][1]:e%10===3&&e%100!==13?r=this.suffixes[this.state.opt.lang][t][2]:r=this.suffixes[this.state.opt.lang][t][3];return i=i+=r,i};l.Util.Romanizer=function(){};l.Util.Romanizer.prototype.format=function(e){var t,i,r,s,n;if(t="",e<6e3)for(s=e.toString().split(""),s.reverse(),i=0,r=0,n=s.length,i=0;i<n;i+=1)r=parseInt(s[i],10),t=l.ROMAN_NUMERALS[i][r]+t;return t};l.Util.Suffixator=function(e){e||(e=l.SUFFIX_CHARS),this.slist=e.split(",")};l.Util.Suffixator.prototype.format=function(e){var t;e+=1;var i="";do{t=e%26===0?26:e%26;var i=this.slist[t-1]+i;e=(e-t)/26}while(e!==0);return i};l.Engine.prototype.processNumber=function(e,t,i){var r,s=this,n=i;i=i==="page-first"?"page":i;var o=",\\s+and\\s+|\\s+and\\s+";this.opt.lang.slice(0,2)!=="en"&&(o+="|,\\s+"+this.getTerm("and")+"\\s+|\\s+"+this.getTerm("and")+"\\s+");var a="\\s*&\\s*",u=new RegExp("^"+a+"$"),f=new RegExp("("+a+"|"+o+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)","g"),c=new RegExp("(?:"+a+"|"+o+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)"),h=this.getTerm("and"),p=this.getTerm("and","symbol");h===p&&(p="&");function T(z){z=z.trim();var te=z.match(/^([^ ]+)/);if(te&&!l.STATUTE_SUBDIV_STRINGS[te[1]]){var F=null;["locator","locator-extra","page"].indexOf(i)>-1?t.label?F=l.STATUTE_SUBDIV_STRINGS_REVERSE[t.label]:F="p.":F=l.STATUTE_SUBDIV_STRINGS_REVERSE[i],F&&(z=F+" "+z)}return z}function w(z,te,F,V,Z){V=V||"";var M={};if(!te&&!l.STATUTE_SUBDIV_STRINGS_REVERSE[i]&&(te="var:"+i),te){var x=te.match(/(\s*)([^\s]+)(\s*)/);n==="page"&&Z===0&&["p.","pp."].indexOf(x[2])===-1?(M.gotosleepability=!0,M.labelVisibility=!0):M.labelVisibility=!1,M.label=x[2],M.origLabel=z,M.labelSuffix=x[3]?x[3]:"",M.plural=0}var x=F.match(/^([0-9]*[a-zA-Z]+0*)?([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/);return x?(M.particle=x[1]?x[1]:"",M.value=x[2]):(M.particle="",M.value=F),M.joiningSuffix=V.replace(/\s*-\s*/,"-"),M}function m(z){for(var te=z.length-2;te>-1;te-=2)z[te]==="-"&&z[te-1].match(/^(?:(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\.  *)*[0-9]+[,a-zA-Z]+$/)&&z[te+1].match(/^[,a-zA-Z]+$/)&&(z[te-1]=z.slice(te-1,te+2).join(""),z=z.slice(0,te).concat(z.slice(te+2)));return z}function O(z,te){te=te||"",z=T(z);var F,V,Z;if(i==="page"&&z.indexOf("")>-1&&(z=z.replace(/\u2013/g,"-")),z.indexOf("\\-")>-1){F=new RegExp(f.source.replace("\\-","")),V=new RegExp(c.source.replace("\\-",""));for(var M=z.split("\\-"),x=0,v=M.length;x<v;x++)M[x]=M[x].replace(/\-/g,"");Z=M.join("\\-"),Z=Z.replace(/\\/g,"")}else F=f,V=c,Z=z;var j=[],L=Z.match(F);if(L){for(var M=Z.split(V),x=0,v=L.length;x<v;x++)L[x].match(u)&&(M[x].match(/[a-zA-Z]$/)&&M[x].match(/^[a-zA-Z]/)?L[x]=p:L[x]=" "+p+" ");var R=!1;for(var x in M)if((""+M[x]).replace(/^[a-z]\.\s+/,"").match(/[^\s0-9ivxlcmIVXLCM]/))break;if(R)j=[Z];else{for(var x=0,v=M.length-1;x<v;x++)j.push(M[x]),j.push(L[x]);j.push(M[M.length-1]),j=m(j)}}else var j=[Z];for(var D=[],k=te,P="",x=0,v=j.length;x<v;x+=2){var L=j[x].match(/((?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/g);if(L){for(var M=j[x].split(/(?:(?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/),G=M.length-1;G>0;G--)M[G-1]&&(!M[G].match(/^[0-9]+([-;,:a-zA-Z]*)$/)||!M[G-1].match(/^[0-9]+([-;,:a-zA-Z]*)$/))&&(M[G-1]=M[G-1]+L[G-1]+M[G],M=M.slice(0,G).concat(M.slice(G+1)),L=L.slice(0,G-1).concat(L.slice(G)));if(L.length>0){var Q=L[0].trim(),ie=!l.STATUTE_SUBDIV_STRINGS[Q]||typeof s.getTerm(l.STATUTE_SUBDIV_STRINGS[Q])>"u"||["locator","number","locator-extra","page"].indexOf(i)===-1&&l.STATUTE_SUBDIV_STRINGS[Q]!==i;ie?x===0&&(L=L.slice(1),M[0]=M[0]+" "+Q+" "+M[1],M=M.slice(0,1).concat(M.slice(2))):P=Q}for(var G=0,le=M.length;G<le;G++)if(M[G]||G===M.length-1){var H;k=L[G-1]?L[G-1]:k,P===k.trim()?H="":H=P,Z=M[G]?M[G].trim():"",G===M.length-1?D.push(w(H,k,Z,j[x+1],x)):D.push(w(H,k,Z,null,x))}}else{var H;P===k.trim()?H="":H=P,D.push(w(H,k,j[x],j[x+1]))}}return D}function d(z){for(var te=0,F=z.length-1;te<F;te++)!z[te].joiningSuffix&&z[te+1].label&&(z[te].joiningSuffix=" ")}function S(z,te,F){var V=z[F.pos],Z=z[te].value,M=V.joiningSuffix==="\\-";Z.particle&&Z.particle!==V.particle&&(F.collapsible=!1);var x=Z.match(/^[0-9]+([-,:a-zA-Z]*)$/),v=V.value.match(/^(?:[0-9]+|[ixv]+)([-,:a-zA-Z]*|\-[\-0-9]+)$/);if((!Z||!x||!v||M)&&(F.collapsible=!1,(!Z||!v)&&(F.numeric=!1),M&&F.count--),(x&&x[1]||v&&v[1])&&(F.collapsible=!1),z[te].collapsible===void 0){for(var j=te,L=te+F.count;j<L;j++)isNaN(parseInt(z[j].value))&&!z[j].value.match(/^[ivxlcmIVXLCM]+$/)?z[j].collapsible=!1:z[j].collapsible=!0;F.collapsible=z[te].collapsible}for(var R=F.collapsible,j=F.pos,L=F.pos+F.count;j<L;j++)F.count>1&&R&&(z[j].plural=1),z[j].numeric=F.numeric,z[j].collapsible=F.collapsible}function g(z,te,F){F.label.slice(0,4)!=="var:"&&(F.pos===0?(["locator","number","locator-extra","page"].indexOf(i)>-1&&typeof s.getTerm(l.STATUTE_SUBDIV_STRINGS[F.label])>"u"&&(z[F.pos].labelVisibility=!0),["locator","number","locator-extra","page"].indexOf(i)===-1&&l.STATUTE_SUBDIV_STRINGS[F.label]!==i&&(z[0].labelVisibility=!0)):z[F.pos].labelVisibility=!0)}function b(z){if(z.length!==0){for(var te=0,F=1,V=1,Z=z.length;V<Z;V++){var M=z[V-1],x=z[V];if(M.label===x.label&&M.particle===M.particle)F++;else{var v=JSON.parse(JSON.stringify(z[te]));v.pos=te,v.count=F,v.numeric=!0,S(z,te,v),M.label!==x.label&&g(z,te,v),te=V,F=1}}var v=JSON.parse(JSON.stringify(z[te]));v.pos=te,v.count=F,v.numeric=!0,S(z,te,v),g(z,te,v),z.length&&z[0].numeric&&i.slice(0,10)==="number-of-"&&parseInt(t[n],10)>1&&(z[0].plural=1)}}function I(z){return z.replace("\\-","-")}function N(z){var te=l.Util.cloneToken(e),F=new l.Token;s.tmp.just_looking||(F.decorations=te.decorations,te.decorations=[],F.strings.prefix=te.strings.prefix,te.strings.prefix="",F.strings.suffix=te.strings.suffix,te.strings.suffix="");var V=z.length?z[0].label:null;if(z.length){for(var Z=0,M=z.length;Z<M;Z++){var x=z[Z],v=l.Util.cloneToken(te);v.gender=e.gender,V===x.label&&(v.formatter=e.formatter),x.numeric&&(v.successor_prefix=x.successor_prefix),v.strings.suffix=v.strings.suffix+I(x.joiningSuffix),x.styling=v}s.tmp.just_looking||z[0].value.slice(0,1)==='"'&&z[z.length-1].value.slice(-1)==='"'&&(z[0].value=z[0].value.slice(1),z[z.length-1].value=z[z.length-1].value.slice(0,-1),F.decorations.push(["@quotes",!0]))}return F}function q(z,te){var F=!0;if(["locator","locator-extra","page"].indexOf(z)>-1){var V;te.origLabel?V=te.origLabel:V=te.label,F=!!s.getTerm(l.STATUTE_SUBDIV_STRINGS[V])}return F}function A(z,te){return z==="page"||["locator","locator-extra"].indexOf(z)>-1&&(["p."].indexOf(te.label)>-1||["p."].indexOf(te.origLabel)>-1)}function _(z,te,F,V){var Z=A(z,te),M=q(z,te);return M&&F==="-"&&V&&((Z||["locator","locator-extra","issue","volume","edition","number"].indexOf(z)>-1)&&(F=s.getTerm("page-range-delimiter"),F||(F="")),z==="collection-number"&&(F=s.getTerm("year-range-delimiter"),F||(F=""))),F}function B(z,te,F){if(!(te<1)&&F.count===2&&z[te-1].particle===z[te].particle){if(z[te-1].joiningSuffix!=="-"){F.count=1;return}if(!s.opt["page-range-format"]&&parseInt(z[te-1].value,10)>parseInt(z[te].value,10)){z[te-1].joiningSuffix=_(i,z[te],z[te-1].joiningSuffix,!0);return}var V=z[te],Z=A(i,V),M;Z&&!isNaN(parseInt(z[te-1].value))&&!isNaN(parseInt(z[te].value))?(M=z[te-1].particle+z[te-1].value+" - "+z[te].particle+z[te].value,M=s.fun.page_mangler(M)):((""+z[te-1].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(""+z[te].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(z[te-1].joiningSuffix=s.getTerm("page-range-delimiter")),M=z[te-1].value+I(z[te-1].joiningSuffix)+z[te].value);var x=M.match(/^((?:[0-9]*[a-zA-Z]+0*))?([0-9]+[a-z]*)(\s*[^0-9]+\s*)([-,a-zA-Z]?0*)([0-9]+[a-z]*)$/);if(x){var v=x[3];v=_(i,V,v,z[te].numeric),z[te-1].particle=x[1],z[te-1].value=x[2],z[te-1].joiningSuffix=v,z[te].particle=x[4],z[te].value=x[5]}F.count=0}}function $(z){if(e&&["page","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume","locator","locator-extra"].indexOf(i)!==-1){for(var te={count:0,label:null,lastHadRangeDelimiter:!1},F=0,V=z.length;F<V;F++){var Z=z[F];if(Z.collapsible)te.label===Z.label&&Z.joiningSuffix==="-"?te.count=1:te.label===Z.label&&Z.joiningSuffix!=="-"?(te.count++,te.count===2&&B(z,F,te)):te.label!==Z.label?(te.label=Z.label,te.count=1):(te.count=1,te.label=Z.label);else{te.count=0,te.label=null;var M=Z.numeric;Z.joiningSuffix=_(i,Z,Z.joiningSuffix,M)}}te.count===2&&B(z,z.length-1,te)}}function X(z,te,F){var V=z[te];F.length&&(V.numeric=F[0].numeric,V.collapsible=F[0].collapsible,V.plural=F[0].plural,V.label=l.STATUTE_SUBDIV_STRINGS[F[0].label],i==="number"&&V.label==="issue"&&s.getTerm("number")&&(V.label="number"))}if(e&&this.tmp.shadow_numbers[n]&&this.tmp.shadow_numbers[n].values.length){var J=this.tmp.shadow_numbers[n].values;$(J),this.tmp.shadow_numbers[n].masterStyling=N(J);return}if(this.tmp.shadow_numbers[n]||(this.tmp.shadow_numbers[n]={values:[]}),!!t){var Y=l.LangPrefsMap[i];if(Y){var ne=this.opt["cite-lang-prefs"][Y][0];r=this.transform.getTextSubField(t,n,"locale-"+ne,!0),r=r.name}else r=t[n];if(r&&n==="number"&&t.type==="legal_case"&&(r=r.replace(/[\\]*-/g,"\\-")),r&&this.sys.getAbbreviation){if(this.sys.normalizeAbbrevsKey)var re=this.sys.normalizeAbbrevsKey(n,r);else var re=r;var ee=this.transform.loadAbbreviation(t.jurisdiction,"number",re,t.language);this.transform.abbrevs[ee].number&&(this.transform.abbrevs[ee].number[re]?r=this.transform.abbrevs[ee].number[re]:typeof this.transform.abbrevs[ee].number[re]<"u"&&delete this.transform.abbrevs[ee].number[re])}if(typeof r<"u"&&(typeof r=="string"||typeof r=="number")){typeof r=="number"&&(r=""+r);var K=l.STATUTE_SUBDIV_STRINGS_REVERSE[i];if(this.tmp.shadow_numbers[n].values.length===0){var J=O(r,K);d(J),b(J);for(var pe of J)pe.numeric||(pe.plural=0);this.tmp.shadow_numbers[n].values=J,e&&($(J),this.tmp.shadow_numbers[n].masterStyling=N(J)),X(this.tmp.shadow_numbers,n,J)}var ue=this.tmp.shadow_numbers[n];i==="number"&&ue.values.length===1&&ue.values[0].value.indexOf("|")>-1&&(ue.values[0].value=ue.values[0].value.replace(/\|/g,", "),ue.values[0].numeric=!0,ue.values[0].plural=1,ue.values[0].collapsible=!1,ue.numeric=!0,ue.plural=1,ue.collapsible=!1),ue.values.length===1&&ue.values[0].value.match(/^[0-9]+(?:\/[0-9]+)+$/)&&(ue.values[0].numeric=!0,ue.values[0].plural=0,ue.values[0].collapsible=!1,ue.numeric=!0,ue.plural=0,ue.collapsible=!1),i==="page"&&ue.values.length>0&&ue.values[0].gotosleepability&&(ue.labelForm="short")}}};l.Util.outputNumericField=function(e,t,i){e.output.openLevel(e.tmp.shadow_numbers[t].masterStyling);var r=e.tmp.shadow_numbers[t].masterStyling,s=e.tmp.shadow_numbers[t].values,n=s.length?s[0].label:null,o=e.tmp.shadow_numbers[t].labelForm,a=e.tmp.group_context.tip.label_static,u;o?u=o:u="short";for(var f=e.tmp.shadow_numbers[t].labelCapitalizeIfFirst,c=e.tmp.shadow_numbers[t].labelDecorations,h=null,p=0,T=s.length;p<T;p++){var w=s[p],m="",O;w.label&&(w.label.slice(0,4)==="var:"?O=w.label.slice(4):O=l.STATUTE_SUBDIV_STRINGS[w.label],O&&(w.label===n?(a&&(m=e.getTerm(O,"static",w.plural),m.indexOf("%s")===-1&&(m="")),m||(m=e.getTerm(O,o,w.plural))):(a&&(m=e.getTerm(O,"static",w.plural),m.indexOf("%s")===-1&&(m="")),m||(m=e.getTerm(O,u,w.plural))),f&&(m=l.Output.Formatters["capitalize-first"](e,m))));var d=-1;m&&(d=m.indexOf("%s"));var S=l.Util.cloneToken(w.styling);if(S.formatter=w.styling.formatter,S.type=w.styling.type,S.num=w.styling.num,S.gender=w.styling.gender,d>0&&d<m.length-2)S.strings.prefix+=m.slice(0,d),S.strings.suffix=m.slice(d+2)+S.strings.suffix;else if(w.labelVisibility)if(m||(m=w.label,O=w.label),d>0){var g=new l.Token;g.decorations=c,e.output.append(m.slice(0,d),g)}else(d===m.length-2||d===-1)&&e.output.append(m+w.labelSuffix,"empty");if(l.UPDATE_GROUP_CONTEXT_CONDITION(e,r.strings.prefix,null,r,`${w.particle}${w.value}`),w.collapsible){var b;w.value.match(/^[1-9][0-9]*$/)&&Number.isSafeInteger(parseInt(w.value,10))?b=new l.NumericBlob(e,w.particle,parseInt(w.value,10),S,i):b=new l.NumericBlob(e,w.particle,w.value,S,i),typeof b.gender>"u"&&(b.gender=e.locale[e.opt.lang]["noun-genders"][t]),e.output.append(b,"literal")}else e.output.append(w.particle+w.value,S);if(d===0&&d<m.length-2&&(h===null&&(h=O),O!==h||p===s.length-1)){var I=new l.Token;I.decorations=c,e.output.append(m.slice(d+2),I)}h=O,e.tmp.term_predecessor=!0}e.output.closeLevel()};l.Util.PageRangeMangler={};l.Util.PageRangeMangler.getFunction=function(e,t){var i,r,s,n,o,a,u,f,c,h,p,T,w,m,O,d,S,g,b=e.getTerm(t+"-range-delimiter");i=/([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)\s*(?:\u2013|-)\s*([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)/,n=function(N){for(s=N.length,r=1;r<s;r+=2)typeof N[r]=="object"&&(N[r]=N[r].join(""));var q=N.join("");return q=q.replace(/([^\\])\-/g,"$1"+e.getTerm(t+"-range-delimiter")),q},o=function(N){var q,A,_,B="\\s+\\-\\s+",$=b==="-"?"":b,X=new RegExp("([^\\\\])[-"+$+"\\u2013]","g");N=N.replace(X,"$1 - ").replace(/\s+-\s+/g," - ");var J=new RegExp("((?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"+B+"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*)","g"),Y=new RegExp("(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"+B+"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*");if(q=N.match(J),A=N.split(Y),A.length===0)_=q;else for(_=[A[0]],r=1,s=A.length;r<s;r+=1)_.push(q[r-1].replace(/\s*\-\s*/g,"-")),_.push(A[r]);return _},a=function(N){for(N=""+N,p=o(N),s=p.length,r=1;r<s;r+=2)T=p[r].match(i),T&&(!T[3]||T[1]===T[3])&&(T[4].length<T[2].length&&(T[4]=T[2].slice(0,T[2].length-T[4].length)+T[4]),parseInt(T[2],10)<parseInt(T[4],10)&&(T[3]=b+(T[1]?T[1]:""),p[r]=T.slice(1))),typeof p[r]=="string"&&(p[r]=p[r].replace(/\-/g,b));return p},u=function(N,q,A){s=N.length;for(var _=1,B=N.length;_<B;_+=2)typeof N[_]=="object"&&(N[_][3]=f(N[_][1],N[_][3],q,A),N[_][2].slice(1)===N[_][0]&&(N[_][2]=b));return n(N)},f=function(N,q,A,_){if(A||(A=0),w=(""+N).split(""),m=(""+q).split(""),O=m.slice(),O.reverse(),w.length===m.length)for(var B=0,$=w.length;B<$;B+=1)if(w[B]===m[B]&&O.length>A)O.pop();else{if(A&&_&&O.length===3){var X=w.slice(0,B);X.reverse(),O=O.concat(X)}break}return O.reverse(),O.join("")},c=function(N){for(s=N.length,r=1;r<s;r+=2)typeof N[r]=="object"&&(T=N[r],d=parseInt(T[1],10),S=parseInt(T[3],10),d>100&&d%100&&parseInt(d/100,10)===parseInt(S/100,10)?T[3]=""+S%100:d>=1e4&&(T[3]=""+S%1e3)),T[2].slice(1)===T[0]&&(T[2]=b);return n(N)},h=function(N){for(s=N.length,r=1;r<s;r+=2){if(typeof N[r]=="object"&&(T=N[r],d=parseInt(T[1],10),S=parseInt(T[3],10),m=""+S,d>100&&d%100))for(var q=2;q<m.length;q++){var A=Math.pow(10,q);if(Math.floor(d/A)===Math.floor(S/A)){T[3]=""+S%A;break}}T[2].slice(1)===T[0]&&(T[2]=b)}return n(N)};var I=function(N,q,A,_){var $;N=""+N;var B=a(N),$=q(B,A,_);return $};return e.opt[t+"-range-format"]?e.opt[t+"-range-format"]==="expanded"?g=function(N){return I(N,n)}:e.opt[t+"-range-format"]==="minimal"?g=function(N){return I(N,u)}:e.opt[t+"-range-format"]==="minimal-two"?g=function(N,q){return I(N,u,2,q)}:e.opt[t+"-range-format"]==="chicago"?g=function(N){return I(N,c)}:e.opt[t+"-range-format"]==="chicago-15"?g=function(N){return I(N,c)}:e.opt[t+"-range-format"]==="chicago-16"&&(g=function(N){return I(N,h)}):g=function(N){return I(N,n)},g};l.Util.FlipFlopper=function(e){var t=[],i={'<span class="nocase">':{type:"nocase",opener:'<span class="nocase">',closer:"</span>",attr:null,outer:null,flipflop:null},'<span class="nodecor">':{type:"nodecor",opener:'<span class="nodecor">',closer:"</span>",attr:"@class",outer:"nodecor",flipflop:{nodecor:"nodecor"}},'<span style="font-variant:small-caps;">':{type:"tag",opener:'<span style="font-variant:small-caps;">',closer:"</span>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<sc>":{type:"tag",opener:"<sc>",closer:"</sc>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<i>":{type:"tag",opener:"<i>",closer:"</i>",attr:"@font-style",outer:"italic",flipflop:{italic:"normal",normal:"italic"}},"<b>":{type:"tag",opener:"<b>",closer:"</b>",attr:"@font-weight",outer:"bold",flipflop:{bold:"normal",normal:"bold"}},"<sup>":{type:"tag",opener:"<sup>",closer:"</sup>",attr:"@vertical-align",outer:"sup",flipflop:{sub:"sup",sup:"sup"}},"<sub>":{type:"tag",opener:"<sub>",closer:"</sub>",attr:"@vertical-align",outer:"sub",flipflop:{sup:"sub",sub:"sub"}},' "':{type:"quote",opener:' "',closer:'"',attr:"@quotes",outer:"true",flipflop:{true:"inner",inner:"true",false:"true"}}," '":{type:"quote",opener:" '",closer:"'",attr:"@quotes",outer:"inner",flipflop:{true:"inner",inner:"true",false:"true"}}};i['("']=i[' "'],i["('"]=i[" '"];var r=e.getTerm("open-quote"),s=e.getTerm("close-quote"),n=e.getTerm("open-inner-quote"),o=e.getTerm("close-inner-quote");r&&s&&[' "'," '",'"',"'"].indexOf(r)===-1&&(i[r]=JSON.parse(JSON.stringify(i[' "'])),i[r].opener=r,i[r].closer=s),n&&o&&[' "'," '",'"',"'"].indexOf(n)===-1&&(i[n]=JSON.parse(JSON.stringify(i[" '"])),i[n].opener=n,i[n].closer=o);function a(S){var g={" '":' "',' "':" '",'("':"('","('":'("'};i[S].outer="true",i[g[S]].outer="inner"}function u(S){for(var g=[],b=Object.keys(i),I=0,N=b.length;I<N;I++){var q=b[I];(i[S].type!=="quote"||!i[S])&&g.push(q)}var A=i[S];return A.opener=new RegExp("^(?:"+g.map(function(_){return _.replace("(","\\(")}).join("|")+")"),A}var f=function(){for(var S={},g=Object.keys(i),b=0,I=g.length;b<I;b++){var N=g[b];S[N]=u(N)}return S}(),c=function(){var S=[],g=[],b={};for(var I in f)S.push(I),b[f[I].closer]=!0;for(var N=Object.keys(b),q=0,A=N.length;q<A;q++){var _=N[q];g.push(_)}var B=S.concat(g).map(function($){return $.replace("(","\\(")}).join("|");return{matchAll:new RegExp("((?:"+B+"))","g"),splitAll:new RegExp("(?:"+B+")","g"),open:new RegExp("(^(?:"+S.map(function($){return $.replace("(","\\(")}).join("|")+")$)"),close:new RegExp("(^(?:"+g.join("|")+")$)")}}();function h(S,g){var b=t[t.length-1];return!b||S.match(b.opener)?(t.push({type:f[S].type,opener:f[S].opener,closer:f[S].closer,pos:g}),!1):(t.pop(),t.push({type:f[S].type,opener:f[S].opener,closer:f[S].closer,pos:g}),{fixtag:b.pos})}function p(S,g){var b=t[t.length-1];return b&&S===b.closer?(t.pop(),b.type==="nocase"?{nocase:{open:b.pos,close:g}}:!1):b?{fixtag:b.pos}:{fixtag:g}}function T(S,g){return S.match(c.open)?h(S,g):p(S,g)}function w(S){var g=[];S=S.replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?\"[^>]*(>)/g,'$1 $2$3;"$4'),S=S.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3");var b=S.match(c.matchAll);if(!b)return{tags:[],strings:[S],forcedSpaces:[]};for(var I=S.split(c.splitAll),N=0,q=b.length-1;N<q;N++)i[b[N]]&&(I[N+1]===""&&['"',"'"].indexOf(b[N+1])>-1?(b[N+1]=" "+b[N+1],g.push(!0)):g.push(!1));return{tags:b,strings:I,forcedSpaces:g}}var m=function(S){var g=[];this.set=function(b){for(var I=i[b].attr,N=null,q=g.length-1;q>-1;q--){var A=g[q];if(A[0]===I){N=A;break}}if(!N){var _=[e[e.tmp.area].opt.layout_decorations].concat(S.alldecor);e:for(var q=_.length-1;q>-1;q--){var B=_[q];if(B)for(var $=B.length-1;$>-1;$--){var A=B[$];if(A[0]===I){N=A;break e}}}}N?N=[I,i[b].flipflop[N[1]]]:N=[I,i[b].outer],g.push(N)},this.pair=function(){return g[g.length-1]},this.pop=function(){g.pop()}};function O(S,g){if(S==="'"){if(g&&g.match(/^[^\,\.\?\:\;\ ]/))return""}else if(S===" '"&&g&&g.match(/^[\ ]/))return" ";return!1}function d(S,g,b){var I=!0,N=new m(S);S.blobs=[];function q(J){this.stack=[J],this.latest=J,this.addStyling=function(Y,ne){if(I&&(Y.slice(0,1)===" "&&(Y=Y.slice(1)),Y.slice(0,1)===" "&&(Y=Y.slice(1)),I=!1),this.latest=this.stack[this.stack.length-1],ne){if(typeof this.latest.blobs=="string"){var re=new l.Blob;re.blobs=this.latest.blobs,re.alldecor=this.latest.alldecor.slice(),this.latest.blobs=[re]}var ee=new l.Token,K=new l.Blob(null,ee);if(K.alldecor=this.latest.alldecor.slice(),ne[0]==="@class"&&ne[1]==="nodecor"){for(var pe=[],ue={},z=[e[e.tmp.area].opt.layout_decorations].concat(K.alldecor),te=z.length-1;te>-1;te--){var F=z[te];if(F)for(var V=F.length-1;V>-1;V--){var Z=F[V];["@font-weight","@font-style","@font-variant"].indexOf(Z[0])>-1&&!ue[Z[0]]&&(ne[1]!=="normal"&&(K.decorations.push([Z[0],"normal"]),pe.push([Z[0],"normal"])),ue[Z[0]]=!0)}}K.alldecor.push(pe)}else K.decorations.push(ne),K.alldecor.push([ne]);if(this.latest.blobs.push(K),this.stack.push(K),this.latest=K,Y){var ee=new l.Token,K=new l.Blob(null,ee);K.blobs=Y,K.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(K)}}else if(Y){var re=new l.Blob;re.blobs=Y,re.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(re)}},this.popStyling=function(){this.stack.pop()}}var A=new q(S);if(g.strings.length){var _=g.strings[0];b&&(_=" "+_),A.addStyling(_)}for(var B=0,$=g.tags.length;B<$;B++){var X=g.tags[B],_=g.strings[B+1];X.match(c.open)?(N.set(X),A.addStyling(_,N.pair())):(N.pop(),A.popStyling(),A.addStyling(_))}}this.processTags=function(S){var I=S.blobs,g=!1;I.slice(0,1)===" "&&!I.match(/^\s+[\'\"]/)&&(g=!0);var b=new RegExp("("+l.ROMANESQUE_REGEXP.source+")("+l.ROMANESQUE_REGEXP.source+")","g"),I=" "+I.replace(b,"$1'$2"),N=w(I);if(N.tags.length!==0){for(var q=!1,A=0,_=N.tags.length;A<_;A++){var B=N.tags[A],I=N.strings[A+1],$=O(B,I);if($)N.strings[A+1]=$+N.strings[A+1],N.tags[A]="";else{for(var X;X=T(B,A),X;)if(Object.keys(X).indexOf("fixtag")>-1){if(B.match(c.close)&&B==="'")N.strings[A+1]=""+N.strings[A+1],N.tags[A]="";else{var J=N.tags[X.fixtag];N.forcedSpaces[X.fixtag-1]&&(J=J.slice(1)),N.strings[X.fixtag+1]=J+N.strings[X.fixtag+1],N.tags[X.fixtag]=""}if(t.length>0)if(B!=="'")t.pop();else break;else break}else if(X.nocase){N.tags[X.nocase.open]="",N.tags[X.nocase.close]="";break}else break;X&&(X.fixtag||X.fixtag===0)&&(N.strings[A+1]=N.tags[A]+N.strings[A+1],N.tags[A]="")}}for(var A=t.length-1;A>-1;A--){var Y=t[A].pos,B=N.tags[Y];B===" '"||B==="'"?N.strings[Y+1]=" "+N.strings[Y+1]:N.strings[Y+1]=N.tags[Y]+N.strings[Y+1],N.tags[Y]="",t.pop()}for(var A=N.tags.length-1;A>-1;A--)N.tags[A]||(N.tags=N.tags.slice(0,A).concat(N.tags.slice(A+1)),N.strings[A]=N.strings[A]+N.strings[A+1],N.strings=N.strings.slice(0,A+1).concat(N.strings.slice(A+2)));for(var A=0,_=N.tags.length;A<_;A++){var B=N.tags[A],ne=N.forcedSpaces[A-1];[' "'," '",'("',"('"].indexOf(B)>-1&&(q||(a(B),q=!0),ne||(N.strings[A]+=B.slice(0,1)))}d(S,N,g)}}};l.Output.Formatters=function(){var e=`(?:|||| "| '|"|'|[-/.,;?!:]|\\[|\\]|\\(|\\)|<span style="font-variant: small-caps;">|<span class="no(?:case|decor)">|</span>|</?(?:i|sc|b|sub|sup)>)`,t=new l.Doppeler(e,function(m){return m.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3").replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?(\")[^>]*(>)/g,"$1 $2 $3;$4$5")}),i='(?:[-\\s]*<\\/*(?:spans+class="no(?:case|decor)"|i|sc|b|sub|sup)>[-\\s]*|[-\\s]+)',r=new l.Doppeler(i),s=new l.Doppeler("(?:[ -]+)"),n={'<span style="font-variant: small-caps;">':"</span>",'<span class="nocase">':"</span>",'<span class="nodecor">':"</span>","<sc>":"</sc>","<sub>":"</sub>","<sup>":"</sup>"};function o(m){var O=m.match(/(^\s*)((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(.*)/);return O&&!(O[2].match(/^[\u0370-\u03FF]$/)&&!O[3])?O[1]+l.toLocaleUpperCase.call(this,O[2])+O[3]:m}function a(m,O){if(!O)return"";m.doppel=t.split(O);var d={' "':{opener:" '",closer:'"'}," '":{opener:' "',closer:"'"},"":{opener:"",closer:""},"":{opener:"",closer:""}};function S(Y,ne){if(m.quoteState.length===0||Y===m.quoteState[m.quoteState.length-1].opener)return m.quoteState.push({opener:d[Y].opener,closer:d[Y].closer,pos:ne}),!1;var re=m.quoteState[m.quoteState.length-1].pos;return m.quoteState.pop(),m.quoteState.push({opener:d[Y].opener,closer:d[Y].closer,positions:ne}),re}function g(Y,ne){if(m.quoteState.length>0&&Y===m.quoteState[m.quoteState.length-1].closer)m.quoteState.pop();else return ne}function b(Y,ne){var re=["","",' "'," '"].indexOf(Y)>-1;return re?S(Y,ne):g(Y,ne)}function I(Y,ne){var re=Y.match(/(^(?:\u2018|\u2019|\u201C|\u201D|\"|\')|(?: \"| \')$)/);if(re)return b(re[1],ne)}m.doppel.strings.length&&m.doppel.strings[0].trim()&&(m.doppel.strings[0]=m.capitaliseWords(m.doppel.strings[0],0,m.doppel.tags[0]));for(var N=0,q=m.doppel.tags.length;N<q;N++){var A=m.doppel.tags[N],_=m.doppel.strings[N+1];if(m.tagState!==null&&(n[A]?m.tagState.push(n[A]):m.tagState.length&&A===m.tagState[m.tagState.length-1]&&m.tagState.pop()),m.afterPunct!==null&&A.match(/[\!\?\:]$/)&&(m.afterPunct=!0),m.tagState.length===0?m.doppel.strings[N+1]=m.capitaliseWords(_,N+1,m.doppel,m.doppel.tags[N+1]):m.doppel.strings[N+1].trim()&&(m.lastWordPos=null),m.quoteState!==null){var B=I(A,N);if(B||B===0){var $=m.doppel.origStrings[B+1].slice(0,1);m.doppel.strings[B+1]=$+m.doppel.strings[B+1].slice(1),m.lastWordPos=null}}m.isFirst&&_.trim()&&(m.isFirst=!1),m.afterPunct&&_.trim()&&(m.afterPunct=!1)}if(m.quoteState)for(var N=0,q=m.quoteState.length;N<q;N++){var B=m.quoteState[N].pos;if(typeof B<"u"){var $=m.doppel.origStrings[B+1].slice(0,1);m.doppel.strings[B+1]=$+m.doppel.strings[B+1].slice(1)}}if(m.lastWordPos){var X=s.split(m.doppel.strings[m.lastWordPos.strings]),J=X.strings[m.lastWordPos.words];J.length>1&&l.toLocaleLowerCase.call(this,J).match(m.skipWordsRex)&&(J=o.call(this,J),X.strings[m.lastWordPos.words]=J),m.doppel.strings[m.lastWordPos.strings]=s.join(X)}return t.join(m.doppel)}function u(m,O){return O}function f(m,O){var d={quoteState:null,capitaliseWords:function(S){for(var g=S.split(" "),b=0,I=g.length;b<I;b++){var N=g[b];N&&(g[b]=l.toLocaleLowerCase.call(m,N))}return g.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return a.call(m,d,O)}function c(m,O){var d={quoteState:null,capitaliseWords:function(S){for(var g=S.split(" "),b=0,I=g.length;b<I;b++){var N=g[b];N&&(g[b]=l.toLocaleUpperCase.call(m,N))}return g.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return a.call(m,d,O)}function h(m,O){var d={quoteState:[],capitaliseWords:function(S){for(var g=S.split(" "),b=0,I=g.length;b<I;b++){var N=g[b];N&&(d.isFirst?(g[b]=o.call(m,N),d.isFirst=!1):g[b]=l.toLocaleLowerCase.call(m,N))}return g.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return a.call(m,d,O)}function p(m,O){var d={quoteState:[],capitaliseWords:function(S,g,b){if(S.trim()){for(var I=s.split(S),N=I.strings,q=0,A=N.length;q<A;q++){var _=N[q];if(!_)continue;let B=l.toLocaleLowerCase.call(m,_),$=!1;(_.length>1&&!B.match(d.skipWordsRex)||q===N.length-1&&b==="-"||d.isFirst||d.afterPunct)&&($=!0),$&&_===B&&(N[q]=o.call(m,_)),d.afterPunct=!1,d.isFirst=!1,d.lastWordPos={strings:g,words:q}}S=s.join(I)}return S},skipWordsRex:m.locale[m.opt.lang].opts["skip-words-regexp"],tagState:[],afterPunct:!1,isFirst:!0};return a.call(m,d,O)}function T(m,O){var d={quoteState:[],capitaliseWords:function(S){for(var g=s.split(S),b=g.strings,I=0,N=b.length;I<N;I++){var q=b[I];if(q&&d.isFirst){q===l.toLocaleLowerCase.call(m,q)&&(b[I]=o.call(m,q)),d.isFirst=!1;break}}return s.join(g)},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return a.call(m,d,O)}function w(m,O){var d={quoteState:[],capitaliseWords:function(S){for(var g=s.split(S),b=g.strings,I=0,N=b.length;I<N;I++){var q=b[I];q&&q===l.toLocaleLowerCase.call(m,q)&&(b[I]=o.call(m,q))}return s.join(g)},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return a.call(m,d,O)}return{nameDoppel:r,passthrough:u,lowercase:f,uppercase:c,sentence:h,title:p,"capitalize-first":T,"capitalize-all":w}}();l.Output.Formats=function(){};l.Output.Formats.prototype.html={text_escape:function(e){return e||(e=""),e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\s\s/g," ").replace(l.SUPERSCRIPTS_REGEXP,function(t){return"<sup>"+l.SUPERSCRIPTS[t]+"</sup>"})},bibstart:`<div class="csl-bib-body">
`,bibend:"</div>","@font-style/italic":"<i>%%STRING%%</i>","@font-style/oblique":"<em>%%STRING%%</em>","@font-style/normal":'<span style="font-style:normal;">%%STRING%%</span>',"@font-variant/small-caps":'<span style="font-variant:small-caps;">%%STRING%%</span>',"@passthrough/true":l.Output.Formatters.passthrough,"@font-variant/normal":'<span style="font-variant:normal;">%%STRING%%</span>',"@font-weight/bold":"<b>%%STRING%%</b>","@font-weight/normal":'<span style="font-weight:normal;">%%STRING%%</span>',"@font-weight/light":!1,"@text-decoration/none":'<span style="text-decoration:none;">%%STRING%%</span>',"@text-decoration/underline":'<span style="text-decoration:underline;">%%STRING%%</span>',"@vertical-align/sup":"<sup>%%STRING%%</sup>","@vertical-align/sub":"<sub>%%STRING%%</sub>","@vertical-align/baseline":'<span style="baseline">%%STRING%%</span>',"@strip-periods/true":l.Output.Formatters.passthrough,"@strip-periods/false":l.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return typeof t>"u"?"":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var i="";return e.sys.embedBibliographyEntry&&(i=e.sys.embedBibliographyEntry(this.item_id)+`
`),'  <div class="csl-entry">'+t+`</div>
`+i},"@display/block":function(e,t){return`

    <div class="csl-block">`+t+`</div>
`},"@display/left-margin":function(e,t){return`
    <div class="csl-left-margin">`+t+"</div>"},"@display/right-inline":function(e,t){return'<div class="csl-right-inline">'+t+`</div>
  `},"@display/indent":function(e,t){return'<div class="csl-indent">'+t+`</div>
  `},"@showid/true":function(e,t,i){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations){if(i)return'<span class="'+e.opt.nodenames[i]+'" cslid="'+i+'">'+t+"</span>";if(this.params&&typeof t=="string"){var r="";if(t){var s=t.match(l.VARIABLE_WRAPPER_PREPUNCT_REX);r=s[1],t=s[2]}var n="";return t&&l.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(n=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,n)}else return t}else return t},"@URL/true":function(e,t){return'<a href="'+t+'">'+t+"</a>"},"@DOI/true":function(e,t){var i=t;return t.match(/^https?:\/\//)||(i="https://doi.org/"+t),'<a href="'+i+'">'+t+"</a>"}};l.Output.Formats.prototype.text={text_escape:function(e){return e||(e=""),e},bibstart:"",bibend:"","@font-style/italic":!1,"@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":l.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":!1,"@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":l.Output.Formatters.passthrough,"@strip-periods/false":l.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return typeof t>"u"?"":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+`
`},"@display/block":function(e,t){return`
`+t},"@display/left-margin":function(e,t){return t+" "},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return`
    `+t},"@showid/true":function(e,t){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}};l.Output.Formats.prototype.rtf={text_escape:function(e){return e||(e=""),e.replace(/([\\{}])/g,"\\$1").replace(l.SUPERSCRIPTS_REGEXP,function(t){return"\\super "+l.SUPERSCRIPTS[t]+"\\nosupersub{}"}).replace(/[\u007F-\uFFFF]/g,function(t){return"\\uc0\\u"+t.charCodeAt(0).toString()+"{}"}).split("	").join("\\tab{}")},"@passthrough/true":l.Output.Formatters.passthrough,"@font-style/italic":"{\\i{}%%STRING%%}","@font-style/normal":"{\\i0{}%%STRING%%}","@font-style/oblique":"{\\i{}%%STRING%%}","@font-variant/small-caps":"{\\scaps %%STRING%%}","@font-variant/normal":"{\\scaps0{}%%STRING%%}","@font-weight/bold":"{\\b{}%%STRING%%}","@font-weight/normal":"{\\b0{}%%STRING%%}","@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"{\\ul{}%%STRING%%}","@vertical-align/baseline":!1,"@vertical-align/sup":"\\super %%STRING%%\\nosupersub{}","@vertical-align/sub":"\\sub %%STRING%%\\nosupersub{}","@strip-periods/true":l.Output.Formatters.passthrough,"@strip-periods/false":l.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?l.Output.Formats.rtf.text_escape(e.getTerm("open-quote")):l.Output.Formats.rtf.text_escape(e.getTerm("open-quote"))+t+l.Output.Formats.rtf.text_escape(e.getTerm("close-quote"))},"@quotes/inner":function(e,t){return typeof t>"u"?l.Output.Formats.rtf.text_escape(""):l.Output.Formats.rtf.text_escape(e.getTerm("open-inner-quote"))+t+l.Output.Formats.rtf.text_escape(e.getTerm("close-inner-quote"))},"@quotes/false":!1,bibstart:"{\\rtf ",bibend:"}","@display/block":`\\line{}%%STRING%%\\line\r
`,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t},"@display/left-margin":function(e,t){return t+"\\tab "},"@display/right-inline":function(e,t){return t+`\r
`},"@display/indent":function(e,t){return`
\\tab `+t+`\\line\r
`},"@showid/true":function(e,t){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations){var i="";if(t){var r=t.match(l.VARIABLE_WRAPPER_PREPUNCT_REX);i=r[1],t=r[2]}var s="";return t&&l.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(s=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,i,t,s)}else return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}};l.Output.Formats.prototype.asciidoc={text_escape:function(e){return e||(e=""),e.replace("*","pass:[*]","g").replace("_","pass:[_]","g").replace("#","pass:[#]","g").replace("^","pass:[^]","g").replace("~","pass:[~]","g").replace("[[","pass:[[[]","g").replace("  ","&#160; ","g").replace(l.SUPERSCRIPTS_REGEXP,function(t){return"^"+l.SUPERSCRIPTS[t]+"^"})},bibstart:"",bibend:"","@passthrough/true":l.Output.Formatters.passthrough,"@font-style/italic":"__%%STRING%%__","@font-style/oblique":"__%%STRING%%__","@font-style/normal":!1,"@font-variant/small-caps":"[small-caps]#%%STRING%%#","@font-variant/normal":!1,"@font-weight/bold":"**%%STRING%%**","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"[underline]##%%STRING%%##","@vertical-align/sup":"^^%%STRING%%^^","@vertical-align/sub":"~~%%STRING%%~~","@vertical-align/baseline":!1,"@strip-periods/true":l.Output.Formatters.passthrough,"@strip-periods/false":l.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?"``":"``"+t+"''"},"@quotes/inner":function(e,t){return typeof t>"u"?"`":"`"+t+"'"},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+`
`},"@display/block":function(e,t){return t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return" "+t},"@display/indent":function(e,t){return" "+t},"@showid/true":function(e,t){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations&&this.params&&typeof t=="string"){var i="";if(t){var r=t.match(l.VARIABLE_WRAPPER_PREPUNCT_REX);i=r[1],t=r[2]}var s="";return t&&l.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(s=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,i,t,s)}else return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){var i=t;return t.match(/^https?:\/\//)||(i="https://doi.org/"+t),i+"["+t+"]"}};l.Output.Formats.prototype.fo={text_escape:function(e){return e||(e=""),e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace("  ","&#160; ","g").replace(l.SUPERSCRIPTS_REGEXP,function(t){return'<fo:inline vertical-align="super">'+l.SUPERSCRIPTS[t]+"</fo:inline>"})},bibstart:"",bibend:"","@passthrough/true":l.Output.Formatters.passthrough,"@font-style/italic":'<fo:inline font-style="italic">%%STRING%%</fo:inline>',"@font-style/oblique":'<fo:inline font-style="oblique">%%STRING%%</fo:inline>',"@font-style/normal":'<fo:inline font-style="normal">%%STRING%%</fo:inline>',"@font-variant/small-caps":'<fo:inline font-variant="small-caps">%%STRING%%</fo:inline>',"@font-variant/normal":'<fo:inline font-variant="normal">%%STRING%%</fo:inline>',"@font-weight/bold":'<fo:inline font-weight="bold">%%STRING%%</fo:inline>',"@font-weight/normal":'<fo:inline font-weight="normal">%%STRING%%</fo:inline>',"@font-weight/light":'<fo:inline font-weight="lighter">%%STRING%%</fo:inline>',"@text-decoration/none":'<fo:inline text-decoration="none">%%STRING%%</fo:inline>',"@text-decoration/underline":'<fo:inline text-decoration="underline">%%STRING%%</fo:inline>',"@vertical-align/sup":'<fo:inline vertical-align="super">%%STRING%%</fo:inline>',"@vertical-align/sub":'<fo:inline vertical-align="sub">%%STRING%%</fo:inline>',"@vertical-align/baseline":'<fo:inline vertical-align="baseline">%%STRING%%</fo:inline>',"@strip-periods/true":l.Output.Formatters.passthrough,"@strip-periods/false":l.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return typeof t>"u"?"":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var i="";if(e.bibliography&&e.bibliography.opt&&e.bibliography.opt.hangingindent){var r=e.bibliography.opt.hangingindent;i=' start-indent="'+r+'em" text-indent="-'+r+'em"'}var s="";return e.sys.embedBibliographyEntry&&(s=e.sys.embedBibliographyEntry(this.item_id)+`
`),'<fo:block id="'+this.system_id+'"'+i+">"+t+`</fo:block>
`+s},"@display/block":function(e,t){return`
  <fo:block>`+t+`</fo:block>
`},"@display/left-margin":function(e,t){return`
  <fo:table table-layout="fixed" width="100%">
    <fo:table-column column-number="1" column-width="$$$__COLUMN_WIDTH_1__$$$"/>
    <fo:table-column column-number="2" column-width="proportional-column-width(1)"/>
    <fo:table-body>
      <fo:table-row>
        <fo:table-cell>
          <fo:block>`+t+`</fo:block>
        </fo:table-cell>
        `},"@display/right-inline":function(e,t){return`<fo:table-cell>
          <fo:block>`+t+`</fo:block>
        </fo:table-cell>
      </fo:table-row>
    </fo:table-body>
  </fo:table>
`},"@display/indent":function(e,t){return'<fo:block margin-left="2em">'+t+`</fo:block>
`},"@showid/true":function(e,t){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations&&this.params&&typeof t=="string"){var i="";if(t){var r=t.match(l.VARIABLE_WRAPPER_PREPUNCT_REX);i=r[1],t=r[2]}var s="";return t&&l.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(s=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,i,t,s)}else return t},"@URL/true":function(e,t){return`<fo:basic-link external-destination="url('`+t+`')">`+t+"</fo:basic-link>"},"@DOI/true":function(e,t){var i=t;return t.match(/^https?:\/\//)||(i="https://doi.org/"+t),`<fo:basic-link external-destination="url('`+i+`')">`+t+"</fo:basic-link>"}};l.Output.Formats.prototype.latex={text_escape:function(e){return e||(e=""),e},bibstart:"\\begin{thebibliography}{4}",bibend:"\\end{thebibliography}","@font-style/italic":"{\\em %%STRING%%}","@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":l.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":"{\\bf %%STRING%%}","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":l.Output.Formatters.passthrough,"@strip-periods/false":l.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return typeof t>"u"?"":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return"\\bibitem{"+e.sys.embedBibliographyEntry(this.item_id)+`}
`},"@display/block":function(e,t){return`
`+t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return`
    `+t},"@showid/true":function(e,t,i){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}};l.Output.Formats=new l.Output.Formats;l.Registry=function(e){this.debug=!1,this.state=e,this.registry={},this.reflist=[],this.refhash={},this.namereg=new l.Registry.NameReg(e),this.citationreg=new l.Registry.CitationReg(e),this.authorstrings={},this.masterMap={},this.mylist=[],this.myhash={},this.deletes=[],this.inserts=[],this.uncited={},this.refreshes={},this.akeys={},this.oldseq={},this.return_data={},this.ambigcites={},this.ambigresets={},this.sorter=new l.Registry.Comparifier(e,"bibliography_sort"),this.getSortedIds=function(){for(var t=[],i=0,r=this.reflist.length;i<r;i+=1)t.push(""+this.reflist[i].id);return t},this.getSortedRegistryItems=function(){for(var t=[],i=0,r=this.reflist.length;i<r;i+=1)t.push(this.reflist[i]);return t}};l.Registry.prototype.init=function(e,t){var i,r;if(this.oldseq={},t){this.uncited={};for(var i=0,r=e.length;i<r;i+=1)this.myhash[e[i]]||this.mylist.push(""+e[i]),this.uncited[e[i]]=!0,this.myhash[e[i]]=!0}else{for(var s in this.uncited)e.push(s);var n={};for(i=e.length-1;i>-1;i+=-1)n[e[i]]?e=e.slice(0,i).concat(e.slice(i+1)):n[e[i]]=!0;this.mylist=e,this.myhash=n}this.refreshes={},this.touched={},this.ambigsTouched={},this.ambigresets={}};l.Registry.prototype.dopurge=function(e){for(var t=this.mylist.length-1;t>-1;t+=-1)this.citationreg.citationsByItemId&&(!this.citationreg.citationsByItemId||!this.citationreg.citationsByItemId[this.mylist[t]])&&!e[this.mylist[t]]&&(delete this.myhash[this.mylist[t]],delete this.uncited[this.mylist[t]],this.mylist=this.mylist.slice(0,t).concat(this.mylist.slice(t+1)));this.dodeletes(this.myhash)};l.Registry.prototype.dodeletes=function(e){var t,i,r,s,n,o,a,u,f;if(typeof e=="string"){var i=e;e={},e[i]=!0}for(var i in this.registry)if(!e[i]){if(this.uncited[i])continue;t=this.namereg.delitems(i);for(a in t)this.refreshes[a]=!0;for(r=this.registry[i].ambig,u=this.ambigcites[r].indexOf(i),u>-1&&(o=this.ambigcites[r].slice(),this.ambigcites[r]=o.slice(0,u).concat(o.slice(u+1,o.length)),this.ambigresets[r]=this.ambigcites[r].length),n=this.ambigcites[r].length,s=0;s<n;s+=1)f=""+this.ambigcites[r][s],this.refreshes[f]=!0;if(this.registry[i].siblings){if(this.registry[i].siblings.length==1){var c=this.registry[i].siblings[0];this.registry[c].siblings&&(this.registry[c].siblings.pop(),this.registry[c].master=!0)}else if(this.registry[i].siblings.length>1){var h=[i];if(this.registry[i].master){var p=this.registry[i].siblings[0],T=this.registry[p];T.master=!0,h.push(p)}for(var w=[],m=this.registry[i].siblings.length-1;m>-1;m+=-1){var O=this.registry[i].siblings.pop();h.indexOf(O)===-1&&w.push(O)}for(var m=w.length-1;m>-1;m+=-1)this.registry[i].siblings.push(w[m])}}for(var d=this.reflist.length-1;d>-1;d--)this.reflist[d].id===i&&(this.reflist=this.reflist.slice(0,d).concat(this.reflist.slice(d+1)));delete this.registry[i],delete this.refhash[i],this.return_data.bibchange=!0}};l.Registry.prototype.doinserts=function(e){var t,i,r,s,n,o,a;typeof e=="string"&&(e=[e]);for(var o=0,a=e.length;o<a;o+=1)t=e[o],this.registry[t]||(i=this.state.retrieveItem(t),r=l.getAmbiguousCite.call(this.state,i),this.ambigsTouched[r]=!0,i.legislation_id||(this.akeys[r]=!0),s={id:""+t,seq:0,offset:0,sortkeys:!1,ambig:!1,rendered:!1,disambig:!1,ref:i,newItem:!0},this.registry[t]=s,this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[t]&&(this.registry[t]["first-reference-note-number"]=this.citationreg.citationsByItemId[t][0].properties.noteIndex),n=l.getAmbigConfig.call(this.state),this.registerAmbigToken(r,t,n),this.touched[t]=!0,this.return_data.bibchange=!0)};l.Registry.prototype.rebuildlist=function(e){var t,i,r,s;if(e)for(this.reflist=[],t=this.mylist.length,i=0;i<t;i+=1)r=this.mylist[i],s=this.registry[r],this.reflist.push(s),this.oldseq[r]=this.registry[r].seq,this.registry[r].seq=i+1;else for(this.reflist_inserts=[],t=this.mylist.length,i=0;i<t;i+=1)r=this.mylist[i],s=this.registry[r],s.newItem&&this.reflist_inserts.push(s),this.oldseq[r]=this.registry[r].seq,this.registry[r].seq=i+1};l.Registry.prototype.dorefreshes=function(){var e,t,i,r,s;for(var e in this.refreshes)if(t=this.registry[e],!!t){t.sortkeys=void 0,i=this.state.refetchItem(e);var r=t.ambig;typeof r>"u"&&(this.state.tmp.disambig_settings=!1,r=l.getAmbiguousCite.call(this.state,i),s=l.getAmbigConfig.call(this.state),this.registerAmbigToken(r,e,s));for(var n in this.ambigresets)if(this.ambigresets[n]===1){var o=this.ambigcites[r][0],i=this.state.refetchItem(o);this.registry[o].disambig=new l.AmbigConfig,this.state.tmp.disambig_settings=!1;var r=l.getAmbiguousCite.call(this.state,i),s=l.getAmbigConfig.call(this.state);this.registerAmbigToken(r,o,s)}this.state.tmp.taintedItemIDs[e]=!0,this.ambigsTouched[r]=!0,i.legislation_id||(this.akeys[r]=!0),this.touched[e]=!0}};l.Registry.prototype.setdisambigs=function(){for(var e in this.ambigsTouched)this.state.disambiguate.run(e);this.ambigsTouched={},this.akeys={}};l.Registry.prototype.renumber=function(){var e,t,i;for(this.state.bibliography_sort.opt.citation_number_sort_direction===l.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map={}),e=this.reflist.length,t=0;t<e;t+=1)i=this.reflist[t],i.seq=t+1,this.state.bibliography_sort.opt.citation_number_sort_direction===l.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map[i.seq]=this.reflist.length-i.seq+1),this.state.opt.update_mode===l.NUMERIC&&i.seq!=this.oldseq[i.id]&&(this.state.tmp.taintedItemIDs[i.id]=!0),i.seq!=this.oldseq[i.id]&&(this.return_data.bibchange=!0)};l.Registry.prototype.setsortkeys=function(){for(var e,t=0,i=this.mylist.length;t<i;t+=1){var e=this.mylist[t];(this.touched[e]||this.state.tmp.taintedItemIDs[e]||!this.registry[e].sortkeys)&&(this.registry[e].sortkeys=l.getSortKeys.call(this.state,this.state.retrieveItem(e),"bibliography_sort"))}};l.Registry.prototype._insertItem=function(e,t){return t.splice(this._locationOf(e,t)+1,0,e),t};l.Registry.prototype._locationOf=function(e,t,i,r){if(t.length===0)return-1;i=i||0,r=r||t.length;var s=i+r>>1,n=this.sorter.compareKeys(e,t[s]);if(r-i<=1)return n==-1?s-1:s;switch(n){case-1:return this._locationOf(e,t,i,s);case 0:return s;case 1:return this._locationOf(e,t,s,r)}};l.Registry.prototype.sorttokens=function(e){var t,i,r,s;if(!e){for(this.reflist_inserts=[],t=this.mylist.length,s=0;s<t;s+=1)i=this.mylist[s],r=this.registry[i],r.newItem&&this.reflist_inserts.push(r);for(var n in this.state.tmp.taintedItemIDs)if(this.registry[n]&&!this.registry[n].newItem)for(var o=this.reflist.length-1;o>-1;o--)this.reflist[o].id===n&&(this.reflist_inserts.push(this.reflist[o]),this.reflist=this.reflist.slice(0,o).concat(this.reflist.slice(o+1)));for(var o=0,a=this.reflist_inserts.length;o<a;o++){var r=this.reflist_inserts[o];delete r.newItem,this.reflist=this._insertItem(r,this.reflist)}for(s=0;s<t;s+=1)i=this.mylist[s],r=this.registry[i],this.registry[i].seq=s+1}};l.Registry.Comparifier=function(e,t){var i,r,s,n,o=l.getSortCompare.call(e,e.opt["default-locale-sort"]);i=e[t].opt.sort_directions,this.compareKeys=function(a,u){for(r=a.sortkeys?a.sortkeys.length:0,s=0;s<r;s+=1){var f=0;if(a.sortkeys[s]===u.sortkeys[s]?f=0:typeof a.sortkeys[s]>"u"?f=i[s][1]:typeof u.sortkeys[s]>"u"?f=i[s][0]:f=o(a.sortkeys[s],u.sortkeys[s]),0<f)return i[s][1];if(0>f)return i[s][0]}return a.seq>u.seq?1:a.seq<u.seq?-1:0},n=this.compareKeys,this.compareCompositeKeys=function(a,u){return n(a[1],u[1])}};l.Registry.prototype.compareRegistryTokens=function(e,t){return e.seq>t.seq?1:e.seq<t.seq?-1:0};l.Registry.prototype.registerAmbigToken=function(e,t,i){if(this.registry[t]||l.debug("Warning: unregistered item: itemID=("+t+"), akey=("+e+")"),this.registry[t]&&this.registry[t].disambig&&this.registry[t].disambig.names)for(var r=0,s=i.names.length;r<s;r+=1){var n=i.names[r],o=this.registry[t].disambig.names[r];if(n!==o)this.state.tmp.taintedItemIDs[t]=!0;else if(i.givens[r])for(var a=0,u=i.givens[r].length;a<u;a+=1){var f=i.givens[r][a],c=this.registry[t].disambig.givens[r][a];f!==c&&(this.state.tmp.taintedItemIDs[t]=!0)}}this.ambigcites[e]||(this.ambigcites[e]=[]),this.ambigcites[e].indexOf(""+t)===-1&&this.ambigcites[e].push(""+t),this.registry[t].ambig=e,this.registry[t].disambig=l.cloneAmbigConfig(i)};l.getSortKeys=function(e,t){var i,r,s,n,o,a;for(i=this.tmp.area,r=this.tmp.root,s=this.tmp.extension,n=l.Util.Sort.strip_prepositions,this.tmp.area=t,this.tmp.root=t.indexOf("_")>-1?t.slice(0,-5):t,this.tmp.extension="_sort",this.tmp.disambig_override=!0,this.tmp.disambig_request=!1,this.tmp.suppress_decorations=!0,l.getCite.call(this,e),this.tmp.suppress_decorations=!1,this.tmp.disambig_override=!1,o=this[t].keys.length,a=0;a<o;a+=1)this[t].keys[a]=n(this[t].keys[a]);return this.tmp.area=i,this.tmp.root=r,this.tmp.extension=s,this[t].keys};l.Registry.NameReg=function(e){var t,i,r,s,n,o,a,u,f,c,h,p;this.state=e,this.namereg={},this.nameind={},this.nameindpkeys={},this.itemkeyreg={},a=function(T){return T||(T=""),T.replace(/\./g," ").replace(/\s+/g," ").replace(/\s+$/,"")},u=function(T,w,m){t=a(m.family),T.opt["demote-non-dropping-particle"]==="never"&&m["non-dropping-particle"]&&m.family&&(t=`${t} ${m["non-dropping-particle"]}`),r=a(m.given);var O=r.match(/[,\!]* ([^,]+)$/);O&&O[1]===O[1].toLowerCase()&&(r=r.replace(/[,\!]* [^,]+$/,"")),i=l.Util.Names.initializeWith(T,r,"%s"),T.citation.opt["givenname-disambiguation-rule"]==="by-cite"&&(t=""+w+t)},f=function(T,w,m,O,d,S){var g;if(e.tmp.area.slice(0,12)==="bibliography"&&!d)return typeof S=="string"?1:2;var b=e.nameOutput.getName(w,"locale-translit",!0);w=b.name,u(this.state,""+T,w),g=2,s=e.opt["disambiguate-add-givenname"],n=e.citation.opt["givenname-disambiguation-rule"];var I=n;if(n==="by-cite"&&(n="all-names"),d==="short"?g=0:typeof S=="string"&&(g=1),typeof this.namereg[t]>"u"||typeof this.namereg[t].ikey[i]>"u")return g;if(I==="by-cite"&&g<=O)return O;if(!s||typeof n=="string"&&n.slice(0,12)==="primary-name"&&m>0||(!n||n==="all-names"||n==="primary-name"?(this.namereg[t].count>1&&(g=1),(this.namereg[t].ikey&&this.namereg[t].ikey[i].count>1||this.namereg[t].count>1&&typeof S!="string")&&(g=2)):(n==="all-names-with-initials"||n==="primary-name-with-initials")&&(this.namereg[t].count>1?g=1:g=0),e.registry.registry[T]))return g;if(d=="short")return 0;if(typeof S=="string")return 1},c=function(T){var w,m,O,d,S;(typeof T=="string"||typeof T=="number")&&(T=[""+T]);var g={};for(m=T.length,w=0;w<m;w+=1)if(d=""+T[w],!!this.nameind[d]){for(S in this.nameind[d])if(this.nameind[d].hasOwnProperty(S)){var b=S.split("::");if(t=b[0],i=b[1],r=b[2],typeof this.namereg[t]>"u")continue;if(o=this.namereg[t].items,r&&this.namereg[t].ikey[i]&&this.namereg[t].ikey[i].skey[r]&&(p=this.namereg[t].ikey[i].skey[r].items,O=p.indexOf(""+d),O>-1&&(this.namereg[t].ikey[i].skey[r].items=p.slice(0,O).concat(p.slice([O+1]))),this.namereg[t].ikey[i].skey[r].items.length===0&&(delete this.namereg[t].ikey[i].skey[r],this.namereg[t].ikey[i].count+=-1,this.namereg[t].ikey[i].count<2)))for(var I=0,N=this.namereg[t].ikey[i].items.length;I<N;I+=1)e.tmp.taintedItemIDs[this.namereg[t].ikey[i].items[I]]=!0;if(i&&this.namereg[t].ikey[i]&&(O=this.namereg[t].ikey[i].items.indexOf(""+d),O>-1&&(o=this.namereg[t].ikey[i].items.slice(),this.namereg[t].ikey[i].items=o.slice(0,O).concat(o.slice([O+1]))),this.namereg[t].ikey[i].items.length===0&&(delete this.namereg[t].ikey[i],this.namereg[t].count+=-1,this.namereg[t].count<2)))for(var I=0,N=this.namereg[t].items.length;I<N;I+=1)e.tmp.taintedItemIDs[this.namereg[t].items[I]]=!0;t&&(O=this.namereg[t].items.indexOf(""+d),O>-1&&(o=this.namereg[t].items.slice(),this.namereg[t].items=o.slice(0,O).concat(o.slice([O+1],o.length))),this.namereg[t].items.length<2&&delete this.namereg[t]),delete this.nameind[d][S]}delete this.nameind[d],delete this.nameindpkeys[d]}return g},h=function(T,w,m){var O,d,S=e.nameOutput.getName(w,"locale-translit",!0);if(w=S.name,!(e.citation.opt["givenname-disambiguation-rule"]&&e.citation.opt["givenname-disambiguation-rule"].slice(0,8)==="primary-"&&m!==0)){if(u(this.state,""+T,w),t&&(typeof this.namereg[t]>"u"?(this.namereg[t]={},this.namereg[t].count=0,this.namereg[t].ikey={},this.namereg[t].items=[T]):this.namereg[t].items.indexOf(T)===-1&&this.namereg[t].items.push(T)),t&&i)if(typeof this.namereg[t].ikey[i]>"u"){if(this.namereg[t].ikey[i]={},this.namereg[t].ikey[i].count=0,this.namereg[t].ikey[i].skey={},this.namereg[t].ikey[i].items=[T],this.namereg[t].count+=1,this.namereg[t].count===2)for(var O=0,d=this.namereg[t].items.length;O<d;O+=1)e.tmp.taintedItemIDs[this.namereg[t].items[O]]=!0}else this.namereg[t].ikey[i].items.indexOf(T)===-1&&this.namereg[t].ikey[i].items.push(T);if(t&&i&&r)if(typeof this.namereg[t].ikey[i].skey[r]>"u"){if(this.namereg[t].ikey[i].skey[r]={},this.namereg[t].ikey[i].skey[r].items=[T],this.namereg[t].ikey[i].count+=1,this.namereg[t].ikey[i].count===2)for(var O=0,d=this.namereg[t].ikey[i].items.length;O<d;O+=1)e.tmp.taintedItemIDs[this.namereg[t].ikey[i].items[O]]=!0}else this.namereg[t].ikey[i].skey[r].items.indexOf(T)===-1&&this.namereg[t].ikey[i].skey[r].items.push(T);typeof this.nameind[T]>"u"&&(this.nameind[T]={},this.nameindpkeys[T]={}),t&&(this.nameind[T][t+"::"+i+"::"+r]=!0,this.nameindpkeys[T][t]=this.namereg[t])}},this.addname=h,this.delitems=c,this.evalname=f};l.Registry.CitationReg=function(){this.citationById={},this.citationByIndex=[]};l.Disambiguation=function(e){this.state=e,this.sys=this.state.sys,this.registry=e.registry.registry,this.ambigcites=e.registry.ambigcites,this.configModes(),this.debug=!1};l.Disambiguation.prototype.run=function(e){this.modes.length&&(this.debug&&this.state.sys.print("[A] === RUN ==="),this.akey=e,this.initVars(e)&&this.runDisambig())};l.Disambiguation.prototype.runDisambig=function(){var e;for(this.debug&&this.state.sys.print("[C] === runDisambig() ==="),this.initGivens=!0;this.lists.length;){for(this.gnameset=0,this.gname=0,this.clashes=[1,0];this.lists[0][1].length;)this.listpos=0,this.base||(this.base=this.lists[0][0]),e=this.incrementDisambig(),this.scanItems(this.lists[0]),this.evalScan(e);this.lists=this.lists.slice(1)}};l.Disambiguation.prototype.scanItems=function(e){var t,i,r;this.debug&&this.state.sys.print("[2] === scanItems() ==="),this.Item=e[1][0],this.ItemCite=l.getAmbiguousCite.call(this.state,this.Item,this.base,!0),this.scanlist=e[1],this.partners=[],this.partners.push(this.Item),this.nonpartners=[];for(var s=0,t=1,i=e[1].length;t<i;t+=1){r=e[1][t];var n=l.getAmbiguousCite.call(this.state,r,this.base,!0);this.debug&&t>1&&this.state.sys.print("  -----------"),this.ItemCite===n?(this.debug&&(this.state.sys.print("  [CLASH]--> "+this.Item.id+": "+this.ItemCite),this.state.sys.print("             "+r.id+": "+n)),s+=1,this.partners.push(r)):(this.debug&&(this.state.sys.print("  [clear]--> "+this.Item.id+": "+this.ItemCite),this.state.sys.print("             "+r.id+": "+n)),this.nonpartners.push(r))}this.clashes[0]=this.clashes[1],this.clashes[1]=s};l.Disambiguation.prototype.evalScan=function(e){this[this.modes[this.modeindex]](e),e&&(this.modeindex<this.modes.length-1?this.modeindex+=1:this.lists[this.listpos+1]=[this.base,[]])};l.Disambiguation.prototype.disNames=function(e){var t,i;if(this.debug&&this.state.sys.print("[3] == disNames() =="),this.clashes[1]===0&&this.nonpartners.length===1)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [a]: lone partner, one nonpartner"),this.state.sys.print("  registering "+this.partners[0].id+" and "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,[]];else if(this.clashes[1]===0)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [b]: lone partner, unknown number of remaining nonpartners"),this.state.sys.print("  registering "+this.partners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.nonpartners.length&&(this.initGivens=!0);else if(this.nonpartners.length===1)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [c]: lone nonpartner, unknown number of partners remaining"),this.state.sys.print("  registering "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.partners];else if(this.clashes[1]<this.clashes[0])this.captureStepToBase(),this.debug&&this.state.sys.print("  ** RESOLUTION [d]: better result, but no entries safe to register"),this.lists[this.listpos]=[this.betterbase,this.partners],this.lists.push([this.betterbase,this.nonpartners]);else if(this.debug&&this.state.sys.print("  ** RESOLUTION [e]: no improvement, and clashes remain"),e&&(this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.lists.push([this.betterbase,this.partners]),this.modeindex===this.modes.length-1)){this.debug&&this.state.sys.print("     (registering clashing entries because we've run out of options)");for(var t=0,i=this.partners.length;t<i;t+=1)this.state.registry.registerAmbigToken(this.akey,""+this.partners[t].id,this.betterbase);this.lists[this.listpos]=[this.betterbase,[]]}};l.Disambiguation.prototype.disExtraText=function(){this.debug&&this.state.sys.print("[3] === disExtraText ==");var e=!1;if(this.clashes[1]===0&&this.nonpartners.length<2&&(e=!0),!e&&(!this.base.disambiguate||this.state.tmp.disambiguate_count!==this.state.tmp.disambiguate_maxMax))if(this.modeindex=0,this.base.disambiguate=this.state.tmp.disambiguate_count,this.betterbase.disambiguate=this.state.tmp.disambiguate_count,this.base.disambiguate)this.disNames();else{this.initGivens=!0,this.base.disambiguate=1;for(var t=0,i=this.lists[this.listpos][1].length;t<i;t+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][t].id]=!0}else if(e||this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax)if(e||this.modeindex===this.modes.length-1){for(var r=this.lists[this.listpos][0],t=0,i=this.lists[this.listpos][1].length;t<i;t+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][t].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][t].id,r);this.lists[this.listpos]=[this.betterbase,[]]}else{this.modeindex=this.modes.length-1;var r=this.lists[this.listpos][0];r.disambiguate=!0;for(var t=0,i=this.lists[this.listpos][1].length;t<i;t+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][t].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][t].id,r)}};l.Disambiguation.prototype.disYears=function(){var e,t,i,r;this.debug&&this.state.sys.print("[3] === disYears =="),i=[];var s=this.lists[this.listpos][0];if(this.clashes[1])for(var n=0,o=this.state.registry.mylist.length;n<o;n+=1)for(var a=this.state.registry.mylist[n],u=0,f=this.lists[this.listpos][1].length;u<f;u+=1){var r=this.lists[this.listpos][1][u];if(r.id==a){i.push(this.registry[r.id]);break}}i.sort(this.state.registry.sorter.compareKeys);for(var e=0,t=i.length;e<t;e+=1){s.year_suffix=""+e;var c=this.state.registry.registry[i[e].id].disambig;this.state.registry.registerAmbigToken(this.akey,""+i[e].id,s),l.ambigConfigDiff(c,s)&&(this.state.tmp.taintedItemIDs[i[e].id]=!0)}this.lists[this.listpos]=[this.betterbase,[]]};l.Disambiguation.prototype.incrementDisambig=function(){if(this.debug&&this.state.sys.print(`
[1] === incrementDisambig() ===`),this.initGivens)return this.initGivens=!1,!1;var e=!1,t=!0;if(this.modes[this.modeindex]==="disNames"){t=!1,typeof this.givensMax!="number"&&(t=!0);var i=!1;typeof this.namesMax!="number"&&(i=!0),typeof this.givensMax=="number"&&(this.base.givens.length&&this.base.givens[this.gnameset][this.gname]<this.givensMax?this.base.givens[this.gnameset][this.gname]+=1:t=!0),typeof this.namesMax=="number"&&t&&(this.state.opt["disambiguate-add-names"]?(i=!1,this.gname<this.namesMax?(this.base.names[this.gnameset]+=1,this.gname+=1):i=!0):i=!0),typeof this.namesetsMax=="number"&&i&&this.gnameset<this.namesetsMax&&(this.gnameset+=1,this.base.names[this.gnameset]=1,this.gname=0),this.debug&&(this.state.sys.print("    ------------------"),this.state.sys.print("    incremented values"),this.state.sys.print("    ------------------"),this.state.sys.print("    | gnameset: "+this.gnameset),this.state.sys.print("    | gname: "+this.gname),this.state.sys.print("    | names value: "+this.base.names[this.gnameset]),this.base.givens.length?this.state.sys.print("    | givens value: "+this.base.givens[this.gnameset][this.gname]):this.state.sys.print("    | givens value: nil"),this.state.sys.print("    | namesetsMax: "+this.namesetsMax),this.state.sys.print("    | namesMax: "+this.namesMax),this.state.sys.print("    | givensMax: "+this.givensMax)),(typeof this.namesetsMax!="number"||this.namesetsMax===-1||this.gnameset===this.namesetsMax)&&(!this.state.opt["disambiguate-add-names"]||typeof this.namesMax!="number"||this.gname===this.namesMax)&&(typeof this.givensMax!="number"||typeof this.base.givens[this.gnameset]>"u"||typeof this.base.givens[this.gnameset][this.gname]>"u"||this.base.givens[this.gnameset][this.gname]===this.givensMax)&&(e=!0,this.debug&&this.state.sys.print("    MAXED"))}else this.modes[this.modeindex]==="disExtraText"&&(this.base.disambiguate+=1,this.betterbase.disambiguate+=1);return e};l.Disambiguation.prototype.initVars=function(e){var t,i,r,s,n;if(this.debug&&this.state.sys.print("[B] === initVars() ==="),this.lists=[],this.base=!1,this.betterbase=!1,this.akey=e,this.maxNamesByItemId={},s=[],r=this.ambigcites[e],!r||!r.length)return!1;var o=this.state.refetchItem(""+r[0]);if(this.getCiteData(o),this.base=l.getAmbigConfig.call(this.state),r&&r.length>1){s.push([this.maxNamesByItemId[o.id],o]);for(var t=1,i=r.length;t<i;t+=1)o=this.state.refetchItem(""+r[t]),this.getCiteData(o,this.base),s.push([this.maxNamesByItemId[o.id],o]);s.sort(function(u,f){return u[0]>f[0]?1:u[0]<f[0]?-1:u[1].id>f[1].id?1:u[1].id<f[1].id?-1:0}),n=[];for(var t=0,i=s.length;t<i;t+=1)n.push(s[t][1]);this.lists.push([this.base,n]),this.Item=this.lists[0][1][0]}else this.Item=this.state.refetchItem(""+r[0]);if(this.modeindex=0,this.state.citation.opt["disambiguate-add-names"]||!0)this.namesMax=this.maxNamesByItemId[this.Item.id][0];else{var a;for(var t,i;t<i;t+=1);}return this.padBase(this.base),this.padBase(this.betterbase),this.base.year_suffix=!1,this.base.disambiguate=!1,this.betterbase.year_suffix=!1,this.betterbase.disambiguate=!1,this.state.citation.opt["givenname-disambiguation-rule"]==="by-cite"&&this.state.opt["disambiguate-add-givenname"]&&(this.givensMax=2),!0};l.Disambiguation.prototype.padBase=function(e){for(var t=0,i=e.names.length;t<i;t+=1){e.givens[t]||(e.givens[t]=[]);for(var r=0,s=e.names[t];r<s;r+=1)e.givens[t][r]||(e.givens[t][r]=0)}};l.Disambiguation.prototype.configModes=function(){var e,t;this.modes=[],e=this.state.opt["disambiguate-add-givenname"],t=this.state.citation.opt["givenname-disambiguation-rule"],(this.state.opt["disambiguate-add-names"]||e&&t==="by-cite")&&this.modes.push("disNames"),this.state.opt.development_extensions.prioritize_disambiguate_condition?(this.state.opt.has_disambiguate&&this.modes.push("disExtraText"),this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears")):(this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears"),this.state.opt.has_disambiguate&&this.modes.push("disExtraText"))};l.Disambiguation.prototype.getCiteData=function(e,t){if(!this.maxNamesByItemId[e.id]){l.getAmbiguousCite.call(this.state,e,t),t=l.getAmbigConfig.call(this.state),this.maxNamesByItemId[e.id]=l.getMaxVals.call(this.state),this.state.registry.registry[e.id].disambig.givens=this.state.tmp.disambig_settings.givens.slice();for(var i=0,r=this.state.registry.registry[e.id].disambig.givens.length;i<r;i+=1)this.state.registry.registry[e.id].disambig.givens[i]=this.state.tmp.disambig_settings.givens[i].slice();this.namesetsMax=this.state.registry.registry[e.id].disambig.names.length-1,this.base||(this.base=t,this.betterbase=l.cloneAmbigConfig(t)),t.names.length<this.base.names.length&&(this.base=t);for(var i=0,r=t.names.length;i<r;i+=1)t.names[i]>this.base.names[i]&&(this.base.givens[i]=t.givens[i].slice(),this.base.names[i]=t.names[i],this.betterbase.names=this.base.names.slice(),this.betterbase.givens=this.base.givens.slice(),this.padBase(this.base),this.padBase(this.betterbase));this.betterbase.givens=this.base.givens.slice();for(var s=0,n=this.base.givens.length;s<n;s+=1)this.betterbase.givens[s]=this.base.givens[s].slice()}};l.Disambiguation.prototype.captureStepToBase=function(){this.state.citation.opt["givenname-disambiguation-rule"]==="by-cite"&&this.base.givens&&this.base.givens.length&&typeof this.base.givens[this.gnameset][this.gname]<"u"&&(this.betterbase.givens.length<this.base.givens.length&&(this.betterbase.givens=JSON.parse(JSON.stringify(this.base.givens))),this.betterbase.givens[this.gnameset][this.gname]=this.base.givens[this.gnameset][this.gname]),this.betterbase.names[this.gnameset]=this.base.names[this.gnameset]};l.Engine.prototype.getJurisdictionList=function(e){for(var t=[],i=e.split(":"),r=i.length;r>0;r--){var s=i.slice(0,r).join(":");if(t.push(s),this.opt.jurisdiction_fallbacks[s]){var n=this.opt.jurisdiction_fallbacks[s];t.push(n)}}return t.indexOf("us")===-1&&t.push("us"),t};l.Engine.prototype.loadStyleModule=function(e,t,i){var r=null;this.juris[e]={};var s=l.setupXml(t);s.addMissingNameNodes(s.dataObj),s.addInstitutionNodes(s.dataObj),s.insertPublisherAndPlace(s.dataObj),s.flagDateMacros(s.dataObj);for(var h=s.getNodesByName(s.dataObj,"law-module"),n=0,o=h.length;n<o;n++){var a=s.getAttributeValue(h[n],"types");if(a){this.juris[e].types={},a=a.split(/\s+/);for(var u=0,f=a.length;u<f;u++)this.juris[e].types[a[u]]=!0}i||(r=s.getAttributeValue(h[n],"fallback"),r&&e!=="us"&&(this.opt.jurisdiction_fallbacks[e]=r))}var c=this.opt.lang?this.opt.lang:this.opt["default-locale"][0];l.SET_COURT_CLASSES(this,c,s,s.dataObj),this.juris[e].types||(this.juris[e].types=l.MODULE_TYPES);for(var h=s.getNodesByName(s.dataObj,"macro"),n=0,o=h.length;n<o;n++){var p=s.getAttributeValue(h[n],"name");if(!l.MODULE_MACROS[p]){l.debug('CSL: skipping non-modular macro name "'+p+'" in module context');continue}this.juris[e][p]=[],this.buildTokenLists(h[n],this.juris[e][p]),this.configureTokenList(this.juris[e][p])}return r};l.Engine.prototype.retrieveAllStyleModules=function(e){var t={},i=this.locale[this.opt.lang].opts["jurisdiction-preference"];i=i||[],i=[""].concat(i);for(var r=i.length-1;r>-1;r--)for(var s=i[r],n=0,o=e.length;n<o;n++){var a=e[n];if(!this.opt.jurisdictions_seen[a]){var u=this.sys.retrieveStyleModule(a,s);(!u&&!s||u)&&(this.opt.jurisdictions_seen[a]=!0),u&&(t[a]=u)}}return t};l.ParticleList=function(){var e=[[[0,1],null]],t=[[[0,3],null]],i=[[null,[0,1]]],r=[[null,[0,2]]],s=[[null,[0,3]]],n=[[null,[0,1]],[[0,1],null]],o=[[null,[0,2]],[[0,2],null]],a=[[[0,1],null],[null,[0,1]]],u=[[[0,2],null],[null,[0,2]]],f=[[[0,3],null],[null,[0,3]]],c=[[null,[0,2]],[[0,1],[1,2]]],h=[["'s",i],["'s-",i],["'t",i],["a",i],["aan 't",r],["aan de",r],["aan den",r],["aan der",r],["aan het",r],["aan t",r],["aan",i],["ad-",n],["adh-",n],["af",n],["al",n],["al-",n],["am de",r],["am",i],["an-",n],["ar-",n],["as-",n],["ash-",n],["at-",n],["ath-",n],["auf dem",u],["auf den",u],["auf der",u],["auf ter",r],["auf",a],["aus 'm",u],["aus dem",u],["aus den",u],["aus der",u],["aus m",u],["aus",a],["aus'm",u],["az-",n],["a-",n],["a-",n],["a-",n],["a-",n],["a-",n],["a-",n],["a-",n],["ben",i],["bij 't",r],["bij de",r],["bij den",r],["bij het",r],["bij t",r],["bij",i],["bin",i],["boven d",r],["boven d'",r],["d",i],["d'",n],["da",n],["dal",i],["dal'",i],["dall'",i],["dalla",i],["das",n],["de die le",s],["de die",r],["de l",r],["de l'",r],["de la",c],["de las",c],["de le",r],["de li",o],["de van der",s],["de",n],["de'",n],["deca",i],["degli",n],["dei",n],["del",n],["dela",e],["dell'",n],["della",n],["delle",n],["dello",n],["den",n],["der",n],["des",n],["di",n],["die le",r],["do",i],["don",i],["dos",n],["du",n],["ed-",n],["edh-",n],["el",n],["el-",n],["en-",n],["er-",n],["es-",n],["esh-",n],["et-",n],["eth-",n],["ez-",n],["e-",n],["e-",n],["e-",n],["e-",n],["e-",n],["e-",n],["e-",n],["het",i],["i",i],["il",e],["im",i],["in 't",r],["in de",r],["in den",r],["in der",o],["in het",r],["in t",r],["in",i],["l",i],["l'",i],["la",i],["las",i],["le",i],["les",n],["lo",n],["los",i],["lou",i],["of",i],["onder 't",r],["onder de",r],["onder den",r],["onder het",r],["onder t",r],["onder",i],["op 't",r],["op de",o],["op den",r],["op der",r],["op gen",r],["op het",r],["op t",r],["op ten",r],["op",i],["over 't",r],["over de",r],["over den",r],["over het",r],["over t",r],["over",i],["s",i],["s'",i],["sen",e],["t",i],["te",i],["ten",i],["ter",i],["tho",i],["thoe",i],["thor",i],["to",i],["toe",i],["tot",i],["uijt 't",r],["uijt de",r],["uijt den",r],["uijt te de",s],["uijt ten",r],["uijt",i],["uit 't",r],["uit de",r],["uit den",r],["uit het",r],["uit t",r],["uit te de",s],["uit ten",r],["uit",i],["unter",i],["v",i],["v.",i],["v.d.",i],["van 't",r],["van de l",s],["van de l'",s],["van de",r],["van de",r],["van den",r],["van der",r],["van gen",r],["van het",r],["van la",r],["van t",r],["van ter",r],["van van de",s],["van",n],["vander",i],["vd",i],["ver",i],["vom und zum",t],["vom",n],["von 't",r],["von dem",u],["von den",u],["von der",u],["von t",r],["von und zu",f],["von zu",u],["von",a],["voor 't",r],["voor de",r],["voor den",r],["voor in 't",s],["voor in t",s],["voor",i],["vor der",u],["vor",a],["z",e],["ze",e],["zu",a],["zum",n],["zur",n]];return h}();l.parseParticles=function(){function e(r,s,n){var o=r;r=r;var a=[],u,f;s?(r=r.split("").reverse().join(""),u=l.PARTICLE_GIVEN_REGEXP):u=l.PARTICLE_FAMILY_REGEXP;for(var c=r.match(u);c;){var h=s?c[1].split("").reverse().join(""):c[1],p=c?h:!1,p=p?h.replace(/^[-\'\u02bb\u2019\s]*(.).*$/,"$1"):!1;if(f=p?p.toUpperCase()!==p:!1,!f)break;s?(a.push(o.slice(h.length*-1)),o=o.slice(0,h.length*-1)):(a.push(o.slice(0,h.length)),o=o.slice(h.length)),r=c[2],c=r.match(u)}if(s){r=r.split("").reverse().join(""),a.reverse();for(var T=1,w=a.length;T<w;T++)a[T].slice(0,1)==" "&&(a[T-1]+=" ");for(var T=0,w=a.length;T<w;T++)a[T].slice(0,1)==" "&&(a[T]=a[T].slice(1));r=o.slice(0,r.length)}else r=o.slice(r.length*-1);return[f,r,a]}function t(r){var s=r.slice(-1);return r=r.trim(),s===" "&&["'",""].indexOf(r.slice(-1))>-1&&(r+=" "),r}function i(r){if(!r.suffix&&r.given){var s=r.given.match(/(\s*,!*\s*)/);if(s){var n=r.given.indexOf(s[1]),o=r.given.slice(n+s[1].length),a=r.given.slice(n,n+s[1].length).replace(/\s*/g,"");o.replace(/\./g,"")==="et al"&&!r["dropping-particle"]?(r["dropping-particle"]=o,r["comma-dropping-particle"]=","):(a.length===2&&(r["comma-suffix"]=!0),r.suffix=o),r.given=r.given.slice(0,n)}}}return function(r){var a=e(r.family),s=a[1],n=a[2];r.family=s;var o=t(n.join(""));o&&(r["non-dropping-particle"]=o),i(r);var a=e(r.given,!0),u=a[1],f=a[2];r.given=u;var c=f.join("").trim();c&&(r["dropping-particle"]=c)}}();var Jr=l;async function au(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.text()}catch(t){console.error("Error fetching the file:",t)}}class Fn{constructor(t,i,r){this.sytle=r,this.locale=i,this.allItemIDs=[],this.typeLookup={},this.citations={},this.updateItems(t),this.citeproc=new Jr.Engine(this,this.sytle)}updateItems(t){this.allItemIDs=[],this.typeLookup={},this.citations={};for(var i=0,r=t.length;i<r;i++){var s=t[i];if(s.issued){s.URL&&delete s.URL;var n=s.id;this.citations[n]=s,this.allItemIDs.push(n),this.typeLookup[s.type]=n}}}retrieveLocale(t){return this.locale.locale}retrieveItem(t){return this.citations[t]}updateStyle(t){this.sytle=t,this.citeproc=new Jr.Engine(this,this.sytle,this.locale.lang,this.locale.lang)}resetCiteproc(){this.citeproc=new Jr.Engine(this,this.sytle,this.locale.lang,this.locale.lang)}static async build(t,i){const r=await au("https://raw.githubusercontent.com/citation-style-language/styles/master/chicago-fullnote-bibliography.csl"),s=await Un.build(t);return new Fn(i,s,r)}createBibliography(t){return this.citeproc.updateItems(t),this.citeproc.makeBibliography()}createCitation(t){this.citeproc.updateItems([t]);const i={properties:{noteIndex:0},citationItems:[{id:t}]};return this.citeproc.processCitationCluster(i,[],[])}previewBibliographyForType(t){if(!this.typeLookup[t])return"type not found";const i=this.createBibliography([this.typeLookup[t]]);return console.log("created bibliography for",t,i[0]),i[1][0]}previewCitationForType(t){if(!this.typeLookup[t])return"type not found";const r=this.createCitation(this.typeLookup[t])[1][0][1];return console.log("created citation for",t,r),r}previewCitationSpecials(){if(this.allItemIDs.length<2)return"not enough items";const t=(a,u)=>({properties:{noteIndex:u},citationItems:[{id:a}]}),i=this.allItemIDs[0],r=this.allItemIDs[1],s=[];s.push(t(i,1)),s.push(t(i,2)),s.push(t(r,3)),s.push(t(i,4));const n=this.citeproc.rebuildProcessorState(s);console.warn(n);const o={ibid:n[1][2],subsequent:n[3][2]};return this.resetCiteproc(),o}updateTerm(t,i){this.locale.updateTerm(t,i)}}class Un{constructor(t,i){this.lang=t,this.locale=i,this.updatedTerms={}}static async build(t){const i=await au(`https://raw.githubusercontent.com/citation-style-language/locales/4fa753374e7998a2fa53edbfed13ed480095a484/locales-${t}.xml`);return new Un(t,i)}updateTerm(t,i){var r=new DOMParser,s=r.parseFromString(this.locale,"application/xml"),n=s.querySelector(`term[name="${t}"]`);n&&(n.textContent=i);var o=new XMLSerializer,a=o.serializeToString(s);this.locale=a,this.updatedTerms[t]=i}getLocaleUpdates(){return this.updatedTerms}}var Ge={},Dr={};Dr.byteLength=Sh;Dr.toByteArray=wh;Dr.fromByteArray=Ih;var xt=[],lt=[],Eh=typeof Uint8Array<"u"?Uint8Array:Array,Yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var si=0,Th=Yr.length;si<Th;++si)xt[si]=Yr[si],lt[Yr.charCodeAt(si)]=si;lt[45]=62;lt[95]=63;function lu(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");i===-1&&(i=t);var r=i===t?0:4-i%4;return[i,r]}function Sh(e){var t=lu(e),i=t[0],r=t[1];return(i+r)*3/4-r}function Ah(e,t,i){return(t+i)*3/4-i}function wh(e){var t,i=lu(e),r=i[0],s=i[1],n=new Eh(Ah(e,r,s)),o=0,a=s>0?r-4:r,u;for(u=0;u<a;u+=4)t=lt[e.charCodeAt(u)]<<18|lt[e.charCodeAt(u+1)]<<12|lt[e.charCodeAt(u+2)]<<6|lt[e.charCodeAt(u+3)],n[o++]=t>>16&255,n[o++]=t>>8&255,n[o++]=t&255;return s===2&&(t=lt[e.charCodeAt(u)]<<2|lt[e.charCodeAt(u+1)]>>4,n[o++]=t&255),s===1&&(t=lt[e.charCodeAt(u)]<<10|lt[e.charCodeAt(u+1)]<<4|lt[e.charCodeAt(u+2)]>>2,n[o++]=t>>8&255,n[o++]=t&255),n}function Oh(e){return xt[e>>18&63]+xt[e>>12&63]+xt[e>>6&63]+xt[e&63]}function Nh(e,t,i){for(var r,s=[],n=t;n<i;n+=3)r=(e[n]<<16&16711680)+(e[n+1]<<8&65280)+(e[n+2]&255),s.push(Oh(r));return s.join("")}function Ih(e){for(var t,i=e.length,r=i%3,s=[],n=16383,o=0,a=i-r;o<a;o+=n)s.push(Nh(e,o,o+n>a?a:o+n));return r===1?(t=e[i-1],s.push(xt[t>>2]+xt[t<<4&63]+"==")):r===2&&(t=(e[i-2]<<8)+e[i-1],s.push(xt[t>>10]+xt[t>>4&63]+xt[t<<2&63]+"=")),s.join("")}var Mn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Mn.read=function(e,t,i,r,s){var n,o,a=s*8-r-1,u=(1<<a)-1,f=u>>1,c=-7,h=i?s-1:0,p=i?-1:1,T=e[t+h];for(h+=p,n=T&(1<<-c)-1,T>>=-c,c+=a;c>0;n=n*256+e[t+h],h+=p,c-=8);for(o=n&(1<<-c)-1,n>>=-c,c+=r;c>0;o=o*256+e[t+h],h+=p,c-=8);if(n===0)n=1-f;else{if(n===u)return o?NaN:(T?-1:1)*(1/0);o=o+Math.pow(2,r),n=n-f}return(T?-1:1)*o*Math.pow(2,n-r)};Mn.write=function(e,t,i,r,s,n){var o,a,u,f=n*8-s-1,c=(1<<f)-1,h=c>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=r?0:n-1,w=r?1:-1,m=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=p/u:t+=p*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(t*u-1)*Math.pow(2,s),o=o+h):(a=t*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;e[i+T]=a&255,T+=w,a/=256,s-=8);for(o=o<<s|a,f+=s;f>0;e[i+T]=o&255,T+=w,o/=256,f-=8);e[i+T-w]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Dr,i=Mn,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=I,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s;const{Uint8Array:n,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;c.TYPED_ARRAY_SUPPORT=u(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const C=new n(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,n.prototype),Object.setPrototypeOf(C,y),C.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function f(C){if(C>s)throw new RangeError('The value "'+C+'" is invalid for option "size"');const y=new n(C);return Object.setPrototypeOf(y,c.prototype),y}function c(C,y,E){if(typeof C=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(C)}return h(C,y,E)}c.poolSize=8192;function h(C,y,E){if(typeof C=="string")return m(C,y);if(o.isView(C))return d(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(ge(C,o)||C&&ge(C.buffer,o)||typeof a<"u"&&(ge(C,a)||C&&ge(C.buffer,a)))return S(C,y,E);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=C.valueOf&&C.valueOf();if(U!=null&&U!==C)return c.from(U,y,E);const W=g(C);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return c.from(C[Symbol.toPrimitive]("string"),y,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}c.from=function(C,y,E){return h(C,y,E)},Object.setPrototypeOf(c.prototype,n.prototype),Object.setPrototypeOf(c,n);function p(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function T(C,y,E){return p(C),C<=0?f(C):y!==void 0?typeof E=="string"?f(C).fill(y,E):f(C).fill(y):f(C)}c.alloc=function(C,y,E){return T(C,y,E)};function w(C){return p(C),f(C<0?0:b(C)|0)}c.allocUnsafe=function(C){return w(C)},c.allocUnsafeSlow=function(C){return w(C)};function m(C,y){if((typeof y!="string"||y==="")&&(y="utf8"),!c.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const E=N(C,y)|0;let U=f(E);const W=U.write(C,y);return W!==E&&(U=U.slice(0,W)),U}function O(C){const y=C.length<0?0:b(C.length)|0,E=f(y);for(let U=0;U<y;U+=1)E[U]=C[U]&255;return E}function d(C){if(ge(C,n)){const y=new n(C);return S(y.buffer,y.byteOffset,y.byteLength)}return O(C)}function S(C,y,E){if(y<0||C.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<y+(E||0))throw new RangeError('"length" is outside of buffer bounds');let U;return y===void 0&&E===void 0?U=new n(C):E===void 0?U=new n(C,y):U=new n(C,y,E),Object.setPrototypeOf(U,c.prototype),U}function g(C){if(c.isBuffer(C)){const y=b(C.length)|0,E=f(y);return E.length===0||C.copy(E,0,0,y),E}if(C.length!==void 0)return typeof C.length!="number"||ye(C.length)?f(0):O(C);if(C.type==="Buffer"&&Array.isArray(C.data))return O(C.data)}function b(C){if(C>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return C|0}function I(C){return+C!=C&&(C=0),c.alloc(+C)}c.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==c.prototype},c.compare=function(y,E){if(ge(y,n)&&(y=c.from(y,y.offset,y.byteLength)),ge(E,n)&&(E=c.from(E,E.offset,E.byteLength)),!c.isBuffer(y)||!c.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===E)return 0;let U=y.length,W=E.length;for(let se=0,ae=Math.min(U,W);se<ae;++se)if(y[se]!==E[se]){U=y[se],W=E[se];break}return U<W?-1:W<U?1:0},c.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(y,E){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return c.alloc(0);let U;if(E===void 0)for(E=0,U=0;U<y.length;++U)E+=y[U].length;const W=c.allocUnsafe(E);let se=0;for(U=0;U<y.length;++U){let ae=y[U];if(ge(ae,n))se+ae.length>W.length?(c.isBuffer(ae)||(ae=c.from(ae)),ae.copy(W,se)):n.prototype.set.call(W,ae,se);else if(c.isBuffer(ae))ae.copy(W,se);else throw new TypeError('"list" argument must be an Array of Buffers');se+=ae.length}return W};function N(C,y){if(c.isBuffer(C))return C.length;if(o.isView(C)||ge(C,o))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const E=C.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&E===0)return 0;let W=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return he(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return de(C).length;default:if(W)return U?-1:he(C).length;y=(""+y).toLowerCase(),W=!0}}c.byteLength=N;function q(C,y,E){let U=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,y>>>=0,E<=y))return"";for(C||(C="utf8");;)switch(C){case"hex":return te(this,y,E);case"utf8":case"utf-8":return ee(this,y,E);case"ascii":return ue(this,y,E);case"latin1":case"binary":return z(this,y,E);case"base64":return re(this,y,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,y,E);default:if(U)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),U=!0}}c.prototype._isBuffer=!0;function A(C,y,E){const U=C[y];C[y]=C[E],C[E]=U}c.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<y;E+=2)A(this,E,E+1);return this},c.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<y;E+=4)A(this,E,E+3),A(this,E+1,E+2);return this},c.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<y;E+=8)A(this,E,E+7),A(this,E+1,E+6),A(this,E+2,E+5),A(this,E+3,E+4);return this},c.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?ee(this,0,y):q.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(y){if(!c.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:c.compare(this,y)===0},c.prototype.inspect=function(){let y="";const E=e.INSPECT_MAX_BYTES;return y=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(y+=" ... "),"<Buffer "+y+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(y,E,U,W,se){if(ge(y,n)&&(y=c.from(y,y.offset,y.byteLength)),!c.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(E===void 0&&(E=0),U===void 0&&(U=y?y.length:0),W===void 0&&(W=0),se===void 0&&(se=this.length),E<0||U>y.length||W<0||se>this.length)throw new RangeError("out of range index");if(W>=se&&E>=U)return 0;if(W>=se)return-1;if(E>=U)return 1;if(E>>>=0,U>>>=0,W>>>=0,se>>>=0,this===y)return 0;let ae=se-W,_e=U-E;const Le=Math.min(ae,_e),Be=this.slice(W,se),Re=y.slice(E,U);for(let we=0;we<Le;++we)if(Be[we]!==Re[we]){ae=Be[we],_e=Re[we];break}return ae<_e?-1:_e<ae?1:0};function _(C,y,E,U,W){if(C.length===0)return-1;if(typeof E=="string"?(U=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,ye(E)&&(E=W?0:C.length-1),E<0&&(E=C.length+E),E>=C.length){if(W)return-1;E=C.length-1}else if(E<0)if(W)E=0;else return-1;if(typeof y=="string"&&(y=c.from(y,U)),c.isBuffer(y))return y.length===0?-1:B(C,y,E,U,W);if(typeof y=="number")return y=y&255,typeof n.prototype.indexOf=="function"?W?n.prototype.indexOf.call(C,y,E):n.prototype.lastIndexOf.call(C,y,E):B(C,[y],E,U,W);throw new TypeError("val must be string, number or Buffer")}function B(C,y,E,U,W){let se=1,ae=C.length,_e=y.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(C.length<2||y.length<2)return-1;se=2,ae/=2,_e/=2,E/=2}function Le(Re,we){return se===1?Re[we]:Re.readUInt16BE(we*se)}let Be;if(W){let Re=-1;for(Be=E;Be<ae;Be++)if(Le(C,Be)===Le(y,Re===-1?0:Be-Re)){if(Re===-1&&(Re=Be),Be-Re+1===_e)return Re*se}else Re!==-1&&(Be-=Be-Re),Re=-1}else for(E+_e>ae&&(E=ae-_e),Be=E;Be>=0;Be--){let Re=!0;for(let we=0;we<_e;we++)if(Le(C,Be+we)!==Le(y,we)){Re=!1;break}if(Re)return Be}return-1}c.prototype.includes=function(y,E,U){return this.indexOf(y,E,U)!==-1},c.prototype.indexOf=function(y,E,U){return _(this,y,E,U,!0)},c.prototype.lastIndexOf=function(y,E,U){return _(this,y,E,U,!1)};function $(C,y,E,U){E=Number(E)||0;const W=C.length-E;U?(U=Number(U),U>W&&(U=W)):U=W;const se=y.length;U>se/2&&(U=se/2);let ae;for(ae=0;ae<U;++ae){const _e=parseInt(y.substr(ae*2,2),16);if(ye(_e))return ae;C[E+ae]=_e}return ae}function X(C,y,E,U){return be(he(y,C.length-E),C,E,U)}function J(C,y,E,U){return be(ce(y),C,E,U)}function Y(C,y,E,U){return be(de(y),C,E,U)}function ne(C,y,E,U){return be(fe(y,C.length-E),C,E,U)}c.prototype.write=function(y,E,U,W){if(E===void 0)W="utf8",U=this.length,E=0;else if(U===void 0&&typeof E=="string")W=E,U=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(U)?(U=U>>>0,W===void 0&&(W="utf8")):(W=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const se=this.length-E;if((U===void 0||U>se)&&(U=se),y.length>0&&(U<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let ae=!1;for(;;)switch(W){case"hex":return $(this,y,E,U);case"utf8":case"utf-8":return X(this,y,E,U);case"ascii":case"latin1":case"binary":return J(this,y,E,U);case"base64":return Y(this,y,E,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,y,E,U);default:if(ae)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),ae=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function re(C,y,E){return y===0&&E===C.length?t.fromByteArray(C):t.fromByteArray(C.slice(y,E))}function ee(C,y,E){E=Math.min(C.length,E);const U=[];let W=y;for(;W<E;){const se=C[W];let ae=null,_e=se>239?4:se>223?3:se>191?2:1;if(W+_e<=E){let Le,Be,Re,we;switch(_e){case 1:se<128&&(ae=se);break;case 2:Le=C[W+1],(Le&192)===128&&(we=(se&31)<<6|Le&63,we>127&&(ae=we));break;case 3:Le=C[W+1],Be=C[W+2],(Le&192)===128&&(Be&192)===128&&(we=(se&15)<<12|(Le&63)<<6|Be&63,we>2047&&(we<55296||we>57343)&&(ae=we));break;case 4:Le=C[W+1],Be=C[W+2],Re=C[W+3],(Le&192)===128&&(Be&192)===128&&(Re&192)===128&&(we=(se&15)<<18|(Le&63)<<12|(Be&63)<<6|Re&63,we>65535&&we<1114112&&(ae=we))}}ae===null?(ae=65533,_e=1):ae>65535&&(ae-=65536,U.push(ae>>>10&1023|55296),ae=56320|ae&1023),U.push(ae),W+=_e}return pe(U)}const K=4096;function pe(C){const y=C.length;if(y<=K)return String.fromCharCode.apply(String,C);let E="",U=0;for(;U<y;)E+=String.fromCharCode.apply(String,C.slice(U,U+=K));return E}function ue(C,y,E){let U="";E=Math.min(C.length,E);for(let W=y;W<E;++W)U+=String.fromCharCode(C[W]&127);return U}function z(C,y,E){let U="";E=Math.min(C.length,E);for(let W=y;W<E;++W)U+=String.fromCharCode(C[W]);return U}function te(C,y,E){const U=C.length;(!y||y<0)&&(y=0),(!E||E<0||E>U)&&(E=U);let W="";for(let se=y;se<E;++se)W+=xe[C[se]];return W}function F(C,y,E){const U=C.slice(y,E);let W="";for(let se=0;se<U.length-1;se+=2)W+=String.fromCharCode(U[se]+U[se+1]*256);return W}c.prototype.slice=function(y,E){const U=this.length;y=~~y,E=E===void 0?U:~~E,y<0?(y+=U,y<0&&(y=0)):y>U&&(y=U),E<0?(E+=U,E<0&&(E=0)):E>U&&(E=U),E<y&&(E=y);const W=this.subarray(y,E);return Object.setPrototypeOf(W,c.prototype),W};function V(C,y,E){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+y>E)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(y,E,U){y=y>>>0,E=E>>>0,U||V(y,E,this.length);let W=this[y],se=1,ae=0;for(;++ae<E&&(se*=256);)W+=this[y+ae]*se;return W},c.prototype.readUintBE=c.prototype.readUIntBE=function(y,E,U){y=y>>>0,E=E>>>0,U||V(y,E,this.length);let W=this[y+--E],se=1;for(;E>0&&(se*=256);)W+=this[y+--E]*se;return W},c.prototype.readUint8=c.prototype.readUInt8=function(y,E){return y=y>>>0,E||V(y,1,this.length),this[y]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(y,E){return y=y>>>0,E||V(y,2,this.length),this[y]|this[y+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(y,E){return y=y>>>0,E||V(y,2,this.length),this[y]<<8|this[y+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(y,E){return y=y>>>0,E||V(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(y,E){return y=y>>>0,E||V(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},c.prototype.readBigUInt64LE=Te(function(y){y=y>>>0,Q(y,"offset");const E=this[y],U=this[y+7];(E===void 0||U===void 0)&&ie(y,this.length-8);const W=E+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,se=this[++y]+this[++y]*2**8+this[++y]*2**16+U*2**24;return BigInt(W)+(BigInt(se)<<BigInt(32))}),c.prototype.readBigUInt64BE=Te(function(y){y=y>>>0,Q(y,"offset");const E=this[y],U=this[y+7];(E===void 0||U===void 0)&&ie(y,this.length-8);const W=E*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],se=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+U;return(BigInt(W)<<BigInt(32))+BigInt(se)}),c.prototype.readIntLE=function(y,E,U){y=y>>>0,E=E>>>0,U||V(y,E,this.length);let W=this[y],se=1,ae=0;for(;++ae<E&&(se*=256);)W+=this[y+ae]*se;return se*=128,W>=se&&(W-=Math.pow(2,8*E)),W},c.prototype.readIntBE=function(y,E,U){y=y>>>0,E=E>>>0,U||V(y,E,this.length);let W=E,se=1,ae=this[y+--W];for(;W>0&&(se*=256);)ae+=this[y+--W]*se;return se*=128,ae>=se&&(ae-=Math.pow(2,8*E)),ae},c.prototype.readInt8=function(y,E){return y=y>>>0,E||V(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},c.prototype.readInt16LE=function(y,E){y=y>>>0,E||V(y,2,this.length);const U=this[y]|this[y+1]<<8;return U&32768?U|4294901760:U},c.prototype.readInt16BE=function(y,E){y=y>>>0,E||V(y,2,this.length);const U=this[y+1]|this[y]<<8;return U&32768?U|4294901760:U},c.prototype.readInt32LE=function(y,E){return y=y>>>0,E||V(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},c.prototype.readInt32BE=function(y,E){return y=y>>>0,E||V(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},c.prototype.readBigInt64LE=Te(function(y){y=y>>>0,Q(y,"offset");const E=this[y],U=this[y+7];(E===void 0||U===void 0)&&ie(y,this.length-8);const W=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(U<<24);return(BigInt(W)<<BigInt(32))+BigInt(E+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),c.prototype.readBigInt64BE=Te(function(y){y=y>>>0,Q(y,"offset");const E=this[y],U=this[y+7];(E===void 0||U===void 0)&&ie(y,this.length-8);const W=(E<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(W)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+U)}),c.prototype.readFloatLE=function(y,E){return y=y>>>0,E||V(y,4,this.length),i.read(this,y,!0,23,4)},c.prototype.readFloatBE=function(y,E){return y=y>>>0,E||V(y,4,this.length),i.read(this,y,!1,23,4)},c.prototype.readDoubleLE=function(y,E){return y=y>>>0,E||V(y,8,this.length),i.read(this,y,!0,52,8)},c.prototype.readDoubleBE=function(y,E){return y=y>>>0,E||V(y,8,this.length),i.read(this,y,!1,52,8)};function Z(C,y,E,U,W,se){if(!c.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>W||y<se)throw new RangeError('"value" argument is out of bounds');if(E+U>C.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(y,E,U,W){if(y=+y,E=E>>>0,U=U>>>0,!W){const _e=Math.pow(2,8*U)-1;Z(this,y,E,U,_e,0)}let se=1,ae=0;for(this[E]=y&255;++ae<U&&(se*=256);)this[E+ae]=y/se&255;return E+U},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(y,E,U,W){if(y=+y,E=E>>>0,U=U>>>0,!W){const _e=Math.pow(2,8*U)-1;Z(this,y,E,U,_e,0)}let se=U-1,ae=1;for(this[E+se]=y&255;--se>=0&&(ae*=256);)this[E+se]=y/ae&255;return E+U},c.prototype.writeUint8=c.prototype.writeUInt8=function(y,E,U){return y=+y,E=E>>>0,U||Z(this,y,E,1,255,0),this[E]=y&255,E+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(y,E,U){return y=+y,E=E>>>0,U||Z(this,y,E,2,65535,0),this[E]=y&255,this[E+1]=y>>>8,E+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(y,E,U){return y=+y,E=E>>>0,U||Z(this,y,E,2,65535,0),this[E]=y>>>8,this[E+1]=y&255,E+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(y,E,U){return y=+y,E=E>>>0,U||Z(this,y,E,4,4294967295,0),this[E+3]=y>>>24,this[E+2]=y>>>16,this[E+1]=y>>>8,this[E]=y&255,E+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(y,E,U){return y=+y,E=E>>>0,U||Z(this,y,E,4,4294967295,0),this[E]=y>>>24,this[E+1]=y>>>16,this[E+2]=y>>>8,this[E+3]=y&255,E+4};function M(C,y,E,U,W){G(y,U,W,C,E,7);let se=Number(y&BigInt(4294967295));C[E++]=se,se=se>>8,C[E++]=se,se=se>>8,C[E++]=se,se=se>>8,C[E++]=se;let ae=Number(y>>BigInt(32)&BigInt(4294967295));return C[E++]=ae,ae=ae>>8,C[E++]=ae,ae=ae>>8,C[E++]=ae,ae=ae>>8,C[E++]=ae,E}function x(C,y,E,U,W){G(y,U,W,C,E,7);let se=Number(y&BigInt(4294967295));C[E+7]=se,se=se>>8,C[E+6]=se,se=se>>8,C[E+5]=se,se=se>>8,C[E+4]=se;let ae=Number(y>>BigInt(32)&BigInt(4294967295));return C[E+3]=ae,ae=ae>>8,C[E+2]=ae,ae=ae>>8,C[E+1]=ae,ae=ae>>8,C[E]=ae,E+8}c.prototype.writeBigUInt64LE=Te(function(y,E=0){return M(this,y,E,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Te(function(y,E=0){return x(this,y,E,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(y,E,U,W){if(y=+y,E=E>>>0,!W){const Le=Math.pow(2,8*U-1);Z(this,y,E,U,Le-1,-Le)}let se=0,ae=1,_e=0;for(this[E]=y&255;++se<U&&(ae*=256);)y<0&&_e===0&&this[E+se-1]!==0&&(_e=1),this[E+se]=(y/ae>>0)-_e&255;return E+U},c.prototype.writeIntBE=function(y,E,U,W){if(y=+y,E=E>>>0,!W){const Le=Math.pow(2,8*U-1);Z(this,y,E,U,Le-1,-Le)}let se=U-1,ae=1,_e=0;for(this[E+se]=y&255;--se>=0&&(ae*=256);)y<0&&_e===0&&this[E+se+1]!==0&&(_e=1),this[E+se]=(y/ae>>0)-_e&255;return E+U},c.prototype.writeInt8=function(y,E,U){return y=+y,E=E>>>0,U||Z(this,y,E,1,127,-128),y<0&&(y=255+y+1),this[E]=y&255,E+1},c.prototype.writeInt16LE=function(y,E,U){return y=+y,E=E>>>0,U||Z(this,y,E,2,32767,-32768),this[E]=y&255,this[E+1]=y>>>8,E+2},c.prototype.writeInt16BE=function(y,E,U){return y=+y,E=E>>>0,U||Z(this,y,E,2,32767,-32768),this[E]=y>>>8,this[E+1]=y&255,E+2},c.prototype.writeInt32LE=function(y,E,U){return y=+y,E=E>>>0,U||Z(this,y,E,4,2147483647,-2147483648),this[E]=y&255,this[E+1]=y>>>8,this[E+2]=y>>>16,this[E+3]=y>>>24,E+4},c.prototype.writeInt32BE=function(y,E,U){return y=+y,E=E>>>0,U||Z(this,y,E,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[E]=y>>>24,this[E+1]=y>>>16,this[E+2]=y>>>8,this[E+3]=y&255,E+4},c.prototype.writeBigInt64LE=Te(function(y,E=0){return M(this,y,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Te(function(y,E=0){return x(this,y,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function v(C,y,E,U,W,se){if(E+U>C.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function j(C,y,E,U,W){return y=+y,E=E>>>0,W||v(C,y,E,4),i.write(C,y,E,U,23,4),E+4}c.prototype.writeFloatLE=function(y,E,U){return j(this,y,E,!0,U)},c.prototype.writeFloatBE=function(y,E,U){return j(this,y,E,!1,U)};function L(C,y,E,U,W){return y=+y,E=E>>>0,W||v(C,y,E,8),i.write(C,y,E,U,52,8),E+8}c.prototype.writeDoubleLE=function(y,E,U){return L(this,y,E,!0,U)},c.prototype.writeDoubleBE=function(y,E,U){return L(this,y,E,!1,U)},c.prototype.copy=function(y,E,U,W){if(!c.isBuffer(y))throw new TypeError("argument should be a Buffer");if(U||(U=0),!W&&W!==0&&(W=this.length),E>=y.length&&(E=y.length),E||(E=0),W>0&&W<U&&(W=U),W===U||y.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),y.length-E<W-U&&(W=y.length-E+U);const se=W-U;return this===y&&typeof n.prototype.copyWithin=="function"?this.copyWithin(E,U,W):n.prototype.set.call(y,this.subarray(U,W),E),se},c.prototype.fill=function(y,E,U,W){if(typeof y=="string"){if(typeof E=="string"?(W=E,E=0,U=this.length):typeof U=="string"&&(W=U,U=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!c.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(y.length===1){const ae=y.charCodeAt(0);(W==="utf8"&&ae<128||W==="latin1")&&(y=ae)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(E<0||this.length<E||this.length<U)throw new RangeError("Out of range index");if(U<=E)return this;E=E>>>0,U=U===void 0?this.length:U>>>0,y||(y=0);let se;if(typeof y=="number")for(se=E;se<U;++se)this[se]=y;else{const ae=c.isBuffer(y)?y:c.from(y,W),_e=ae.length;if(_e===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(se=0;se<U-E;++se)this[se+E]=ae[se%_e]}return this};const R={};function D(C,y,E){R[C]=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}D("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),D("ERR_INVALID_ARG_TYPE",function(C,y){return`The "${C}" argument must be of type number. Received type ${typeof y}`},TypeError),D("ERR_OUT_OF_RANGE",function(C,y,E){let U=`The value of "${C}" is out of range.`,W=E;return Number.isInteger(E)&&Math.abs(E)>2**32?W=k(String(E)):typeof E=="bigint"&&(W=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(W=k(W)),W+="n"),U+=` It must be ${y}. Received ${W}`,U},RangeError);function k(C){let y="",E=C.length;const U=C[0]==="-"?1:0;for(;E>=U+4;E-=3)y=`_${C.slice(E-3,E)}${y}`;return`${C.slice(0,E)}${y}`}function P(C,y,E){Q(y,"offset"),(C[y]===void 0||C[y+E]===void 0)&&ie(y,C.length-(E+1))}function G(C,y,E,U,W,se){if(C>E||C<y){const ae=typeof y=="bigint"?"n":"";let _e;throw y===0||y===BigInt(0)?_e=`>= 0${ae} and < 2${ae} ** ${(se+1)*8}${ae}`:_e=`>= -(2${ae} ** ${(se+1)*8-1}${ae}) and < 2 ** ${(se+1)*8-1}${ae}`,new R.ERR_OUT_OF_RANGE("value",_e,C)}P(U,W,se)}function Q(C,y){if(typeof C!="number")throw new R.ERR_INVALID_ARG_TYPE(y,"number",C)}function ie(C,y,E){throw Math.floor(C)!==C?(Q(C,E),new R.ERR_OUT_OF_RANGE("offset","an integer",C)):y<0?new R.ERR_BUFFER_OUT_OF_BOUNDS:new R.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,C)}const le=/[^+/0-9A-Za-z-_]/g;function H(C){if(C=C.split("=")[0],C=C.trim().replace(le,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function he(C,y){y=y||1/0;let E;const U=C.length;let W=null;const se=[];for(let ae=0;ae<U;++ae){if(E=C.charCodeAt(ae),E>55295&&E<57344){if(!W){if(E>56319){(y-=3)>-1&&se.push(239,191,189);continue}else if(ae+1===U){(y-=3)>-1&&se.push(239,191,189);continue}W=E;continue}if(E<56320){(y-=3)>-1&&se.push(239,191,189),W=E;continue}E=(W-55296<<10|E-56320)+65536}else W&&(y-=3)>-1&&se.push(239,191,189);if(W=null,E<128){if((y-=1)<0)break;se.push(E)}else if(E<2048){if((y-=2)<0)break;se.push(E>>6|192,E&63|128)}else if(E<65536){if((y-=3)<0)break;se.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((y-=4)<0)break;se.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return se}function ce(C){const y=[];for(let E=0;E<C.length;++E)y.push(C.charCodeAt(E)&255);return y}function fe(C,y){let E,U,W;const se=[];for(let ae=0;ae<C.length&&!((y-=2)<0);++ae)E=C.charCodeAt(ae),U=E>>8,W=E%256,se.push(W),se.push(U);return se}function de(C){return t.toByteArray(H(C))}function be(C,y,E,U){let W;for(W=0;W<U&&!(W+E>=y.length||W>=C.length);++W)y[W+E]=C[W];return W}function ge(C,y){return C instanceof y||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===y.name}function ye(C){return C!==C}const xe=function(){const C="0123456789abcdef",y=new Array(256);for(let E=0;E<16;++E){const U=E*16;for(let W=0;W<16;++W)y[U+W]=C[E]+C[W]}return y}();function Te(C){return typeof BigInt>"u"?Oe:C}function Oe(){throw new Error("BigInt not supported")}})(Ge);const Ci=Ge.Buffer,Rh=Ge.Blob,Ch=Ge.BlobOptions,kh=Ge.Buffer,Dh=Ge.File,Ph=Ge.FileOptions,Lh=Ge.INSPECT_MAX_BYTES,Bh=Ge.SlowBuffer,Fh=Ge.TranscodeEncoding,Uh=Ge.atob,Mh=Ge.btoa,jh=Ge.constants,qh=Ge.isAscii,$h=Ge.isUtf8,Gh=Ge.kMaxLength,Vh=Ge.kStringMaxLength,Hh=Ge.resolveObjectURL,zh=Ge.transcode,Xh=Object.freeze(Object.defineProperty({__proto__:null,Blob:Rh,BlobOptions:Ch,Buffer:kh,File:Dh,FileOptions:Ph,INSPECT_MAX_BYTES:Lh,SlowBuffer:Bh,TranscodeEncoding:Fh,atob:Uh,btoa:Mh,constants:jh,default:Ci,isAscii:qh,isUtf8:$h,kMaxLength:Gh,kStringMaxLength:Vh,resolveObjectURL:Hh,transcode:zh},Symbol.toStringTag,{value:"Module"}));var uu={},tr={exports:{}},qo;function jn(){if(qo)return tr.exports;qo=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(I,N,q){return Function.prototype.apply.call(I,N,q)},i;e&&typeof e.ownKeys=="function"?i=e.ownKeys:Object.getOwnPropertySymbols?i=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:i=function(I){return Object.getOwnPropertyNames(I)};function r(b){console&&console.warn&&console.warn(b)}var s=Number.isNaN||function(I){return I!==I};function n(){n.init.call(this)}tr.exports=n,tr.exports.once=d,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var o=10;function a(b){if(typeof b!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(b){if(typeof b!="number"||b<0||s(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");o=b}}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||s(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function u(b){return b._maxListeners===void 0?n.defaultMaxListeners:b._maxListeners}n.prototype.getMaxListeners=function(){return u(this)},n.prototype.emit=function(I){for(var N=[],q=1;q<arguments.length;q++)N.push(arguments[q]);var A=I==="error",_=this._events;if(_!==void 0)A=A&&_.error===void 0;else if(!A)return!1;if(A){var B;if(N.length>0&&(B=N[0]),B instanceof Error)throw B;var $=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw $.context=B,$}var X=_[I];if(X===void 0)return!1;if(typeof X=="function")t(X,this,N);else for(var J=X.length,Y=w(X,J),q=0;q<J;++q)t(Y[q],this,N);return!0};function f(b,I,N,q){var A,_,B;if(a(N),_=b._events,_===void 0?(_=b._events=Object.create(null),b._eventsCount=0):(_.newListener!==void 0&&(b.emit("newListener",I,N.listener?N.listener:N),_=b._events),B=_[I]),B===void 0)B=_[I]=N,++b._eventsCount;else if(typeof B=="function"?B=_[I]=q?[N,B]:[B,N]:q?B.unshift(N):B.push(N),A=u(b),A>0&&B.length>A&&!B.warned){B.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=b,$.type=I,$.count=B.length,r($)}return b}n.prototype.addListener=function(I,N){return f(this,I,N,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(I,N){return f(this,I,N,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(b,I,N){var q={fired:!1,wrapFn:void 0,target:b,type:I,listener:N},A=c.bind(q);return A.listener=N,q.wrapFn=A,A}n.prototype.once=function(I,N){return a(N),this.on(I,h(this,I,N)),this},n.prototype.prependOnceListener=function(I,N){return a(N),this.prependListener(I,h(this,I,N)),this},n.prototype.removeListener=function(I,N){var q,A,_,B,$;if(a(N),A=this._events,A===void 0)return this;if(q=A[I],q===void 0)return this;if(q===N||q.listener===N)--this._eventsCount===0?this._events=Object.create(null):(delete A[I],A.removeListener&&this.emit("removeListener",I,q.listener||N));else if(typeof q!="function"){for(_=-1,B=q.length-1;B>=0;B--)if(q[B]===N||q[B].listener===N){$=q[B].listener,_=B;break}if(_<0)return this;_===0?q.shift():m(q,_),q.length===1&&(A[I]=q[0]),A.removeListener!==void 0&&this.emit("removeListener",I,$||N)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(I){var N,q,A;if(q=this._events,q===void 0)return this;if(q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):q[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete q[I]),this;if(arguments.length===0){var _=Object.keys(q),B;for(A=0;A<_.length;++A)B=_[A],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(N=q[I],typeof N=="function")this.removeListener(I,N);else if(N!==void 0)for(A=N.length-1;A>=0;A--)this.removeListener(I,N[A]);return this};function p(b,I,N){var q=b._events;if(q===void 0)return[];var A=q[I];return A===void 0?[]:typeof A=="function"?N?[A.listener||A]:[A]:N?O(A):w(A,A.length)}n.prototype.listeners=function(I){return p(this,I,!0)},n.prototype.rawListeners=function(I){return p(this,I,!1)},n.listenerCount=function(b,I){return typeof b.listenerCount=="function"?b.listenerCount(I):T.call(b,I)},n.prototype.listenerCount=T;function T(b){var I=this._events;if(I!==void 0){var N=I[b];if(typeof N=="function")return 1;if(N!==void 0)return N.length}return 0}n.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function w(b,I){for(var N=new Array(I),q=0;q<I;++q)N[q]=b[q];return N}function m(b,I){for(;I+1<b.length;I++)b[I]=b[I+1];b.pop()}function O(b){for(var I=new Array(b.length),N=0;N<I.length;++N)I[N]=b[N].listener||b[N];return I}function d(b,I){return new Promise(function(N,q){function A(B){b.removeListener(I,_),q(B)}function _(){typeof b.removeListener=="function"&&b.removeListener("error",A),N([].slice.call(arguments))}g(b,I,_,{once:!0}),I!=="error"&&S(b,A,{once:!0})})}function S(b,I,N){typeof b.on=="function"&&g(b,"error",I,N)}function g(b,I,N,q){if(typeof b.on=="function")q.once?b.once(I,N):b.on(I,N);else if(typeof b.addEventListener=="function")b.addEventListener(I,function A(_){q.once&&b.removeEventListener(I,A),N(_)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b)}return tr.exports}var ir={exports:{}},$o;function ii(){return $o||($o=1,typeof Object.create=="function"?ir.exports=function(t,i){i&&(t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ir.exports=function(t,i){if(i){t.super_=i;var r=function(){};r.prototype=i.prototype,t.prototype=new r,t.prototype.constructor=t}}),ir.exports}function Wh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fu={exports:{}},je=fu.exports={},bt,yt;function un(){throw new Error("setTimeout has not been defined")}function fn(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?bt=setTimeout:bt=un}catch{bt=un}try{typeof clearTimeout=="function"?yt=clearTimeout:yt=fn}catch{yt=fn}})();function cu(e){if(bt===setTimeout)return setTimeout(e,0);if((bt===un||!bt)&&setTimeout)return bt=setTimeout,setTimeout(e,0);try{return bt(e,0)}catch{try{return bt.call(null,e,0)}catch{return bt.call(this,e,0)}}}function Kh(e){if(yt===clearTimeout)return clearTimeout(e);if((yt===fn||!yt)&&clearTimeout)return yt=clearTimeout,clearTimeout(e);try{return yt(e)}catch{try{return yt.call(null,e)}catch{return yt.call(this,e)}}}var Nt=[],hi=!1,Yt,pr=-1;function Jh(){!hi||!Yt||(hi=!1,Yt.length?Nt=Yt.concat(Nt):pr=-1,Nt.length&&pu())}function pu(){if(!hi){var e=cu(Jh);hi=!0;for(var t=Nt.length;t;){for(Yt=Nt,Nt=[];++pr<t;)Yt&&Yt[pr].run();pr=-1,t=Nt.length}Yt=null,hi=!1,Kh(e)}}je.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];Nt.push(new hu(e,t)),Nt.length===1&&!hi&&cu(pu)};function hu(e,t){this.fun=e,this.array=t}hu.prototype.run=function(){this.fun.apply(null,this.array)};je.title="browser";je.browser=!0;je.env={};je.argv=[];je.version="";je.versions={};function Ct(){}je.on=Ct;je.addListener=Ct;je.once=Ct;je.off=Ct;je.removeListener=Ct;je.removeAllListeners=Ct;je.emit=Ct;je.prependListener=Ct;je.prependOnceListener=Ct;je.listeners=function(e){return[]};je.binding=function(e){throw new Error("process.binding is not supported")};je.cwd=function(){return"/"};je.chdir=function(e){throw new Error("process.chdir is not supported")};je.umask=function(){return 0};var Yh=fu.exports;const Ne=Wh(Yh);var Qr,Go;function du(){return Go||(Go=1,Qr=jn().EventEmitter),Qr}const Pr=xh(Xh);var Zr={},es={},ts,Vo;function gu(){return Vo||(Vo=1,ts=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},i=Symbol("test"),r=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var s=42;t[i]=s;for(i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var n=Object.getOwnPropertySymbols(t);if(n.length!==1||n[0]!==i||!Object.prototype.propertyIsEnumerable.call(t,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,i);if(o.value!==s||o.enumerable!==!0)return!1}return!0}),ts}var is,Ho;function qn(){if(Ho)return is;Ho=1;var e=gu();return is=function(){return e()&&!!Symbol.toStringTag},is}var rs,zo;function Qh(){return zo||(zo=1,rs=Error),rs}var ss,Xo;function Zh(){return Xo||(Xo=1,ss=EvalError),ss}var ns,Wo;function ed(){return Wo||(Wo=1,ns=RangeError),ns}var os,Ko;function td(){return Ko||(Ko=1,os=ReferenceError),os}var as,Jo;function mu(){return Jo||(Jo=1,as=SyntaxError),as}var ls,Yo;function Lr(){return Yo||(Yo=1,ls=TypeError),ls}var us,Qo;function id(){return Qo||(Qo=1,us=URIError),us}var fs,Zo;function rd(){if(Zo)return fs;Zo=1;var e=typeof Symbol<"u"&&Symbol,t=gu();return fs=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},fs}var cs,ea;function sd(){if(ea)return cs;ea=1;var e={__proto__:null,foo:{}},t=Object;return cs=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof t)},cs}var ps,ta;function nd(){if(ta)return ps;ta=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,i=Math.max,r="[object Function]",s=function(u,f){for(var c=[],h=0;h<u.length;h+=1)c[h]=u[h];for(var p=0;p<f.length;p+=1)c[p+u.length]=f[p];return c},n=function(u,f){for(var c=[],h=f,p=0;h<u.length;h+=1,p+=1)c[p]=u[h];return c},o=function(a,u){for(var f="",c=0;c<a.length;c+=1)f+=a[c],c+1<a.length&&(f+=u);return f};return ps=function(u){var f=this;if(typeof f!="function"||t.apply(f)!==r)throw new TypeError(e+f);for(var c=n(arguments,1),h,p=function(){if(this instanceof h){var d=f.apply(this,s(c,arguments));return Object(d)===d?d:this}return f.apply(u,s(c,arguments))},T=i(0,f.length-c.length),w=[],m=0;m<T;m++)w[m]="$"+m;if(h=Function("binder","return function ("+o(w,",")+"){ return binder.apply(this,arguments); }")(p),f.prototype){var O=function(){};O.prototype=f.prototype,h.prototype=new O,O.prototype=null}return h},ps}var hs,ia;function $n(){if(ia)return hs;ia=1;var e=nd();return hs=Function.prototype.bind||e,hs}var ds,ra;function od(){if(ra)return ds;ra=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,i=$n();return ds=i.call(e,t),ds}var gs,sa;function Gi(){if(sa)return gs;sa=1;var e,t=Qh(),i=Zh(),r=ed(),s=td(),n=mu(),o=Lr(),a=id(),u=Function,f=function(ee){try{return u('"use strict"; return ('+ee+").constructor;")()}catch{}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch{c=null}var h=function(){throw new o},p=c?function(){try{return arguments.callee,h}catch{try{return c(arguments,"callee").get}catch{return h}}}():h,T=rd()(),w=sd()(),m=Object.getPrototypeOf||(w?function(ee){return ee.__proto__}:null),O={},d=typeof Uint8Array>"u"||!m?e:m(Uint8Array),S={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":T&&m?m([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":i,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":u,"%GeneratorFunction%":O,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":T&&m?m(m([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!T||!m?e:m(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":r,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!T||!m?e:m(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":T&&m?m(""[Symbol.iterator]()):e,"%Symbol%":T?Symbol:e,"%SyntaxError%":n,"%ThrowTypeError%":p,"%TypedArray%":d,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet};if(m)try{null.error}catch(ee){var g=m(m(ee));S["%Error.prototype%"]=g}var b=function ee(K){var pe;if(K==="%AsyncFunction%")pe=f("async function () {}");else if(K==="%GeneratorFunction%")pe=f("function* () {}");else if(K==="%AsyncGeneratorFunction%")pe=f("async function* () {}");else if(K==="%AsyncGenerator%"){var ue=ee("%AsyncGeneratorFunction%");ue&&(pe=ue.prototype)}else if(K==="%AsyncIteratorPrototype%"){var z=ee("%AsyncGenerator%");z&&m&&(pe=m(z.prototype))}return S[K]=pe,pe},I={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},N=$n(),q=od(),A=N.call(Function.call,Array.prototype.concat),_=N.call(Function.apply,Array.prototype.splice),B=N.call(Function.call,String.prototype.replace),$=N.call(Function.call,String.prototype.slice),X=N.call(Function.call,RegExp.prototype.exec),J=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Y=/\\(\\)?/g,ne=function(K){var pe=$(K,0,1),ue=$(K,-1);if(pe==="%"&&ue!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(ue==="%"&&pe!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var z=[];return B(K,J,function(te,F,V,Z){z[z.length]=V?B(Z,Y,"$1"):F||te}),z},re=function(K,pe){var ue=K,z;if(q(I,ue)&&(z=I[ue],ue="%"+z[0]+"%"),q(S,ue)){var te=S[ue];if(te===O&&(te=b(ue)),typeof te>"u"&&!pe)throw new o("intrinsic "+K+" exists, but is not available. Please file an issue!");return{alias:z,name:ue,value:te}}throw new n("intrinsic "+K+" does not exist!")};return gs=function(K,pe){if(typeof K!="string"||K.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof pe!="boolean")throw new o('"allowMissing" argument must be a boolean');if(X(/^%?[^%]*%?$/,K)===null)throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var ue=ne(K),z=ue.length>0?ue[0]:"",te=re("%"+z+"%",pe),F=te.name,V=te.value,Z=!1,M=te.alias;M&&(z=M[0],_(ue,A([0,1],M)));for(var x=1,v=!0;x<ue.length;x+=1){var j=ue[x],L=$(j,0,1),R=$(j,-1);if((L==='"'||L==="'"||L==="`"||R==='"'||R==="'"||R==="`")&&L!==R)throw new n("property names with quotes must have matching quotes");if((j==="constructor"||!v)&&(Z=!0),z+="."+j,F="%"+z+"%",q(S,F))V=S[F];else if(V!=null){if(!(j in V)){if(!pe)throw new o("base intrinsic for "+K+" exists, but the property is not available.");return}if(c&&x+1>=ue.length){var D=c(V,j);v=!!D,v&&"get"in D&&!("originalValue"in D.get)?V=D.get:V=V[j]}else v=q(V,j),V=V[j];v&&!Z&&(S[F]=V)}}return V},gs}var ms={exports:{}},bs,na;function Gn(){if(na)return bs;na=1;var e=Gi(),t=e("%Object.defineProperty%",!0)||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return bs=t,bs}var ys,oa;function Vn(){if(oa)return ys;oa=1;var e=Gi(),t=e("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}return ys=t,ys}var _s,aa;function ad(){if(aa)return _s;aa=1;var e=Gn(),t=mu(),i=Lr(),r=Vn();return _s=function(n,o,a){if(!n||typeof n!="object"&&typeof n!="function")throw new i("`obj` must be an object or a function`");if(typeof o!="string"&&typeof o!="symbol")throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new i("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,p=!!r&&r(n,o);if(e)e(n,o,{configurable:c===null&&p?p.configurable:!c,enumerable:u===null&&p?p.enumerable:!u,value:a,writable:f===null&&p?p.writable:!f});else if(h||!u&&!f&&!c)n[o]=a;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},_s}var vs,la;function ld(){if(la)return vs;la=1;var e=Gn(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},vs=t,vs}var xs,ua;function ud(){if(ua)return xs;ua=1;var e=Gi(),t=ad(),i=ld()(),r=Vn(),s=Lr(),n=e("%Math.floor%");return xs=function(a,u){if(typeof a!="function")throw new s("`fn` is not a function");if(typeof u!="number"||u<0||u>4294967295||n(u)!==u)throw new s("`length` must be a positive 32-bit integer");var f=arguments.length>2&&!!arguments[2],c=!0,h=!0;if("length"in a&&r){var p=r(a,"length");p&&!p.configurable&&(c=!1),p&&!p.writable&&(h=!1)}return(c||h||!f)&&(i?t(a,"length",u,!0,!0):t(a,"length",u)),a},xs}var fa;function bu(){return fa||(fa=1,function(e){var t=$n(),i=Gi(),r=ud(),s=Lr(),n=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||t.call(o,n),u=Gn(),f=i("%Math.max%");e.exports=function(p){if(typeof p!="function")throw new s("a function is required");var T=a(t,o,arguments);return r(T,1+f(0,p.length-(arguments.length-1)),!0)};var c=function(){return a(t,n,arguments)};u?u(e.exports,"apply",{value:c}):e.exports.apply=c}(ms)),ms.exports}var Es,ca;function yu(){if(ca)return Es;ca=1;var e=Gi(),t=bu(),i=t(e("String.prototype.indexOf"));return Es=function(s,n){var o=e(s,!!n);return typeof o=="function"&&i(s,".prototype.")>-1?t(o):o},Es}var Ts,pa;function fd(){if(pa)return Ts;pa=1;var e=qn()(),t=yu(),i=t("Object.prototype.toString"),r=function(a){return e&&a&&typeof a=="object"&&Symbol.toStringTag in a?!1:i(a)==="[object Arguments]"},s=function(a){return r(a)?!0:a!==null&&typeof a=="object"&&typeof a.length=="number"&&a.length>=0&&i(a)!=="[object Array]"&&i(a.callee)==="[object Function]"},n=function(){return r(arguments)}();return r.isLegacyArguments=s,Ts=n?r:s,Ts}var Ss,ha;function cd(){if(ha)return Ss;ha=1;var e=Object.prototype.toString,t=Function.prototype.toString,i=/^\s*(?:function)?\*/,r=qn()(),s=Object.getPrototypeOf,n=function(){if(!r)return!1;try{return Function("return function*() {}")()}catch{}},o;return Ss=function(u){if(typeof u!="function")return!1;if(i.test(t.call(u)))return!0;if(!r){var f=e.call(u);return f==="[object GeneratorFunction]"}if(!s)return!1;if(typeof o>"u"){var c=n();o=c?s(c):!1}return s(u)===o},Ss}var As,da;function pd(){if(da)return As;da=1;var e=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,i,r;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{i=Object.defineProperty({},"length",{get:function(){throw r}}),r={},t(function(){throw 42},null,i)}catch(S){S!==r&&(t=null)}else t=null;var s=/^\s*class\b/,n=function(g){try{var b=e.call(g);return s.test(b)}catch{return!1}},o=function(g){try{return n(g)?!1:(e.call(g),!0)}catch{return!1}},a=Object.prototype.toString,u="[object Object]",f="[object Function]",c="[object GeneratorFunction]",h="[object HTMLAllCollection]",p="[object HTML document.all class]",T="[object HTMLCollection]",w=typeof Symbol=="function"&&!!Symbol.toStringTag,m=!(0 in[,]),O=function(){return!1};if(typeof document=="object"){var d=document.all;a.call(d)===a.call(document.all)&&(O=function(g){if((m||!g)&&(typeof g>"u"||typeof g=="object"))try{var b=a.call(g);return(b===h||b===p||b===T||b===u)&&g("")==null}catch{}return!1})}return As=t?function(g){if(O(g))return!0;if(!g||typeof g!="function"&&typeof g!="object")return!1;try{t(g,null,i)}catch(b){if(b!==r)return!1}return!n(g)&&o(g)}:function(g){if(O(g))return!0;if(!g||typeof g!="function"&&typeof g!="object")return!1;if(w)return o(g);if(n(g))return!1;var b=a.call(g);return b!==f&&b!==c&&!/^\[object HTML/.test(b)?!1:o(g)},As}var ws,ga;function hd(){if(ga)return ws;ga=1;var e=pd(),t=Object.prototype.toString,i=Object.prototype.hasOwnProperty,r=function(u,f,c){for(var h=0,p=u.length;h<p;h++)i.call(u,h)&&(c==null?f(u[h],h,u):f.call(c,u[h],h,u))},s=function(u,f,c){for(var h=0,p=u.length;h<p;h++)c==null?f(u.charAt(h),h,u):f.call(c,u.charAt(h),h,u)},n=function(u,f,c){for(var h in u)i.call(u,h)&&(c==null?f(u[h],h,u):f.call(c,u[h],h,u))},o=function(u,f,c){if(!e(f))throw new TypeError("iterator must be a function");var h;arguments.length>=3&&(h=c),t.call(u)==="[object Array]"?r(u,f,h):typeof u=="string"?s(u,f,h):n(u,f,h)};return ws=o,ws}var Os,ma;function dd(){return ma||(ma=1,Os=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),Os}var Ns,ba;function gd(){if(ba)return Ns;ba=1;var e=dd(),t=typeof globalThis>"u"?Vt:globalThis;return Ns=function(){for(var r=[],s=0;s<e.length;s++)typeof t[e[s]]=="function"&&(r[r.length]=e[s]);return r},Ns}var Is,ya;function _u(){if(ya)return Is;ya=1;var e=hd(),t=gd(),i=bu(),r=yu(),s=Vn(),n=r("Object.prototype.toString"),o=qn()(),a=typeof globalThis>"u"?Vt:globalThis,u=t(),f=r("String.prototype.slice"),c=Object.getPrototypeOf,h=r("Array.prototype.indexOf",!0)||function(O,d){for(var S=0;S<O.length;S+=1)if(O[S]===d)return S;return-1},p={__proto__:null};o&&s&&c?e(u,function(m){var O=new a[m];if(Symbol.toStringTag in O){var d=c(O),S=s(d,Symbol.toStringTag);if(!S){var g=c(d);S=s(g,Symbol.toStringTag)}p["$"+m]=i(S.get)}}):e(u,function(m){var O=new a[m],d=O.slice||O.set;d&&(p["$"+m]=i(d))});var T=function(O){var d=!1;return e(p,function(S,g){if(!d)try{"$"+S(O)===g&&(d=f(g,1))}catch{}}),d},w=function(O){var d=!1;return e(p,function(S,g){if(!d)try{S(O),d=f(g,1)}catch{}}),d};return Is=function(O){if(!O||typeof O!="object")return!1;if(!o){var d=f(n(O),8,-1);return h(u,d)>-1?d:d!=="Object"?!1:w(O)}return s?T(O):null},Is}var Rs,_a;function md(){if(_a)return Rs;_a=1;var e=_u();return Rs=function(i){return!!e(i)},Rs}var va;function bd(){return va||(va=1,function(e){var t=fd(),i=cd(),r=_u(),s=md();function n(H){return H.call.bind(H)}var o=typeof BigInt<"u",a=typeof Symbol<"u",u=n(Object.prototype.toString),f=n(Number.prototype.valueOf),c=n(String.prototype.valueOf),h=n(Boolean.prototype.valueOf);if(o)var p=n(BigInt.prototype.valueOf);if(a)var T=n(Symbol.prototype.valueOf);function w(H,he){if(typeof H!="object")return!1;try{return he(H),!0}catch{return!1}}e.isArgumentsObject=t,e.isGeneratorFunction=i,e.isTypedArray=s;function m(H){return typeof Promise<"u"&&H instanceof Promise||H!==null&&typeof H=="object"&&typeof H.then=="function"&&typeof H.catch=="function"}e.isPromise=m;function O(H){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(H):s(H)||F(H)}e.isArrayBufferView=O;function d(H){return r(H)==="Uint8Array"}e.isUint8Array=d;function S(H){return r(H)==="Uint8ClampedArray"}e.isUint8ClampedArray=S;function g(H){return r(H)==="Uint16Array"}e.isUint16Array=g;function b(H){return r(H)==="Uint32Array"}e.isUint32Array=b;function I(H){return r(H)==="Int8Array"}e.isInt8Array=I;function N(H){return r(H)==="Int16Array"}e.isInt16Array=N;function q(H){return r(H)==="Int32Array"}e.isInt32Array=q;function A(H){return r(H)==="Float32Array"}e.isFloat32Array=A;function _(H){return r(H)==="Float64Array"}e.isFloat64Array=_;function B(H){return r(H)==="BigInt64Array"}e.isBigInt64Array=B;function $(H){return r(H)==="BigUint64Array"}e.isBigUint64Array=$;function X(H){return u(H)==="[object Map]"}X.working=typeof Map<"u"&&X(new Map);function J(H){return typeof Map>"u"?!1:X.working?X(H):H instanceof Map}e.isMap=J;function Y(H){return u(H)==="[object Set]"}Y.working=typeof Set<"u"&&Y(new Set);function ne(H){return typeof Set>"u"?!1:Y.working?Y(H):H instanceof Set}e.isSet=ne;function re(H){return u(H)==="[object WeakMap]"}re.working=typeof WeakMap<"u"&&re(new WeakMap);function ee(H){return typeof WeakMap>"u"?!1:re.working?re(H):H instanceof WeakMap}e.isWeakMap=ee;function K(H){return u(H)==="[object WeakSet]"}K.working=typeof WeakSet<"u"&&K(new WeakSet);function pe(H){return K(H)}e.isWeakSet=pe;function ue(H){return u(H)==="[object ArrayBuffer]"}ue.working=typeof ArrayBuffer<"u"&&ue(new ArrayBuffer);function z(H){return typeof ArrayBuffer>"u"?!1:ue.working?ue(H):H instanceof ArrayBuffer}e.isArrayBuffer=z;function te(H){return u(H)==="[object DataView]"}te.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&te(new DataView(new ArrayBuffer(1),0,1));function F(H){return typeof DataView>"u"?!1:te.working?te(H):H instanceof DataView}e.isDataView=F;var V=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Z(H){return u(H)==="[object SharedArrayBuffer]"}function M(H){return typeof V>"u"?!1:(typeof Z.working>"u"&&(Z.working=Z(new V)),Z.working?Z(H):H instanceof V)}e.isSharedArrayBuffer=M;function x(H){return u(H)==="[object AsyncFunction]"}e.isAsyncFunction=x;function v(H){return u(H)==="[object Map Iterator]"}e.isMapIterator=v;function j(H){return u(H)==="[object Set Iterator]"}e.isSetIterator=j;function L(H){return u(H)==="[object Generator]"}e.isGeneratorObject=L;function R(H){return u(H)==="[object WebAssembly.Module]"}e.isWebAssemblyCompiledModule=R;function D(H){return w(H,f)}e.isNumberObject=D;function k(H){return w(H,c)}e.isStringObject=k;function P(H){return w(H,h)}e.isBooleanObject=P;function G(H){return o&&w(H,p)}e.isBigIntObject=G;function Q(H){return a&&w(H,T)}e.isSymbolObject=Q;function ie(H){return D(H)||k(H)||P(H)||G(H)||Q(H)}e.isBoxedPrimitive=ie;function le(H){return typeof Uint8Array<"u"&&(z(H)||M(H))}e.isAnyArrayBuffer=le,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(H){Object.defineProperty(e,H,{enumerable:!1,value:function(){throw new Error(H+" is not supported in userland")}})})}(es)),es}var Cs,xa;function yd(){return xa||(xa=1,Cs=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}),Cs}var Ea;function vu(){return Ea||(Ea=1,function(e){var t={},i=Object.getOwnPropertyDescriptors||function(V){for(var Z=Object.keys(V),M={},x=0;x<Z.length;x++)M[Z[x]]=Object.getOwnPropertyDescriptor(V,Z[x]);return M},r=/%[sdj%]/g;e.format=function(F){if(!N(F)){for(var V=[],Z=0;Z<arguments.length;Z++)V.push(a(arguments[Z]));return V.join(" ")}for(var Z=1,M=arguments,x=M.length,v=String(F).replace(r,function(L){if(L==="%%")return"%";if(Z>=x)return L;switch(L){case"%s":return String(M[Z++]);case"%d":return Number(M[Z++]);case"%j":try{return JSON.stringify(M[Z++])}catch{return"[Circular]"}default:return L}}),j=M[Z];Z<x;j=M[++Z])g(j)||!B(j)?v+=" "+j:v+=" "+a(j);return v},e.deprecate=function(F,V){if(typeof Ne<"u"&&Ne.noDeprecation===!0)return F;if(typeof Ne>"u")return function(){return e.deprecate(F,V).apply(this,arguments)};var Z=!1;function M(){if(!Z){if(Ne.throwDeprecation)throw new Error(V);Ne.traceDeprecation?console.trace(V):console.error(V),Z=!0}return F.apply(this,arguments)}return M};var s={},n=/^$/;if(t.NODE_DEBUG){var o=t.NODE_DEBUG;o=o.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),n=new RegExp("^"+o+"$","i")}e.debuglog=function(F){if(F=F.toUpperCase(),!s[F])if(n.test(F)){var V=Ne.pid;s[F]=function(){var Z=e.format.apply(e,arguments);console.error("%s %d: %s",F,V,Z)}}else s[F]=function(){};return s[F]};function a(F,V){var Z={seen:[],stylize:f};return arguments.length>=3&&(Z.depth=arguments[2]),arguments.length>=4&&(Z.colors=arguments[3]),S(V)?Z.showHidden=V:V&&e._extend(Z,V),A(Z.showHidden)&&(Z.showHidden=!1),A(Z.depth)&&(Z.depth=2),A(Z.colors)&&(Z.colors=!1),A(Z.customInspect)&&(Z.customInspect=!0),Z.colors&&(Z.stylize=u),h(Z,F,Z.depth)}e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function u(F,V){var Z=a.styles[V];return Z?"\x1B["+a.colors[Z][0]+"m"+F+"\x1B["+a.colors[Z][1]+"m":F}function f(F,V){return F}function c(F){var V={};return F.forEach(function(Z,M){V[Z]=!0}),V}function h(F,V,Z){if(F.customInspect&&V&&J(V.inspect)&&V.inspect!==e.inspect&&!(V.constructor&&V.constructor.prototype===V)){var M=V.inspect(Z,F);return N(M)||(M=h(F,M,Z)),M}var x=p(F,V);if(x)return x;var v=Object.keys(V),j=c(v);if(F.showHidden&&(v=Object.getOwnPropertyNames(V)),X(V)&&(v.indexOf("message")>=0||v.indexOf("description")>=0))return T(V);if(v.length===0){if(J(V)){var L=V.name?": "+V.name:"";return F.stylize("[Function"+L+"]","special")}if(_(V))return F.stylize(RegExp.prototype.toString.call(V),"regexp");if($(V))return F.stylize(Date.prototype.toString.call(V),"date");if(X(V))return T(V)}var R="",D=!1,k=["{","}"];if(d(V)&&(D=!0,k=["[","]"]),J(V)){var P=V.name?": "+V.name:"";R=" [Function"+P+"]"}if(_(V)&&(R=" "+RegExp.prototype.toString.call(V)),$(V)&&(R=" "+Date.prototype.toUTCString.call(V)),X(V)&&(R=" "+T(V)),v.length===0&&(!D||V.length==0))return k[0]+R+k[1];if(Z<0)return _(V)?F.stylize(RegExp.prototype.toString.call(V),"regexp"):F.stylize("[Object]","special");F.seen.push(V);var G;return D?G=w(F,V,Z,j,v):G=v.map(function(Q){return m(F,V,Z,j,Q,D)}),F.seen.pop(),O(G,R,k)}function p(F,V){if(A(V))return F.stylize("undefined","undefined");if(N(V)){var Z="'"+JSON.stringify(V).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return F.stylize(Z,"string")}if(I(V))return F.stylize(""+V,"number");if(S(V))return F.stylize(""+V,"boolean");if(g(V))return F.stylize("null","null")}function T(F){return"["+Error.prototype.toString.call(F)+"]"}function w(F,V,Z,M,x){for(var v=[],j=0,L=V.length;j<L;++j)pe(V,String(j))?v.push(m(F,V,Z,M,String(j),!0)):v.push("");return x.forEach(function(R){R.match(/^\d+$/)||v.push(m(F,V,Z,M,R,!0))}),v}function m(F,V,Z,M,x,v){var j,L,R;if(R=Object.getOwnPropertyDescriptor(V,x)||{value:V[x]},R.get?R.set?L=F.stylize("[Getter/Setter]","special"):L=F.stylize("[Getter]","special"):R.set&&(L=F.stylize("[Setter]","special")),pe(M,x)||(j="["+x+"]"),L||(F.seen.indexOf(R.value)<0?(g(Z)?L=h(F,R.value,null):L=h(F,R.value,Z-1),L.indexOf(`
`)>-1&&(v?L=L.split(`
`).map(function(D){return"  "+D}).join(`
`).slice(2):L=`
`+L.split(`
`).map(function(D){return"   "+D}).join(`
`))):L=F.stylize("[Circular]","special")),A(j)){if(v&&x.match(/^\d+$/))return L;j=JSON.stringify(""+x),j.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(j=j.slice(1,-1),j=F.stylize(j,"name")):(j=j.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),j=F.stylize(j,"string"))}return j+": "+L}function O(F,V,Z){var M=F.reduce(function(x,v){return v.indexOf(`
`)>=0,x+v.replace(/\u001b\[\d\d?m/g,"").length+1},0);return M>60?Z[0]+(V===""?"":V+`
 `)+" "+F.join(`,
  `)+" "+Z[1]:Z[0]+V+" "+F.join(", ")+" "+Z[1]}e.types=bd();function d(F){return Array.isArray(F)}e.isArray=d;function S(F){return typeof F=="boolean"}e.isBoolean=S;function g(F){return F===null}e.isNull=g;function b(F){return F==null}e.isNullOrUndefined=b;function I(F){return typeof F=="number"}e.isNumber=I;function N(F){return typeof F=="string"}e.isString=N;function q(F){return typeof F=="symbol"}e.isSymbol=q;function A(F){return F===void 0}e.isUndefined=A;function _(F){return B(F)&&ne(F)==="[object RegExp]"}e.isRegExp=_,e.types.isRegExp=_;function B(F){return typeof F=="object"&&F!==null}e.isObject=B;function $(F){return B(F)&&ne(F)==="[object Date]"}e.isDate=$,e.types.isDate=$;function X(F){return B(F)&&(ne(F)==="[object Error]"||F instanceof Error)}e.isError=X,e.types.isNativeError=X;function J(F){return typeof F=="function"}e.isFunction=J;function Y(F){return F===null||typeof F=="boolean"||typeof F=="number"||typeof F=="string"||typeof F=="symbol"||typeof F>"u"}e.isPrimitive=Y,e.isBuffer=yd();function ne(F){return Object.prototype.toString.call(F)}function re(F){return F<10?"0"+F.toString(10):F.toString(10)}var ee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function K(){var F=new Date,V=[re(F.getHours()),re(F.getMinutes()),re(F.getSeconds())].join(":");return[F.getDate(),ee[F.getMonth()],V].join(" ")}e.log=function(){console.log("%s - %s",K(),e.format.apply(e,arguments))},e.inherits=ii(),e._extend=function(F,V){if(!V||!B(V))return F;for(var Z=Object.keys(V),M=Z.length;M--;)F[Z[M]]=V[Z[M]];return F};function pe(F,V){return Object.prototype.hasOwnProperty.call(F,V)}var ue=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;e.promisify=function(V){if(typeof V!="function")throw new TypeError('The "original" argument must be of type Function');if(ue&&V[ue]){var Z=V[ue];if(typeof Z!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Z,ue,{value:Z,enumerable:!1,writable:!1,configurable:!0}),Z}function Z(){for(var M,x,v=new Promise(function(R,D){M=R,x=D}),j=[],L=0;L<arguments.length;L++)j.push(arguments[L]);j.push(function(R,D){R?x(R):M(D)});try{V.apply(this,j)}catch(R){x(R)}return v}return Object.setPrototypeOf(Z,Object.getPrototypeOf(V)),ue&&Object.defineProperty(Z,ue,{value:Z,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Z,i(V))},e.promisify.custom=ue;function z(F,V){if(!F){var Z=new Error("Promise was rejected with a falsy value");Z.reason=F,F=Z}return V(F)}function te(F){if(typeof F!="function")throw new TypeError('The "original" argument must be of type Function');function V(){for(var Z=[],M=0;M<arguments.length;M++)Z.push(arguments[M]);var x=Z.pop();if(typeof x!="function")throw new TypeError("The last argument must be of type Function");var v=this,j=function(){return x.apply(v,arguments)};F.apply(this,Z).then(function(L){Ne.nextTick(j.bind(null,null,L))},function(L){Ne.nextTick(z.bind(null,L,j))})}return Object.setPrototypeOf(V,Object.getPrototypeOf(F)),Object.defineProperties(V,i(F)),V}e.callbackify=te}(Zr)),Zr}var ks,Ta;function _d(){if(Ta)return ks;Ta=1;function e(w,m){var O=Object.keys(w);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(w);m&&(d=d.filter(function(S){return Object.getOwnPropertyDescriptor(w,S).enumerable})),O.push.apply(O,d)}return O}function t(w){for(var m=1;m<arguments.length;m++){var O=arguments[m]!=null?arguments[m]:{};m%2?e(Object(O),!0).forEach(function(d){i(w,d,O[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(O)):e(Object(O)).forEach(function(d){Object.defineProperty(w,d,Object.getOwnPropertyDescriptor(O,d))})}return w}function i(w,m,O){return m=o(m),m in w?Object.defineProperty(w,m,{value:O,enumerable:!0,configurable:!0,writable:!0}):w[m]=O,w}function r(w,m){if(!(w instanceof m))throw new TypeError("Cannot call a class as a function")}function s(w,m){for(var O=0;O<m.length;O++){var d=m[O];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(w,o(d.key),d)}}function n(w,m,O){return m&&s(w.prototype,m),Object.defineProperty(w,"prototype",{writable:!1}),w}function o(w){var m=a(w,"string");return typeof m=="symbol"?m:String(m)}function a(w,m){if(typeof w!="object"||w===null)return w;var O=w[Symbol.toPrimitive];if(O!==void 0){var d=O.call(w,m||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(w)}var u=Pr,f=u.Buffer,c=vu(),h=c.inspect,p=h&&h.custom||"inspect";function T(w,m,O){f.prototype.copy.call(w,m,O)}return ks=function(){function w(){r(this,w),this.head=null,this.tail=null,this.length=0}return n(w,[{key:"push",value:function(O){var d={data:O,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}},{key:"unshift",value:function(O){var d={data:O,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length}},{key:"shift",value:function(){if(this.length!==0){var O=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,O}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(O){if(this.length===0)return"";for(var d=this.head,S=""+d.data;d=d.next;)S+=O+d.data;return S}},{key:"concat",value:function(O){if(this.length===0)return f.alloc(0);for(var d=f.allocUnsafe(O>>>0),S=this.head,g=0;S;)T(S.data,d,g),g+=S.data.length,S=S.next;return d}},{key:"consume",value:function(O,d){var S;return O<this.head.data.length?(S=this.head.data.slice(0,O),this.head.data=this.head.data.slice(O)):O===this.head.data.length?S=this.shift():S=d?this._getString(O):this._getBuffer(O),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(O){var d=this.head,S=1,g=d.data;for(O-=g.length;d=d.next;){var b=d.data,I=O>b.length?b.length:O;if(I===b.length?g+=b:g+=b.slice(0,O),O-=I,O===0){I===b.length?(++S,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=b.slice(I));break}++S}return this.length-=S,g}},{key:"_getBuffer",value:function(O){var d=f.allocUnsafe(O),S=this.head,g=1;for(S.data.copy(d),O-=S.data.length;S=S.next;){var b=S.data,I=O>b.length?b.length:O;if(b.copy(d,d.length-O,0,I),O-=I,O===0){I===b.length?(++g,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=b.slice(I));break}++g}return this.length-=g,d}},{key:p,value:function(O,d){return h(this,t(t({},d),{},{depth:0,customInspect:!1}))}}]),w}(),ks}var Ds,Sa;function xu(){if(Sa)return Ds;Sa=1;function e(o,a){var u=this,f=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return f||c?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ne.nextTick(s,this,o)):Ne.nextTick(s,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(h){!a&&h?u._writableState?u._writableState.errorEmitted?Ne.nextTick(i,u):(u._writableState.errorEmitted=!0,Ne.nextTick(t,u,h)):Ne.nextTick(t,u,h):a?(Ne.nextTick(i,u),a(h)):Ne.nextTick(i,u)}),this)}function t(o,a){s(o,a),i(o)}function i(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(o,a){o.emit("error",a)}function n(o,a){var u=o._readableState,f=o._writableState;u&&u.autoDestroy||f&&f.autoDestroy?o.destroy(a):o.emit("error",a)}return Ds={destroy:e,undestroy:r,errorOrDestroy:n},Ds}var Ps={},Aa;function vi(){if(Aa)return Ps;Aa=1;function e(a,u){a.prototype=Object.create(u.prototype),a.prototype.constructor=a,a.__proto__=u}var t={};function i(a,u,f){f||(f=Error);function c(p,T,w){return typeof u=="string"?u:u(p,T,w)}var h=function(p){e(T,p);function T(w,m,O){return p.call(this,c(w,m,O))||this}return T}(f);h.prototype.name=f.name,h.prototype.code=a,t[a]=h}function r(a,u){if(Array.isArray(a)){var f=a.length;return a=a.map(function(c){return String(c)}),f>2?"one of ".concat(u," ").concat(a.slice(0,f-1).join(", "),", or ")+a[f-1]:f===2?"one of ".concat(u," ").concat(a[0]," or ").concat(a[1]):"of ".concat(u," ").concat(a[0])}else return"of ".concat(u," ").concat(String(a))}function s(a,u,f){return a.substr(0,u.length)===u}function n(a,u,f){return(f===void 0||f>a.length)&&(f=a.length),a.substring(f-u.length,f)===u}function o(a,u,f){return typeof f!="number"&&(f=0),f+u.length>a.length?!1:a.indexOf(u,f)!==-1}return i("ERR_INVALID_OPT_VALUE",function(a,u){return'The value "'+u+'" is invalid for option "'+a+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(a,u,f){var c;typeof u=="string"&&s(u,"not ")?(c="must not be",u=u.replace(/^not /,"")):c="must be";var h;if(n(a," argument"))h="The ".concat(a," ").concat(c," ").concat(r(u,"type"));else{var p=o(a,".")?"property":"argument";h='The "'.concat(a,'" ').concat(p," ").concat(c," ").concat(r(u,"type"))}return h+=". Received type ".concat(typeof f),h},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ps.codes=t,Ps}var Ls,wa;function Eu(){if(wa)return Ls;wa=1;var e=vi().codes.ERR_INVALID_OPT_VALUE;function t(r,s,n){return r.highWaterMark!=null?r.highWaterMark:s?r[n]:null}function i(r,s,n,o){var a=t(s,o,n);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var u=o?n:"highWaterMark";throw new e(u,a)}return Math.floor(a)}return r.objectMode?16:16*1024}return Ls={getHighWaterMark:i},Ls}var Bs,Oa;function vd(){if(Oa)return Bs;Oa=1,Bs=e;function e(i,r){if(t("noDeprecation"))return i;var s=!1;function n(){if(!s){if(t("throwDeprecation"))throw new Error(r);t("traceDeprecation")?console.trace(r):console.warn(r),s=!0}return i.apply(this,arguments)}return n}function t(i){try{if(!Vt.localStorage)return!1}catch{return!1}var r=Vt.localStorage[i];return r==null?!1:String(r).toLowerCase()==="true"}return Bs}var Fs,Na;function Tu(){if(Na)return Fs;Na=1,Fs=A;function e(M){var x=this;this.next=null,this.entry=null,this.finish=function(){Z(x,M)}}var t;A.WritableState=N;var i={deprecate:vd()},r=du(),s=Pr.Buffer,n=(typeof Vt<"u"?Vt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(M){return s.from(M)}function a(M){return s.isBuffer(M)||M instanceof n}var u=xu(),f=Eu(),c=f.getHighWaterMark,h=vi().codes,p=h.ERR_INVALID_ARG_TYPE,T=h.ERR_METHOD_NOT_IMPLEMENTED,w=h.ERR_MULTIPLE_CALLBACK,m=h.ERR_STREAM_CANNOT_PIPE,O=h.ERR_STREAM_DESTROYED,d=h.ERR_STREAM_NULL_VALUES,S=h.ERR_STREAM_WRITE_AFTER_END,g=h.ERR_UNKNOWN_ENCODING,b=u.errorOrDestroy;ii()(A,r);function I(){}function N(M,x,v){t=t||yi(),M=M||{},typeof v!="boolean"&&(v=x instanceof t),this.objectMode=!!M.objectMode,v&&(this.objectMode=this.objectMode||!!M.writableObjectMode),this.highWaterMark=c(this,M,"writableHighWaterMark",v),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var j=M.decodeStrings===!1;this.decodeStrings=!j,this.defaultEncoding=M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(L){re(x,L)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=M.emitClose!==!1,this.autoDestroy=!!M.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}N.prototype.getBuffer=function(){for(var x=this.bufferedRequest,v=[];x;)v.push(x),x=x.next;return v},function(){try{Object.defineProperty(N.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var q;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(q=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(x){return q.call(this,x)?!0:this!==A?!1:x&&x._writableState instanceof N}})):q=function(x){return x instanceof this};function A(M){t=t||yi();var x=this instanceof t;if(!x&&!q.call(A,this))return new A(M);this._writableState=new N(M,this,x),this.writable=!0,M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final)),r.call(this)}A.prototype.pipe=function(){b(this,new m)};function _(M,x){var v=new S;b(M,v),Ne.nextTick(x,v)}function B(M,x,v,j){var L;return v===null?L=new d:typeof v!="string"&&!x.objectMode&&(L=new p("chunk",["string","Buffer"],v)),L?(b(M,L),Ne.nextTick(j,L),!1):!0}A.prototype.write=function(M,x,v){var j=this._writableState,L=!1,R=!j.objectMode&&a(M);return R&&!s.isBuffer(M)&&(M=o(M)),typeof x=="function"&&(v=x,x=null),R?x="buffer":x||(x=j.defaultEncoding),typeof v!="function"&&(v=I),j.ending?_(this,v):(R||B(this,j,M,v))&&(j.pendingcb++,L=X(this,j,R,M,x,v)),L},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var M=this._writableState;M.corked&&(M.corked--,!M.writing&&!M.corked&&!M.bufferProcessing&&M.bufferedRequest&&pe(this,M))},A.prototype.setDefaultEncoding=function(x){if(typeof x=="string"&&(x=x.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((x+"").toLowerCase())>-1))throw new g(x);return this._writableState.defaultEncoding=x,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $(M,x,v){return!M.objectMode&&M.decodeStrings!==!1&&typeof x=="string"&&(x=s.from(x,v)),x}Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function X(M,x,v,j,L,R){if(!v){var D=$(x,j,L);j!==D&&(v=!0,L="buffer",j=D)}var k=x.objectMode?1:j.length;x.length+=k;var P=x.length<x.highWaterMark;if(P||(x.needDrain=!0),x.writing||x.corked){var G=x.lastBufferedRequest;x.lastBufferedRequest={chunk:j,encoding:L,isBuf:v,callback:R,next:null},G?G.next=x.lastBufferedRequest:x.bufferedRequest=x.lastBufferedRequest,x.bufferedRequestCount+=1}else J(M,x,!1,k,j,L,R);return P}function J(M,x,v,j,L,R,D){x.writelen=j,x.writecb=D,x.writing=!0,x.sync=!0,x.destroyed?x.onwrite(new O("write")):v?M._writev(L,x.onwrite):M._write(L,R,x.onwrite),x.sync=!1}function Y(M,x,v,j,L){--x.pendingcb,v?(Ne.nextTick(L,j),Ne.nextTick(F,M,x),M._writableState.errorEmitted=!0,b(M,j)):(L(j),M._writableState.errorEmitted=!0,b(M,j),F(M,x))}function ne(M){M.writing=!1,M.writecb=null,M.length-=M.writelen,M.writelen=0}function re(M,x){var v=M._writableState,j=v.sync,L=v.writecb;if(typeof L!="function")throw new w;if(ne(v),x)Y(M,v,j,x,L);else{var R=ue(v)||M.destroyed;!R&&!v.corked&&!v.bufferProcessing&&v.bufferedRequest&&pe(M,v),j?Ne.nextTick(ee,M,v,R,L):ee(M,v,R,L)}}function ee(M,x,v,j){v||K(M,x),x.pendingcb--,j(),F(M,x)}function K(M,x){x.length===0&&x.needDrain&&(x.needDrain=!1,M.emit("drain"))}function pe(M,x){x.bufferProcessing=!0;var v=x.bufferedRequest;if(M._writev&&v&&v.next){var j=x.bufferedRequestCount,L=new Array(j),R=x.corkedRequestsFree;R.entry=v;for(var D=0,k=!0;v;)L[D]=v,v.isBuf||(k=!1),v=v.next,D+=1;L.allBuffers=k,J(M,x,!0,x.length,L,"",R.finish),x.pendingcb++,x.lastBufferedRequest=null,R.next?(x.corkedRequestsFree=R.next,R.next=null):x.corkedRequestsFree=new e(x),x.bufferedRequestCount=0}else{for(;v;){var P=v.chunk,G=v.encoding,Q=v.callback,ie=x.objectMode?1:P.length;if(J(M,x,!1,ie,P,G,Q),v=v.next,x.bufferedRequestCount--,x.writing)break}v===null&&(x.lastBufferedRequest=null)}x.bufferedRequest=v,x.bufferProcessing=!1}A.prototype._write=function(M,x,v){v(new T("_write()"))},A.prototype._writev=null,A.prototype.end=function(M,x,v){var j=this._writableState;return typeof M=="function"?(v=M,M=null,x=null):typeof x=="function"&&(v=x,x=null),M!=null&&this.write(M,x),j.corked&&(j.corked=1,this.uncork()),j.ending||V(this,j,v),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ue(M){return M.ending&&M.length===0&&M.bufferedRequest===null&&!M.finished&&!M.writing}function z(M,x){M._final(function(v){x.pendingcb--,v&&b(M,v),x.prefinished=!0,M.emit("prefinish"),F(M,x)})}function te(M,x){!x.prefinished&&!x.finalCalled&&(typeof M._final=="function"&&!x.destroyed?(x.pendingcb++,x.finalCalled=!0,Ne.nextTick(z,M,x)):(x.prefinished=!0,M.emit("prefinish")))}function F(M,x){var v=ue(x);if(v&&(te(M,x),x.pendingcb===0&&(x.finished=!0,M.emit("finish"),x.autoDestroy))){var j=M._readableState;(!j||j.autoDestroy&&j.endEmitted)&&M.destroy()}return v}function V(M,x,v){x.ending=!0,F(M,x),v&&(x.finished?Ne.nextTick(v):M.once("finish",v)),x.ended=!0,M.writable=!1}function Z(M,x,v){var j=M.entry;for(M.entry=null;j;){var L=j.callback;x.pendingcb--,L(v),j=j.next}x.corkedRequestsFree.next=M}return Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(x){this._writableState&&(this._writableState.destroyed=x)}}),A.prototype.destroy=u.destroy,A.prototype._undestroy=u.undestroy,A.prototype._destroy=function(M,x){x(M)},Fs}var Us,Ia;function yi(){if(Ia)return Us;Ia=1;var e=Object.keys||function(f){var c=[];for(var h in f)c.push(h);return c};Us=o;var t=Su(),i=Tu();ii()(o,t);for(var r=e(i.prototype),s=0;s<r.length;s++){var n=r[s];o.prototype[n]||(o.prototype[n]=i.prototype[n])}function o(f){if(!(this instanceof o))return new o(f);t.call(this,f),i.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||Ne.nextTick(u,this)}function u(f){f.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),Us}var Ms={},rr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ra;function xd(){return Ra||(Ra=1,function(e,t){var i=Pr,r=i.Buffer;function s(o,a){for(var u in o)a[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(s(i,t),t.Buffer=n);function n(o,a,u){return r(o,a,u)}n.prototype=Object.create(r.prototype),s(r,n),n.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,u)},n.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var f=r(o);return a!==void 0?typeof u=="string"?f.fill(a,u):f.fill(a):f.fill(0),f},n.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},n.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(o)}}(rr,rr.exports)),rr.exports}var Ca;function cn(){if(Ca)return Ms;Ca=1;var e=xd().Buffer,t=e.isEncoding||function(d){switch(d=""+d,d&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(d){if(!d)return"utf8";for(var S;;)switch(d){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return d;default:if(S)return;d=(""+d).toLowerCase(),S=!0}}function r(d){var S=i(d);if(typeof S!="string"&&(e.isEncoding===t||!t(d)))throw new Error("Unknown encoding: "+d);return S||d}Ms.StringDecoder=s;function s(d){this.encoding=r(d);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=p,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=T,this.end=w,S=3;break;default:this.write=m,this.end=O;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}s.prototype.write=function(d){if(d.length===0)return"";var S,g;if(this.lastNeed){if(S=this.fillLast(d),S===void 0)return"";g=this.lastNeed,this.lastNeed=0}else g=0;return g<d.length?S?S+this.text(d,g):this.text(d,g):S||""},s.prototype.end=c,s.prototype.text=f,s.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length};function n(d){return d<=127?0:d>>5===6?2:d>>4===14?3:d>>3===30?4:d>>6===2?-1:-2}function o(d,S,g){var b=S.length-1;if(b<g)return 0;var I=n(S[b]);return I>=0?(I>0&&(d.lastNeed=I-1),I):--b<g||I===-2?0:(I=n(S[b]),I>=0?(I>0&&(d.lastNeed=I-2),I):--b<g||I===-2?0:(I=n(S[b]),I>=0?(I>0&&(I===2?I=0:d.lastNeed=I-3),I):0))}function a(d,S,g){if((S[0]&192)!==128)return d.lastNeed=0,"";if(d.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return d.lastNeed=1,"";if(d.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return d.lastNeed=2,""}}function u(d){var S=this.lastTotal-this.lastNeed,g=a(this,d);if(g!==void 0)return g;if(this.lastNeed<=d.length)return d.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,S,0,d.length),this.lastNeed-=d.length}function f(d,S){var g=o(this,d,S);if(!this.lastNeed)return d.toString("utf8",S);this.lastTotal=g;var b=d.length-(g-this.lastNeed);return d.copy(this.lastChar,0,b),d.toString("utf8",S,b)}function c(d){var S=d&&d.length?this.write(d):"";return this.lastNeed?S+"":S}function h(d,S){if((d.length-S)%2===0){var g=d.toString("utf16le",S);if(g){var b=g.charCodeAt(g.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],g.slice(0,-1)}return g}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",S,d.length-1)}function p(d){var S=d&&d.length?this.write(d):"";if(this.lastNeed){var g=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,g)}return S}function T(d,S){var g=(d.length-S)%3;return g===0?d.toString("base64",S):(this.lastNeed=3-g,this.lastTotal=3,g===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",S,d.length-g))}function w(d){var S=d&&d.length?this.write(d):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function m(d){return d.toString(this.encoding)}function O(d){return d&&d.length?this.write(d):""}return Ms}var js,ka;function Hn(){if(ka)return js;ka=1;var e=vi().codes.ERR_STREAM_PREMATURE_CLOSE;function t(n){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,u=new Array(a),f=0;f<a;f++)u[f]=arguments[f];n.apply(this,u)}}}function i(){}function r(n){return n.setHeader&&typeof n.abort=="function"}function s(n,o,a){if(typeof o=="function")return s(n,null,o);o||(o={}),a=t(a||i);var u=o.readable||o.readable!==!1&&n.readable,f=o.writable||o.writable!==!1&&n.writable,c=function(){n.writable||p()},h=n._writableState&&n._writableState.finished,p=function(){f=!1,h=!0,u||a.call(n)},T=n._readableState&&n._readableState.endEmitted,w=function(){u=!1,T=!0,f||a.call(n)},m=function(g){a.call(n,g)},O=function(){var g;if(u&&!T)return(!n._readableState||!n._readableState.ended)&&(g=new e),a.call(n,g);if(f&&!h)return(!n._writableState||!n._writableState.ended)&&(g=new e),a.call(n,g)},d=function(){n.req.on("finish",p)};return r(n)?(n.on("complete",p),n.on("abort",O),n.req?d():n.on("request",d)):f&&!n._writableState&&(n.on("end",c),n.on("close",c)),n.on("end",w),n.on("finish",p),o.error!==!1&&n.on("error",m),n.on("close",O),function(){n.removeListener("complete",p),n.removeListener("abort",O),n.removeListener("request",d),n.req&&n.req.removeListener("finish",p),n.removeListener("end",c),n.removeListener("close",c),n.removeListener("finish",p),n.removeListener("end",w),n.removeListener("error",m),n.removeListener("close",O)}}return js=s,js}var qs,Da;function Ed(){if(Da)return qs;Da=1;var e;function t(g,b,I){return b=i(b),b in g?Object.defineProperty(g,b,{value:I,enumerable:!0,configurable:!0,writable:!0}):g[b]=I,g}function i(g){var b=r(g,"string");return typeof b=="symbol"?b:String(b)}function r(g,b){if(typeof g!="object"||g===null)return g;var I=g[Symbol.toPrimitive];if(I!==void 0){var N=I.call(g,b||"default");if(typeof N!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(g)}var s=Hn(),n=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),u=Symbol("ended"),f=Symbol("lastPromise"),c=Symbol("handlePromise"),h=Symbol("stream");function p(g,b){return{value:g,done:b}}function T(g){var b=g[n];if(b!==null){var I=g[h].read();I!==null&&(g[f]=null,g[n]=null,g[o]=null,b(p(I,!1)))}}function w(g){Ne.nextTick(T,g)}function m(g,b){return function(I,N){g.then(function(){if(b[u]){I(p(void 0,!0));return}b[c](I,N)},N)}}var O=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((e={get stream(){return this[h]},next:function(){var b=this,I=this[a];if(I!==null)return Promise.reject(I);if(this[u])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise(function(_,B){Ne.nextTick(function(){b[a]?B(b[a]):_(p(void 0,!0))})});var N=this[f],q;if(N)q=new Promise(m(N,this));else{var A=this[h].read();if(A!==null)return Promise.resolve(p(A,!1));q=new Promise(this[c])}return this[f]=q,q}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var b=this;return new Promise(function(I,N){b[h].destroy(null,function(q){if(q){N(q);return}I(p(void 0,!0))})})}),e),O),S=function(b){var I,N=Object.create(d,(I={},t(I,h,{value:b,writable:!0}),t(I,n,{value:null,writable:!0}),t(I,o,{value:null,writable:!0}),t(I,a,{value:null,writable:!0}),t(I,u,{value:b._readableState.endEmitted,writable:!0}),t(I,c,{value:function(A,_){var B=N[h].read();B?(N[f]=null,N[n]=null,N[o]=null,A(p(B,!1))):(N[n]=A,N[o]=_)},writable:!0}),I));return N[f]=null,s(b,function(q){if(q&&q.code!=="ERR_STREAM_PREMATURE_CLOSE"){var A=N[o];A!==null&&(N[f]=null,N[n]=null,N[o]=null,A(q)),N[a]=q;return}var _=N[n];_!==null&&(N[f]=null,N[n]=null,N[o]=null,_(p(void 0,!0))),N[u]=!0}),b.on("readable",w.bind(null,N)),N};return qs=S,qs}var $s,Pa;function Td(){return Pa||(Pa=1,$s=function(){throw new Error("Readable.from is not available in the browser")}),$s}var Gs,La;function Su(){if(La)return Gs;La=1,Gs=_;var e;_.ReadableState=A,jn().EventEmitter;var t=function(D,k){return D.listeners(k).length},i=du(),r=Pr.Buffer,s=(typeof Vt<"u"?Vt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function n(R){return r.from(R)}function o(R){return r.isBuffer(R)||R instanceof s}var a=vu(),u;a&&a.debuglog?u=a.debuglog("stream"):u=function(){};var f=_d(),c=xu(),h=Eu(),p=h.getHighWaterMark,T=vi().codes,w=T.ERR_INVALID_ARG_TYPE,m=T.ERR_STREAM_PUSH_AFTER_EOF,O=T.ERR_METHOD_NOT_IMPLEMENTED,d=T.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,g,b;ii()(_,i);var I=c.errorOrDestroy,N=["error","close","destroy","pause","resume"];function q(R,D,k){if(typeof R.prependListener=="function")return R.prependListener(D,k);!R._events||!R._events[D]?R.on(D,k):Array.isArray(R._events[D])?R._events[D].unshift(k):R._events[D]=[k,R._events[D]]}function A(R,D,k){e=e||yi(),R=R||{},typeof k!="boolean"&&(k=D instanceof e),this.objectMode=!!R.objectMode,k&&(this.objectMode=this.objectMode||!!R.readableObjectMode),this.highWaterMark=p(this,R,"readableHighWaterMark",k),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=R.emitClose!==!1,this.autoDestroy=!!R.autoDestroy,this.destroyed=!1,this.defaultEncoding=R.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,R.encoding&&(S||(S=cn().StringDecoder),this.decoder=new S(R.encoding),this.encoding=R.encoding)}function _(R){if(e=e||yi(),!(this instanceof _))return new _(R);var D=this instanceof e;this._readableState=new A(R,this,D),this.readable=!0,R&&(typeof R.read=="function"&&(this._read=R.read),typeof R.destroy=="function"&&(this._destroy=R.destroy)),i.call(this)}Object.defineProperty(_.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(D){this._readableState&&(this._readableState.destroyed=D)}}),_.prototype.destroy=c.destroy,_.prototype._undestroy=c.undestroy,_.prototype._destroy=function(R,D){D(R)},_.prototype.push=function(R,D){var k=this._readableState,P;return k.objectMode?P=!0:typeof R=="string"&&(D=D||k.defaultEncoding,D!==k.encoding&&(R=r.from(R,D),D=""),P=!0),B(this,R,D,!1,P)},_.prototype.unshift=function(R){return B(this,R,null,!0,!1)};function B(R,D,k,P,G){u("readableAddChunk",D);var Q=R._readableState;if(D===null)Q.reading=!1,re(R,Q);else{var ie;if(G||(ie=X(Q,D)),ie)I(R,ie);else if(Q.objectMode||D&&D.length>0)if(typeof D!="string"&&!Q.objectMode&&Object.getPrototypeOf(D)!==r.prototype&&(D=n(D)),P)Q.endEmitted?I(R,new d):$(R,Q,D,!0);else if(Q.ended)I(R,new m);else{if(Q.destroyed)return!1;Q.reading=!1,Q.decoder&&!k?(D=Q.decoder.write(D),Q.objectMode||D.length!==0?$(R,Q,D,!1):pe(R,Q)):$(R,Q,D,!1)}else P||(Q.reading=!1,pe(R,Q))}return!Q.ended&&(Q.length<Q.highWaterMark||Q.length===0)}function $(R,D,k,P){D.flowing&&D.length===0&&!D.sync?(D.awaitDrain=0,R.emit("data",k)):(D.length+=D.objectMode?1:k.length,P?D.buffer.unshift(k):D.buffer.push(k),D.needReadable&&ee(R)),pe(R,D)}function X(R,D){var k;return!o(D)&&typeof D!="string"&&D!==void 0&&!R.objectMode&&(k=new w("chunk",["string","Buffer","Uint8Array"],D)),k}_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function(R){S||(S=cn().StringDecoder);var D=new S(R);this._readableState.decoder=D,this._readableState.encoding=this._readableState.decoder.encoding;for(var k=this._readableState.buffer.head,P="";k!==null;)P+=D.write(k.data),k=k.next;return this._readableState.buffer.clear(),P!==""&&this._readableState.buffer.push(P),this._readableState.length=P.length,this};var J=1073741824;function Y(R){return R>=J?R=J:(R--,R|=R>>>1,R|=R>>>2,R|=R>>>4,R|=R>>>8,R|=R>>>16,R++),R}function ne(R,D){return R<=0||D.length===0&&D.ended?0:D.objectMode?1:R!==R?D.flowing&&D.length?D.buffer.head.data.length:D.length:(R>D.highWaterMark&&(D.highWaterMark=Y(R)),R<=D.length?R:D.ended?D.length:(D.needReadable=!0,0))}_.prototype.read=function(R){u("read",R),R=parseInt(R,10);var D=this._readableState,k=R;if(R!==0&&(D.emittedReadable=!1),R===0&&D.needReadable&&((D.highWaterMark!==0?D.length>=D.highWaterMark:D.length>0)||D.ended))return u("read: emitReadable",D.length,D.ended),D.length===0&&D.ended?v(this):ee(this),null;if(R=ne(R,D),R===0&&D.ended)return D.length===0&&v(this),null;var P=D.needReadable;u("need readable",P),(D.length===0||D.length-R<D.highWaterMark)&&(P=!0,u("length less than watermark",P)),D.ended||D.reading?(P=!1,u("reading or ended",P)):P&&(u("do read"),D.reading=!0,D.sync=!0,D.length===0&&(D.needReadable=!0),this._read(D.highWaterMark),D.sync=!1,D.reading||(R=ne(k,D)));var G;return R>0?G=x(R,D):G=null,G===null?(D.needReadable=D.length<=D.highWaterMark,R=0):(D.length-=R,D.awaitDrain=0),D.length===0&&(D.ended||(D.needReadable=!0),k!==R&&D.ended&&v(this)),G!==null&&this.emit("data",G),G};function re(R,D){if(u("onEofChunk"),!D.ended){if(D.decoder){var k=D.decoder.end();k&&k.length&&(D.buffer.push(k),D.length+=D.objectMode?1:k.length)}D.ended=!0,D.sync?ee(R):(D.needReadable=!1,D.emittedReadable||(D.emittedReadable=!0,K(R)))}}function ee(R){var D=R._readableState;u("emitReadable",D.needReadable,D.emittedReadable),D.needReadable=!1,D.emittedReadable||(u("emitReadable",D.flowing),D.emittedReadable=!0,Ne.nextTick(K,R))}function K(R){var D=R._readableState;u("emitReadable_",D.destroyed,D.length,D.ended),!D.destroyed&&(D.length||D.ended)&&(R.emit("readable"),D.emittedReadable=!1),D.needReadable=!D.flowing&&!D.ended&&D.length<=D.highWaterMark,M(R)}function pe(R,D){D.readingMore||(D.readingMore=!0,Ne.nextTick(ue,R,D))}function ue(R,D){for(;!D.reading&&!D.ended&&(D.length<D.highWaterMark||D.flowing&&D.length===0);){var k=D.length;if(u("maybeReadMore read 0"),R.read(0),k===D.length)break}D.readingMore=!1}_.prototype._read=function(R){I(this,new O("_read()"))},_.prototype.pipe=function(R,D){var k=this,P=this._readableState;switch(P.pipesCount){case 0:P.pipes=R;break;case 1:P.pipes=[P.pipes,R];break;default:P.pipes.push(R);break}P.pipesCount+=1,u("pipe count=%d opts=%j",P.pipesCount,D);var G=(!D||D.end!==!1)&&R!==Ne.stdout&&R!==Ne.stderr,Q=G?le:ye;P.endEmitted?Ne.nextTick(Q):k.once("end",Q),R.on("unpipe",ie);function ie(xe,Te){u("onunpipe"),xe===k&&Te&&Te.hasUnpiped===!1&&(Te.hasUnpiped=!0,ce())}function le(){u("onend"),R.end()}var H=z(k);R.on("drain",H);var he=!1;function ce(){u("cleanup"),R.removeListener("close",be),R.removeListener("finish",ge),R.removeListener("drain",H),R.removeListener("error",de),R.removeListener("unpipe",ie),k.removeListener("end",le),k.removeListener("end",ye),k.removeListener("data",fe),he=!0,P.awaitDrain&&(!R._writableState||R._writableState.needDrain)&&H()}k.on("data",fe);function fe(xe){u("ondata");var Te=R.write(xe);u("dest.write",Te),Te===!1&&((P.pipesCount===1&&P.pipes===R||P.pipesCount>1&&L(P.pipes,R)!==-1)&&!he&&(u("false write response, pause",P.awaitDrain),P.awaitDrain++),k.pause())}function de(xe){u("onerror",xe),ye(),R.removeListener("error",de),t(R,"error")===0&&I(R,xe)}q(R,"error",de);function be(){R.removeListener("finish",ge),ye()}R.once("close",be);function ge(){u("onfinish"),R.removeListener("close",be),ye()}R.once("finish",ge);function ye(){u("unpipe"),k.unpipe(R)}return R.emit("pipe",k),P.flowing||(u("pipe resume"),k.resume()),R};function z(R){return function(){var k=R._readableState;u("pipeOnDrain",k.awaitDrain),k.awaitDrain&&k.awaitDrain--,k.awaitDrain===0&&t(R,"data")&&(k.flowing=!0,M(R))}}_.prototype.unpipe=function(R){var D=this._readableState,k={hasUnpiped:!1};if(D.pipesCount===0)return this;if(D.pipesCount===1)return R&&R!==D.pipes?this:(R||(R=D.pipes),D.pipes=null,D.pipesCount=0,D.flowing=!1,R&&R.emit("unpipe",this,k),this);if(!R){var P=D.pipes,G=D.pipesCount;D.pipes=null,D.pipesCount=0,D.flowing=!1;for(var Q=0;Q<G;Q++)P[Q].emit("unpipe",this,{hasUnpiped:!1});return this}var ie=L(D.pipes,R);return ie===-1?this:(D.pipes.splice(ie,1),D.pipesCount-=1,D.pipesCount===1&&(D.pipes=D.pipes[0]),R.emit("unpipe",this,k),this)},_.prototype.on=function(R,D){var k=i.prototype.on.call(this,R,D),P=this._readableState;return R==="data"?(P.readableListening=this.listenerCount("readable")>0,P.flowing!==!1&&this.resume()):R==="readable"&&!P.endEmitted&&!P.readableListening&&(P.readableListening=P.needReadable=!0,P.flowing=!1,P.emittedReadable=!1,u("on readable",P.length,P.reading),P.length?ee(this):P.reading||Ne.nextTick(F,this)),k},_.prototype.addListener=_.prototype.on,_.prototype.removeListener=function(R,D){var k=i.prototype.removeListener.call(this,R,D);return R==="readable"&&Ne.nextTick(te,this),k},_.prototype.removeAllListeners=function(R){var D=i.prototype.removeAllListeners.apply(this,arguments);return(R==="readable"||R===void 0)&&Ne.nextTick(te,this),D};function te(R){var D=R._readableState;D.readableListening=R.listenerCount("readable")>0,D.resumeScheduled&&!D.paused?D.flowing=!0:R.listenerCount("data")>0&&R.resume()}function F(R){u("readable nexttick read 0"),R.read(0)}_.prototype.resume=function(){var R=this._readableState;return R.flowing||(u("resume"),R.flowing=!R.readableListening,V(this,R)),R.paused=!1,this};function V(R,D){D.resumeScheduled||(D.resumeScheduled=!0,Ne.nextTick(Z,R,D))}function Z(R,D){u("resume",D.reading),D.reading||R.read(0),D.resumeScheduled=!1,R.emit("resume"),M(R),D.flowing&&!D.reading&&R.read(0)}_.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function M(R){var D=R._readableState;for(u("flow",D.flowing);D.flowing&&R.read()!==null;);}_.prototype.wrap=function(R){var D=this,k=this._readableState,P=!1;R.on("end",function(){if(u("wrapped end"),k.decoder&&!k.ended){var ie=k.decoder.end();ie&&ie.length&&D.push(ie)}D.push(null)}),R.on("data",function(ie){if(u("wrapped data"),k.decoder&&(ie=k.decoder.write(ie)),!(k.objectMode&&ie==null)&&!(!k.objectMode&&(!ie||!ie.length))){var le=D.push(ie);le||(P=!0,R.pause())}});for(var G in R)this[G]===void 0&&typeof R[G]=="function"&&(this[G]=function(le){return function(){return R[le].apply(R,arguments)}}(G));for(var Q=0;Q<N.length;Q++)R.on(N[Q],this.emit.bind(this,N[Q]));return this._read=function(ie){u("wrapped _read",ie),P&&(P=!1,R.resume())},this},typeof Symbol=="function"&&(_.prototype[Symbol.asyncIterator]=function(){return g===void 0&&(g=Ed()),g(this)}),Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(_.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(_.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(D){this._readableState&&(this._readableState.flowing=D)}}),_._fromList=x,Object.defineProperty(_.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function x(R,D){if(D.length===0)return null;var k;return D.objectMode?k=D.buffer.shift():!R||R>=D.length?(D.decoder?k=D.buffer.join(""):D.buffer.length===1?k=D.buffer.first():k=D.buffer.concat(D.length),D.buffer.clear()):k=D.buffer.consume(R,D.decoder),k}function v(R){var D=R._readableState;u("endReadable",D.endEmitted),D.endEmitted||(D.ended=!0,Ne.nextTick(j,D,R))}function j(R,D){if(u("endReadableNT",R.endEmitted,R.length),!R.endEmitted&&R.length===0&&(R.endEmitted=!0,D.readable=!1,D.emit("end"),R.autoDestroy)){var k=D._writableState;(!k||k.autoDestroy&&k.finished)&&D.destroy()}}typeof Symbol=="function"&&(_.from=function(R,D){return b===void 0&&(b=Td()),b(_,R,D)});function L(R,D){for(var k=0,P=R.length;k<P;k++)if(R[k]===D)return k;return-1}return Gs}var Vs,Ba;function Au(){if(Ba)return Vs;Ba=1,Vs=a;var e=vi().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,i=e.ERR_MULTIPLE_CALLBACK,r=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=e.ERR_TRANSFORM_WITH_LENGTH_0,n=yi();ii()(a,n);function o(c,h){var p=this._transformState;p.transforming=!1;var T=p.writecb;if(T===null)return this.emit("error",new i);p.writechunk=null,p.writecb=null,h!=null&&this.push(h),T(c);var w=this._readableState;w.reading=!1,(w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}function a(c){if(!(this instanceof a))return new a(c);n.call(this,c),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function u(){var c=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(h,p){f(c,h,p)}):f(this,null,null)}a.prototype.push=function(c,h){return this._transformState.needTransform=!1,n.prototype.push.call(this,c,h)},a.prototype._transform=function(c,h,p){p(new t("_transform()"))},a.prototype._write=function(c,h,p){var T=this._transformState;if(T.writecb=p,T.writechunk=c,T.writeencoding=h,!T.transforming){var w=this._readableState;(T.needTransform||w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}},a.prototype._read=function(c){var h=this._transformState;h.writechunk!==null&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},a.prototype._destroy=function(c,h){n.prototype._destroy.call(this,c,function(p){h(p)})};function f(c,h,p){if(h)return c.emit("error",h);if(p!=null&&c.push(p),c._writableState.length)throw new s;if(c._transformState.transforming)throw new r;return c.push(null)}return Vs}var Hs,Fa;function Sd(){if(Fa)return Hs;Fa=1,Hs=t;var e=Au();ii()(t,e);function t(i){if(!(this instanceof t))return new t(i);e.call(this,i)}return t.prototype._transform=function(i,r,s){s(null,i)},Hs}var zs,Ua;function Ad(){if(Ua)return zs;Ua=1;var e;function t(p){var T=!1;return function(){T||(T=!0,p.apply(void 0,arguments))}}var i=vi().codes,r=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function n(p){if(p)throw p}function o(p){return p.setHeader&&typeof p.abort=="function"}function a(p,T,w,m){m=t(m);var O=!1;p.on("close",function(){O=!0}),e===void 0&&(e=Hn()),e(p,{readable:T,writable:w},function(S){if(S)return m(S);O=!0,m()});var d=!1;return function(S){if(!O&&!d){if(d=!0,o(p))return p.abort();if(typeof p.destroy=="function")return p.destroy();m(S||new s("pipe"))}}}function u(p){p()}function f(p,T){return p.pipe(T)}function c(p){return!p.length||typeof p[p.length-1]!="function"?n:p.pop()}function h(){for(var p=arguments.length,T=new Array(p),w=0;w<p;w++)T[w]=arguments[w];var m=c(T);if(Array.isArray(T[0])&&(T=T[0]),T.length<2)throw new r("streams");var O,d=T.map(function(S,g){var b=g<T.length-1,I=g>0;return a(S,b,I,function(N){O||(O=N),N&&d.forEach(u),!b&&(d.forEach(u),m(O))})});return T.reduce(f)}return zs=h,zs}var Xs,Ma;function wd(){if(Ma)return Xs;Ma=1,Xs=i;var e=jn().EventEmitter,t=ii();t(i,e),i.Readable=Su(),i.Writable=Tu(),i.Duplex=yi(),i.Transform=Au(),i.PassThrough=Sd(),i.finished=Hn(),i.pipeline=Ad(),i.Stream=i;function i(){e.call(this)}return i.prototype.pipe=function(r,s){var n=this;function o(T){r.writable&&r.write(T)===!1&&n.pause&&n.pause()}n.on("data",o);function a(){n.readable&&n.resume&&n.resume()}r.on("drain",a),!r._isStdio&&(!s||s.end!==!1)&&(n.on("end",f),n.on("close",c));var u=!1;function f(){u||(u=!0,r.end())}function c(){u||(u=!0,typeof r.destroy=="function"&&r.destroy())}function h(T){if(p(),e.listenerCount(this,"error")===0)throw T}n.on("error",h),r.on("error",h);function p(){n.removeListener("data",o),r.removeListener("drain",a),n.removeListener("end",f),n.removeListener("close",c),n.removeListener("error",h),r.removeListener("error",h),n.removeListener("end",p),n.removeListener("close",p),r.removeListener("close",p)}return n.on("end",p),n.on("close",p),r.on("close",p),r.emit("pipe",n),r},Xs}(function(e){(function(t){t.parser=function(x,v){return new r(x,v)},t.SAXParser=r,t.SAXStream=c,t.createStream=f,t.MAX_BUFFER_LENGTH=64*1024;var i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(x,v){if(!(this instanceof r))return new r(x,v);var j=this;n(j),j.q=j.c="",j.bufferCheckPosition=t.MAX_BUFFER_LENGTH,j.opt=v||{},j.opt.lowercase=j.opt.lowercase||j.opt.lowercasetags,j.looseCase=j.opt.lowercase?"toLowerCase":"toUpperCase",j.tags=[],j.closed=j.closedRoot=j.sawRoot=!1,j.tag=j.error=null,j.strict=!!x,j.noscript=!!(x||j.opt.noscript),j.state=_.BEGIN,j.strictEntities=j.opt.strictEntities,j.ENTITIES=j.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),j.attribList=[],j.opt.xmlns&&(j.ns=Object.create(m)),j.opt.unquotedAttributeValues===void 0&&(j.opt.unquotedAttributeValues=!x),j.trackPosition=j.opt.position!==!1,j.trackPosition&&(j.position=j.line=j.column=0),$(j,"onready")}Object.create||(Object.create=function(x){function v(){}v.prototype=x;var j=new v;return j}),Object.keys||(Object.keys=function(x){var v=[];for(var j in x)x.hasOwnProperty(j)&&v.push(j);return v});function s(x){for(var v=Math.max(t.MAX_BUFFER_LENGTH,10),j=0,L=0,R=i.length;L<R;L++){var D=x[i[L]].length;if(D>v)switch(i[L]){case"textNode":J(x);break;case"cdata":X(x,"oncdata",x.cdata),x.cdata="";break;case"script":X(x,"onscript",x.script),x.script="";break;default:ne(x,"Max buffer length exceeded: "+i[L])}j=Math.max(j,D)}var k=t.MAX_BUFFER_LENGTH-j;x.bufferCheckPosition=k+x.position}function n(x){for(var v=0,j=i.length;v<j;v++)x[i[v]]=""}function o(x){J(x),x.cdata!==""&&(X(x,"oncdata",x.cdata),x.cdata=""),x.script!==""&&(X(x,"onscript",x.script),x.script="")}r.prototype={end:function(){re(this)},write:M,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var a;try{a=wd().Stream}catch{a=function(){}}a||(a=function(){});var u=t.EVENTS.filter(function(x){return x!=="error"&&x!=="end"});function f(x,v){return new c(x,v)}function c(x,v){if(!(this instanceof c))return new c(x,v);a.apply(this),this._parser=new r(x,v),this.writable=!0,this.readable=!0;var j=this;this._parser.onend=function(){j.emit("end")},this._parser.onerror=function(L){j.emit("error",L),j._parser.error=null},this._decoder=null,u.forEach(function(L){Object.defineProperty(j,"on"+L,{get:function(){return j._parser["on"+L]},set:function(R){if(!R)return j.removeAllListeners(L),j._parser["on"+L]=R,R;j.on(L,R)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(a.prototype,{constructor:{value:c}}),c.prototype.write=function(x){if(typeof Ci=="function"&&typeof Ci.isBuffer=="function"&&Ci.isBuffer(x)){if(!this._decoder){var v=cn().StringDecoder;this._decoder=new v("utf8")}x=this._decoder.write(x)}return this._parser.write(x.toString()),this.emit("data",x),!0},c.prototype.end=function(x){return x&&x.length&&this.write(x),this._parser.end(),!0},c.prototype.on=function(x,v){var j=this;return!j._parser["on"+x]&&u.indexOf(x)!==-1&&(j._parser["on"+x]=function(){var L=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);L.splice(0,0,x),j.emit.apply(j,L)}),a.prototype.on.call(j,x,v)};var h="[CDATA[",p="DOCTYPE",T="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/2000/xmlns/",m={xml:T,xmlns:w},O=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,S=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function b(x){return x===" "||x===`
`||x==="\r"||x==="	"}function I(x){return x==='"'||x==="'"}function N(x){return x===">"||b(x)}function q(x,v){return x.test(v)}function A(x,v){return!q(x,v)}var _=0;t.STATE={BEGIN:_++,BEGIN_WHITESPACE:_++,TEXT:_++,TEXT_ENTITY:_++,OPEN_WAKA:_++,SGML_DECL:_++,SGML_DECL_QUOTED:_++,DOCTYPE:_++,DOCTYPE_QUOTED:_++,DOCTYPE_DTD:_++,DOCTYPE_DTD_QUOTED:_++,COMMENT_STARTING:_++,COMMENT:_++,COMMENT_ENDING:_++,COMMENT_ENDED:_++,CDATA:_++,CDATA_ENDING:_++,CDATA_ENDING_2:_++,PROC_INST:_++,PROC_INST_BODY:_++,PROC_INST_ENDING:_++,OPEN_TAG:_++,OPEN_TAG_SLASH:_++,ATTRIB:_++,ATTRIB_NAME:_++,ATTRIB_NAME_SAW_WHITE:_++,ATTRIB_VALUE:_++,ATTRIB_VALUE_QUOTED:_++,ATTRIB_VALUE_CLOSED:_++,ATTRIB_VALUE_UNQUOTED:_++,ATTRIB_VALUE_ENTITY_Q:_++,ATTRIB_VALUE_ENTITY_U:_++,CLOSE_TAG:_++,CLOSE_TAG_SAW_WHITE:_++,SCRIPT:_++,SCRIPT_ENDING:_++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(x){var v=t.ENTITIES[x],j=typeof v=="number"?String.fromCharCode(v):v;t.ENTITIES[x]=j});for(var B in t.STATE)t.STATE[t.STATE[B]]=B;_=t.STATE;function $(x,v,j){x[v]&&x[v](j)}function X(x,v,j){x.textNode&&J(x),$(x,v,j)}function J(x){x.textNode=Y(x.opt,x.textNode),x.textNode&&$(x,"ontext",x.textNode),x.textNode=""}function Y(x,v){return x.trim&&(v=v.trim()),x.normalize&&(v=v.replace(/\s+/g," ")),v}function ne(x,v){return J(x),x.trackPosition&&(v+=`
Line: `+x.line+`
Column: `+x.column+`
Char: `+x.c),v=new Error(v),x.error=v,$(x,"onerror",v),x}function re(x){return x.sawRoot&&!x.closedRoot&&ee(x,"Unclosed root tag"),x.state!==_.BEGIN&&x.state!==_.BEGIN_WHITESPACE&&x.state!==_.TEXT&&ne(x,"Unexpected end"),J(x),x.c="",x.closed=!0,$(x,"onend"),r.call(x,x.strict,x.opt),x}function ee(x,v){if(typeof x!="object"||!(x instanceof r))throw new Error("bad call to strictFail");x.strict&&ne(x,v)}function K(x){x.strict||(x.tagName=x.tagName[x.looseCase]());var v=x.tags[x.tags.length-1]||x,j=x.tag={name:x.tagName,attributes:{}};x.opt.xmlns&&(j.ns=v.ns),x.attribList.length=0,X(x,"onopentagstart",j)}function pe(x,v){var j=x.indexOf(":"),L=j<0?["",x]:x.split(":"),R=L[0],D=L[1];return v&&x==="xmlns"&&(R="xmlns",D=""),{prefix:R,local:D}}function ue(x){if(x.strict||(x.attribName=x.attribName[x.looseCase]()),x.attribList.indexOf(x.attribName)!==-1||x.tag.attributes.hasOwnProperty(x.attribName)){x.attribName=x.attribValue="";return}if(x.opt.xmlns){var v=pe(x.attribName,!0),j=v.prefix,L=v.local;if(j==="xmlns")if(L==="xml"&&x.attribValue!==T)ee(x,"xml: prefix must be bound to "+T+`
Actual: `+x.attribValue);else if(L==="xmlns"&&x.attribValue!==w)ee(x,"xmlns: prefix must be bound to "+w+`
Actual: `+x.attribValue);else{var R=x.tag,D=x.tags[x.tags.length-1]||x;R.ns===D.ns&&(R.ns=Object.create(D.ns)),R.ns[L]=x.attribValue}x.attribList.push([x.attribName,x.attribValue])}else x.tag.attributes[x.attribName]=x.attribValue,X(x,"onattribute",{name:x.attribName,value:x.attribValue});x.attribName=x.attribValue=""}function z(x,v){if(x.opt.xmlns){var j=x.tag,L=pe(x.tagName);j.prefix=L.prefix,j.local=L.local,j.uri=j.ns[L.prefix]||"",j.prefix&&!j.uri&&(ee(x,"Unbound namespace prefix: "+JSON.stringify(x.tagName)),j.uri=L.prefix);var R=x.tags[x.tags.length-1]||x;j.ns&&R.ns!==j.ns&&Object.keys(j.ns).forEach(function(fe){X(x,"onopennamespace",{prefix:fe,uri:j.ns[fe]})});for(var D=0,k=x.attribList.length;D<k;D++){var P=x.attribList[D],G=P[0],Q=P[1],ie=pe(G,!0),le=ie.prefix,H=ie.local,he=le===""?"":j.ns[le]||"",ce={name:G,value:Q,prefix:le,local:H,uri:he};le&&le!=="xmlns"&&!he&&(ee(x,"Unbound namespace prefix: "+JSON.stringify(le)),ce.uri=le),x.tag.attributes[G]=ce,X(x,"onattribute",ce)}x.attribList.length=0}x.tag.isSelfClosing=!!v,x.sawRoot=!0,x.tags.push(x.tag),X(x,"onopentag",x.tag),v||(!x.noscript&&x.tagName.toLowerCase()==="script"?x.state=_.SCRIPT:x.state=_.TEXT,x.tag=null,x.tagName=""),x.attribName=x.attribValue="",x.attribList.length=0}function te(x){if(!x.tagName){ee(x,"Weird empty close tag."),x.textNode+="</>",x.state=_.TEXT;return}if(x.script){if(x.tagName!=="script"){x.script+="</"+x.tagName+">",x.tagName="",x.state=_.SCRIPT;return}X(x,"onscript",x.script),x.script=""}var v=x.tags.length,j=x.tagName;x.strict||(j=j[x.looseCase]());for(var L=j;v--;){var R=x.tags[v];if(R.name!==L)ee(x,"Unexpected close tag");else break}if(v<0){ee(x,"Unmatched closing tag: "+x.tagName),x.textNode+="</"+x.tagName+">",x.state=_.TEXT;return}x.tagName=j;for(var D=x.tags.length;D-- >v;){var k=x.tag=x.tags.pop();x.tagName=x.tag.name,X(x,"onclosetag",x.tagName);var P={};for(var G in k.ns)P[G]=k.ns[G];var Q=x.tags[x.tags.length-1]||x;x.opt.xmlns&&k.ns!==Q.ns&&Object.keys(k.ns).forEach(function(ie){var le=k.ns[ie];X(x,"onclosenamespace",{prefix:ie,uri:le})})}v===0&&(x.closedRoot=!0),x.tagName=x.attribValue=x.attribName="",x.attribList.length=0,x.state=_.TEXT}function F(x){var v=x.entity,j=v.toLowerCase(),L,R="";return x.ENTITIES[v]?x.ENTITIES[v]:x.ENTITIES[j]?x.ENTITIES[j]:(v=j,v.charAt(0)==="#"&&(v.charAt(1)==="x"?(v=v.slice(2),L=parseInt(v,16),R=L.toString(16)):(v=v.slice(1),L=parseInt(v,10),R=L.toString(10))),v=v.replace(/^0+/,""),isNaN(L)||R.toLowerCase()!==v?(ee(x,"Invalid character entity"),"&"+x.entity+";"):String.fromCodePoint(L))}function V(x,v){v==="<"?(x.state=_.OPEN_WAKA,x.startTagPosition=x.position):b(v)||(ee(x,"Non-whitespace before first tag."),x.textNode=v,x.state=_.TEXT)}function Z(x,v){var j="";return v<x.length&&(j=x.charAt(v)),j}function M(x){var v=this;if(this.error)throw this.error;if(v.closed)return ne(v,"Cannot write after close. Assign an onready handler.");if(x===null)return re(v);typeof x=="object"&&(x=x.toString());for(var j=0,L="";L=Z(x,j++),v.c=L,!!L;)switch(v.trackPosition&&(v.position++,L===`
`?(v.line++,v.column=0):v.column++),v.state){case _.BEGIN:if(v.state=_.BEGIN_WHITESPACE,L==="\uFEFF")continue;V(v,L);continue;case _.BEGIN_WHITESPACE:V(v,L);continue;case _.TEXT:if(v.sawRoot&&!v.closedRoot){for(var R=j-1;L&&L!=="<"&&L!=="&";)L=Z(x,j++),L&&v.trackPosition&&(v.position++,L===`
`?(v.line++,v.column=0):v.column++);v.textNode+=x.substring(R,j-1)}L==="<"&&!(v.sawRoot&&v.closedRoot&&!v.strict)?(v.state=_.OPEN_WAKA,v.startTagPosition=v.position):(!b(L)&&(!v.sawRoot||v.closedRoot)&&ee(v,"Text data outside of root node."),L==="&"?v.state=_.TEXT_ENTITY:v.textNode+=L);continue;case _.SCRIPT:L==="<"?v.state=_.SCRIPT_ENDING:v.script+=L;continue;case _.SCRIPT_ENDING:L==="/"?v.state=_.CLOSE_TAG:(v.script+="<"+L,v.state=_.SCRIPT);continue;case _.OPEN_WAKA:if(L==="!")v.state=_.SGML_DECL,v.sgmlDecl="";else if(!b(L))if(q(O,L))v.state=_.OPEN_TAG,v.tagName=L;else if(L==="/")v.state=_.CLOSE_TAG,v.tagName="";else if(L==="?")v.state=_.PROC_INST,v.procInstName=v.procInstBody="";else{if(ee(v,"Unencoded <"),v.startTagPosition+1<v.position){var D=v.position-v.startTagPosition;L=new Array(D).join(" ")+L}v.textNode+="<"+L,v.state=_.TEXT}continue;case _.SGML_DECL:if(v.sgmlDecl+L==="--"){v.state=_.COMMENT,v.comment="",v.sgmlDecl="";continue}v.doctype&&v.doctype!==!0&&v.sgmlDecl?(v.state=_.DOCTYPE_DTD,v.doctype+="<!"+v.sgmlDecl+L,v.sgmlDecl=""):(v.sgmlDecl+L).toUpperCase()===h?(X(v,"onopencdata"),v.state=_.CDATA,v.sgmlDecl="",v.cdata=""):(v.sgmlDecl+L).toUpperCase()===p?(v.state=_.DOCTYPE,(v.doctype||v.sawRoot)&&ee(v,"Inappropriately located doctype declaration"),v.doctype="",v.sgmlDecl=""):L===">"?(X(v,"onsgmldeclaration",v.sgmlDecl),v.sgmlDecl="",v.state=_.TEXT):(I(L)&&(v.state=_.SGML_DECL_QUOTED),v.sgmlDecl+=L);continue;case _.SGML_DECL_QUOTED:L===v.q&&(v.state=_.SGML_DECL,v.q=""),v.sgmlDecl+=L;continue;case _.DOCTYPE:L===">"?(v.state=_.TEXT,X(v,"ondoctype",v.doctype),v.doctype=!0):(v.doctype+=L,L==="["?v.state=_.DOCTYPE_DTD:I(L)&&(v.state=_.DOCTYPE_QUOTED,v.q=L));continue;case _.DOCTYPE_QUOTED:v.doctype+=L,L===v.q&&(v.q="",v.state=_.DOCTYPE);continue;case _.DOCTYPE_DTD:L==="]"?(v.doctype+=L,v.state=_.DOCTYPE):L==="<"?(v.state=_.OPEN_WAKA,v.startTagPosition=v.position):I(L)?(v.doctype+=L,v.state=_.DOCTYPE_DTD_QUOTED,v.q=L):v.doctype+=L;continue;case _.DOCTYPE_DTD_QUOTED:v.doctype+=L,L===v.q&&(v.state=_.DOCTYPE_DTD,v.q="");continue;case _.COMMENT:L==="-"?v.state=_.COMMENT_ENDING:v.comment+=L;continue;case _.COMMENT_ENDING:L==="-"?(v.state=_.COMMENT_ENDED,v.comment=Y(v.opt,v.comment),v.comment&&X(v,"oncomment",v.comment),v.comment=""):(v.comment+="-"+L,v.state=_.COMMENT);continue;case _.COMMENT_ENDED:L!==">"?(ee(v,"Malformed comment"),v.comment+="--"+L,v.state=_.COMMENT):v.doctype&&v.doctype!==!0?v.state=_.DOCTYPE_DTD:v.state=_.TEXT;continue;case _.CDATA:L==="]"?v.state=_.CDATA_ENDING:v.cdata+=L;continue;case _.CDATA_ENDING:L==="]"?v.state=_.CDATA_ENDING_2:(v.cdata+="]"+L,v.state=_.CDATA);continue;case _.CDATA_ENDING_2:L===">"?(v.cdata&&X(v,"oncdata",v.cdata),X(v,"onclosecdata"),v.cdata="",v.state=_.TEXT):L==="]"?v.cdata+="]":(v.cdata+="]]"+L,v.state=_.CDATA);continue;case _.PROC_INST:L==="?"?v.state=_.PROC_INST_ENDING:b(L)?v.state=_.PROC_INST_BODY:v.procInstName+=L;continue;case _.PROC_INST_BODY:if(!v.procInstBody&&b(L))continue;L==="?"?v.state=_.PROC_INST_ENDING:v.procInstBody+=L;continue;case _.PROC_INST_ENDING:L===">"?(X(v,"onprocessinginstruction",{name:v.procInstName,body:v.procInstBody}),v.procInstName=v.procInstBody="",v.state=_.TEXT):(v.procInstBody+="?"+L,v.state=_.PROC_INST_BODY);continue;case _.OPEN_TAG:q(d,L)?v.tagName+=L:(K(v),L===">"?z(v):L==="/"?v.state=_.OPEN_TAG_SLASH:(b(L)||ee(v,"Invalid character in tag name"),v.state=_.ATTRIB));continue;case _.OPEN_TAG_SLASH:L===">"?(z(v,!0),te(v)):(ee(v,"Forward-slash in opening tag not followed by >"),v.state=_.ATTRIB);continue;case _.ATTRIB:if(b(L))continue;L===">"?z(v):L==="/"?v.state=_.OPEN_TAG_SLASH:q(O,L)?(v.attribName=L,v.attribValue="",v.state=_.ATTRIB_NAME):ee(v,"Invalid attribute name");continue;case _.ATTRIB_NAME:L==="="?v.state=_.ATTRIB_VALUE:L===">"?(ee(v,"Attribute without value"),v.attribValue=v.attribName,ue(v),z(v)):b(L)?v.state=_.ATTRIB_NAME_SAW_WHITE:q(d,L)?v.attribName+=L:ee(v,"Invalid attribute name");continue;case _.ATTRIB_NAME_SAW_WHITE:if(L==="=")v.state=_.ATTRIB_VALUE;else{if(b(L))continue;ee(v,"Attribute without value"),v.tag.attributes[v.attribName]="",v.attribValue="",X(v,"onattribute",{name:v.attribName,value:""}),v.attribName="",L===">"?z(v):q(O,L)?(v.attribName=L,v.state=_.ATTRIB_NAME):(ee(v,"Invalid attribute name"),v.state=_.ATTRIB)}continue;case _.ATTRIB_VALUE:if(b(L))continue;I(L)?(v.q=L,v.state=_.ATTRIB_VALUE_QUOTED):(v.opt.unquotedAttributeValues||ne(v,"Unquoted attribute value"),v.state=_.ATTRIB_VALUE_UNQUOTED,v.attribValue=L);continue;case _.ATTRIB_VALUE_QUOTED:if(L!==v.q){L==="&"?v.state=_.ATTRIB_VALUE_ENTITY_Q:v.attribValue+=L;continue}ue(v),v.q="",v.state=_.ATTRIB_VALUE_CLOSED;continue;case _.ATTRIB_VALUE_CLOSED:b(L)?v.state=_.ATTRIB:L===">"?z(v):L==="/"?v.state=_.OPEN_TAG_SLASH:q(O,L)?(ee(v,"No whitespace between attributes"),v.attribName=L,v.attribValue="",v.state=_.ATTRIB_NAME):ee(v,"Invalid attribute name");continue;case _.ATTRIB_VALUE_UNQUOTED:if(!N(L)){L==="&"?v.state=_.ATTRIB_VALUE_ENTITY_U:v.attribValue+=L;continue}ue(v),L===">"?z(v):v.state=_.ATTRIB;continue;case _.CLOSE_TAG:if(v.tagName)L===">"?te(v):q(d,L)?v.tagName+=L:v.script?(v.script+="</"+v.tagName,v.tagName="",v.state=_.SCRIPT):(b(L)||ee(v,"Invalid tagname in closing tag"),v.state=_.CLOSE_TAG_SAW_WHITE);else{if(b(L))continue;A(O,L)?v.script?(v.script+="</"+L,v.state=_.SCRIPT):ee(v,"Invalid tagname in closing tag."):v.tagName=L}continue;case _.CLOSE_TAG_SAW_WHITE:if(b(L))continue;L===">"?te(v):ee(v,"Invalid characters in closing tag");continue;case _.TEXT_ENTITY:case _.ATTRIB_VALUE_ENTITY_Q:case _.ATTRIB_VALUE_ENTITY_U:var k,P;switch(v.state){case _.TEXT_ENTITY:k=_.TEXT,P="textNode";break;case _.ATTRIB_VALUE_ENTITY_Q:k=_.ATTRIB_VALUE_QUOTED,P="attribValue";break;case _.ATTRIB_VALUE_ENTITY_U:k=_.ATTRIB_VALUE_UNQUOTED,P="attribValue";break}if(L===";"){var G=F(v);v.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(G)?(v.entity="",v.state=k,v.write(G)):(v[P]+=G,v.entity="",v.state=k)}else q(v.entity.length?g:S,L)?v.entity+=L:(ee(v,"Invalid character in entity name"),v[P]+="&"+v.entity+L,v.entity="",v.state=k);continue;default:throw new Error(v,"Unknown state: "+v.state)}return v.position>=v.bufferCheckPosition&&s(v),v}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var x=String.fromCharCode,v=Math.floor,j=function(){var L=16384,R=[],D,k,P=-1,G=arguments.length;if(!G)return"";for(var Q="";++P<G;){var ie=Number(arguments[P]);if(!isFinite(ie)||ie<0||ie>1114111||v(ie)!==ie)throw RangeError("Invalid code point: "+ie);ie<=65535?R.push(ie):(ie-=65536,D=(ie>>10)+55296,k=ie%1024+56320,R.push(D,k)),(P+1===G||R.length>L)&&(Q+=x.apply(null,R),R.length=0)}return Q};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:j,configurable:!0,writable:!0}):String.fromCodePoint=j}()})(e)})(uu);var zn={isArray:function(e){return Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object Array]"}},Od=zn.isArray,Xn={copyOptions:function(e){var t,i={};for(t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i},ensureFlagExists:function(e,t){(!(e in t)||typeof t[e]!="boolean")&&(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||typeof e.spaces!="number"&&typeof e.spaces!="string")&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){(!("alwaysArray"in e)||typeof e.alwaysArray!="boolean"&&!Od(e.alwaysArray))&&(e.alwaysArray=!1)},ensureKeyExists:function(e,t){(!(e+"Key"in t)||typeof t[e+"Key"]!="string")&&(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}},Nd=uu,ke=Xn,di=zn.isArray,oe,Ee;function Id(e){return oe=ke.copyOptions(e),ke.ensureFlagExists("ignoreDeclaration",oe),ke.ensureFlagExists("ignoreInstruction",oe),ke.ensureFlagExists("ignoreAttributes",oe),ke.ensureFlagExists("ignoreText",oe),ke.ensureFlagExists("ignoreComment",oe),ke.ensureFlagExists("ignoreCdata",oe),ke.ensureFlagExists("ignoreDoctype",oe),ke.ensureFlagExists("compact",oe),ke.ensureFlagExists("alwaysChildren",oe),ke.ensureFlagExists("addParent",oe),ke.ensureFlagExists("trim",oe),ke.ensureFlagExists("nativeType",oe),ke.ensureFlagExists("nativeTypeAttributes",oe),ke.ensureFlagExists("sanitize",oe),ke.ensureFlagExists("instructionHasAttributes",oe),ke.ensureFlagExists("captureSpacesBetweenElements",oe),ke.ensureAlwaysArrayExists(oe),ke.ensureKeyExists("declaration",oe),ke.ensureKeyExists("instruction",oe),ke.ensureKeyExists("attributes",oe),ke.ensureKeyExists("text",oe),ke.ensureKeyExists("comment",oe),ke.ensureKeyExists("cdata",oe),ke.ensureKeyExists("doctype",oe),ke.ensureKeyExists("type",oe),ke.ensureKeyExists("name",oe),ke.ensureKeyExists("elements",oe),ke.ensureKeyExists("parent",oe),oe}function wu(e){var t=Number(e);if(!isNaN(t))return t;var i=e.toLowerCase();return i==="true"?!0:i==="false"?!1:e}function Vi(e,t){var i;if(oe.compact){if(!Ee[oe[e+"Key"]]&&(di(oe.alwaysArray)?oe.alwaysArray.indexOf(oe[e+"Key"])!==-1:oe.alwaysArray)&&(Ee[oe[e+"Key"]]=[]),Ee[oe[e+"Key"]]&&!di(Ee[oe[e+"Key"]])&&(Ee[oe[e+"Key"]]=[Ee[oe[e+"Key"]]]),e+"Fn"in oe&&typeof t=="string"&&(t=oe[e+"Fn"](t,Ee)),e==="instruction"&&("instructionFn"in oe||"instructionNameFn"in oe)){for(i in t)if(t.hasOwnProperty(i))if("instructionFn"in oe)t[i]=oe.instructionFn(t[i],i,Ee);else{var r=t[i];delete t[i],t[oe.instructionNameFn(i,r,Ee)]=r}}di(Ee[oe[e+"Key"]])?Ee[oe[e+"Key"]].push(t):Ee[oe[e+"Key"]]=t}else{Ee[oe.elementsKey]||(Ee[oe.elementsKey]=[]);var s={};if(s[oe.typeKey]=e,e==="instruction"){for(i in t)if(t.hasOwnProperty(i))break;s[oe.nameKey]="instructionNameFn"in oe?oe.instructionNameFn(i,t,Ee):i,oe.instructionHasAttributes?(s[oe.attributesKey]=t[i][oe.attributesKey],"instructionFn"in oe&&(s[oe.attributesKey]=oe.instructionFn(s[oe.attributesKey],i,Ee))):("instructionFn"in oe&&(t[i]=oe.instructionFn(t[i],i,Ee)),s[oe.instructionKey]=t[i])}else e+"Fn"in oe&&(t=oe[e+"Fn"](t,Ee)),s[oe[e+"Key"]]=t;oe.addParent&&(s[oe.parentKey]=Ee),Ee[oe.elementsKey].push(s)}}function Ou(e){if("attributesFn"in oe&&e&&(e=oe.attributesFn(e,Ee)),(oe.trim||"attributeValueFn"in oe||"attributeNameFn"in oe||oe.nativeTypeAttributes)&&e){var t;for(t in e)if(e.hasOwnProperty(t)&&(oe.trim&&(e[t]=e[t].trim()),oe.nativeTypeAttributes&&(e[t]=wu(e[t])),"attributeValueFn"in oe&&(e[t]=oe.attributeValueFn(e[t],t,Ee)),"attributeNameFn"in oe)){var i=e[t];delete e[t],e[oe.attributeNameFn(t,e[t],Ee)]=i}}return e}function Rd(e){var t={};if(e.body&&(e.name.toLowerCase()==="xml"||oe.instructionHasAttributes)){for(var i=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g,r;(r=i.exec(e.body))!==null;)t[r[1]]=r[2]||r[3]||r[4];t=Ou(t)}if(e.name.toLowerCase()==="xml"){if(oe.ignoreDeclaration)return;Ee[oe.declarationKey]={},Object.keys(t).length&&(Ee[oe.declarationKey][oe.attributesKey]=t),oe.addParent&&(Ee[oe.declarationKey][oe.parentKey]=Ee)}else{if(oe.ignoreInstruction)return;oe.trim&&(e.body=e.body.trim());var s={};oe.instructionHasAttributes&&Object.keys(t).length?(s[e.name]={},s[e.name][oe.attributesKey]=t):s[e.name]=e.body,Vi("instruction",s)}}function Cd(e,t){var i;if(typeof e=="object"&&(t=e.attributes,e=e.name),t=Ou(t),"elementNameFn"in oe&&(e=oe.elementNameFn(e,Ee)),oe.compact){if(i={},!oe.ignoreAttributes&&t&&Object.keys(t).length){i[oe.attributesKey]={};var r;for(r in t)t.hasOwnProperty(r)&&(i[oe.attributesKey][r]=t[r])}!(e in Ee)&&(di(oe.alwaysArray)?oe.alwaysArray.indexOf(e)!==-1:oe.alwaysArray)&&(Ee[e]=[]),Ee[e]&&!di(Ee[e])&&(Ee[e]=[Ee[e]]),di(Ee[e])?Ee[e].push(i):Ee[e]=i}else Ee[oe.elementsKey]||(Ee[oe.elementsKey]=[]),i={},i[oe.typeKey]="element",i[oe.nameKey]=e,!oe.ignoreAttributes&&t&&Object.keys(t).length&&(i[oe.attributesKey]=t),oe.alwaysChildren&&(i[oe.elementsKey]=[]),Ee[oe.elementsKey].push(i);i[oe.parentKey]=Ee,Ee=i}function kd(e){oe.ignoreText||!e.trim()&&!oe.captureSpacesBetweenElements||(oe.trim&&(e=e.trim()),oe.nativeType&&(e=wu(e)),oe.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),Vi("text",e))}function Dd(e){oe.ignoreComment||(oe.trim&&(e=e.trim()),Vi("comment",e))}function Pd(e){var t=Ee[oe.parentKey];oe.addParent||delete Ee[oe.parentKey],Ee=t}function Ld(e){oe.ignoreCdata||(oe.trim&&(e=e.trim()),Vi("cdata",e))}function Bd(e){oe.ignoreDoctype||(e=e.replace(/^ /,""),oe.trim&&(e=e.trim()),Vi("doctype",e))}function Fd(e){e.note=e}var Nu=function(e,t){var i=Nd.parser(!0,{}),r={};if(Ee=r,oe=Id(t),i.opt={strictEntities:!0},i.onopentag=Cd,i.ontext=kd,i.oncomment=Dd,i.onclosetag=Pd,i.onerror=Fd,i.oncdata=Ld,i.ondoctype=Bd,i.onprocessinginstruction=Rd,i.write(e).close(),r[oe.elementsKey]){var s=r[oe.elementsKey];delete r[oe.elementsKey],r[oe.elementsKey]=s,delete r.text}return r},ja=Xn,Ud=Nu;function Md(e){var t=ja.copyOptions(e);return ja.ensureSpacesExists(t),t}var jd=function(e,t){var i,r,s,n;return i=Md(t),r=Ud(e,i),n="compact"in i&&i.compact?"_parent":"parent","addParent"in i&&i.addParent?s=JSON.stringify(r,function(o,a){return o===n?"_":a},i.spaces):s=JSON.stringify(r,null,i.spaces),s.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},Fe=Xn,qd=zn.isArray,Je,Ye;function $d(e){var t=Fe.copyOptions(e);return Fe.ensureFlagExists("ignoreDeclaration",t),Fe.ensureFlagExists("ignoreInstruction",t),Fe.ensureFlagExists("ignoreAttributes",t),Fe.ensureFlagExists("ignoreText",t),Fe.ensureFlagExists("ignoreComment",t),Fe.ensureFlagExists("ignoreCdata",t),Fe.ensureFlagExists("ignoreDoctype",t),Fe.ensureFlagExists("compact",t),Fe.ensureFlagExists("indentText",t),Fe.ensureFlagExists("indentCdata",t),Fe.ensureFlagExists("indentAttributes",t),Fe.ensureFlagExists("indentInstruction",t),Fe.ensureFlagExists("fullTagEmptyElement",t),Fe.ensureFlagExists("noQuotesForNativeAttributes",t),Fe.ensureSpacesExists(t),typeof t.spaces=="number"&&(t.spaces=Array(t.spaces+1).join(" ")),Fe.ensureKeyExists("declaration",t),Fe.ensureKeyExists("instruction",t),Fe.ensureKeyExists("attributes",t),Fe.ensureKeyExists("text",t),Fe.ensureKeyExists("comment",t),Fe.ensureKeyExists("cdata",t),Fe.ensureKeyExists("doctype",t),Fe.ensureKeyExists("type",t),Fe.ensureKeyExists("name",t),Fe.ensureKeyExists("elements",t),t}function _t(e,t,i){return(!i&&e.spaces?`
`:"")+Array(t+1).join(e.spaces)}function Br(e,t,i){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,Ye,Je));var r,s,n,o,a=[];for(r in e)e.hasOwnProperty(r)&&e[r]!==null&&e[r]!==void 0&&(o=t.noQuotesForNativeAttributes&&typeof e[r]!="string"?"":'"',s=""+e[r],s=s.replace(/"/g,"&quot;"),n="attributeNameFn"in t?t.attributeNameFn(r,s,Ye,Je):r,a.push(t.spaces&&t.indentAttributes?_t(t,i+1,!1):" "),a.push(n+"="+o+("attributeValueFn"in t?t.attributeValueFn(s,r,Ye,Je):s)+o));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&a.push(_t(t,i,!1)),a.join("")}function Iu(e,t,i){return Je=e,Ye="xml",t.ignoreDeclaration?"":"<?xml"+Br(e[t.attributesKey],t,i)+"?>"}function Ru(e,t,i){if(t.ignoreInstruction)return"";var r;for(r in e)if(e.hasOwnProperty(r))break;var s="instructionNameFn"in t?t.instructionNameFn(r,e[r],Ye,Je):r;if(typeof e[r]=="object")return Je=e,Ye=s,"<?"+s+Br(e[r][t.attributesKey],t,i)+"?>";var n=e[r]?e[r]:"";return"instructionFn"in t&&(n=t.instructionFn(n,r,Ye,Je)),"<?"+s+(n?" "+n:"")+"?>"}function Cu(e,t){return t.ignoreComment?"":"<!--"+("commentFn"in t?t.commentFn(e,Ye,Je):e)+"-->"}function ku(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,Ye,Je):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function Du(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,Ye,Je):e)+">"}function Wn(e,t){return t.ignoreText?"":(e=""+e,e=e.replace(/&amp;/g,"&"),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,Ye,Je):e)}function Gd(e,t){var i;if(e.elements&&e.elements.length)for(i=0;i<e.elements.length;++i)switch(e.elements[i][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function Vd(e,t,i){Je=e,Ye=e.name;var r=[],s="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;r.push("<"+s),e[t.attributesKey]&&r.push(Br(e[t.attributesKey],t,i));var n=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&e[t.attributesKey]["xml:space"]==="preserve";return n||("fullTagEmptyElementFn"in t?n=t.fullTagEmptyElementFn(e.name,e):n=t.fullTagEmptyElement),n?(r.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(r.push(Pu(e[t.elementsKey],t,i+1)),Je=e,Ye=e.name),r.push(t.spaces&&Gd(e,t)?`
`+Array(i+1).join(t.spaces):""),r.push("</"+s+">")):r.push("/>"),r.join("")}function Pu(e,t,i,r){return e.reduce(function(s,n){var o=_t(t,i,r&&!s);switch(n.type){case"element":return s+o+Vd(n,t,i);case"comment":return s+o+Cu(n[t.commentKey],t);case"doctype":return s+o+Du(n[t.doctypeKey],t);case"cdata":return s+(t.indentCdata?o:"")+ku(n[t.cdataKey],t);case"text":return s+(t.indentText?o:"")+Wn(n[t.textKey],t);case"instruction":var a={};return a[n[t.nameKey]]=n[t.attributesKey]?n:n[t.instructionKey],s+(t.indentInstruction?o:"")+Ru(a,t,i)}},"")}function Lu(e,t,i){var r;for(r in e)if(e.hasOwnProperty(r))switch(r){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||i)return!0;break;case t.cdataKey:if(t.indentCdata||i)return!0;break;case t.instructionKey:if(t.indentInstruction||i)return!0;break;case t.doctypeKey:case t.commentKey:return!0;default:return!0}return!1}function Hd(e,t,i,r,s){Je=e,Ye=t;var n="elementNameFn"in i?i.elementNameFn(t,e):t;if(typeof e>"u"||e===null||e==="")return"fullTagEmptyElementFn"in i&&i.fullTagEmptyElementFn(t,e)||i.fullTagEmptyElement?"<"+n+"></"+n+">":"<"+n+"/>";var o=[];if(t){if(o.push("<"+n),typeof e!="object")return o.push(">"+Wn(e,i)+"</"+n+">"),o.join("");e[i.attributesKey]&&o.push(Br(e[i.attributesKey],i,r));var a=Lu(e,i,!0)||e[i.attributesKey]&&e[i.attributesKey]["xml:space"]==="preserve";if(a||("fullTagEmptyElementFn"in i?a=i.fullTagEmptyElementFn(t,e):a=i.fullTagEmptyElement),a)o.push(">");else return o.push("/>"),o.join("")}return o.push(Bu(e,i,r+1,!1)),Je=e,Ye=t,t&&o.push((s?_t(i,r,!1):"")+"</"+n+">"),o.join("")}function Bu(e,t,i,r){var s,n,o,a=[];for(n in e)if(e.hasOwnProperty(n))for(o=qd(e[n])?e[n]:[e[n]],s=0;s<o.length;++s){switch(n){case t.declarationKey:a.push(Iu(o[s],t,i));break;case t.instructionKey:a.push((t.indentInstruction?_t(t,i,r):"")+Ru(o[s],t,i));break;case t.attributesKey:case t.parentKey:break;case t.textKey:a.push((t.indentText?_t(t,i,r):"")+Wn(o[s],t));break;case t.cdataKey:a.push((t.indentCdata?_t(t,i,r):"")+ku(o[s],t));break;case t.doctypeKey:a.push(_t(t,i,r)+Du(o[s],t));break;case t.commentKey:a.push(_t(t,i,r)+Cu(o[s],t));break;default:a.push(_t(t,i,r)+Hd(o[s],n,t,i,Lu(o[s],t)))}r=r&&!a.length}return a.join("")}var Fu=function(e,t){t=$d(t);var i=[];return Je=e,Ye="_root_",t.compact?i.push(Bu(e,t,0,!0)):(e[t.declarationKey]&&i.push(Iu(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&i.push(Pu(e[t.elementsKey],t,0,!i.length))),i.join("")},zd=Fu,Xd=function(e,t){e instanceof Ci&&(e=e.toString());var i=null;if(typeof e=="string")try{i=JSON.parse(e)}catch{throw new Error("The JSON structure is invalid")}else i=e;return zd(i,t)},Wd=Nu,Kd=jd,Jd=Fu,Yd=Xd,qa={xml2js:Wd,xml2json:Kd,js2xml:Jd,json2xml:Yd},Ve=[];for(var Ws=0;Ws<256;++Ws)Ve.push((Ws+256).toString(16).slice(1));function Qd(e,t=0){return(Ve[e[t+0]]+Ve[e[t+1]]+Ve[e[t+2]]+Ve[e[t+3]]+"-"+Ve[e[t+4]]+Ve[e[t+5]]+"-"+Ve[e[t+6]]+Ve[e[t+7]]+"-"+Ve[e[t+8]]+Ve[e[t+9]]+"-"+Ve[e[t+10]]+Ve[e[t+11]]+Ve[e[t+12]]+Ve[e[t+13]]+Ve[e[t+14]]+Ve[e[t+15]]).toLowerCase()}var sr,Zd=new Uint8Array(16);function eg(){if(!sr&&(sr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!sr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sr(Zd)}var tg=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const $a={randomUUID:tg};function ig(e,t,i){if($a.randomUUID&&!t&&!e)return $a.randomUUID();e=e||{};var r=e.random||(e.rng||eg)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Qd(r)}function Ga(e,t){return`<${e}><layout>${t}</layout></${e}>`}function rg(){const e=new Date,t=e.getUTCFullYear(),i=String(e.getUTCMonth()+1).padStart(2,"0"),r=String(e.getUTCDate()).padStart(2,"0"),s=String(e.getUTCHours()).padStart(2,"0"),n=String(e.getUTCMinutes()).padStart(2,"0"),o=String(e.getUTCSeconds()).padStart(2,"0");return`${t}-${i}-${r}T${s}:${n}:${o}+00:00`}class sg{constructor(t){this.nameDelimiter=", ",this.et_al_min=3,this.abbreviateNames=!0,this.cslDictionary=t}setCreatorParameters(t){this.nameDelimiter=t.authorDelimiter,this.et_al_min=t.etalMin,this.abbreviateNames=t.abbreviateNames}parsePlaceholdersAndText(t){const i=/([{][^{}]*[}]|[[][^[\]]*[\]]|[<][^<>]*[>])|([^{}<>[\]]+)/g,r=[];let s;for(console.log("Now processing "+t);(s=i.exec(t))!==null;)if(s[1]){let n,o=s[1].slice(1,-1);switch(s[1][0]){case"{":n="facultative",console.log("HERE"),console.log(s[1]),r.push({content:this.parseNestedPlaceholders(o),styling:null,type:n});break;case"[":n="group",r.push({content:this.parseNestedPlaceholders(o),styling:null,type:n});break;case"<":n="variable",r.push(this.createPlaceholderObject(this.evaluateStyling(o),n));break;default:n="unknown",r.push({content:o,type:n})}}else s[2]&&(r.push({content:s[2],type:"text",styling:null}),s[2].includes("<")&&console.warn("Found < in ",s[2]));return r}evaluateStyling(t){const i=/\(..?\)/g,r=t.match(i),s=t.split("(")[0];let n="";if(r)for(const o of r)switch(o){case"(sc)":n+='font-variant="small-caps" ';break;case"(i)":n+='font-style="italic" ';break;case"(b)":n+='font-weight="bold" ';break}return{styling:n,content:s}}createPlaceholderObject(t,i){return{...t,type:i}}parseNestedPlaceholders(t){const i=/([{][^{}]*[}]|[[][^[\]]*[\]]|[<][^<>]*[>])/g,r=[];let s,n=0;for(;(s=i.exec(t))!==null;)s.index>n&&(r.push({content:t.substring(n,s.index),type:"text"}),console.log("text oben"+t.substring(n,s.index))),s[0].charAt(0)==="<"?(r.push(this.createPlaceholderObject(this.evaluateStyling(s[0].slice(1,-1)),"variable")),n=s.index+s[0].length):s[0].charAt(0)==="["?r.push({content:this.parseNestedPlaceholders(s[0].slice(1,-1)),styling:null,type:"group"}):(r.push({content:t.substring(n,s.index),type:"text"}),console.log("text unten"+t.substring(n,s.index)));if(n<t.length){const o=t.substring(n);if(!o.includes("<"))r.push({content:o,type:"text",styling:null});else{const a=o.split("]")[1];a.includes("<")||r.push({content:a,type:"text",styling:null})}}return r.length?r:t}createTextCSLBlock(t){return`<text value="${t.content}"/>`}createVariableCSLBlock(t){let i=this.cslDictionary[t.content];if(console.log(t.content),console.log(i),console.log(typeof i),typeof i=="string")return`<text variable="${i}" ${t.styling?t.styling:""} />`;if(i.type==="date")return`<date ${i.content} />`;if(i.type==="variable")return`<text ${i.content} />`}createCSLBlock(t){let i="";switch(t.type){case"text":i+=this.createTextCSLBlock(t);break;case"variable":i+=this.createVariableCSLBlock(t);break;case"group":i+=this.createCSLGroupBlock(t);break;case"facultative":i+=`<choose><if variable="${this.cslDictionary[this.determineIfVariable(t.content)]}" match="any">${t.content.reduce((r,s)=>r+this.createCSLBlock(s),"")}</if></choose>`;break}return i+=`
`,i}determineIfVariable(t){console.log(t);const i=t.find(r=>r.type==="variable");if(console.log(i),i)return i.content;{const r=t.find(s=>s.type==="group");return console.log(r),r.content[0].content}}createCSLGroupBlock(t){const i=t.content[1].content==="Name";let r;try{r=`<names variable="${this.cslDictionary[t.content[0].content].name}">
`,r+=`<name delimiter="${this.nameDelimiter}" et-al-min="${this.et_al_min}" et-al-use-first="1" ${i?'name-as-sort-order="first"':""} ${this.abbreviateNames?'initialize-with=". "':""} ${t.content.length>2?"":'form="short"'} >
`;for(const s of t.content.slice(1))r+=`<name-part name="${this.cslDictionary[s.content].namePart}" ${s.styling?s.styling:""} />
`;r+=`</name>
</names>
`}catch(s){r="<!-- ERROR: "+s+` -->
`,console.error(r)}return r}createCSL(t){const i=this.parsePlaceholdersAndText(t);console.log(JSON.stringify(i));let r="";for(let s of i)s.type==="group"?r+=this.createCSLGroupBlock(s):r+=this.createCSLBlock(s);return r}createStyle(t){let i=this.createRawStyle(t);const r={compact:!1,spaces:4};var s=qa.xml2json(i,r);return i=qa.json2xml(s,r),console.log("generated style:",i),i}createTypeChooser(t){let i="";const r=Object.keys(t);for(const s of r)i+=`<choose><if type="${s}" match="any">${this.createCSL(t[s])}</if></choose>`;return i}createCitation(t){const i=t.special,r=this.createTypeChooser(t.regular);this.abbreviateNames=i.abbreviateNamesSubsequent;const s=this.createCSL(i.subsequent),n=this.createCSL(i.firstNoteReferenceNumber),o=`
    <choose>
        <if match="any" position="ibid">
          <text term="ibid"/>
        </if>
        
        <else>
          <choose>
            <if match="any" position="subsequent">
             ${s}
            </if>
          </choose>
          <choose>
            <if variable="first-reference-note-number">
            ${n}
            </if>
        </choose>
        </else>
    </choose>
`,a='<choose><if match="all" position="first">'+r+"</if></choose>"+o;return Ga("citation",a)}createStyleHead(t){return`
  <?xml version="1.0" encoding="utf-8"?>
<style xmlns="http://purl.org/net/xbiblio/csl" class="note" version="1.0" demote-non-dropping-particle="never" default-locale="de">
<info>
<title>${t.title}</title>
<id>${ig()}</id>
<author>
<name>${t.name}</name>
</author>
<contributor>
<name>Ludwig Patzold</name>
</contributor>
<summary>${t.summary}</summary>
<updated>${rg()}</updated>
<category citation-format="note"/>
</info>`}bundleLocaleUpdates(t){let i="<locale><terms>";return i+=Object.keys(t).reduce((r,s)=>r+`<term name="${s}">${t[s]}</term>`,""),i+="</terms></locale>",i}createRawStyle(t){let i="";return i+=this.createStyleHead(t.general),i+=this.bundleLocaleUpdates(t.locale),console.warn(JSON.stringify(t.bibliography.settings)),this.setCreatorParameters(t.bibliography.settings),i+=Ga("bibliography",this.createTypeChooser(t.bibliography.content)),this.setCreatorParameters(t.citation.settings),i+=this.createCitation(t.citation.content),i+="</style>",i}}const Uu={appTitle:"CSL Style Generator",bibliography:"Bibliography",settings:"Settings",nameDelimiterSetting:"name delimiter",nameDelimiterSettingTooltip:"in case there are multiple names",etAlMinSetting:"et al. min",etAlMinSettingTooltip:"minimum number of authors to use et al.",abbreviateNamesSetting:"abbreviate names",abbreviateNamesSettingTooltip:"e.g. J. Doe",citation:"Citation",sameAsBibliographyButton:"same as bibliography",subsequentCitations:"Subsequent Citations",ibidTerm:"ibid. term",subsequentLabel:"subsequent occurence",cross_reference:"cross-reference",generalSettings:"General Settings",styleName:"style name",styleAuthor:"your name",styleDescription:"description",etalTerm:"et al. term",downloadHeading:"Save Your Work",openHeading:"Open",saveButton:"Save",loadButton:"Load",exportButton:"Export",viewerHeading:"View Style",stylerDefaults:{book:"[author<given><family(sc)>], <title(i)>{ (<volumeTitle>}{, <volumeNumber>)}, <place>: <publisher>, {<edition>, }<year>",chapter:"[author<given><family(sc)>], <title>, in: [editor<given><family>] (Hg.), <volumeTitle(i)>{ (<collection>}{, <volumeNumber>)}, <place>: <publisher>, {<edition>, }<year>, S. <pages>","article-journal":"[author<given><family(sc)>], <title>, in: <journal(i)> <volumeNumber> (<year>), S. <pages>","entry-encyclopedia":"[author<given><family(sc)>], Art. <title>, in: <encyclopedia(i)> <volumeNumber> (<year>), Sp. <pages>","article-newspaper":"{[author<family>], }<title>, ed. [contributor<given><family(sc)>] (<journal> <volumeNumber>), <place> <year>{, S. <pages>}"},citSpecialDefaults:{ibidTerm:"ibid.",firstNoteReferenceNumber:" (see <footnote>)",subsequent:"[author<family(sc)>], <shortTitle>",abbreviateNamesSubsequent:!1},stylerDescriptions:{book:"Book",chapter:"Chapter","article-journal":"Journal article","entry-encyclopedia":"Encyclopedia entry","article-newspaper":"Newspaper article"},cslDictionary:{year:{type:"date",content:'date-parts="year" form="text" variable="issued"'},author:{type:"name",name:"author"},editor:{type:"name",name:"editor"},given:{type:"namePart",namePart:"given"},family:{type:"namePart",namePart:"family"},title:"title",volumeTitle:"container-title",journal:"container-title",encyclopedia:"container-title",collection:"collection-title",volumeNumber:"volume",place:"publisher-place",publisher:"publisher",edition:"edition",pages:"page",contributor:"contributor",shortTitle:{type:"variable",content:'variable="title" form="short"'},footnote:"first-reference-note-number"},generalSettingsDefaults:{etalTerm:"et al.",name:"style",author:"John Doe",description:"description"}},ng={appTitle:"CSL-Stil-Generator",bibliography:"Bibliographie",settings:"Einstellungen",nameDelimiterSetting:"Trennzeichen fr Namen",nameDelimiterSettingTooltip:"falls es mehrere Namen gibt",etAlMinSetting:'"et al."-min',etAlMinSettingTooltip:'Mindestanzahl von Namen fr "et al."',abbreviateNamesSetting:"Vornamen abkrzen",abbreviateNamesSettingTooltip:"mit Punkt, z. B. M. Mustermann",citation:"Funoten",sameAsBibliographyButton:'von "Bibliographie" bernehmen',subsequentCitations:"Kurzzitate",ibidTerm:"ibid.-Form",subsequentLabel:"Form des Kurzzitats",cross_reference:"Querverweis",generalSettings:"Informationen zum Stil",styleName:"Name des Stils",styleAuthor:"Ihr Name",styleDescription:"Beschreibung des Stils",etalTerm:"et al.-Form",downloadHeading:"Sichern",saveButton:"Speichern",loadButton:"Laden",exportButton:"Exportieren",viewerHeading:"Ansehen",openHeading:"ffnen",stylerDefaults:{book:"[Autor<Vorname><Name(sc)>], <Titel(i)>{ (<Reihentitel>}{, <Bd.-Nr.>)}, <Ort>: <Verlagsname>, {<Auflage>, }<Jahr>",chapter:"[Autor<Vorname><Name(sc)>], <Titel>, in: [Herausgeber<Vorname><Name>] (Hg.), <Bandtitel(i)>{ (<Reihentitel>}{, <Bd.-Nr.>)}, <Ort>: <Verlagsname>, {<Auflage>, }<Jahr>, S. <Seitenzahlen>","article-journal":"[Autor<Vorname><Name(sc)>], <Titel>, in: <Zeitschrift(i)> <Bd.-Nr.> (<Jahr>), S. <Seitenzahlen>","entry-encyclopedia":"[Autor<Vorname><Name(sc)>], Art. <Titel>, in: <Lexikon(i)> <Bd.-Nr.> (<Jahr>), Sp. <Seitenzahlen>","article-newspaper":"{[Autor<Name>], }<Titel>, ed. [Editor<Vorname><Name(sc)>] (<Zeitschrift> <Bd.-Nr.>), <Ort> <Jahr>{, S. <Seitenzahlen>}"},stylerDescriptions:{book:"Buch",chapter:"Aufsatz in einem Sammelband","article-journal":"Zeitschriftenartikel","entry-encyclopedia":"Lexikoneintrag","article-newspaper":"Zeitungsartikel"},citSpecialDefaults:{ibidTerm:"ibid.",firstNoteReferenceNumber:" (wie Anm. <FN>)",subsequent:"[Autor<Name(sc)>], <Kurztitel>",abbreviateNamesSubsequent:!1},cslDictionary:{Jahr:{type:"date",content:'date-parts="year" form="text" variable="issued"'},Autor:{type:"name",name:"author"},Herausgeber:{type:"name",name:"editor"},Vorname:{type:"namePart",namePart:"given"},Name:{type:"namePart",namePart:"family"},Titel:"title",Bandtitel:"container-title",Zeitschrift:"container-title",Lexikon:"container-title",Reihentitel:"collection-title","Bd.-Nr.":"volume",Ort:"publisher-place",Verlagsname:"publisher",Auflage:"edition",Seitenzahlen:"page",Editor:{type:"name",name:"contributor"},Kurztitel:{type:"variable",content:'variable="title" form="short"'},FN:"first-reference-note-number"},generalSettingsDefaults:{etalTerm:"et al.",name:"Stil",author:"Max Mustermann",description:"Beschreibung"}},og={de:ng,en:Uu};function Mu(){return navigator.languages!=null?navigator.languages[0]:navigator.language}const xi=()=>og[Mu()]||Uu;function ag(){const e=xi().cslDictionary,t=Object.keys(e),i=[],r=[],s=[];for(const n of t)e[n].name?i.push(n):e[n].namePart?s.push(n):r.push(n);return{nameTerms:i,namePartTerms:s,variableTerms:r}}const lg=new Set(["en","de"]),Hi=xi(),Kn=Hi.stylerDefaults,ug=Hi.stylerDescriptions,fg=(e,t)=>({type:e,prefix:t,id:t+"-"+e,name:ug[e]}),Va=e=>Object.keys(Kn).map(t=>fg(t,e)),Tt=Hi.generalSettingsDefaults;let ki={authorDelimiter:", ",etalMin:4,abbreviateNames:!1},Di={authorDelimiter:", ",etalMin:4,abbreviateNames:!1},gi=Hi.citSpecialDefaults;const st=class st{static async createEngine(){const t=await Fn.build("de-DE",vh);return st.cslEngine=t,st.style.value=t.sytle,t}constructor(t){if(!st.cslEngine)throw new Error("CSLEngine not initialized");this.info=t,this.output=qt(""),this.code=qt(null),this.code.value=Kn[t.type]}getCode(){return this.code}update(){const t=st.updateStyle();if(st.cslEngine)switch(st.cslEngine.updateStyle(t),this.info.prefix){case"bib":this.output.value=st.cslEngine.previewBibliographyForType(this.info.type);break;case"cit":this.output.value=st.cslEngine.previewCitationForType(this.info.type);break;default:this.output.value="prefix not found";break}}static updateStyle(){const t=vg();return st.style.value=t,t}};qr(st,"cslEngine",null),qr(st,"style",qt(null));let ct=st;const ju=Va("bib").concat(Va("cit"));let Fr={},Ei=[];async function cg(){const e=await ct.createEngine();for(const t of ju){const i=new ct(t);Fr[t.id]=i,Ei.push(i)}return e}function pg(){return ct.style}function hg(){return Ei.filter(e=>e.info.prefix==="bib")}function dg(){return Ei.filter(e=>e.info.prefix==="cit")}function Ha(e){return ju.filter(t=>t.prefix===e).map(t=>t.id)}function gg(){console.log("adoptCitationFromBibStylers()");const e=hg(),t=dg();console.log("bibStylers:",e),console.log("citStylers:",t);for(let i=0;i<t.length;i++)console.log(`Copying code from bibStylers[${i}] to citStylers[${i}]`),t[i].code.value=e[i].code.value,t[i].update(),console.log(`citStylers[${i}].code:`,t[i].code)}const mg=new sg(Hi.cslDictionary);function bg(e,t,i){return{title:e,name:t,summary:i}}function yg(){const e=Object.keys(Kn),t=["bib","cit"];let i={};for(const r of t){let s={};for(const n of e){const o=r+"-"+n,u=Fr[o].code.value;s[n]=u}i[r]=s}return i}function _g(e){for(const t of Object.keys(e)){const i=e[t];for(const r of Object.keys(i)){const s=t+"-"+r,n=Fr[s];n&&(n.code.value=i[r],n.update())}}}function vg(){const e=qu();return mg.createStyle(e)}function qu(){const e=yg(),t=bg(Tt.name,Tt.author,Tt.description);ct.cslEngine.locale.updateTerm("etal",Tt.etalTerm),ct.cslEngine.updateTerm("ibid",gi.ibidTerm);const i=ct.cslEngine.locale.getLocaleUpdates(),s={content:{regular:e.cit,special:gi},settings:Di},n={content:e.bib,settings:ki};return{general:t,citation:s,bibliography:n,locale:i}}function xg(e){_g({cit:e.citation.content.regular,bib:e.bibliography.content}),ct.cslEngine.locale.updateTerm("etal",e.general.etalTerm),ct.cslEngine.updateTerm("ibid",e.citation.content.special.ibidTerm),Tt.name=e.general.title,Tt.author=e.general.name,Tt.description=e.general.summary,gi=e.citation.content.special,Di=e.citation.settings,ki=e.bibliography.settings}const Lt={createNode:function(){return Ui()},cloneNode:function(e){const t=Ui();return Vu(e,t),t},collectRanges:function(e){const t=[];return Gu(e,t,0),t},addRanges:function(e,t,i){Eg(e,t,i||!1)},addRange:function(e,t){Ot(e,t)},compareRanges:function(e,t){return Hu(e,t)},createRange:function(e){return wt(e)}};function Ui(e){return{value:e||null,children:[]}}function wt(e){return"length"in e&&"end"in e?{...e}:"length"in e?{start:e.start,end:e.start+e.length,length:e.length,tag:e.tag||{}}:{start:e.start,end:e.end,length:e.end-e.start,tag:e.tag||{}}}function $u(e,t){for(let i=0;i<e.children.length;i++){const r=e.children[i];if(r.value&&r.value.start<=t.start&&r.value.end>=t.end){if(r.children.length===0)return r;for(let s=0;s<r.children.length;s++){const n=$u(r.children[s],t);if(n)return n}return r}}return!e.value||e.value.start<=t.start&&e.value.end>=t.end?e:null}function Eg(e,t,i){i||t.sort(Hu);for(let r=0;r<t.length;r++)Ot(e,t[r])}function Ot(e,t){const i=$u(e,t);if(i){for(let r=0;r<i.children.length;r++){const s=i.children[r];if(s.value&&!(s.value.end<=t.start)){if(s.value.start>=t.end)i.children.splice(r,0,Ui(t));else if(s.value.start>=t.start&&s.value.end<=t.end){let n=wt({start:t.start,end:s.value.start,tag:t.tag}),o=wt({start:s.value.start,length:s.value.length,tag:t.tag}),a=wt({start:s.value.end,end:t.end,tag:t.tag});n.length>0&&Ot(i,n),Ot(s,o),a.length>0&&Ot(i,a)}else if(s.value.start<=t.start&&s.value.end>=t.end){const n={value:t,children:s.children};s.children=[n]}else if(s.value.start<=t.start){let n=wt({start:t.start,end:s.value.end,tag:t.tag}),o=wt({start:s.value.end,end:t.end,tag:t.tag});n.length>0&&Ot(s,n),o.length>0&&Ot(i,o)}else if(s.value.end>=t.end){let n=wt({start:t.start,end:s.value.start,tag:t.tag}),o=wt({start:s.value.start,end:t.end,tag:t.tag});n.length>0&&Ot(i,n),o.length>0&&Ot(s,o)}else throw new Error("Unknown relationship with sibling and current node");return}}i.children.push(Ui(t))}}function Gu(e,t,i){if(e.value!==null){const r={...e.value};r.tag=r.tag||{},r.tag={...r.tag},r.tag.nodeIndex=i,t.push(r)}for(let r=0;r<e.children.length;r++)Gu(e.children[r],t,r)}function Vu(e,t){t.value=e.value?wt(e.value):null,t.children=[];for(let i=0;i<e.children.length;i++){const r=Ui();Vu(e.children[i],r),t.children.push(r)}}function Hu(e,t){return e.start<t.start?-1:e.start>t.start?1:e.length>t.length?-1:e.length<t.length?1:0}function Tg(e,t){return e===t?!0:!e||!t?!1:e.start===t.start&&e.end===t.end&&e.direction===t.direction}const zu=(e,t)=>{const i=e.__vccOpts||e;for(const[r,s]of t)i[r]=s;return i},Sg={name:"RawHighlightTextArea",inheritAttrs:!1,props:{value:{default:"",type:String},initialValue:{default:"NOTHINGGGGGG",type:String},segments:{default:function(){return[]},type:Array},selection:{default:function(){return{start:0,end:0,direction:"forward"}},type:Object},autoHeight:{default:!1,type:Boolean}},data:function(){return{input:this.value||"hmmmmmmmm",backgroundJobInterval:-1,selectedRange:{start:0,end:0,direction:"forward"},hasFocus:!1}},computed:{containerClasses:function(){var e=[];return e.push(this.hasFocus?"hta-focus":"hta-blur"),e},sortedSegments:function(){const e=this.segments.map(t=>Lt.createRange(t));return e.sort((t,i)=>Lt.compareRanges(t,i)),e},segmentTree:function(){const e=Lt.createNode();return Lt.addRanges(e,this.sortedSegments,!0),e},hilights:function(){const e=this.selectedRange,t=Lt.cloneNode(this.segmentTree);return Lt.addRange(t,Lt.createRange({start:e.start,end:e.end,tag:{class:"hta-selection"}})),Lt.collectRanges(t)},html:function(){return Ag(this.input,this.hilights)}},watch:{value:function(e){this.input=e||"h00000000000"},initialValue:function(e){this.input=e||"aaaaaaahhhhhhhh"},selection:{handler:function(e){e&&(e.start=+e.start,e.end=+e.end,e.direction=e.direction||"forward",this.select(e))},deep:!0},html:function(){const e=this;this.$nextTick(function(){e.syncScroll()})},hasFocus:function(e){this.$emit(e?"focus":"blur")}},methods:{onContainerScroll:function(){this.$refs.container.scrollLeft=0},onInputScroll:function(){this.syncScroll()},onTextInput:function(){this.$emit("input",this.$refs.input.value),this.autoHeight&&this.fitHeight()},focus:function(){this.$refs.input.focus()},select:function(e){if(!e)return;this.$refs.input.setSelectionRange(e.start,e.end,e.direction),this.selectedRange={start:e.start,end:e.end,direction:e.direction},this.$nextTick(()=>this.scrollToRevealSelection())},scrollToRevealSelection:function(){const e=this.$refs.input;if(!e)return;const t=this.$refs.background;if(!t)return;const i=t.querySelector(".hta-selection");if(!i)return;let r=i.offsetTop;r>=e.scrollTop&&r<=e.scrollTop+e.clientHeight||(r=Math.max(0,Math.min(r,e.scrollHeight-e.clientHeight)),e.scrollTop=r)},updateSelection:function(){const e=this.$refs.input;if(!e)return;const t={start:e.selectionStart||0,end:e.selectionEnd||0,direction:e.selectionDirection||"forward"},i=this.selectedRange;Tg(t,i)||this.$emit("update:selection",t)},fitHeight:function(){const e=this;this.$nextTick(function(){const t=e.$refs.input,i=e.$refs.container;!t||!i||(i.style.height=0,i.style.height=t.scrollHeight+"px",this.syncSize())})},syncScroll:function(){const e=this;this.$nextTick(function(){const t=e.$refs.input,i=e.$refs.background;i.scrollTop=t.scrollTop;const r=t.scrollLeft;r>0?i.style.transform="translateX("+-r+"px)":i.style.transform=""})},syncSize:function(){const e=this;this.$nextTick(function(){const t=e.$refs.input,i=e.$refs.container,r=e.$refs.background;!t||!i||!r||(t.clientHeight!=i.clientHeight&&(t.style.height=i.clientHeight+"px"),t.clientWidth!=i.clientWidth&&(t.style.width=i.clientWidth+"px"),r.clientHeight!=i.clientHeight&&(r.style.height=i.clientHeight+"px"),r.clientWidth!=i.clientWidth&&(r.style.width=i.clientWidth+"px"))})},backgroundJob:function(){this.syncSize(),this.updateSelection()}},created:function(){this.input=this.value||"h111111111111"},mounted:function(){this.input=this.value||this.initialValue;const e=this;this.backgroundJobInterval=setInterval(function(){e.backgroundJob()},300)},destroyed:function(){this.backgroundJobInterval>=0&&clearInterval(this.backgroundJobInterval)}};function Ag(e,t){if(e.length==0)return"";e.charAt(e.length-1)===`
`&&(e=e+`
`);const i=[],r=[];let s=0,n=0;for(let u=0;u<e.length;u++){for(;i.length&&!(i[i.length-1].end>u);)o(u),r.push("</span>"),i.pop();for(;s<t.length;s++){const f=t[s];if(f.start>u)break;o(u),r.push("<span class='hta-highlight ");const c=f.tag&&f.tag.class;c&&r.push(c);const h=f.tag&&f.tag.nodeIndex;typeof h=="number"&&r.push((h%2," hta-highlight-color")),r.push("'>"),f.end===f.start?r.push("</span>"):i.push(f)}}for(o(e.length);i.length;)r.push("</span>"),i.pop();return r.join("");function o(u){if(u<=n)return;const f=e.substring(n,u);r.push(a(f)),n=u}function a(u){const f=document.createElement("span");return f.textContent=u,f.innerHTML}}const wg={ref:"background",class:"hta-background"},Og=["innerHTML"];function Ng(e,t,i,r,s,n){return Xe(),Ze("div",{ref:"container",onScroll:t[5]||(t[5]=(...o)=>n.onContainerScroll&&n.onContainerScroll(...o)),class:qi(["hta-container",n.containerClasses])},[me("div",wg,[me("div",{class:"hta-highlights hta-text",innerHTML:n.html},null,8,Og)],512),Et(me("textarea",Ln({ref:"input"},e.$attrs,{"onUpdate:modelValue":t[0]||(t[0]=o=>e.input=o),onInput:t[1]||(t[1]=(...o)=>n.onTextInput&&n.onTextInput(...o)),onScroll:t[2]||(t[2]=(...o)=>n.onInputScroll&&n.onInputScroll(...o)),onFocus:t[3]||(t[3]=o=>e.hasFocus=!0),onBlur:t[4]||(t[4]=o=>e.hasFocus=!1),class:"hta-input hta-text",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),null,16),[[Mt,e.input]])],34)}const Ig=zu(Sg,[["render",Ng]]),Rg={name:"HighlightTextArea",inheritAttrs:!1,components:{RawHighlightTextArea:Ig},props:{value:{default:"",type:String},initialValue:{default:"hiiiiiii",type:String},segments:{default:function(){return[]},type:Array},selection:{default:function(){return{start:0,end:0,direction:"forward"}},type:Object},autoHeight:{default:!1,type:Boolean}},data:function(){return{hasFocus:!1}},methods:{onFocus:function(){this.hasFocus=!0,this.$emit("focus")},onBlur:function(){this.hasFocus=!1,this.$emit("blur")},onInput:function(e){this.$emit("input",e)},focus:function(){this.$refs.input.focus()}}};function Cg(e,t,i,r,s,n){const o=oc("RawHighlightTextArea");return Xe(),Ze("div",{class:qi(["hta-border",{"hta-border-focus":e.hasFocus}])},[Me(o,Ln({ref:"input"},e.$attrs,{value:i.value,initialValue:i.initialValue,segments:i.segments,selection:i.selection,autoHeight:i.autoHeight,onInput:n.onInput,onFocus:n.onFocus,onBlur:n.onBlur,"onUpdate:selection":t[0]||(t[0]=a=>e.$emit("update:selection",a))}),null,16,["value","initialValue","segments","selection","autoHeight","onInput","onFocus","onBlur"])],2)}const pn=zu(Rg,[["render",Cg]]);function hn(e){const t=[{regex:Dg,class:"blue"},{regex:kg,class:"green"},{regex:/\(sc\)|\(i\)|\(b\)/g,class:"red"},{regex:/\{([^}]+)\}/g,class:"orange"}];let i=[];return t.forEach(r=>{[...e.matchAll(r.regex)].forEach(n=>{i.push({start:n.index,end:n.index+n[0].length,tag:{class:r.class}})})}),i}const dn=ag(),kg=new RegExp(Xu("<",">",dn.variableTerms),"g"),Dg=new RegExp(Pg(dn.nameTerms,dn.namePartTerms),"g");function Xu(e,t,i){const r=i.reduce((o,a)=>o+a+"|","");return`\\${e}(${r.substring(0,r.length-1)})(\\(sc\\)|\\(i\\)|\\(b\\))?\\${t}`}function Pg(e,t){let i="\\[",r="("+e.reduce((s,n)=>s+n+"|","");return r=r.substring(0,r.length-1)+")",i+=r,i+="("+Xu("<",">",t)+")+",i+="\\]",i}const Lg={class:"flex-container"},Bg={class:"blog-post"},Fg=["innerHTML"],za={__name:"StylerComponent",props:["stylerID"],setup(e){const i=Fr[e.stylerID],r=i.getCode(),s=_r(()=>hn(r.value));return i.update(),(n,o)=>(Xe(),Ze("div",Lg,[me("div",Bg,[me("h4",null,De(Ae(i).info.name),1),Me(pn,{modelValue:Ae(r),"onUpdate:modelValue":o[0]||(o[0]=a=>qe(r)?r.value=a:null),initialValue:Ae(r),segments:s.value,onInput:o[1]||(o[1]=a=>Ae(i).update())},null,8,["modelValue","initialValue","segments"])]),me("div",{innerHTML:Ae(i).output.value,class:"output"},null,8,Fg)]))}},Ug={class:"flex-container"},Xa={__name:"StylerSettings",props:fc(["prefix"],{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=xi(),i=Dn(e,"modelValue"),r=_i(i.value),n=e.prefix;function o(a){for(const u of Ei.filter(f=>f.info.prefix===a))u.update()}return ci(r,a=>{o(n)}),(a,u)=>(Xe(),Ze(We,null,[me("h2",null,De(Ae(t).settings),1),me("div",Ug,[me("div",null,[me("h3",null,De(Ae(t).nameDelimiterSetting),1),me("p",null,De(Ae(t).nameDelimiterSettingTooltip),1),Et(me("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=f=>r.authorDelimiter=f)},null,512),[[Mt,r.authorDelimiter,void 0,{lazy:!0}]])]),me("div",null,[me("h3",null,De(Ae(t).etAlMinSetting),1),me("p",null,De(Ae(t).etAlMinSettingTooltip),1),Et(me("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=f=>r.etalMin=f)},null,512),[[Mt,r.etalMin,void 0,{lazy:!0}]])]),me("div",null,[me("h3",null,De(Ae(t).abbreviateNamesSetting),1),me("p",null,De(Ae(t).abbreviateNamesSettingTooltip),1),Et(me("input",{type:"checkbox","onUpdate:modelValue":u[2]||(u[2]=f=>r.abbreviateNames=f),unchecked:""},null,512),[[Ql,r.abbreviateNames]])])])],64))}},Mg={class:"flex-container"},jg=["innerHTML"],qg={class:"flex-container"},$g=["innerHTML"],Gg={__name:"CitationSpecials",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Dn(e,"modelValue"),i=_i(t.value),r=qt({ibid:"loading",subsequent:"loading"}),s=xi();function n(){for(const f of Ei.filter(c=>c.info.prefix==="cit"))f.update()}ci(i,f=>{o()});function o(){try{n(),r.value=ct.cslEngine.previewCitationSpecials()}catch(f){console.error("Error loading data:",f)}}Ir(()=>{o()});const a=_r(()=>hn(i.subsequent)),u=_r(()=>hn(i.firstNoteReferenceNumber));return(f,c)=>(Xe(),Ze(We,null,[me("h2",null,De(Ae(s).subsequentCitations),1),me("div",Mg,[me("div",null,[me("p",null,De(Ae(s).ibidTerm),1),Et(me("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=h=>i.ibidTerm=h)},null,512),[[Mt,i.ibidTerm,void 0,{lazy:!0}]])]),me("div",{class:"output",innerHTML:r.value.ibid},null,8,jg)]),me("div",qg,[me("div",null,[me("p",null,De(Ae(s).subsequentLabel),1),Me(pn,{modelValue:i.subsequent,"onUpdate:modelValue":c[1]||(c[1]=h=>i.subsequent=h),modelModifiers:{lazy:!0},initialValue:i.subsequent,segments:a.value},null,8,["modelValue","initialValue","segments"]),me("p",null,De(Ae(s).abbreviateNamesSetting),1),Et(me("input",{type:"checkbox","onUpdate:modelValue":c[2]||(c[2]=h=>i.abbreviateNamesSubsequent=h),unchecked:""},null,512),[[Ql,i.abbreviateNamesSubsequent,void 0,{lazy:!0}]]),me("p",null,De(Ae(s).cross_reference),1),Me(pn,{modelValue:i.firstNoteReferenceNumber,"onUpdate:modelValue":c[3]||(c[3]=h=>i.firstNoteReferenceNumber=h),modelModifiers:{lazy:!0},initialValue:i.firstNoteReferenceNumber,segments:u.value},null,8,["modelValue","initialValue","segments"])]),me("div",{class:"output",innerHTML:r.value.subsequent},null,8,$g)])],64))}},Vg={class:"leadingText"},Hg={class:"flex-container"},zg={__name:"GeneralSettings",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=xi(),i=Dn(e,"modelValue"),r=_i(i.value);return ci(r,s=>{ct.updateStyle()}),(s,n)=>(Xe(),Ze(We,null,[me("h2",Vg,De(Ae(t).generalSettings),1),me("div",Hg,[me("div",null,[me("p",null,De(Ae(t).styleName),1),Et(me("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=o=>r.name=o)},null,512),[[Mt,r.name,void 0,{lazy:!0}]])]),me("div",null,[me("p",null,De(Ae(t).styleAuthor),1),Et(me("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=o=>r.author=o)},null,512),[[Mt,r.author,void 0,{lazy:!0}]])]),me("div",null,[me("p",null,De(Ae(t).styleDescription),1),Et(me("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=o=>r.description=o)},null,512),[[Mt,r.description,void 0,{lazy:!0}]])]),me("div",null,[me("p",null,De(Ae(t).etalTerm),1),Et(me("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=o=>r.etalTerm=o)},null,512),[[Mt,r.etalTerm,void 0,{lazy:!0}]])])])],64))}},Xg={__name:"HelpButton",setup(e){let t=null;function i(s){return lg.has(s)?"help/"+s+".html":"help/en.html"}async function r(){t&&t.close(),t=window.open(i(Mu()),"_blank")}return(s,n)=>(Xe(),Ze("button",{class:"help-button",onClick:r},"?"))}},Wg={key:0,class:"skeleton-view"},Kg=me("p",null,"Loading...",-1),Jg=[Kg],Yg={key:1,class:"content-view"},Qg={class:"hStack"},Zg={class:"hStack"},em=me("hr",{class:"solid"},null,-1),tm={class:"hStack"},im=me("hr",{class:"solid"},null,-1),rm=me("hr",null,null,-1),sm={class:"leadingText"},nm={class:"hStack"},om=me("hr",null,null,-1),am={class:"leadingText"},lm={class:"hStack"},um={__name:"App",setup(e){const t=xi(),i=qt(!0),r=qt(null),s=qt(null);let n;async function o(){try{await cg(),r.value=Ei,n=pg()}catch(c){console.error("Error loading data:",c)}finally{i.value=!1}}Ir(()=>{o()});function a(c,h){const p=document.createElement("a");p.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(h)),p.setAttribute("download",c),document.body.appendChild(p),p.click(),document.body.removeChild(p)}function u(){a("csl.json",JSON.stringify(qu()))}function f(c){const h=new FileReader;h.readAsText(c,"UTF-8"),h.onload=function(p){const T=JSON.parse(p.target.result);xg(T)}}return(c,h)=>(Xe(),Ze("div",null,[i.value?(Xe(),Ze("div",Wg,Jg)):(Xe(),Ze("div",Yg,[me("div",Qg,[me("h1",null,De(Ae(t).appTitle),1),Me(Xg)]),me("div",Zg,[me("h2",null,De(Ae(t).bibliography),1)]),(Xe(!0),Ze(We,null,fo(Ae(Ha)("bib"),p=>(Xe(),Ze("div",{key:p},[Me(za,{stylerID:p},null,8,["stylerID"])]))),128)),Me(Xa,{modelValue:Ae(ki),"onUpdate:modelValue":h[0]||(h[0]=p=>qe(ki)?ki.value=p:null),prefix:"bib"},null,8,["modelValue"]),em,me("div",tm,[me("h2",null,De(Ae(t).citation),1),me("button",{onClick:h[1]||(h[1]=p=>Ae(gg)())},De(Ae(t).sameAsBibliographyButton),1)]),(Xe(!0),Ze(We,null,fo(Ae(Ha)("cit"),p=>(Xe(),Ze("div",{key:p},[Me(za,{stylerID:p},null,8,["stylerID"])]))),128)),Me(Xa,{modelValue:Ae(Di),"onUpdate:modelValue":h[2]||(h[2]=p=>qe(Di)?Di.value=p:null),prefix:"cit"},null,8,["modelValue"]),Me(Gg,{modelValue:Ae(gi),"onUpdate:modelValue":h[3]||(h[3]=p=>qe(gi)?gi.value=p:null)},null,8,["modelValue"]),im,Me(zg,{modelValue:Ae(Tt),"onUpdate:modelValue":h[4]||(h[4]=p=>qe(Tt)?Tt.value=p:null)},null,8,["modelValue"]),rm,me("h2",sm,De(Ae(t).downloadHeading),1),me("div",nm,[me("button",{class:"download-button",onClick:h[5]||(h[5]=p=>a("style.csl",Ae(n)))},De(Ae(t).exportButton),1),me("button",{class:"download-button",onClick:h[6]||(h[6]=p=>u())},De(Ae(t).saveButton),1)]),om,me("h2",am,De(Ae(t).openHeading),1),me("div",lm,[s.value?(Xe(),Ze("button",{key:0,class:"download-button",onClick:h[7]||(h[7]=p=>f(s.value))},De(Ae(t).loadButton),1)):Wc("",!0),me("input",{type:"file",onChange:h[8]||(h[8]=p=>s.value=p.target.files[0])},null,32)])]))]))}};_h(um);
